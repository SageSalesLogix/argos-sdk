/*! 
 *  IDS Enterprise Components - v4.28.2
 *  Date: 2020-05-29T17:42:39.649Z
 *  Revision: e69e29cede773113b01999cd6a3392961f3c1c2f
 *  
 *  
 *  Apache License
 *  Version 2.0, January 2004
 *  http://www.apache.org/licenses/
 *  
 *  TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *  
 *  1. Definitions.
 *  
 *  "License" shall mean the terms and conditions for use, reproduction,
 *  and distribution as defined by Sections 1 through 9 of this document.
 *  
 *  "Licensor" shall mean the copyright owner or entity authorized by
 *  the copyright owner that is granting the License.
 *  
 *  "Legal Entity" shall mean the union of the acting entity and all
 *  other entities that control, are controlled by, or are under common
 *  control with that entity. For the purposes of this definition,
 *  "control" means (i) the power, direct or indirect, to cause the
 *  direction or management of such entity, whether by contract or
 *  otherwise, or (ii) ownership of fifty percent (50%) or more of the
 *  outstanding shares, or (iii) beneficial ownership of such entity.
 *  
 *  "You" (or "Your") shall mean an individual or Legal Entity
 *  exercising permissions granted by this License.
 *  
 *  "Source" form shall mean the preferred form for making modifications,
 *  including but not limited to software source code, documentation
 *  source, and configuration files.
 *  
 *  "Object" form shall mean any form resulting from mechanical
 *  transformation or translation of a Source form, including but
 *  not limited to compiled object code, generated documentation,
 *  and conversions to other media types.
 *  
 *  "Work" shall mean the work of authorship, whether in Source or
 *  Object form, made available under the License, as indicated by a
 *  copyright notice that is included in or attached to the work
 *  (an example is provided in the Appendix below).
 *  
 *  "Derivative Works" shall mean any work, whether in Source or Object
 *  form, that is based on (or derived from) the Work and for which the
 *  editorial revisions, annotations, elaborations, or other modifications
 *  represent, as a whole, an original work of authorship. For the purposes
 *  of this License, Derivative Works shall not include works that remain
 *  separable from, or merely link (or bind by name) to the interfaces of,
 *  the Work and Derivative Works thereof.
 *  
 *  "Contribution" shall mean any work of authorship, including
 *  the original version of the Work and any modifications or additions
 *  to that Work or Derivative Works thereof, that is intentionally
 *  submitted to Licensor for inclusion in the Work by the copyright owner
 *  or by an individual or Legal Entity authorized to submit on behalf of
 *  the copyright owner. For the purposes of this definition, "submitted"
 *  means any form of electronic, verbal, or written communication sent
 *  to the Licensor or its representatives, including but not limited to
 *  communication on electronic mailing lists, source code control systems,
 *  and issue tracking systems that are managed by, or on behalf of, the
 *  Licensor for the purpose of discussing and improving the Work, but
 *  excluding communication that is conspicuously marked or otherwise
 *  designated in writing by the copyright owner as "Not a Contribution."
 *  
 *  "Contributor" shall mean Licensor and any individual or Legal Entity
 *  on behalf of whom a Contribution has been received by Licensor and
 *  subsequently incorporated within the Work.
 *  
 *  2. Grant of Copyright License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  copyright license to reproduce, prepare Derivative Works of,
 *  publicly display, publicly perform, sublicense, and distribute the
 *  Work and such Derivative Works in Source or Object form.
 *  
 *  3. Grant of Patent License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  (except as stated in this section) patent license to make, have made,
 *  use, offer to sell, sell, import, and otherwise transfer the Work,
 *  where such license applies only to those patent claims licensable
 *  by such Contributor that are necessarily infringed by their
 *  Contribution(s) alone or by combination of their Contribution(s)
 *  with the Work to which such Contribution(s) was submitted. If You
 *  institute patent litigation against any entity (including a
 *  cross-claim or counterclaim in a lawsuit) alleging that the Work
 *  or a Contribution incorporated within the Work constitutes direct
 *  or contributory patent infringement, then any patent licenses
 *  granted to You under this License for that Work shall terminate
 *  as of the date such litigation is filed.
 *  
 *  4. Redistribution. You may reproduce and distribute copies of the
 *  Work or Derivative Works thereof in any medium, with or without
 *  modifications, and in Source or Object form, provided that You
 *  meet the following conditions:
 *  
 *  (a) You must give any other recipients of the Work or
 *  Derivative Works a copy of this License; and
 *  
 *  (b) You must cause any modified files to carry prominent notices
 *  stating that You changed the files; and
 *  
 *  (c) You must retain, in the Source form of any Derivative Works
 *  that You distribute, all copyright, patent, trademark, and
 *  attribution notices from the Source form of the Work,
 *  excluding those notices that do not pertain to any part of
 *  the Derivative Works; and
 *  
 *  (d) If the Work includes a "NOTICE" text file as part of its
 *  distribution, then any Derivative Works that You distribute must
 *  include a readable copy of the attribution notices contained
 *  within such NOTICE file, excluding those notices that do not
 *  pertain to any part of the Derivative Works, in at least one
 *  of the following places: within a NOTICE text file distributed
 *  as part of the Derivative Works; within the Source form or
 *  documentation, if provided along with the Derivative Works; or,
 *  within a display generated by the Derivative Works, if and
 *  wherever such third-party notices normally appear. The contents
 *  of the NOTICE file are for informational purposes only and
 *  do not modify the License. You may add Your own attribution
 *  notices within Derivative Works that You distribute, alongside
 *  or as an addendum to the NOTICE text from the Work, provided
 *  that such additional attribution notices cannot be construed
 *  as modifying the License.
 *  
 *  You may add Your own copyright statement to Your modifications and
 *  may provide additional or different license terms and conditions
 *  for use, reproduction, or distribution of Your modifications, or
 *  for any such Derivative Works as a whole, provided Your use,
 *  reproduction, and distribution of the Work otherwise complies with
 *  the conditions stated in this License.
 *  
 *  5. Submission of Contributions. Unless You explicitly state otherwise,
 *  any Contribution intentionally submitted for inclusion in the Work
 *  by You to the Licensor shall be under the terms and conditions of
 *  this License, without any additional terms or conditions.
 *  Notwithstanding the above, nothing herein shall supersede or modify
 *  the terms of any separate license agreement you may have executed
 *  with Licensor regarding such Contributions.
 *  
 *  6. Trademarks. This License does not grant permission to use the trade
 *  names, trademarks, service marks, or product names of the Licensor,
 *  except as required for reasonable and customary use in describing the
 *  origin of the Work and reproducing the content of the NOTICE file.
 *  
 *  7. Disclaimer of Warranty. Unless required by applicable law or
 *  agreed to in writing, Licensor provides the Work (and each
 *  Contributor provides its Contributions) on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *  implied, including, without limitation, any warranties or conditions
 *  of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 *  PARTICULAR PURPOSE. You are solely responsible for determining the
 *  appropriateness of using or redistributing the Work and assume any
 *  risks associated with Your exercise of permissions under this License.
 *  
 *  8. Limitation of Liability. In no event and under no legal theory,
 *  whether in tort (including negligence), contract, or otherwise,
 *  unless required by applicable law (such as deliberate and grossly
 *  negligent acts) or agreed to in writing, shall any Contributor be
 *  liable to You for damages, including any direct, indirect, special,
 *  incidental, or consequential damages of any character arising as a
 *  result of this License or out of the use or inability to use the
 *  Work (including but not limited to damages for loss of goodwill,
 *  work stoppage, computer failure or malfunction, or any and all
 *  other commercial damages or losses), even if such Contributor
 *  has been advised of the possibility of such damages.
 *  
 *  9. Accepting Warranty or Additional Liability. While redistributing
 *  the Work or Derivative Works thereof, You may choose to offer,
 *  and charge a fee for, acceptance of support, warranty, indemnity,
 *  or other liability obligations and/or rights consistent with this
 *  License. However, in accepting such obligations, You may act only
 *  on Your own behalf and on Your sole responsibility, not on behalf
 *  of any other Contributor, and only if You agree to indemnify,
 *  defend, and hold each Contributor harmless for any liability
 *  incurred by, or claims asserted against, such Contributor by reason
 *  of your accepting any such warranty or additional liability.
 *  
 *  END OF TERMS AND CONDITIONS
 *  
 *  APPENDIX: How to apply the Apache License to your work.
 *  
 *  To apply the Apache License to your work, attach the following
 *  boilerplate notice, with the fields enclosed by brackets "[]"
 *  replaced with your own identifying information. (Don't include
 *  the brackets!)  The text should be enclosed in the appropriate
 *  comment syntax for the file format. We also recommend that a
 *  file or class name and description of purpose be included on the
 *  same "printed page" as the copyright notice for easier
 *  identification within third-party archives.
 *  
 *  Copyright 2018  Infor, Inc.
 *  
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  
 *  http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *  
 */
var Soho=function(e){"use strict";var t=Object.freeze({__proto__:null,enableTimeLogging:!1,logTimeStart:function(e){},logTimeEnd:function(e){},enableConsoleLogging:!1,log:function(e,t){},getComponents:function(e){var t=(e?$(e):$("body")).find("*"),i=[];return t.each((function(e,t){var n=$(t).data();n&&Object.keys(n).length&&i.push({data:n,element:t})})),i}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;--i>=0&&t.item(i)!==this;);return i>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,i){return(l=r()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return i&&o(s,i.prototype),s}).apply(null,arguments)}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h={stripHTML:function(e){var t=e;return t?t=t.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(e,t){if(!e)return"";if("number"==typeof e)return e;var i=("".concat(t||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(n,(function(e,t){return i.indexOf("<"+t.toLowerCase()+">")>-1?e:""})).replace(n,(function(e,t){return i.indexOf("<"+t.toLowerCase()+">")>-1?e:""})).replace(n,(function(e,t){return i.indexOf("<"+t.toLowerCase()+">")>-1?e:""}))},sanitizeConsoleMethods:function(e){var t=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof e?e:e.replace(t,"")},sanitizeHTML:function(e){var t=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"");return t=t.replace(/<[^>]+/g,(function(e){return e.replace(/(\/|\s)on\w+=(\'|")?[^"]*(\'|")?/g,"")})),t=(t=this.sanitizeConsoleMethods(t)).replace(/<\/script>/g,"")},ensureAlphaNumeric:function(e){return"number"==typeof e?e:this.stripTags(e).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(e){return"number"==typeof e?e:this.stripTags(e).replace(/[^a-z0-9 ]/gi,"","")},escapeHTML:function(e){var t=e;if("string"==typeof t){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return t.replace(/[&<>"']/gi,(function(e){return i[e]}))}return t},unescapeHTML:function(e){return""===e?"":"string"==typeof e?(new DOMParser).parseFromString(e,"text/html").documentElement.textContent:e},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},isUrlLocal:function(e){return!(""===e)&&("/"===e[0]&&(1===e.length||"/"!==e[1]&&"\\"!==e[1])||e.length>1&&"~"===e[0]&&"/"===e[1])||e.length>=1&&"#"===e[0]}},u={isValidElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement},getAttributes:function(e){return e&&(e instanceof HTMLElement||e instanceof SVGElement)?e.attributes:{}},classNameExists:function(e){var t=e.className;return t&&t.length>0},hasClass:function(e,t){if(!e.classList)return!1;if(e.className)return new RegExp("\\b".concat(t,"\\b")).test(e.className);var i=e.getAttribute("class");return!(!i||!i.length)&&i.indexOf(t)>-1},addClass:function(e){if(e){for(var t="",i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var a=0;a<n.length;a++)e.classList?e.classList.add(n[a]):u.hasClass(e,[a])||(t.length&&(t+=" "),t+=n[a]);t.length&&$(e).addClass(t)}},removeClass:function(e){if(e){for(var t="",i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var a=0;a<n.length;a++)e.classList?e.classList.remove(n[a]):u.hasClass(e,[a])||(t.length&&(t+=" "),t+=n[a]);t.length&&$(e).removeClass(t)}},isElement:function(e){return!!(e instanceof HTMLElement||e instanceof SVGElement||e instanceof $&&e.length)},getDimensions:function(e){if(!u.isElement(e))return{};if(e instanceof $){if(!e.length)return{};e=e[0]}var t=e.getBoundingClientRect(),i={};for(var n in t)isNaN(t[n])||(i[n]=t[n]);return i},append:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.insertAdjacentHTML("beforeend",this.xssClean(t,i))},remove:function(e){var t=e;e instanceof $&&e.length&&(t=t[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&e.parentNode&&e.parentNode.removeChild(e)},setAttribute:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.setAttribute("attribute",i)},xssClean:function(e,t){var i=e;return t&&"*"!==t&&(i=h.stripTags(e,t)),"*"===t&&(i=h.sanitizeHTML(e)),i},html:function(e,t,i){var n=e;e instanceof $&&e.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&(n.innerHTML=this.xssClean(t,i))},parents:function(e,t,i){var n,s=[];if(!u.isValidElement(e))return s;for(;e.parentNode&&(!i||!s.length);)e=e.parentNode,(n=e)!==document&&n.matches(t)&&s.push(n);return i?s[0]:s},getNextSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var i=e.nextElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.nextElementSibling}},getPreviousSibling:function(e,t){e instanceof $&&e.length&&(e=e[0]);var i=e.previousElementSibling;if(!t)return i;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}},getSimpleSelector:function(e){var t=e.tagName.toLowerCase(),i=e.id?"#".concat(e.id):"",n=e.className?".".concat(e.className.split(" ").join(".")):"";return"".concat(t).concat(i).concat(n)}},p={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},g=Object.keys(p);function f(e,t,i){var n;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];var r=this;function l(){i||e.apply(r,a),n=null}n?clearTimeout(n):i&&e.apply(r,a),n=setTimeout(l,t||250)}}p.available=g,p.current=function(){var e=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return e?(e.getPropertyValue("content")||"").replace(/"/g,""):""},p.isAbove=function(e){var t=p[e];return!!t&&$(window).width()>t-1},p.isBelow=function(e){var t=p[e];return!!t&&$(window).width()<t},p.compare=function(){this.last||(this.last="");var e=this.current();this.last!==e&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:e}]),this.last=e)},p.isHidden=function(e){if(!e||!u.isElement(e))return!1;var t=e.classList;if(!t.length)return!1;if(t.contains("hidden"))return!0;var i={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],n="hidden-".concat(i),s="visible-".concat(i,"-");return!!t.contains(n)||(t.toString().indexOf(s),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&p.isHidden($(this).first()[0])};$.fn.debouncedResize=function(e){return e?this.bind("resize",f(e)):this.trigger("debouncedResize")};var m={browser:{},features:{touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function(){$("html").attr("data-sohoxi-version","4.28.2"),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=navigator.platform,i=$("html"),n="";if(-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")&&-1===e.indexOf("Android")&&(n+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)){var s=/constructor/i.test(window.HTMLElement),a=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!s||a)&&(this.browser.name="wkwebview",n+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}-1!==e.indexOf("Chrome")&&(n+="is-chrome ",this.browser.name="chrome");if(["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)>-1&&!/Linux/.test(t)&&(n+="is-mac ",this.os.name="Mac OS X"),e.indexOf("Firefox")>0&&(n+="is-firefox ",this.browser.name="firefox"),e.match(/Edge\//)&&(n+="ie ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",n+="ie-edge".concat(this.browser.version)),e.match(/Trident/)&&(n+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||e.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(n+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(n+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(n+="ie10 ",this.browser.version="10"):e.match(/Trident\/7\./)&&(n+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(e)){n+="ios ",this.os.name="ios";for(var o=["iPod","iPad","iPhone"],r=0;r<o.length;r++)new RegExp(o[r]).test(e)&&(n+="".concat(o[r].toLowerCase()," "),this.device=o[r])}/Android/.test(e)&&(n+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(t)&&(this.os.name="linux"),i.addClass(n)},addDeviceSpecs:function(){var e,t,i,n=navigator.appVersion,s=navigator.userAgent,a=navigator.appName,o=" ".concat(parseFloat(navigator.appVersion)),r=parseInt(navigator.appVersion,10),l="";-1!==(t=s.indexOf("Opera"))&&(a="Opera",o=s.substring(t+6),-1!==(t=s.indexOf("Version"))&&(o=s.substring(t+8))),-1!==(t=s.indexOf("OPR"))?(a="Opera",o=s.substring(t+4)):-1!==(t=s.indexOf("Edge"))?(a="Microsoft Edge",o=s.substring(t+5)):-1!==(t=s.indexOf("MSIE"))?(a="Microsoft Internet Explorer",o=s.substring(t+5)):-1!==(t=s.indexOf("Chrome"))?(a="Chrome",o=s.substring(t+7),s.indexOf("Edg")>-1&&(l="Microsoft Edge")):-1!==(t=s.indexOf("Safari"))?(a="Safari",o=s.substring(t+7),-1!==(t=s.indexOf("Version"))&&(o=s.substring(t+8))):this.browser.isWKWebView()?(a="WKWebView",o="",r=""):-1!==(t=s.indexOf("Firefox"))?(a="Firefox",o=s.substring(t+8)):-1!==s.indexOf("Trident/")?(a="Microsoft Internet Explorer",o=s.substring(s.indexOf("rv:")+3)):(e=s.lastIndexOf(" ")+1)<(t=s.lastIndexOf("/"))&&(a=s.substring(e,t),o=s.substring(t+1),a.toLowerCase()===a.toUpperCase()&&(a=navigator.appName)),-1!==(i=o.indexOf(";"))&&(o=o.substring(0,i)),-1!==(i=o.indexOf(" "))&&(o=o.substring(0,i)),-1!==(i=o.indexOf(")"))&&(o=o.substring(0,i)),r=" ".concat(parseInt(o,10)),isNaN(r)&&(o=" ".concat(parseFloat(navigator.appVersion)),r=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(n),d="-",h=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var u in h){var p=h[u];if(p.r.test(s)){d=p.s;break}}var g="-";switch(/Windows/.test(d)&&(g=/Windows (.*)/.exec(d)[1]),d){case"Mac OS X":g=/Mac OS X (10[\.\_\d]+)/.exec(s)[1].replace(/\_/g,".");break;case"Android":g=/Android ([\.\_\d]+)/.exec(s)[1];break;case"iOS":g=/OS (\d+)_?(\d+)?/.exec(s),g="".concat(g[1],".").concat(g[2],".").concat(0|g[3])}this.devicespecs={currentBrowser:a,browserVersion:o.trim(),browserMajorVersion:r,isMobile:c,os:d,currentOSVersion:g,browserVersionName:l}},addGlobalResize:function(){$(window).debouncedResize((function(){$("body").triggerHandler("resize",[window]),p.compare()})),$(window).on("orientationchange load",(function(){return p.compare()}))},removeGlobalEvents:function(){$(window).off("scroll.".concat("environment")),$("body").off(["focusin.".concat("environment"),"focusout.".concat("environment")].join(" "))}};function v(e){return this.init(e)}function b(e,t,i){var n=$.Deferred();if(!u.isElement(e))return n.reject();if(e instanceof $&&e.length&&(e=e[0]),null==t)return n.resolve();if(isNaN(i)&&(i=0),t=Math.round(t),(i=Math.round(i))<0)return n.fail();if(0===i)return e.scrollLeft+=t,n.resolve();var s=Date.now(),a=s+i,o=e.scrollLeft,r=t;var l=e.scrollLeft;return setTimeout((function t(){if(e.scrollLeft===l){var i=Date.now(),c=function(e,t,i){if(i<=e)return 0;if(i>=t)return 1;var n=(i-e)/(t-e);return n*n*(3-2*n)}(s,a,i),d=Math.round(o+r*c);e.scrollLeft=d,i>=a?n.resolve():e.scrollLeft!==l||e.scrollLeft===d?(l=e.scrollLeft,setTimeout(t,0)):n.resolve()}else n.reject()}),0),n}function y(e,t){return(void 0!==window.requestAnimationFrame?window.requestAnimationFrame:setTimeout)(e,t)}m.browser.isEdge=function(){return"edge"===m.browser.name},m.browser.isIE11=function(){return"ie"===m.browser.name&&"11"===m.browser.version},m.browser.isSafari=function(){return"safari"===m.browser.name||"wkwebview"===m.browser.name},m.browser.isIE10=function(){return"ie"===m.browser.name&&"10"===m.browser.version},m.set(),v.prototype={init:function(e){!this.element&&(e instanceof HTMLElement||e instanceof SVGElement)&&(this.element=e);var t=$(this.element),i=!1,n=!1,s=!1;if(t.is(".checkbox, .radio, .switch")){var a=t.next();a.is('[type="hidden"]')&&(a=a.next()),this.label=a[0],t.addClass("hide-focus").on("focusin.hide-focus",(function(e){i||n||s||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[e])),i=!1,n=!0,s=!1})).on("focusout.hide-focus",(function(e){t.addClass("hide-focus"),s=a.is(s),i=!1,n=!1,t.triggerHandler("hidefocusadd",[e])})),a.on("mousedown.hide-focus",(function(e){s=this,i=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[e])}))}else{var o=function(e){i=!0,t.addClass("hide-focus"),t.triggerHandler("hidefocusadd",[e])};m.features.touch&&t.on("touchstart.hide-focus",(function(e){o(e)})),t.addClass("hide-focus").on("mousedown.hide-focus",(function(e){o(e)})).on("focusin.hide-focus",(function(e){i||n||(t.removeClass("hide-focus"),t.triggerHandler("hidefocusremove",[e])),i=!1,n=!0})).on("focusout.hide-focus",(function(e){t.addClass("hide-focus"),i=!1,n=!1,t.triggerHandler("hidefocusadd",[e])}))}return this},updated:function(){return this.teardown().init()},teardown:function(){this.label&&$(this.label).off("mousedown.hide-focus");return $(this.element).off(["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ")),this.element.classList.remove("hide-focus"),this}},$.fn.hideFocus=function(){return this.each((function(){var e=$.data(this,"hidefocus");e?e.updated():(e=$.data(this,"hidefocus",new v(this))).destroy=function(){this.teardown(),$.removeData(this,"hidefocus")}}))},$.fn.smoothScroll=function(e,t){return b(this,e,t)},$.fn.bindFirst=function(e,t){this.on(e,t),this.each((function(){var t=$._data(this,"events")[e.split(".")[0]],i=t.pop();t.splice(0,0,i)}))};var w=[];function x(e){return $.expr.filters.visible(e)&&!$(e).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.fn.cssPropSupport=function(e){if(!e)return null;var t=$("<div></div>")[0],i=e.toString(),n=["Moz","Webkit","O","ms"],s=i.charAt(0).toUpperCase()+i.substr(1);if(e in t.style)return $(t).remove(),e;for(var a=0;a<n.length;a++){var o=n[a]+s;if(o in t.style)return $(t).remove(),o}return $(t).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(e){return function(e){var t,i,n,s=e.nodeName.toLowerCase(),a=!isNaN($.attr(e,"tabindex"));return"area"===s?(i=(t=e.parentNode).name,!(!e.href||!i||"map"!==t.nodeName.toLowerCase())&&(!!(n=$("img[usemap=#".concat(i,"]"))[0])&&x(n))):!!x(e)&&(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s&&void 0!==e.href||a)}(e,isNaN($.attr(e,"tabindex")))}}),$.fn.listEvents=function(){var e={};return this.each((function(){e=$._data(this,"events")})),e};var C={};function k(e){return"object"===i(e)||"function"==typeof e}function T(e){return"function"==typeof e?e():e}C.uniqueId=function(e,t,i,n){var s=e.id;if(s&&$("#".concat(s)).length<2)return s;i=i?"".concat(i,"-"):"",n=n?"-".concat(n):"",t=t||C.getArrayFromList(e.classList).join("-"),w[t]||(w[t]=1);var a="".concat(i).concat(t,"-").concat(w[t]).concat(n);return w[t]+=1,a},C.parseSettings=function(e,t){var i={};if(!e||!(e instanceof HTMLElement)&&!(e instanceof $)||e instanceof $&&!e.length)return i;e instanceof $&&(e=e[0]),t=t||"data-options";var n,s,a=e.getAttribute(t);if(!a||"string"!=typeof a||-1===a.indexOf("{"))return i;function o(e){return e.replace(/'/g,'"')}try{i=JSON.parse(o(a))}catch(e){i=JSON.parse((s=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g,n=(n=a).replace(s,'$1"$2":'),s=/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,n=o(n=n.replace(s,':"$2"'))))}return i},C.parseOptions=function(e,t){return C.parseSettings(e,t)},$.fn.parseOptions=function(e,t){var i=[],n=this;return e instanceof HTMLElement||e instanceof SVGElement||e instanceof $?n=$(e):(t=e,e=void 0),n.each((function(e,n){i.push({element:this,options:C.parseOptions(n,t)})})),1===i.length?i[0].options:i},C.coerceToBoolean=function(e){return!/^(false|0)$/i.test(e)&&!!e},C.coerceSettingsToBoolean=function(e,t){var i,n;for(t&&Array.isArray(t)||Object.keys(e).forEach((function(e){t.push(e)})),i=0,n=t.length;i<n;i++)e[t[i]]=C.coerceToBoolean(e[t[i]]);return e},$.fn.timer=function(e,t){var i,n=$(this),s=0;function a(){i=setInterval((function(){s+=10,n.triggerHandler("update",[{counter:s}]),s>t&&(n.triggerHandler("timeout"),e.apply(arguments),clearInterval(i),s=0)}),10)}return a(),{event:this,cancel:function(){n.triggerHandler("cancel"),clearInterval(i),s=0},pause:function(){n.triggerHandler("pause"),clearInterval(i)},resume:function(){n.triggerHandler("resume"),a()}}},$.copyToClipboard=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return!1}finally{document.body.removeChild(t)}}},$.fn.clearable=function(){var e=this;this.element=$(this);this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),this.clear=function(){e.element.val("").trigger("change").focus().trigger("cleared"),e.checkContents()},this.handleKeydown=function(t){var i=t.key;("Enter"===i||t.altKey&&("Delete"===i||"Backspace"===i))&&(t.preventDefault(),e.clear())},this.checkContents=function(){var t=e.element.val();t&&t.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(e.element),this.xButton[0].tabIndex=0,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat("clearable"),"keydown.".concat("clearable")].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown);var t=["blur.".concat("clearable"),"change.".concat("clearable"),"keyup.".concat("clearable")].join(" ");this.element.off(t).on(t,(function(){e.checkContents()})),this.checkContents()},C.actualChar=function(e){var t=e.which,i={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},n={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(i,t)&&(t=i[t]),t>=96&&t<=105&&(t-=48),!e.shiftKey&&t>=65&&t<=90?String.fromCharCode(t+32):!e.shiftKey&&t>=37&&t<=40?"":e.shiftKey&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:String.fromCharCode(t)},$.actualChar=function(e){return C.actualChar(e)},C.equals=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},u.convertToHTMLElement=function(e){return e instanceof HTMLElement?e:e instanceof $?e=e.length?e[0]:void 0:void 0},u.focusableElems=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=["button","[href]","input","select","textarea",'[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].concat(t).filter((function(e){return-1===i.indexOf(e)})),s=e.querySelectorAll(n.join(", ")),a=C.getArrayFromList(s);return a.filter((function(e){return"use"!==e.tagName.toLowerCase()}))},C.isPlainObject=function(e){return!(!e||"[object Object]"!==Object.prototype.toString.call(e))&&(!Object.getPrototypeOf(e)||null!==e&&"object"===i(e)&&Object.getPrototypeOf(e)===Object.prototype)},C.mergeByPosition=function(e,t){var i,n=Math.max((null===(i=e)||void 0===i||null==i?void 0:i.length)||0,(null==t||null==t?void 0:t.length)||0);if(e||(e=[]),0===n)return[];for(var s=0;s<n;s++)void 0!==t[s]&&null!==t[s]&&(e[s]=t[s]);return e||[]},C.extend=function e(){var t=arguments[0]||{},i=!1,n=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0],t=Array.isArray(arguments[1])?[]:{},n++);for(var s=function(n){var s=Array.isArray(n)?[]:{};for(var a in n){if(n.hasOwnProperty(a))if(n[a]instanceof jQuery)t[a]=$(n[a]);else if(i&&"[object Object]"===Object.prototype.toString.call(n[a])){var o=C.isPlainObject(n[a]);t[a]=o?e(!0,s,t[a],n[a]):n[a]}else Array.isArray(n[a])?t[a]=C.mergeByPosition(t[a],n[a]):void 0!==n[a]&&(t[a]=void 0===n[a]&&void 0!==t[a]?t[a]:n[a]);n.hasOwnProperty(a)||t[a]||"[object Function]"!==Object.prototype.toString.call(n[a])||(t[a]=n[a])}};n<arguments.length;n++)s(arguments[n]);return t},C.fixSVGIcons=function e(t){if(("ie"===m.browser.name||"11"===m.browser.version)&&void 0!==t){var i="http://www.w3.org/1999/xlink";if(t instanceof $){if(!t.length)return;if(1!==t.length)return void t.each((function(t,i){e(i)}));t=t[0]}t instanceof NodeList?Array.prototype.forEach.call(t,(function(t){e(t)})):setTimeout((function(){for(var e=t.getElementsByTagName("use"),n=0;n<e.length;n++){var s=e[n].getAttributeNS(i,"href");e[n].setAttributeNS(i,"href","x"),e[n].setAttributeNS(i,"href",s)}}),1)}},C.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},C.getContainerScrollDistance=function(e){if(!u.isElement(e))return[];var t=[];return $(e).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each((function(){t.push({element:this,left:this.scrollLeft,top:this.scrollTop})})),document.body.classList.contains("no-scroll")||t.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),t},C.getHiddenSize=function(e,t){var i={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!u.isElement(e))return i.dims;e=$(e),t=a(a({},i),t);var n=u.isElement(t.parentElement);n&&(e=e.clone().appendTo(t.parentElement));var s=t.dims,o=e.parents().add(e),r={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},l=[];return o.each((function(){var e=this,t={};Object.keys(r).forEach((function(i){e.style[i]&&(t[i]=e.style[i],e.style[i]=r[i])})),l.push(t)})),s.padding={bottom:e.css("padding-bottom"),left:e.css("padding-left"),right:e.css("padding-right"),top:e.css("padding-top")},s.width=e.width(),s.outerWidth=e.outerWidth(t.includeMargin),s.innerWidth=e.innerWidth(),s.scrollWidth=e[0].scrollWidth,s.height=e.height(),s.innerHeight=e.innerHeight(),s.outerHeight=e.outerHeight(t.includeMargin),s.scrollHeight=e[0].scrollHeight,o.each((function(e){var t=this,i=l[e];Object.keys(r).forEach((function(e){i[e]&&(t.style[e]=i[e])}))})),n&&e.remove(),s},$.fn.getHiddenSize=function(e){return C.getHiddenSize(this,e)},C.isString=function(e){return"string"==typeof e||e instanceof String},C.isNumber=function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},C.safeSetSelection=function(e,t,i){e instanceof HTMLInputElement&&-1!==["text","password","search","url","week","month"].indexOf(e.type)&&(t&&void 0===i&&(i=t),document.activeElement===e&&("android"===m.os.name?y((function(){e.setSelectionRange(t,i,"none")}),0):e.setSelectionRange(t,i,"none")))},C.mergeSettings=function(e,t,i){return t&&k(t)||(t=k(i)?i:{}),C.extend(!0,{},T(i),T(t),void 0!==e?C.parseSettings(e):{})},C.isHTML=function(e){return/(<([^>]+)>)/i.test(e)};var S={convertDelayToFPS:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return e/16.7},convertFPSToDelay:function(e){if(isNaN(e))throw new Error("provided delay value is not a number");return 16.7*e},isFinite:function(e){return"number"==typeof e&&(e==e&&e!==1/0&&e!==-1/0)}};C.forEach=function(e,t,i){for(var n=0;n<e.length;n++)t.call(i,e[n],n,e)},C.hasClass=function(e,t){var i=!1;if(e)if("classList"in e)i=e.classList.contains(t);else{var n=e.getAttribute("class");i=!!n&&-1!==n.split(/\s+/).indexOf(t)}return i},S.sign=function(e){return Math.sign?Math.sign(e):0===(e=+e)||isNaN(e)?e:e>0?1:-1},C.getArrayFromList=function(e){var t=Array.prototype.slice;return Function.prototype.call.bind(t)(e)},C.getScrollbarWidth=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);var n=i.offsetWidth;return e.parentNode.removeChild(e),t-n},C.deepCopy=function(e){var t=new Map;return function n(s){if("object"!==i(s)||null===s)return s;if(!0===t.has(s))return t.get(s);var a=Array.isArray(s)?[]:{};return t.set(e,s),Object.keys(s).forEach((function(e){var t=s[e];a[e]="object"===i(t)&&null!==t?n(t):t})),a}(e)},C.isSubscribedTo=function(e,t,i,n){var s=$._data(e).events;for(var a in s)if(a===i&&(1!==s[a].length||s[a][0].namespace!==n))return!0;return!1},C.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};var A={isEmpty:function(e){return 0===Object.keys(e).length&&e.constructor===Object}},D={EMPTY:"",splice:function(e,t,i,n){return e.slice(0,t)+n+e.slice(t+Math.abs(i))},removeDuplicates:function(e){return e.split("").filter((function(e,t,i){return i.indexOf(e)===t})).join("")},containsHTML:function(e){return/<[a-z][\s\S]*>/i.test(e)},stripWhitespace:function(e){return e.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},toBoolean:function(e){var t=+e;return isNaN(t)?!!String(e).toLowerCase().replace(!1,""):!!t},textWidth:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");i.font="".concat(t,"px arial");var n=i.measureText(e);return Math.round(n.width)},padDate:function(e,t,i){return e+"0".concat(t+1).slice(-2)+"0".concat(i).slice(-2)}};D.textWidth=function(e,t,i){this.canvasTW=this.canvasTW||(this.canvasTW=document.createElement("canvas"));var n=this.canvasTW.getContext("2d");n.font=i||"14px arial";var s=n.measureText(e);return Math.round(s.width+(t||0))},D.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},D.count=function(e,t){return e.split(t).length-1};var E={truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=e.toString(),n=i.split(".");return n[1]=n[1]?n[1].substr(0,t):"","".concat(n[0],".").concat(n[1])},round:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return E.toFixed(e,t)},fixTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(+(Math.round(+(e+"e"+t))+"e"+-t)).toFixed(t)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=e.toString(),n="",s=i.split("."),a=[s[0].substr(0,10),s[0].substr(10),s[1]],o=a[0],r=a[1];return n=this.fixTo((r||o)+(a[2]?".".concat(a[2]):""),t).toString(),r&&11===n.length&&"10000000000"===n&&(n="0000000000",o=(parseInt(o,10)+1).toString()),r&&(n=o+n),n},decimalPlaces:function(e){return Math.floor(e)===e||-1===e.toString().indexOf(".")?0:e.toString().split(".")[1].length||0}},I=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],L="",P=!1;"object"===i(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(L=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(P=window.SohoConfig.minifyCultures));var M={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],culturesPath:L,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pl-PL","pt-PT"],defaultLocale:"en-US",minify:P,updateLanguageTag:function(e){var t=$("html");2===e.length&&(e=this.defaultLocales.filter((function(t){return t.lang===e}))),t.attr("lang",e),this.isRTL()?t.attr("dir","rtl"):t.removeAttr("dir"),this.isRTL()&&M.flipIconsHorizontally(),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var e=document.getElementsByTagName("script"),t=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,i=0;i<e.length;i++){var n=e[i].src,s=n.indexOf("?");if(""!==n&&s>-1&&(n=n.substr(0,s)),"sohoxi-script"===e[i].id)return"".concat(n.substring(0,n.lastIndexOf("/")),"/");n.match(t)&&(this.culturesPath="".concat(n.replace(t,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var e=!1,t=document.getElementsByTagName("script"),i=0;i<t.length;i++){t[i].src.indexOf("cultures")>-1&&(e=!0)}return e},correctLocale:function(e){"in-ID"===e&&(e="id-ID"),"iw"===e.substr(0,2)&&(e="he-IL");var t=e.split("-")[0];if(-1===this.supportedLocales.indexOf(e)){if((e=this.defaultLocales.filter((function(e){return e.lang===t})))&&e[0])return e[0].default;e=this.defaultLocale}return e},correctLanguage:function(e){var t=this.defaultLocales.filter((function(t){return t.lang===e}));return t&&t[0]?this.remapLanguage(e):(t=this.remapLanguage(e),t)},remapLanguage:function(e){var t=e;return"in"===e&&(t="id"),"iw"===e&&(t="he"),"nb"!==e&&"nn"!==e||(t="no"),t},addCulture:function(e,t,i){var n=e.substr(0,2);if(this.cultures[e]=t,this.cultures[e].name=e,!this.languages[n]&&t.messages)this.languages[n]={name:n,direction:t.direction||(i?i.direction:""),nativeName:t.nativeName||(i?i.nativeName:""),messages:t.messages||(i?i.messages:{})},this.languages[e]={name:e,direction:t.direction||(i?i.direction:""),nativeName:t.nativeName||(i?i.nativeName:""),messages:t.messages||(i?i.messages:{})};else if(!this.languages[n]&&!t.messages){var s=this.parentLocale(e);s.default&&s.default!==e&&!this.cultures[s.default]&&this.appendLocaleScript(s.default)}},parentLocale:function(e){var t=e.substr(0,2),i=this.defaultLocales.filter((function(e){return e.lang===t}))[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(e)>-1?{lang:"fr",default:"fr-CA"}:i},appendedLocales:[],appendLocaleScript:function(e,t,n,s){var a=this,o=document.createElement("script"),r=this.minify?".min":"";o.async=!1,this.appendedLocales.indexOf(e)>-1||(this.appendedLocales.push(e),o.src=s?"".concat(this.getCulturesPath()+s).concat(r,".js"):"".concat(this.getCulturesPath()+e).concat(r,".js"),o.onload=function(){t&&!n&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),n&&a.dff[n]&&(a.setCurrentLocale(e,a.cultures[e]),a.setCurrentLocale(n,a.cultures[n]),a.dff[n].resolve(n)),n&&a.dff[e]&&a.cultures[e]&&(a.setCurrentLocale(e,a.cultures[e]),a.dff[e].resolve(e)),t||n||!a.dff[e]||a.dff[e].resolve(e)},o.onerror=function(){a.dff[e]&&a.dff[e].reject()},"object"===i(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&o.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(o))},set:function(e){if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),""===e)return this.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===e);var t=!1,i=this.parentLocale(e);return i.default&&i.default!==e&&!this.cultures[i.default]&&(t=!0),t||!e||this.cultures[e]||this.currentLocale.name===e||"en-US"===e||(this.setCurrentLocale(e),this.appendLocaleScript(e,!0)),t&&("en-US"!==i.default&&this.appendLocaleScript(i.default,!1),this.appendLocaleScript(e,!1,i.default)),e&&this.currentLocale.data&&this.currentLocale.dataName===e&&this.dff[e].resolve(this.currentLocale.name),this.setCurrentLocale(e,this.cultures[e]),this.cultures[e]&&this.cultureInHead()&&this.dff[e].resolve(this.currentLocale.name),this.dff[e].promise()},getLocale:function(e,t){if(!e)return null;if(e=this.correctLocale(e),this.dff[e]=$.Deferred(),""===e){var i=$.Deferred();return i.resolve(),i.promise()}return e&&"en-US"!==e&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),e&&!this.cultures[e]&&this.currentLocale.name!==e&&"en-US"!==e&&this.appendLocaleScript(e,!1,!1,t),e&&this.currentLocale.data&&this.currentLocale.dataName===e&&this.dff[e].resolve(e),this.cultures[e]&&this.cultureInHead()&&this.dff[e].resolve(e),this.dff[e].promise()},setLanguage:function(e){var t=this,i=this.currentLocale.name;e=this.correctLanguage(e),this.languages[e]||this.set(e).done((function(){t.set(i),t.setLanguage(e)}));var n=this.correctLocale(e);return this.languages[e]?(this.currentLanguage=this.languages[e],this.updateLanguageTag(e),this.dff[n]=$.Deferred(),this.dff[n].resolve()):(this.currentLanguage.name=e,this.dff[n])},setCurrentLocale:function(e,t){var i=this.remapLanguage(e.substr(0,2));this.currentLocale.name=e,t&&(this.currentLocale.data=t,this.currentLocale.dataName=e,this.currentLanguage={},this.currentLanguage.name=i,this.languages[i]&&(this.currentLanguage=this.languages[i],this.updateLanguageTag(e)),this.translatedLocales.indexOf(e)>-1&&(this.languages[i].direction=t.direction,this.languages[i].messages=t.messages,this.languages[i].name=i,this.languages[i].nativeName=t.nativeName,this.languages[e]={direction:t.direction,messages:t.messages,name:e,nativeName:t.nativeName}))},formatDate:function(e,t){t||(t={date:"short"});var i=this.useLocale(t);if(e){if("0000"===e||"000000"===e||"00000000"===e)return"";if("string"==typeof e&&/T|Z/g.test(e)&&(e=this.newDateObj(e)),!(e instanceof Date)&&"string"==typeof e){var n=M.parseDate(e,t);isNaN(n)&&"datetime"===t.date&&"-"===e.substr(4,1)&&"-"===e.substr(7,1)&&(n=new Date(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2),e.substr(11,2),e.substr(14,2),e.substr(17,2))),e=n}if(!(e instanceof Date)&&"number"==typeof e)e=new Date(e);if(e){var s,a="",o=i.calendars?i.calendars[0]:null;t.pattern&&(s=t.pattern),t.date&&(s=o.dateFormat[t.date]),"string"==typeof t&&""!==t&&(s=t),s||(s=o.dateFormat.short);var r=e instanceof Array?e[0]:e.getFullYear(),l=e instanceof Array?e[1]:e.getMonth(),c=e instanceof Array?e[2]:e.getDate(),d=e.getDay?e.getDay():"",h=e instanceof Array?e[3]:e.getHours(),u=e instanceof Array?e[4]:e.getMinutes(),p=e instanceof Array?e[5]:e.getSeconds(),g=e instanceof Array?e[6]:e.getMilliseconds();if(o&&o.conversions)if(t.fromGregorian){var f=this.gregorianToUmalqura(e);c=f[2],l=f[1],r=f[0]}else if(t.toGregorian){var m=this.umalquraToGregorian(r,l,c);c=m.getDate(),l=m.getMonth(),r=m.getFullYear()}var v=(a=(a=(a=(a=(a=(s=(s=(s=(s=s.replace("de","nnnnn")).replace("ngày","nnnn")).replace("tháng","t1áng")).replace("den","nnn")).replace("dd",this.pad(c,2))).replace("d",c)).replace("yyyy",r)).replace("yy",r.toString().substr(2))).replace("y",r)).indexOf(" a")>-1||0===a.indexOf("a");if(v&&0===h&&(a=(a=a.replace("hh",12)).replace("h",12)),a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace("hh",h>12?this.pad(h-12,2):this.pad(h,2))).replace("h",h>12?h-12:h)).replace("HH",this.pad(h,2))).replace("H",h)).replace("mm",this.pad(u,2))).replace("ss",this.pad(p,2))).replace("SSS",this.pad(g,3))).replace("MMMM",o?o.months.wide[l]:null)).replace("MMM",o?o.months.abbreviated[l]:null),-1===s.indexOf("MMM")&&(a=(a=a.replace("MM",this.pad(l+1,2))).replace("M",l+1)),v&&o&&(0===(a=a.replace(" a"," ".concat(h>=12?o.dayPeriods[1]:o.dayPeriods[0]))).indexOf("a")&&(a=a.replace("a"," ".concat(h>=12?o.dayPeriods[1]:o.dayPeriods[0]))),a=a.replace("EEEE",o.days.wide[d])),o&&(a=a.replace("EEEE",o.days.wide[d])),o&&(a=a.replace("EEE",o.days.abbreviated[d])),o&&(a=a.replace("EE",o.days.narrow[d])),(a=(a=(a=(a=a.replace("nnnnn","de")).replace("nnnn","ngày")).replace("t1áng","tháng")).replace("nnn","den")).indexOf("zz")>-1){var b=new Date,y=this.getTimeZone(b,"short"),w=this.getTimeZone(b,"long");a=(a=a.replace("zzzz",w)).replace("zz",y)}return a.trim()}}},newDateObj:function(e){var t=new Date(e);if("safari"===m.browser.name&&"string"==typeof e&&/T|Z/g.test(e)){var i=e.replace(/Z/,"").replace(/T|:/g,"-").split("-");i=i.map((function(e,t){return+(1===t?e-1:e)})),t=l(Date,c(i))}return t},formatHour:function(e,t){var n=this.calendar().dateFormat.timeSeparator,s=this.currentLocale.name;"object"===i(t)&&(s=t.locale||s,n=t.timeSeparator||this.calendar(s).dateFormat.timeSeparator),"string"==typeof e&&-1===e.indexOf(n)&&(n=":");var a=new Date;if("number"==typeof e){var o=e.toString().split(".");a.setHours(o[0]),a.setMinutes(o[1]?60*parseFloat("0.".concat(o[1])):0)}else{var r=e.split(n);a.setHours(r[0]),a.setMinutes(r[1]||0)}return this.formatDate(a,{date:"hour"})},formatHourRange:function(e,t,n){var s=this.currentLocale.name,a=this.calendar(s).dayPeriods,o=!1;"object"===i(n)&&(s=n.locale||s,a=this.calendar(s).dayPeriods);var r="".concat(M.formatHour(e,n)," - ").concat(M.formatHour(t,n));return(r.indexOf(":00 AM -")>-1||r.indexOf(":00 PM -")>-1)&&(o=!0),D.count(r,a[0])>1&&(r=r.replace(a[0],"")),D.count(r,a[1])>1&&(r=r.replace(" ".concat(a[1]),"")),r=r.replace("  "," "),o&&(r=r.replace(":00 -"," -")),r},getTimeZone:function(e,t){var i=M.currentLocale.name||"en-US";return"ie"===m.browser.name&&"11"===m.browser.version?e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join(""):("long"===t?e.toLocaleTimeString(i,{timeZoneName:"long"}):e.toLocaleTimeString(i,{timeZoneName:"short"})).replace(/[0-9:AMP]/g,"").split(" ").join(" ").trimLeft()},dateToTimeZone:function(e,t,i){return"ie"===m.browser.name&&"11"===m.browser.version?"".concat(e.toLocaleString(M.currentLocale.name)," ").concat(e.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):e.toLocaleString(M.currentLocale.name,{timeZone:t,timeZoneName:i})},dateToUTC:function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))},toLocaleString:function(e,t,n,s){if("number"!=typeof e)return"";var a={locale:t||M.currentLocale.name,options:n||void 0},o=e.toLocaleString(a.locale,a.options);if(!/undefined|null/.test(i(s))){var r=this.getSeparator(a.locale,"group");o=o.replace(new RegExp(r,"g"),s.toString())}return o},getSeparator:function(e,t){return Intl.NumberFormat(e).formatToParts(1000.1).find((function(e){return e.type===t})).value},convertNumberToEnglish:function(e){for(var t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],i=["०","१","२","३","४","५","६","७","८","९"],n=["零","壹","貳","叄","肆","伍","陸","柒","捌","玖"],s=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],a=["〇","一","二","三","四","五","六","七","八","九"],o=0;o<=9;o++)e=(e=(e=(e=(e=(e=(e=e.replace(t[o],o)).replace("٬","")).replace(",","")).replace(i[o],o)).replace(n[o],o)).replace(s[o],o)).replace(a[o],o),0===o&&(e=e.replace("零",o));return parseFloat(e)},isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},parseDate:function(e,t,n){if(e){var s=t,a=this.currentLocale.name,o=this.calendar();"object"===i(t)&&(a=t.locale||a,s=t.dateFormat||this.calendar(a).dateFormat[s.date]),"object"===i(t)&&t.pattern&&(s=t.dateFormat||t.pattern),"object"===i(t)&&t.calendarName&&t.locale&&(o=this.calendar(t.locale,t.calendarName)),s||(s=this.calendar(a).dateFormat.short);var r=e;if("0000"!==e&&"000000"!==e&&"00000000"!==e){var l,c;s.pattern&&(s=s.pattern);var d,h,u={},p=s.toLowerCase().indexOf("h")>-1,g=e.toLowerCase().indexOf("z")>-1,f=3===(s.match(/M/g)||[]).length&&o&&o.months&&o.months.abbreviated&&o.months.abbreviated.filter((function(e){return/\./.test(e)})).length;if(p){var m=M.getTimeZone(new Date,"short"),v=M.getTimeZone(new Date,"long");e=(e=e.replace(" ".concat(m),"")).replace(" ".concat(v),"");var b=f?/[T\s:-]/g:/[T\s:.-]/g;s=(s=s.replace(" zzzz","").replace(" zz","")).replace(b,"/").replace(/z/i,""),e=e.replace(b,"/").replace(/z/i,"")}if(s=s.replace(" de "," "),e=e.replace(" de "," "),s=s.replace("/ah/","/a/h/"),e=e.replace("午","午/"),s=s.replace(",",""),e=e.replace(",",""),"Mdyyyy"!==s&&"dMyyyy"!==s||(e="".concat(e.substr(0,e.length-4),"/").concat(e.substr(e.length-4,e.length)),e="".concat(e.substr(0,e.indexOf("/")/2),"/").concat(e.substr(e.indexOf("/")/2))),"Mdyyyy"===s&&(s="M/d/yyyy"),"dMyyyy"===s&&(s="d/M/yyyy"),-1!==s.indexOf(" ")){var y=f?/[\s:]/g:/[\s:.]/g;s=s.replace(y,"/"),e=e.replace(y,"/")}if(s.indexOf("MMMM")>-1&&M.isRTL()&&s){var w=e.lastIndexOf("/");e=e.substr(0,w-1).replace("/"," ")+e.substr(w)}if(-1===s.indexOf(" ")&&-1===s.indexOf(".")&&-1===s.indexOf("/")&&-1===s.indexOf("-")){-1!==e.indexOf(" ")?e=e.split(" ").join(""):-1!==e.indexOf(".")?e=e.split(".").join(""):-1!==e.indexOf("/")?e=e.split("/").join(""):-1!==e.indexOf("-")&&(e=e.split("-").join(""));var x=s[0],C="",k="";for(d=0,h=s.length;d<h;d++)k+=s[d]!==x?"/".concat(e[d]):e[d],C+=s[d]!==x?"/".concat(s[d]):s[d],d>1&&(x=s[d]);e=k,s=C}l=s.split("/"),c=e.split("/"),1===l.length&&(l=s.split(".")),1===c.length&&(c=e.split(".")),1===l.length&&(l=s.split("-")),1===c.length&&(c=e.split("-")),1===l.length&&(l=s.split(" ")),1===c.length&&(c=e.split(" "));var T=this.getDatePart(l,c,"M","MM","MMM","MMMM"),S=this.getDatePart(l,c,"yy","yyyy"),A=!1,D=!1,E=o.dayPeriods[0].replace(/\./g,""),I=o.dayPeriods[1].replace(/\./g,"");for(d=0,h=c.length;d<h;d++){var L="".concat(l[d]),P=c[d],B=parseInt(P,10);A||(A=L.toLowerCase().indexOf("d")>-1);var O=void 0,R=void 0,F=void 0;switch(L){case"d":if(O=new Date(S,T,0).getDate(),B<1||B>31||B>O)return;u.day=P;break;case"dd":if(B<1||B>31||B<10&&"0"!==P.substr(0,1))return;u.day=P;break;case"M":if(B<1||B>12)return;u.month=P-1;break;case"MM":if(B<1||B>12||B<10&&"0"!==P.substr(0,1))return;u.month=P-1;break;case"MMM":R=this.calendar(a).months.abbreviated;for(var N=0;N<R.length;N++)r.indexOf(R[N])>-1&&(u.month=N);break;case"MMMM":F=this.calendar(a).months.wide;for(var z=0;z<F.length;z++)r.indexOf(F[z])>-1&&(u.month=z);break;case"yy":u.year=this.twoToFourDigitYear(P);break;case"yyyy":u.year=2===P.length?this.twoToFourDigitYear(P):P;break;case"h":if(B<0||B>12)return;u.h=D?u.h:P;break;case"hh":if(B<0||B>12)return;u.h=D?u.h:1===P.length?"0".concat(P):P;break;case"H":if(B<0||B>24)return;u.h=D?u.h:P;break;case"HH":if(B<0||B>24)return;u.h=D?u.h:1===P.length?"0".concat(P):P;break;case"ss":if(B<0||B>60){u.ss=0;break}u.ss=P;break;case"SSS":u.ms=P;break;case"mm":if(B<0||B>60){u.mm=0;break}u.mm=P;break;case"a":P.toLowerCase()!==E&&P.toUpperCase()!==E||(u.a="AM",u.h||"h"!==l[d+1].toLowerCase().substr(0,1)||(u.h=c[d+1],D=!0),u.h&&(12!==u.h&&"12"!==u.h||(u.h=0))),P.toLowerCase()!==I&&P.toUpperCase()!==I||(u.a="PM",u.h&&u.h<12&&(u.h=parseInt(u.h,10)+12))}}var H=function(e){return e%4==0&&e%100!=0||e%400==0};if(u.return=void 0,u.leapYear=H(u.year),!p||u.h||u.mm){if(!u.year&&0!==u.year&&!n){for(u.isUndefindedYear=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("y")>-1&&void 0!==c[d]){u.isUndefindedYear=!1;break}if(u.isUndefindedYear){var q=29===parseInt(u.day,10)&&1===parseInt(u.month,10);u.year=q?function(e){for(var t="number"!=typeof e||isNaN(e)?(new Date).getFullYear():e,i=0;i<4&&!H(t);i++)t--;return t}():(new Date).getFullYear()}else delete u.year}if(u.year&&2===u.year.length&&(u.year="20".concat(u.year)),u.year=$.trim(u.year),u.day=$.trim(u.day),(""===u.year||u.year&&2!=="".concat(u.year).length&&4!=="".concat(u.year).length)&&delete u.year,!u.month&&0!==u.month&&!n){for(u.isUndefindedMonth=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("M")>-1&&void 0!==c[d]){u.isUndefindedMonth=!1;break}u.isUndefindedMonth&&(u.month=(new Date).getMonth())}if(!(u.day||0===u.day||n&&A)){for(u.isUndefindedDay=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("d")>-1&&void 0!==c[d]){u.isUndefindedDay=!1;break}u.isUndefindedDay?u.day=1:delete u.day}return p?g?(void 0!==u.h&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm))),void 0!==u.ss&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm,u.ss))),void 0!==u.ms&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm,u.ss,u.ms)))):(void 0!==u.h&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm)),void 0!==u.ss&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm,u.ss)),void 0!==u.ms&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm,u.ss,u.ms))):u.return=new Date(u.year,u.month,u.day),"islamic-umalqura"===o.name?[parseInt(u.year,10),parseInt(u.month,10),parseInt(u.day,10),parseInt(u.h||0,10),parseInt(u.mm||0,10),parseInt(u.ss||0,10),parseInt(u.ms||0,10)]:this.isValidDate(u.return)?u.return:void 0}}}},twoToFourDigitYear:function(e){return parseInt((e>39?"19":"20")+e,10)},getDatePart:function(e,t,i,n,s,a){var o=0;return $.each(t,(function(r){i!==e[r]&&n!==e[r]&&s!==e[r]&&a!==e[r]||(o=t[r])})),o},useLocale:function(e){var t=this.currentLocale.data;if(e&&e.locale&&this.cultures[e.locale]&&(t=this.cultures[e.locale]),e&&e.language&&this.languages[e.language]){var i=C.extend(!0,{},this.currentLocale.data);if(i.calendars)return i.calendars[0]=this.calendar(e.locale||this.currentLocale.name,e.language),i}return t.numbers||(t.numbers=this.numbers()),t},useLanguage:function(e){var t=this.currentLanguage;if(e&&e.locale){var i=e.locale.split("-")[0];t=this.languages[i]}return e&&e.locale&&this.currentLanguage.name!==this.currentLocale.name.substr(0,2)&&this.languages[this.currentLanguage.name]&&(t=this.languages[this.currentLanguage.name]),e&&e.language&&this.languages[e.language]&&(t=this.languages[e.language]),t},formatNumber:function(e,t){var i,n,s,a=this.useLocale(t),o=t&&t.decimal?t.decimal:a.numbers.decimal,r=t&&void 0!==t.minimumFractionDigits?t.minimumFractionDigits:t&&t.style&&"currency"===t.style?2:t&&t.style&&"percent"===t.style?0:2,l=t&&void 0!==t.maximumFractionDigits?t.maximumFractionDigits:t&&t.style&&("currency"===t.style||"percent"===t.style)?2:t&&t.minimumFractionDigits?t.minimumFractionDigits:3;if(null!=e&&""!==e){if(t&&"integer"===t.style&&(l=0,r=0),t&&"currency"===t.style){var c=t&&t.currencySign?t.currencySign:a.currencySign,d=t&&t.currencyFormat?t.currencyFormat:a.currencyFormat;d||(d="¤#,##0.00"),n=d.replace("¤",c)}if(t&&"percent"===t.style){var h=a.numbers?a.numbers.percentSign:"%";s=(s=a.numbers?a.numbers.percentFormat:"### %").replace("¤",h)}"string"==typeof e&&(e=M.parseNumber(e)),e.toString().indexOf("e")>-1&&(e=e.toFixed(l+1)),t&&"percent"===t.style&&(e=(100*e).toFixed(r));var u=this.truncateDecimals(e,r,l,t&&t.round).split("."),p=[3,3];a&&a.numbers&&a.numbers.groupSizes&&(p=a.numbers.groupSizes),t&&t.groupSizes&&(p=t.groupSizes);var g=t&&void 0!==t.group?t.group:a.numbers.group,f=this.expandNumber(u[0],p,g);u[0]=f,i=u.join(o);var m=a&&a.numbers&&a.numbers.minusSign?a.numbers.minusSign:"-",v=i.indexOf(m)>-1;i=i.replace(m,"");var b=function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},y="";return 0===r&&(y=new RegExp("(".concat(b(o),"[0-9]*?)0+$")),i=i.replace(y,"$1")),r>0&&(y=new RegExp("(".concat(b(o),".{").concat(r,"}[0-9]*?)0+$")),i=i.replace(y,"$1")),y=new RegExp("".concat(b(o),"$")),i=i.replace(y,""),t&&"currency"===t.style&&(i=n.replace("###",i)),t&&"percent"===t.style&&(i=s.replace("###",i)),v&&(i=m+i),i}},expandNumber:function(e,t,i){var n=e.length,s=!1;if("-"===e.substr(0,1)&&(n=(e=e.substr(1)).length,s=!0),n<=3)return(s?"-":"")+e;if(0===t[0])return(s?"-":"")+e;var a=e.substr(e.length-t[0]),o=e.substr(0,e.length-t[0]);if(0===t[1])return(s?"-":"")+o+(""===o?"":i)+a;var r=o.split("").reverse().join(""),l=new RegExp(".{1,".concat(t[1],"}"),"g");return(s?"-":"")+r.match(l).join(i).split("").reverse().join("")+i+a},truncateDecimals:function(e,t,i,n){var s=e;s=n?E.round(e,i):E.truncate(e,i);var a=E.decimalPlaces(s);return a<t&&(s=s.toString()+new Array(t-a+1).join("0")),s.toString()},parseNumber:function(e,t){var i,n=this.useLocale(t),s=n.numbers;if(!(i=e))return NaN;"number"==typeof e&&(i=i.toString());var a=s?s.group:",",o=s?s.decimal:".",r=s?s.percentSign:"%",l=n.currencySign||"$",c=" "===a?new RegExp(/\s/g):new RegExp("\\".concat(a),"g");return(i=(i=(i=(i=(i=(i=i.replace(c,"")).replace(o,".")).replace(r,"")).replace(l,"")).replace("$","")).replace(" ","")).length>=19?i:parseFloat(i)},translate:function(e,t){var n=this.useLanguage(t),s=!1,a=!0;if("&nsbp;"===e)return"";if("boolean"==typeof t&&(s=t),"object"===i(t)&&void 0!==t.showAsUndefined&&(s=t.showAsUndefined),"object"===i(t)&&void 0!==t.showBrackets&&(a=t.showBrackets),void 0===n||void 0===n.messages)return s?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":"");if(void 0===n.messages[e]){return this.languages&&this.languages.en&&this.languages.en.messages&&void 0!==this.languages.en.messages[e]?this.languages.en.messages[e].value:s?void 0:"".concat(a?"[":"").concat(e).concat(a?"]":"")}return n.messages[e].value},extendTranslations:function(e,t){if(this.languages[e]){var i=this.languages[e].messages;this.languages[e].messages=C.extend(!0,i,t)}},calendar:function(e,t,i){var n=[];if(this.currentLocale.data.calendars&&!e&&(n=this.currentLocale.data.calendars),t&&t.length>2&&(t=t.substr(0,2)),e&&this.cultures[e]&&(n=this.cultures[e].calendars),i&&n)for(var s=0;s<n.length;s++){var a=n[s];if(a.name===i)return a}if(!n[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a"},timeFormat:"HH:mm:ss",dayPeriods:["AM","PM"]};var o=C.extend(!0,{},n[0]);if(t&&e.substr(0,2)!==t){var r=this.defaultLocales.filter((function(e){return e.lang===t}));if(r[0]){var l=this.cultures[r[0].default];o.days=l.calendars[0].days,o.months=l.calendars[0].months,o.dayPeriods=l.calendars[0].dayPeriods}}return o},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(e,t,i){return i=i||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(i)+e},isRTL:function(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},toUpperCase:function(e){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(e):e.toLocaleUpperCase()},toLowerCase:function(e){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(e):e.toString().toLocaleLowerCase()},capitalize:function(e){return this.toUpperCase(e.charAt(0))+e.slice(1)},capitalizeWords:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)t[i]=this.capitalize(t[i]);return t.join(" ")},gregorianToUmalqura:function(e){if("function"!=typeof e.getMonth)return null;var t=function(e){for(var t=e-24e5+.5,i=0,n=0;n<I.length&&!(I[n]>t);n++)i++;var s=i+15292,a=Math.floor((s-1)/12);return{year:a+1,month:s-12*a-1,day:t-I[i-1]+1}}(function(e,t,i){e<0&&e++,t<3&&(t+=12,e--);var n=Math.floor(e/100),s=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+i+s-1524.5}(e.getFullYear(),e.getMonth()+1,e.getDate()));return[t.year,t.month,t.day,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]},umalquraToGregorian:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,r=function(e){return"number"==typeof e&&!isNaN(e)};if(!r(e)||!r(t)||!r(i))return null;var l=function(e,t,i){return i+I[12*(e-1)+t-15292-1]-1+24e5-.5},c=l(e,t+1,i),d=function(e){var t=Math.floor(e+.5),i=Math.floor((t-1867216.25)/36524.25),n=(i=t+1+i-Math.floor(i/4))+1524,s=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*s),o=Math.floor((n-a)/30.6001),r=o-(o>13.5?13:1),l=s-(r>2.5?4716:4715);return l<=0&&l--,{year:l,month:r-1,day:n-a-Math.floor(30.6001*o)}},h=d(c),u=new Date(h.year,h.month,h.day,n,s,a,o);return u},flipIconsHorizontally:function(){var e=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each((function(){var t=$(this).getIconName();t&&-1!==$.inArray(t,e)&&0===$(this).closest(".monthview").length&&$(this).addClass("icon-rtl-rotate")}))}};function B(e){if("function"!=typeof e){if("string"==typeof e)return e;throw new Error("".concat(i(e)," was provided where a function was expected."))}if("string"==typeof e.name)return"".concat(e.name,"()");var t=/^function\s+([\w$]+)\s*\(/.exec(e.toString());return t?"".concat(t[1],"()"):"(anonymous function)"}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===("undefined"==typeof console?"undefined":i(console))){var s=B(e),a=B(t);n.length&&(n=" (".concat(n,")")),console.warn("IDS Enterprise".concat(n,': "').concat(a,'" is deprecated. Please use "').concat(s,'" instead.'))}}function R(e){"object"===("undefined"==typeof console?"undefined":i(console))&&console.warn('IDS Enterprise: "'.concat(e,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function F(e,t){var i=function(){O(e,t);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];e.apply(this,n)};return i.prototype=e.prototype,i}function N(e){return this.element=$(e),this}N.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return O("url","getCurrentURL"),this.url},getBaseURL:function(e){return this.element.length&&this.href&&"/"!==this.href?e?0===e.indexOf("/")?e:(e=(-1===e.indexOf("#")?"#":"")+e,this.url+e):this.url:e||""}};var z=new N($("base[href]"));$.getBaseURL=function(e){return z.getBaseURL(e)};var H={noAutoStart:!1},q={};function V(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function W(e){if(this.id=e.id,this.duration=e.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=e.updateDuration||1,this.setFuncs(e),this.paused=!1,this.elapsedTime=0,this.startTime=V(),this}function j(e){return this.items=[],this.element=$("body"),this.settings=C.mergeSettings(null,e,H),!0!==this.settings.noAutoStart&&this.start(),this}"object"===i(window.SohoConfig)&&"object"===i(window.SohoConfig.renderLoop)&&(q=C.extend({},H,window.SohoConfig.renderLoop)),W.prototype={setFuncs:function(e){if("function"!=typeof e.updateCallback&&"function"!=typeof e.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof e.updateCallback&&(this.updateCallback=e.updateCallback),"function"==typeof e.timeoutCallback&&(this.timeoutCallback=e.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(e){e&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},j.prototype={start:function(){this.doLoop=!0,this.startTime=V();var e,t,i=this,n=V();!function s(){i.doLoop&&(e=V(),t=(e-n)/1e3,i.items.forEach((function(s){var a;if(s.doRemoveOnNextTick)i.remove(s);else if(s.paused||s.elapsedTime++,"number"==typeof s.duration&&s.duration>-1&&(s.startTime||(s.startTime=e),s.elapsedTime>=s.duration))s.destroy();else if("function"==typeof s.updateCallback){if(s.updateDuration&&s.updateDuration>1&&(isNaN(s.timeUntilNextUpdate)&&(s.timeUntilNextUpdate=s.updateDuration),s.timeUntilNextUpdate>0))return void--s.timeUntilNextUpdate;a=[s,{last:n,delta:t,now:e}],s.updateCallback.apply(null,a)}})),n=e,requestAnimationFrame(s))}()},stop:function(){this.doLoop=!1},totalDuration:function(){return V()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(e,t,i,n){var s="string"!=typeof n||!n.length;if("string"==typeof i)if(s)n=i,i=-1,s=!1;else{var a=Number(i);isNaN(a)||(i=a)}else"number"!=typeof i&&(i=-1);return"string"==typeof n&&n.length||(n=""),new W({id:n,updateCallback:e,timeoutCallback:t,duration:i})},register:function(e,t,i,n){return e instanceof W||(e=this.buildRenderLoopItem(e,t,i,n)),this.items.push(e),e},unregister:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof e&&(t=e,e=void 0),this.remove({cb:e,id:t})},getFromQueue:function(e,t){var i;return"string"==typeof callback&&(t=e,e=void 0),"function"==typeof callback?this.items.forEach((function(t){return"".concat(t.updateCallback)!=="".concat(e)||(i=t,!1)})):"string"==typeof t&&this.items.forEach((function(e){return e.id!==t||(i=e,!1)})),i},remove:function(e){var t;return e instanceof W?(t=e,this.items=this.items.filter((function(t){return t!==e}))):"function"==typeof e.updateCallback?this.items=this.items.filter((function(i){return"".concat(i.updateCallback)!=="".concat(e.updateCallback)||(t=i,!1)})):"string"==typeof e.id&&(this.items=this.items.filter((function(i){return i.id!==e.id||(t=i,!1)}))),"function"!=typeof t.timeoutCallback||t.noTimeout||t.timeoutCallback.apply(null,t),this.element.triggerHandler("remove.renderLoop",[t]),t},pause:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var i=this.getFromQueue(e,t);return i.pause(),i},resume:function(e,t){if("function"!=typeof e&&"string"!=typeof e&&"string"!=typeof t)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var i=this.getFromQueue(e,t);return i.resume(),i}};var G=new j(q);function U(){this.pressedKeys=new Map,this.init()}U.prototype={init:function(){var e=this;$(document).on("keydown.".concat("keyboard"),(function(t){e.press(t.key),e.announceKeys()})).on("keyup.".concat("keyboard"),(function(t){e.unpress(t.key),e.announceKeys()}))},announceKeys:function(){var e=[];this.pressedKeys.forEach((function(t,i){e.push(i)})),$("body").triggerHandler("keys",[e])},press:function(e){return this.pressedKeys.set("".concat(e),!0)},unpress:function(e){return this.pressedKeys.delete("".concat(e))},isPressed:function(e){return this.pressedKeys.has("".concat(e))}};var _=new U;function Y(e){return void 0!==e&&e.element instanceof $&&"function"==typeof e.destroy}function K(){return this.modals=[],this.handleEvents(),this}K.prototype={get modalFadeDuration(){return 10},get currentlyOpen(){return this.modals.filter((function(e){return e.visible}))},get currentlyActive(){var e;return this.modals.forEach((function(t){t.active&&(e=t)})),e},set currentlyActive(e){if(!Y(e))throw new Error("Cannot set the provided Modal API to currently displayed.");this.modals.forEach((function(t){t.active=$(t.element).is(e.element)})),this.refresh()},get last(){var e,t=this.currentlyOpen,i=t.length;return i&&(e=t[i-1]),e},render:function(){var e=document.createDocumentFragment(),t=document.createElement("div"),i=document.createElement("div");t.id="ids-modal-root",t.classList.add("modal-page-container"),t.setAttribute("aria-hidden",!0),e.appendChild(t),i.classList.add("overlay"),i.setAttribute("aria-hidden",!0),t.appendChild(i),document.body.appendChild(t),this.rootElem=t,this.overlayElem=i},refresh:function(){var e=this.currentlyActive;e||(e=this.activateLast()),this.checkOverlayVisibility(),e?this.showContainers(e):this.hideContainers(e)},showContainers:function(){this.rootElem.removeAttribute("aria-hidden"),this.overlayElem.removeAttribute("aria-hidden"),$("body")[0].classList.add("modal-engaged")},hideContainers:function(){this.rootElem.setAttribute("aria-hidden",!0),this.overlayElem.setAttribute("aria-hidden",!0),$("body")[0].classList.remove("modal-engaged")},register:function(e){if(!Y(e))throw new Error("The provided API is not a Modal API, and cannot be registered.");this.checkRootElements(),this.modals.filter((function(t){return $(t.element).is(e)}))>0||this.modals.push(e)},unregister:function(e){if(!Y(e))throw new Error("The provided API is not a Modal API, and cannot be unregistered.");this.checkRootElements(),this.modals=this.modals.filter((function(t){return!$(t.element).is(e.element)}))},checkOverlayVisibility:function(){var e=0;this.currentlyActive&&(e=this.currentlyActive.settings.overlayOpacity),this.overlayElem.style.opacity=e?"".concat(e):""},checkRootElements:function(){var e=document.querySelector("#ids-modal-root");if(e instanceof HTMLElement){this.rootElem=e;var t=e.querySelector(".overlay");t instanceof HTMLElement&&(this.overlayElem=t)}else this.rootElem instanceof HTMLElement?document.body.appendChild(this.rootElem):this.render()},close:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t=e&&(e instanceof HTMLElement||e instanceof $&&e.length)?$(e).data("modal"):this.last)&&(i&&(t.isCancelled=!0),t.close())},closeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach((function(t){e&&(t.isCancelled=!0),t.close(void 0,!0)})),this.refresh()},destroyAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach((function(t){(!e||t.capAPI)&&(t.close(void 0,!0),t.destroy())})),this.refresh()},closeLast:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close(void 0,e)},activateLast:function(){var e=this.last;return e&&(e.active=!0),e},findById:function(e){if(e)return this.modals.filter((function(t){return t.id===e}))[0]||void 0},handleEvents:function(){var e=this;this.hasEstablishedEvents&&this.teardown(),$(document).on("keydown.".concat("modalmanager"),(function(t){var i=$(t.target).parents(".modal");switch(t.which||t.keyCode){case 27:e.close(i);break;case 9:e.setModalFocus(t.shiftKey?"last":"first",t)}}));var t=this;this.preRendered?this.checkRootElements():$(document).ready((function(){t.checkRootElements(),t.preRendered=!0})),this.hasEstablishedEvents=!0},setModalFocus:function(e,t){var i=this.currentlyActive;i&&(!i.isFocused||$(i.focusableElems.last).is(document.activeElement)&&"first"===e||$(i.focusableElems.first).is(document.activeElement)&&"last"===e)&&(t.preventDefault(),i.setFocus(e))},teardown:function(){$(document).off("keydown.".concat("modalmanager")),delete this.hasEstablishedEvents,this.preRendered&&(this.rootElem.parentNode.remove(this.rootElem),delete this.overlayElem,delete this.rootElem,delete this.preRendered)}};var X=new K,Q={hexToRgba:function(e,t){var i;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(i=e.substring(1).split("")).length&&(i=[i[0],i[0],i[1],i[1],i[2],i[2]]),i="0x".concat(i.join("")),"rgba(".concat([i>>16&255,i>>8&255,255&i].join(","),",").concat(t.toString(),")")):""},getLuminousColorShade:function(e,t){e=this.validateHex(e).substr(1),t=t||0;var i,n,s="#";for(n=0;n<3;n++)i=parseInt(e.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),s+="00".concat(i).substr(i.length);return s},validateHex:function(e){return(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),"#".concat(e)},getContrastColor:function(e,t,i){e=e?e.replace("#",""):"";var n=function(t){return parseInt(e.substr(t,2),16)};return(299*n(0)+587*n(2)+114*n(4))/1e3>=128?i||"black":t||"white"}},J={currentTheme:{id:"theme-soho-light",name:M.translate("SohoLightTheme"),legacyId:"light"},allColors:[{id:"theme-soho-light",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#2578a9",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#368ac0"},alt:{name:"theme-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"light"},{id:"theme-soho-dark",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#2578a9",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#368ac0"},alt:{name:"theme-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"dark"},{id:"theme-soho-contrast",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#fbe9bf"},20:{name:"theme-color-palette-amber-20",value:"#f8e09c"},30:{name:"theme-color-palette-amber-30",value:"#f7d475"},40:{name:"theme-color-palette-amber-40",value:"#f4c951"},50:{name:"theme-color-palette-amber-50",value:"#f2bc41"},60:{name:"theme-color-palette-amber-60",value:"#efa836"},70:{name:"theme-color-palette-amber-70",value:"#ee9a36"},80:{name:"theme-color-palette-amber-80",value:"#e4882b"},90:{name:"theme-color-palette-amber-90",value:"#db7726"},100:{name:"theme-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"theme-color-palette-amethyst-20",value:"#daccec"},30:{name:"theme-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"theme-color-palette-amethyst-40",value:"#b59eca"},50:{name:"theme-color-palette-amethyst-50",value:"#a38db7"},60:{name:"theme-color-palette-amethyst-60",value:"#9279a6"},70:{name:"theme-color-palette-amethyst-70",value:"#806594"},80:{name:"theme-color-palette-amethyst-80",value:"#6e5282"},90:{name:"theme-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"theme-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#c8e9f4"},20:{name:"theme-color-palette-azure-20",value:"#addbeb"},30:{name:"theme-color-palette-azure-30",value:"#8dc9e6"},40:{name:"theme-color-palette-azure-40",value:"#69b5dd"},50:{name:"theme-color-palette-azure-50",value:"#54a1d3"},60:{name:"theme-color-palette-azure-60",value:"#368ac0"},70:{name:"theme-color-palette-azure-70",value:"#2578a9"},80:{name:"theme-color-palette-azure-80",value:"#1d5f8a"},90:{name:"theme-color-palette-azure-90",value:"#134d71"},100:{name:"theme-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"theme-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"theme-color-palette-emerald-30",value:"#afdc91"},40:{name:"theme-color-palette-emerald-40",value:"#9cce7c"},50:{name:"theme-color-palette-emerald-50",value:"#89bf65"},60:{name:"theme-color-palette-emerald-60",value:"#76b051"},70:{name:"theme-color-palette-emerald-70",value:"#66a140"},80:{name:"theme-color-palette-emerald-80",value:"#56932e"},90:{name:"theme-color-palette-emerald-90",value:"#488421"},100:{name:"theme-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"theme-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"theme-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"theme-color-palette-graphite-40",value:"#999999"},50:{name:"theme-color-palette-graphite-50",value:"#737373"},60:{name:"theme-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"theme-color-palette-graphite-70",value:"#454545"},80:{name:"theme-color-palette-graphite-80",value:"#383838"},90:{name:"theme-color-palette-graphite-90",value:"#292929"},100:{name:"theme-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#f6caca"},20:{name:"theme-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"theme-color-palette-ruby-30",value:"#de8181"},40:{name:"theme-color-palette-ruby-40",value:"#d26d6d"},50:{name:"theme-color-palette-ruby-50",value:"#c65f5f"},60:{name:"theme-color-palette-ruby-60",value:"#b94e4a"},70:{name:"theme-color-palette-ruby-70",value:"#ad4242"},80:{name:"theme-color-palette-ruby-80",value:"#a13030"},90:{name:"theme-color-palette-ruby-90",value:"#941e1e"},100:{name:"theme-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#dee1e8"},20:{name:"theme-color-palette-slate-20",value:"#c8cbd4"},30:{name:"theme-color-palette-slate-30",value:"#abaeb7"},40:{name:"theme-color-palette-slate-40",value:"#888b94"},50:{name:"theme-color-palette-slate-50",value:"#656871"},60:{name:"theme-color-palette-slate-60",value:"#50535a"},70:{name:"theme-color-palette-slate-70",value:"#414247"},80:{name:"theme-color-palette-slate-80",value:"#313236"},90:{name:"theme-color-palette-slate-90",value:"#212224"},100:{name:"theme-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"theme-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"theme-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"theme-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"theme-color-palette-turquoise-50",value:"#69ada3"},60:{name:"theme-color-palette-turquoise-60",value:"#579e95"},70:{name:"theme-color-palette-turquoise-70",value:"#448d83"},80:{name:"theme-color-palette-turquoise-80",value:"#317c73"},90:{name:"theme-color-palette-turquoise-90",value:"#206b62"},100:{name:"theme-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#133c59",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"theme-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"theme-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"theme-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"theme-color-brand-primary-base",value:"#134d71"},alt:{name:"theme-color-brand-primary-alt",value:"#133c59"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"theme-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"theme-color-brand-secondary-alt",value:"#999999"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#383838"}}}},legacyId:"high-contrast"},{id:"theme-uplift-light",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#0066D4",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#0072ED"},alt:{name:"theme-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#97979B"},base:{name:"theme-color-brand-secondary-base",value:"#606066"},alt:{name:"theme-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}},{id:"theme-uplift-dark",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#0072ED",paletteName:"{theme.color.brand.primary.base.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#0072ED"},alt:{name:"theme-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#97979B"},base:{name:"theme-color-brand-secondary-base",value:"#606066"},alt:{name:"theme-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}},{id:"theme-uplift-contrast",colors:{palette:{amber:{10:{name:"theme-color-palette-amber-10",value:"#FEF2E5"},20:{name:"theme-color-palette-amber-20",value:"#FDDFBD"},30:{name:"theme-color-palette-amber-30",value:"#FCC888"},40:{name:"theme-color-palette-amber-40",value:"#FBAF50"},50:{name:"theme-color-palette-amber-50",value:"#FA9601"},60:{name:"theme-color-palette-amber-60",value:"#F98300"},70:{name:"theme-color-palette-amber-70",value:"#DF6F00"},80:{name:"theme-color-palette-amber-80",value:"#CD6200"},90:{name:"theme-color-palette-amber-90",value:"#BB5500"},100:{name:"theme-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"theme-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"theme-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"theme-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"theme-color-palette-amethyst-40",value:"#A876EB"},50:{name:"theme-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"theme-color-palette-amethyst-60",value:"#7928E1"},70:{name:"theme-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"theme-color-palette-amethyst-80",value:"#591DA8"},90:{name:"theme-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"theme-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"theme-color-palette-azure-10",value:"#E6F1FD"},20:{name:"theme-color-palette-azure-20",value:"#BEDCFA"},30:{name:"theme-color-palette-azure-30",value:"#8ABFF7"},40:{name:"theme-color-palette-azure-40",value:"#55A3F3"},50:{name:"theme-color-palette-azure-50",value:"#1C86EF"},60:{name:"theme-color-palette-azure-60",value:"#0072ED"},70:{name:"theme-color-palette-azure-70",value:"#0066D4"},80:{name:"theme-color-palette-azure-80",value:"#0054B1"},90:{name:"theme-color-palette-azure-90",value:"#004A99"},100:{name:"theme-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"theme-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"theme-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"theme-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"theme-color-palette-emerald-40",value:"#78D8A3"},50:{name:"theme-color-palette-emerald-50",value:"#4DCC86"},60:{name:"theme-color-palette-emerald-60",value:"#2AC371"},70:{name:"theme-color-palette-emerald-70",value:"#25AF65"},80:{name:"theme-color-palette-emerald-80",value:"#1F9254"},90:{name:"theme-color-palette-emerald-90",value:"#1C7F49"},100:{name:"theme-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"theme-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"theme-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"theme-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"theme-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"theme-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"theme-color-palette-graphite-60",value:"#535353"},70:{name:"theme-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"theme-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"theme-color-palette-graphite-90",value:"#363636"},100:{name:"theme-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"theme-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"theme-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"theme-color-palette-ruby-30",value:"#EE9496"},40:{name:"theme-color-palette-ruby-40",value:"#E66467"},50:{name:"theme-color-palette-ruby-50",value:"#DF3539"},60:{name:"theme-color-palette-ruby-60",value:"#DA1217"},70:{name:"theme-color-palette-ruby-70",value:"#C31014"},80:{name:"theme-color-palette-ruby-80",value:"#A30D11"},90:{name:"theme-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"theme-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"theme-color-palette-slate-10",value:"#EFEFF0"},20:{name:"theme-color-palette-slate-20",value:"#D7D7D8"},30:{name:"theme-color-palette-slate-30",value:"#B7B7BA"},40:{name:"theme-color-palette-slate-40",value:"#97979B"},50:{name:"theme-color-palette-slate-50",value:"#77777C"},60:{name:"theme-color-palette-slate-60",value:"#606066"},70:{name:"theme-color-palette-slate-70",value:"#56565B"},80:{name:"theme-color-palette-slate-80",value:"#47474C"},90:{name:"theme-color-palette-slate-90",value:"#3E3E42"},100:{name:"theme-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"theme-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"theme-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"theme-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"theme-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"theme-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"theme-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"theme-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"theme-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"theme-color-palette-turquoise-90",value:"#297B7B"},100:{name:"theme-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"theme-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"theme-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"theme-color-status-base",value:"#003876",paletteName:"{theme.color.brand.primary.alt.value}"},caution:{name:"theme-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"theme-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"theme-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"theme-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"theme-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"theme-color-brand-primary-base",value:"#004A99"},alt:{name:"theme-color-brand-primary-alt",value:"#003876"},contrast:{name:"theme-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"theme-color-brand-secondary-lighter",value:"#47474C"},base:{name:"theme-color-brand-secondary-base",value:"#3E3E42"},alt:{name:"theme-color-brand-secondary-alt",value:"#2F2F32"},contrast:{name:"theme-color-brand-secondary-contrast",value:"#3E3E42"}}}}}],themes:function(){return[{id:"theme-soho-light",name:M.translate("SohoLightTheme"),themeId:"theme-soho",variantId:"light",variantName:M.translate("Light"),legacyId:"light"},{id:"theme-soho-dark",name:M.translate("SohoDarkTheme"),themeId:"theme-soho",variantId:"dark",variantName:M.translate("Dark"),legacyId:"dark"},{id:"theme-soho-contrast",name:M.translate("SohoHighContrastTheme"),themeId:"theme-soho",variantId:"contrast",variantName:M.translate("Contrast"),legacyId:"high-contrast"},{id:"theme-uplift-light",name:M.translate("UpliftLightTheme"),themeId:"theme-uplift",variantId:"light",variantName:M.translate("Light")},{id:"theme-uplift-dark",name:M.translate("UpliftDarkTheme"),themeId:"theme-uplift",variantId:"dark",variantName:M.translate("Dark")},{id:"theme-uplift-contrast",name:M.translate("UpliftHighContrastTheme"),themeId:"theme-uplift",variantId:"contrast",variantName:M.translate("Contrast")}]},themeColors:function(){var e=this,t=this.allColors.filter((function(t){return t.id===e.currentTheme.id}));return t[0]?t[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var e=this.themeColors().palette,t=this.themeColors().brand,i={},n={showBrackets:!1};return i.default={id:"default",name:M.translate("Default",n),backgroundColorClass:"primary-bg-color",value:t.primary.base.value},i.amber={id:"amber",name:M.translate("Amber",n),backgroundColorClass:"amber09",value:e.amber[90].value},i.amethyst={id:"amethyst",name:M.translate("Amethyst",n),backgroundColorClass:"amethyst06",value:e.amethyst[60].value},i.azure={id:"azure",name:M.translate("Azure",n),backgroundColorClass:"azure07",value:e.azure[70].value},i.emerald={id:"emerald",name:M.translate("Emerald",n),backgroundColorClass:"emerald08",value:e.emerald[80].value},i.graphite={id:"graphite",name:M.translate("Graphite",n),backgroundColorClass:"graphite06",value:e.graphite[60].value},i.ruby={id:"ruby",name:M.translate("Ruby",n),backgroundColorClass:"ruby09",value:e.ruby[90].value},i.slate={id:"slate",name:M.translate("Slate",n),backgroundColorClass:"slate06",value:e.slate[60].value},i.turquoise={id:"turquoise",name:M.translate("Turquoise",n),backgroundColorClass:"turquoise09",value:e.turquoise[90].value},i},setTheme:function(e){var t=this.themes().filter((function(t){return t.id===e||t.legacyId&&t.legacyId===e}));return 0===t.length?"":(this.currentTheme=t[0],t)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1}};var Z={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function ee(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Z),this.init()}ee.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.settings.theme?this.setTheme(this.settings.theme):this.setTheme(this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var e=this;return this.element.off("updated.".concat("personalize")).on("updated.".concat("personalize"),(function(){e.updated()})),this},appendStyleSheet:function(e){var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),(t=document.createElement("style")).setAttribute("id","soho-personalization"),t.appendChild(document.createTextNode(e)),document.head.appendChild(t)},getColorStyleSheet:function(e){if(e||(e={}),"string"==typeof e&&(e={header:e}),!e||""===e)return this;var t={header:"2578A9"},i={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","368AC0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},n=!1,s="".concat(e.header||t.header).toLowerCase();s=Q.validateHex(s),Object.keys(i).forEach((function(e){n=n||i[e].indexOf(s)>-1})),s=n?"white":null;var a=Q.validateHex(e.lightest||Q.getLuminousColorShade(e.header||t.header,.3));"white"===Q.getContrastColor(a,null,s)?(t.text="ffffff",t.subtext="f0f0f0"):(t.text="000000",t.subtext="292929"),e.header=Q.validateHex(e.header||t.header),e.text=Q.validateHex(e.text||t.text),e.subtext=Q.validateHex(e.subtext||t.subtext),e.btnColorHeader=Q.validateHex(e.btnColorHeader||Q.getLuminousColorShade(e.header,.3)),e.subheader=Q.validateHex(e.subheader||Q.getLuminousColorShade(e.header,.2)),e.verticalBorder=Q.validateHex(e.verticalBorder||Q.getLuminousColorShade(e.header,.1)),e.btnColorSubheader=Q.validateHex(e.btnColorSubheader||Q.getLuminousColorShade(e.header,-.1)),e.inactive=Q.validateHex(e.inactive||Q.getLuminousColorShade(e.header,-.2)),e.horizontalBorder=Q.validateHex(e.horizontalBorder||Q.getLuminousColorShade(e.header,-.3)),e.hover=Q.validateHex(e.hover||Q.getLuminousColorShade(e.header,-.5)),e.button=Q.validateHex(e.button||Q.getLuminousColorShade(e.text,-.8)),e.lightest=e.btnColorHeader,e.lighter=e.subheader,e.light=e.verticalBorder,e.base=e.header,e.contrast=e.text,e.dark=e.btnColorSubheader,e.darker=e.inactive,e.darkest=e.horizontalBorder;var o=Q.getContrastColor(e.darkest);return t.tooltipText="white"===o?"ffffff":"000000",e.tooltipText=Q.validateHex(e.tooltipText||t.tooltipText),function(e){return"\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ".concat(e.darkest," !important;\n  border-bottom: 1px solid ").concat(e.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(e.darkest," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(e.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(e.base," !important;\n}\n\n.accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(e.lighter," !important;\n  color: ").concat(e.contrast," !important;\n}\n\n.builder-header.is-personalizable{\n  background-color: ").concat(e.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(e.base,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(e.contrast,";\n}\n\n.header.is-personalizable h1 {\n  color: ").concat(e.contrast,";\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  color: ").concat(e.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable .header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(e.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable button:not(:disabled):hover,\n.header.is-personalizable button:not(:disabled):hover .icon,\n.header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\n.header.is-personalizable .toolbar [class*='btn']:hover:not([disabled]) {\n  color: ").concat(e.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(e.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(e.lightest,";\n  border-color:").concat(e.lightest,";\n  color: ").concat(e.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(e.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(e.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(e.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-uplift-"] .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\nhtml[class*="theme-uplift-"] .is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  opacity: 1;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ').concat(e.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(e.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(e.contrast," !important;\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(e.dark,";\n  border-color: ").concat(e.dark,";\n  color: ").concat(e.contrast,";\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(e.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(e.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(e.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(e.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(e.hover," !important;\n  border-bottom-color: ").concat(e.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(e.hover," !important;\n  border-bottom-color: ").concat(e.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(e.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(e.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:hover {\n  background-color: ").concat(e.darker," !important;\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(e.darkest,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent !important;\n  color: ').concat(e.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(e.darker," !important;\n  color: ").concat(e.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(e.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(e.darkest," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(e.darker," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(e.contrast," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(e.contrast," !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(e.base," , ").concat(Q.hexToRgba(e.base,0),") !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(Q.hexToRgba(e.base,0),", ").concat(e.base,") !important;\n}\n\n.hero-widget.is-personalizable {\n  background-color: ").concat(e.lighter,";\n}\n\n.hero-widget.is-personalizable .hero-bottom {\n  background-color: ").concat(e.base,";\n}\n\n.hero-widget.is-personalizable .hero-footer .hero-footer-nav li::before {\n  color: ").concat(e.light,";\n}\n\n.hero-widget.is-personalizable .chart-container .arc {\n  stroke: ").concat(e.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container .bar {\n  stroke: ").concat(e.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container.line-chart .dot {\n  stroke: ").concat(e.lighter,";\n}\n\n.application-menu.is-personalizable {\n  background-color: ").concat(e.lighter,";\n  border-right: ").concat(e.light,";\n}\n\n.application-menu.is-personalizable .application-menu-header {\n  background-color: ").concat(e.lighter,";\n  border-bottom-color: ").concat(e.light,";\n}\n\n.application-menu.is-personalizable .application-menu-footer {\n  background-color: ").concat(e.lighter,";\n  border-top-color: ").concat(e.light,";\n}\n\n.application-menu.is-personalizable button .icon,\n.application-menu.is-personalizable button span,\n.application-menu.is-personalizable .hyperlink {\n  color: ").concat(e.contrast," !important;\n}\n\n.application-menu.is-personalizable button:not(:disabled):hover .icon,\n.application-menu.is-personalizable button:not(:disabled):hover span,\n.application-menu.is-personalizable .hyperlink:hover {\n  color: ").concat(e.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .accordion.panel {\n  background-color: ").concat(e.lighter,";\n}\n\n.application-menu.is-personalizable .name-xl,\n.application-menu.is-personalizable .name,\n.application-menu.is-personalizable .accordion-heading {\n  color: ").concat(e.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header {\n  background-color: ").concat(e.lighter," !important;\n  border: 1px solid transparent !important;\n  color: ").concat(e.contrast,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header .icon {\n  color: ").concat(e.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(e.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected .icon {\n  color: ").concat(e.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header:hover {\n  background-color: ").concat(e.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-focused:not(.hide-focus) {\n  border: 1px solid ").concat(e.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: ").concat(e.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ").concat(e.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before,\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ").concat(e.contrast,";\n}\n\n.application-menu.is-personalizable button:focus:not(.hide-focus),\n.application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(e.contrast," !important;\n  box-shadow: none !important;\n}\n\n.application-menu .application-menu-header button:hover,\n.application-menu .application-menu-footer button:hover {\n  background-color: ").concat(e.base," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield {\n  color: ").concat(e.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(e.contrast," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield::placeholder {\n  color: ").concat(e.contrast,";\n  opacity: .5;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .icon {\n  color: ").concat(e.contrast,";\n  opacity: .8;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper.active .icon {\n  color: ").concat(e.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header {\n  background-color: ").concat(e.base," !important;\n  border-top-color: transparent;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header:hover {\n  background-color: ").concat(e.darkest," !important;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion-heading {\n  border-top-color: ").concat(e.darkest,";\n}\n\n.application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ").concat(e.base,";\n  border-bottom: none !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(e.lighter,";\n  border-left: ").concat(e.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ').concat(e.dark,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header:hover {\n  background-color: ').concat(e.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header.is-selected {\n  background-color: ').concat(e.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before {\n  background-color: ').concat(e.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ').concat(e.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  color: ').concat(e.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded {\n  background-color: ').concat(e.dark," !important;\n  color: ").concat(e.subtext,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused:not(.hide-focus):not(.is-expanded) {\n  border-color: ').concat(e.contrast,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-selected::before {\n  background-color: ').concat(e.darker," !important;\n  border-color: ").concat(e.darker,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(e.contrast,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded + .accordion-pane {\n  background-color: ').concat(e.dark,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded:hover::before {\n  border-color: ').concat(e.darkest," !important;\n  background-color: ").concat(e.darkest," !important;\n}\n\n.is-personalizable .personalize-header,\n.is-personalizable.tab-container {\n  background-color: ").concat(e.dark," !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ").concat(e.lighter," !important;\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(e.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg {\n  color: ").concat(e.contrast,";\n  opacity: .8;\n}\n\n.is-personalizable .personalize-actionable:hover:not([disabled]),\n.is-personalizable .personalize-actionable:hover:not([disabled]) svg {\n  color: ").concat(e.contrast,";\n  opacity: 1;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(e.contrast,";\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(e.contrast,";\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(e.light,";\n}\n\n.is-personalizable .personalize-horizontal-bottom-border {\n  border-bottom: 1px solid ").concat(e.darkest,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(e.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: rgba(255, 255, 255, .8);\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(e.text,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(e.text," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .arc,\n.hero-widget.is-personalizable .hero-header .chart-container .bar,\n.hero-widget.is-personalizable .hero-header .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-content .chart-container .arc,\n.hero-widget.is-personalizable .hero-content .chart-container .bar,\n.hero-widget.is-personalizable .hero-content .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-footer .chart-container .arc,\n.hero-widget.is-personalizable .hero-footer .chart-container .bar,\n.hero-widget.is-personalizable .hero-footer .chart-container.line-chart .dot {\n    stroke: ").concat(e.lighter," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container text,\n.hero-widget.is-personalizable .hero-content .chart-container text,\n.hero-widget.is-personalizable .hero-footer .chart-container text {\n    fill: ").concat(e.text," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-content .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-footer .chart-container .chart-legend-item-text {\n  color: ").concat(e.text,";\n  fill: ").concat(e.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .axis path, .chart-container .axis line,\n.hero-widget.is-personalizable .hero-header .chart-container .axis .tick0 line {\n  stroke: ").concat(e.subtext," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .title,\n.hero-widget.is-personalizable .hero-content .title,\n.hero-widget.is-personalizable .hero-footer .title {\n  color: ").concat(e.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-content .btn-tertiary,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-header .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon\n {\n  color: ").concat(e.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon\n {\n  color: ").concat(e.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(e.subtext,",\n    0 0 2px 1px ").concat(e.subtext,";\n}\n\n.header.is-personalizable .toolbar [class*='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class*='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .toolbar [class*='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class*='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(e.subtext,",\n    0 0 2px 1px ").concat(e.subtext,";\n}\n\n.tooltip.is-personalizable {\n  background-color: ").concat(e.darkest,";\n  border-color: ").concat(e.darkest,";\n}\n.tooltip.is-personalizable .chart-swatch .swatch-row div {\n  border-bottom-color: ").concat(e.darkest,";\n}\n.tooltip.is-personalizable,\n.tooltip.is-personalizable p,\n.tooltip.is-personalizable .chart-swatch .swatch-row span,\n.tooltip.is-personalizable .chart-swatch .swatch-row b {\n  color: ").concat(e.tooltipText,";\n}\n.tooltip.is-personalizable.top .arrow::after {\n  border-top-color: ").concat(e.darkest,";\n}\n.tooltip.is-personalizable.right .arrow::after {\n  border-right-color: ").concat(e.darkest,";\n}\n.tooltip.is-personalizable.bottom .arrow::after {\n  border-bottom-color: ").concat(e.darkest,";\n}\n.tooltip.is-personalizable.left .arrow::after {\n  border-left-color: ").concat(e.darkest,";\n}\n\n    ")}(e)},setFont:function(e){$("html").addClass("font-".concat(e))},setColors:function(e){return""===e?(this.setColorsToDefault(),this):e?(this.appendStyleSheet(this.getColorStyleSheet(e)),this.settings.colors=e,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||J.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-soho-light"}),this):this},setColorsToDefault:function(){this.settings.colors="";var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),this.element.triggerHandler("colorschanged",{colors:J.themeColors().brand.primary.alt.value,isDefault:!0,theme:this.currentTheme||"theme-soho-light"})},getThemeFromStylesheet:function(){var e=$("#stylesheet, #sohoxi-stylesheet"),t="";if(e.length>0){var i=e.attr("href"),n=(t=i.substring(i.lastIndexOf("/")+1)).lastIndexOf("?");n>-1&&(t=t.slice(0,n)),t=t.replace(".min","").replace(".css","")}return t},setTheme:function(e){var t=$("html");if(e)if(this.currentTheme=e,J.currentTheme.id!==e){["light","dark","high-contrast"].indexOf(e)>-1&&(e+="-theme"),t.removeClass((function(e,t){return t.split(" ").filter((function(e){return e.indexOf("theme")>-1})).join()})).addClass(e),this.blockUi();var i=this,n=$("#stylesheet, #sohoxi-stylesheet"),s=$('<link rel="stylesheet">'),a=n.attr("href");s.on("load",(function(){n.remove(),i.unBlockUi(),i.triggerEvent(e)})).on("error",(function(){i.unBlockUi()}));var o=a?a.substring(0,a.lastIndexOf("/")):"",r=!!a&&a.indexOf(".min")>-1;s.attr({id:n.attr("id"),href:h.stripTags("".concat(o,"/").concat(e).concat(r?".min":"",".css"))}),n.removeAttr("id"),n.before(s),this.settings.theme=e,J.setTheme(e)}else t.hasClass(e)||t.addClass(e)},blockUi:function(){if(this.settings.blockUI){var e="#bdbdbd";switch(J){case"light":e="#f0f0f0";break;case"dark":e="#313236";break;case"high-contrast":e="#d8d8d8";break;default:e="#f0f0f0"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",e),$("body").append(this.pageOverlay)}},triggerEvent:function(e){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||J.themeColors().brand.primary.alt.value,theme:e||"theme-soho-light"}),$("body").trigger("resize")},unBlockUi:function(){var e=this;e.settings.blockUI&&e.pageOverlay&&e.pageOverlay.fadeOut(300,(function(){e.pageOverlay.remove(),e.pageOverlay=void 0}))},updated:function(e){if(!e)return this;var t=C.extend({},this.settings);return this.settings=C.mergeSettings(this.element[0],e,this.settings),this.settingsDidChange(t,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(t,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(t,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(e,t){return this.settings[t]&&this.settings[t]!==e[t]},teardown:function(){return this.element.off("updated.".concat("personalize")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"personalize")}};var te={theme:"theme-soho-light"};"object"===i(window.SohoConfig)&&"object"===i(window.SohoConfig.personalize)&&(te=window.SohoConfig.personalize);var ie=new ee(document.documentElement,te);$.fn.personalize=function(e){return this.each((function(){var t=$.data(this,"personalize");t||(t=$.data(this,"personalize",ie)),t.updated(e)}))},$.fn.disable=function(){return $.each(this.data(),(function(e,t){t instanceof jQuery||t&&t.disable&&t.disable()})),this.prop("disabled",!0),this},$.fn.enable=function(){return $.each(this.data(),(function(e,t){t instanceof jQuery||t&&t.enable&&t.enable()})),this.prop({disabled:!1,readonly:!1}),this},$.fn.readonly=function(){return $.each(this.data(),(function(e,t){t instanceof jQuery||t&&t.readonly&&t.readonly()})),this.prop("readonly",!0),this},$((function(){var e,t;$(".label-text").closest("label, .label").each((function(){t=$("input, textarea, select",this),e=t.attr("class"),$(this).addClass((function(){return"inline".concat(e?" inline-".concat(-1===e.indexOf(" ")?e:e.substr(0,e.indexOf(" "))):"")}))}))})),$((function(){$("input:radio").on("click.radios",(function(){this.focus()}))})),$((function(){var e=function(e,t){for(var i=0,n=e.length;i<n;i++)$(e[i]).parent().addClass(t)};e($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),e($(".field > input:radio, .field > .inline-radio"),"field-radio")})),$((function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach((function(e){-1!==e.className.indexOf("accessible")&&(e.querySelector(".required-asterisk")||e.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))}));var e=[].slice.call(document.body.querySelectorAll("[data-validate]"));e.forEach((function(e){var t=e.getAttribute("data-validate");t&&t.indexOf("required")>-1&&e.setAttribute("aria-required",!0)})),(e=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach((function(e){var t=e.getAttribute("id");if(t){var i=document.body.querySelector('label[for="'.concat(t,'"]'));i&&i.setAttribute("aria-hidden",!0)}}))})),$.fn.highlight=function(e){return this.length&&e&&e.length?this.each((function(){!function e(t,i){var n,s,a,o,r=0;if(3===t.nodeType)n=t.data.toUpperCase().indexOf(i),(n-=t.data.substr(0,n).toUpperCase().length-t.data.substr(0,n).length)>=0&&((s=document.createElement("mark")).className="highlight",(a=t.splitText(n)).splitText(i.length),o=a.cloneNode(!0),s.appendChild(o),a.parentNode.replaceChild(s,a),r=1);else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var l=0;l<t.childNodes.length;++l)l+=e(t.childNodes[l],i);return r}(this,e.toUpperCase())})):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each((function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()})).end()};var ne={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder"};function se(e,t){this.settings=C.mergeSettings(e,t,ne),this.element=$(e),this.init()}se.prototype={init:function(){this.isTouch=m.features.touch,this.isIe="ie"===m.browser.name,this.handleEvents()},getElementByTouchInList:function(e,t,i){for(var n=!1,s=$(e),a=0,o=s.length;a<o;a++){var r=$(s[a]),l=r.offset();t<=l.left||t>=l.left+r.outerWidth()||i<=l.top||i>=l.top+r.outerHeight()||(n=r)}return n},dragTouchElement:function(e,t){var i=e.originalEvent.changedTouches[0];t[0].style.top="".concat(i.pageY-this.offset.y,"px"),t[0].style.left="".concat(i.pageX-this.offset.x,"px")},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,ne)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"arrange")},getVisualIndex:function(e){var t=this.settings,i=null;if(t.isVisualItems){var n=this.element.children().not('[data-arrange-exclude="true"]');t.itemsSelector&&(n=$(t.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),i=n.index(e)}return i},handleEvents:function(){var e,t,i=this,n=this.settings,s={},a=this.element.children().not('[data-arrange-exclude="true"]'),o=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));n.itemsSelector&&(a=$(n.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),o=$("<".concat(a.first()[0].tagName," />"))),n.placeholder&&(o=$(n.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=n.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=o,this.isTouch||this.placeholders.addClass("".concat(n.placeholderCssClass," draggable")),$(this.handle,a).addClass("draggable").on("mousedown.arrange touchstart.arrange",(function(){t=!0})).on("mouseup.arrange touchend.arrange",(function(){t=!1})),this.connectWith&&(a=a.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=a,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,o]).not("a[href], img").on("selectstart.arrange",(function(){return this.dragDrop&&this.dragDrop(),this.isIe})).end().each((function(){$(this).on(i.dragStart,(function(a){if(i.handle&&!t){if(i.isTouch)return;return!1}t=!1,i.dragging=$(this),e=i.dragging.addClass("arrange-dragging").index();var o=n.isVisualItems?i.getVisualIndex(i.dragging):e;$.extend(s,{start:i.dragging,startIndex:o});var r=i.element.triggerHandler("beforearrange",s);if("boolean"==typeof r&&!r||"string"==typeof r&&"false"===r.toLowerCase())i.dragging=null;else if(i.isTouch){var l=i.dragging[0].getBoundingClientRect(),c=a.originalEvent.changedTouches[0];i.offset={x:c.pageX-l.left,y:c.pageY-l.top},i.placeholderTouch=i.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(i.dragging),i.dragTouchElement(a,i.placeholderTouch)}else{var d=a.originalEvent.dataTransfer;d.effectAllowed="move",d.setData("Text","dummy")}})).on(i.dragEnd,(function(){if(i.dragging){if(i.isTouch&&(i.dragging.css("opacity",1),i.placeholderTouch.remove()),i.placeholders.filter(":visible").after(i.dragging),i.dragging.removeClass("arrange-dragging").show(),i.placeholders.detach(),e!==i.dragging.index()){var t=n.isVisualItems?i.getVisualIndex(i.dragging):i.dragging.index();$.extend(s,{end:i.dragging,endIndex:t}),i.element.triggerHandler("arrangeupdate",s)}i.dragging=null,i.placeholderTouch=null}})).on(i.dragWhileDragging,(function(e){if(i.dragging){var t,r,l=this;if(e.preventDefault(),"drop"===e.type)return e.stopPropagation(),i.dragging.trigger("dragend.arrange"),!1;if(i.isTouch){var c=e.originalEvent.touches[0];l=i.getElementByTouchInList(a,c.pageX,c.pageY)||l}if(l=$(l),i.isTouch||(e.originalEvent.dataTransfer.dropEffect="move"),a.is(l)&&o.index()!==l.index())i.isTouch?i.dragging.css("opacity",0):i.dragging.hide(),o.index()<l.index()?(o.insertAfter(l),t=l.index(),r=n.isVisualItems?i.getVisualIndex(l):t):(o.insertBefore(l),t=o.index(),r=n.isVisualItems?i.getVisualIndex(o):t),$.extend(s,{over:l,overIndex:r}),i.element.triggerHandler("draggingarrange",s),C.fixSVGIcons(l),i.placeholders.not(o).detach();else i.placeholders.is(this)||(i.placeholders.detach(),i.element.append(o));if(!i.isTouch)return!1;i.dragTouchElement(e,i.placeholderTouch)}}))}))}},$.fn.arrange=function(e){return this.each((function(){var t=$.data(this,"arrange");t?t.updated(e):t=$.data(this,"arrange",new se(this,e))}))};var ae={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function oe(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,ae),this.init()}oe.prototype={init:function(){this.handleEvents()},finish:function(e,t){var i={top:t,left:e};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(i.underElements=this.getElementsFromPoint(i.left,i.top)),i.offset=this.offset,i.clone=this.clone,this.element.trigger("dragend",i),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete i.top,"y"===this.settings.axis&&delete i.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(e,t){var i={left:e,top:t};if("x"===this.settings.axis&&delete i.top,"y"===this.settings.axis&&delete i.left,this.settings.containment&&(this.settings.containment instanceof jQuery?this.container=this.settings.containment:"parent"===this.settings.containment?this.container=this.element.parent():"window"===this.settings.containment?this.container=$(window):"container"===this.settings.containment?this.container=this.element.closest(".page-container"):this.container=$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),i.top>this.upperYLimit&&(i.top=this.upperYLimit),i.left>this.upperXLimit&&(i.left=this.upperXLimit),i.top<0&&(i.top=0),i.left<0&&(i.left=0),"container"===this.settings.containment&&i.left<=1&&(i.left=1)),this.settings.obstacle){var n=this.clone?this.clone.offset():this.element.offset(),s=this.clone?this.clone.outerWidth():this.element.outerWidth(),a=i.left>n.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var o=$(this.obstacle).offset();this.constraints={top:o.top,left:o.left,bottom:o.top+this.obstacle.outerHeight(),right:o.left+this.obstacle.outerWidth()}}!a&&this.originalPos.left>this.constraints.left&&i.left<=this.constraints.right&&(i.left=this.constraints.right),a&&this.originalPos.left+s<=this.constraints.left&&i.left+s>=this.constraints.left&&(i.left=this.constraints.left-this.obstacle.outerWidth())}var r=function(e,t,i){void 0!==t[i]&&(e[0].style[i]="".concat(t[i],"px"))};r(this.clone||this.element,i,"top"),r(this.clone||this.element,i,"left"),this.settings.underElements&&(i.underElements=this.getElementsFromPoint(i.left,i.top)),i.offset=this.offset,i.clone=this.clone,this.element.trigger("drag",i)},getElementsFromPoint:function(e,t){var i=[];if(document.elementsFromPoint)i=document.elementsFromPoint(e,t);else if(document.msElementsFromPoint)i=document.msElementsFromPoint(e,t);else{for(var n,s,a,o,r=999,l=[];(o=document.elementFromPoint(e,t))&&-1===i.indexOf(o)&&null!==o&&r>-1;)r--,i.push(o),l.push({value:o.style.getPropertyValue("pointer-events")||"",priority:o.style.getPropertyPriority("pointer-events")}),o.style.setProperty("pointer-events","none","important");for(n=0,s=i.length;n<s;n++)a=l[n],i[n].style.setProperty("pointer-events",a.value,a.priority)}return i},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings))},destroy:function(){$.removeData(this.element[0],"drag"),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var e=this;e.offset=null,e.element.attr("draggable",!1),"onpointerdown"in window||"onmspointerdown"in window||e.element.on("touchstart.draggable gesturestart.draggable",(function(t){var i=$(this).position(),n=t.originalEvent;e.offset={x:n.changedTouches[0].pageX-i.left,y:n.changedTouches[0].pageY-i.top},e.originalPos=i,e.element.addClass("is-dragging"),i.offset=e.offset,i.clone=e.clone,e.element.trigger("dragstart",i)})).on("touchmove.draggable gesturechange.draggable",(function(t){t.preventDefault();var i=t.originalEvent;if(!(i.targetTouches.length>1)){var n=i.changedTouches[0].pageX-e.offset.x,s=i.changedTouches[0].pageY-e.offset.y;e.move(n,s)}})).on("touchend.draggable gestureend.draggable touchcancel.draggable",(function(t){t.preventDefault();var i=t.originalEvent.changedTouches[0];e.finish(i.pageX-e.offset.x,i.pageY-e.offset.y)})),e.element.on("mousedown.draggable",(function(t){t.preventDefault();var i=e.settings.clonePosIsFixed?e.element[0].getBoundingClientRect():e.element.position();e.offset={x:t.pageX-i.left,y:t.pageY-i.top},e.originalPos=i,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",(function(t){t.preventDefault(),e.move(t.pageX-e.offset.x,t.pageY-e.offset.y)})),$(document).on("mouseup.draggable",(function(i){i.preventDefault(),e.finish(t.pageX-e.offset.x,i.pageY-e.offset.y)})),e.element.on("mouseup.draggable",(function(t){t.preventDefault(),e.finish(t.pageX-e.offset.x,t.pageY-e.offset.y)})),!e.clone&&e.settings.clone&&(e.clone=e.element.clone(!0),"parent"===e.settings.cloneAppendTo&&(e.settings.cloneAppendTo=e.element.parent()),e.clone.addClass(e.settings.cloneCssClass).appendTo(e.settings.cloneAppendTo||"body")),e.element.addClass("is-dragging"),e.element.trigger("dragstart",[i,e.clone])}))}},$.fn.drag=function(e){return this.each((function(){var t=$.data(this,"drag");t?t.updated(e):t=$.data(this,"drag",new oe(this,e))}))};var re={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},le=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],ce=["top","left","right","bottom","center"],de=["left","center","right"],he=["top","center","bottom"],ue=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function pe(e){var t=this;return ue.forEach((function(i){if(null!==e[i])return"x"===i||"y"===i?(t.setCoordinate(i,e[i]),void(t["original".concat(i)]=e[i])):void(t[i]=e[i])})),this.modified=!1,this.sanitize()}function ge(e,t){this.settings=C.mergeSettings(e,t,re),this.element=$(e),this.init()}pe.prototype={isReasonableDefault:function(e,t){return $.inArray(e,t)>-1},sanitize:function(){var e=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:re.callback,this.container=this.container instanceof $&&this.container.length?this.container:re.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:re.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,de)?this.parentXAlignment:re.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,he)?this.parentYAlignment:re.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,ce)?this.placement:re.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach((function(t,i){e.strategies[i]=e.isReasonableDefault(t,le)?t:e.strategies[i]}))},setCoordinate:function(e,t){this.isReasonableDefault(e,["x","y"])&&(isNaN(t)&&(t=0),this[e]=Math.round(t))}},ge.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var e=this.element[0].style.height,t=this.element[0].style.width;return e&&(this.originalStyles.height=e),t&&(this.originalStyles.width=t),this},handleEvents:function(){var e=this;return this.element.on("place.".concat("place"),(function(t,i,n){e.place(new pe({x:i,y:n}))})).on("updated.".concat("place"),(function(){e.updated()})),this},render:function(e){var t=/(px|%)/i;this.element.offset({left:e.x,top:e.y}),e.height&&(this.element[0].style.height=e.height+(t.test("".concat(e.height))?"":"px")),e.width&&(this.element[0].style.width=e.width+(t.test("".concat(e.width))?"":"px"))},place:function(e){var t=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[t])?(e instanceof pe||(e=new pe(e)),null==e.x&&null==e.y?t:(this.clearOldStyles(),e.parent?this.placeWithParent(e):this.placeWithCoords(e))):t},placeWithParent:function(e){if(!e.parent||!e.parent.length)return[void 0,void 0];var t,i=this,n=this.getContainer(e),s=n.length&&n[0]===document.body;m.rtl&&n.length&&(t=u.getDimensions(n[0]),this.element.css({left:"".concat(t.left,"px"),top:"".concat(t.right,"px")}));var a=u.getDimensions(e.parent[0]),o=u.getDimensions(this.element[0]),r=s?$(window).scrollLeft():n.scrollLeft(),l=s?$(window).scrollTop():n.scrollTop();function c(e){var t=function(e){var t,i,n=e.placement,c=e.parentXAlignment,d=e.parentYAlignment;switch(n){case"top":i=a.top-o.height-e.y+(s?l:0);break;case"left":t=a.left-o.width-e.x+(s?r:0);break;case"right":t=a.right+e.x+(s?r:0);break;default:i=a.bottom+e.y+(s?l:0)}if("top"===n||"bottom"===n){var h=Math.round(s?document.body.offsetWidth:null);switch(c){case"left":t=s&&h<Math.round(o.left)+Math.round(o.width)?a.left+e.x+r:a.left-e.x+(s?r:0);break;case"right":t=s&&Math.round(o.right)-Math.round(o.width)<0?a.left-e.x+r:a.right-o.width+e.x+(s?r:0);break;default:t=a.left+(a.width-o.width)/2+e.x+(s?r:0)}}if("right"===n||"left"===n)switch(d){case"top":i=a.top-e.y+(s?l:0);break;case"bottom":i=a.bottom-o.height+e.y+(s?l:0);break;default:i=a.top+(a.height-o.height)/2+e.y+(s?l:0)}return[t,i]}(e);return e.setCoordinate("x",t[0]),e.setCoordinate("y",t[1]),i.render(e),e=i.handlePlacementCallback(e)}return e.useParentWidth&&(e.width=a.width),e.useParentHeight&&(e.height=a.height),(e=c(e)).strategies.forEach((function(t){(e=i.checkBleeds(e)).bleeds&&(e=function(){switch(t){case"nudge":return i.nudge(e);case"clockwise":return i.clockwise(e);case"flip":return(e=i.flip(e)).setCoordinate("x",e.originalx),e.setCoordinate("y",e.originaly),e=c(e);case"shrink":return i.shrink(e);case"shrink-x":return i.shrink(e,"x");case"shrink-y":return i.shrink(e,"y");default:return e}}(),i.render(e))})),e.element=this.element,this.element.trigger("afterplace",[e]),e},placeWithCoords:function(e){return this.render(e),e=this.handlePlacementCallback(e),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.nudge(e)),this.render(e),(e=this.checkBleeds(e)).bleeds&&(e=this.shrink(e)),this.render(e),this.element.trigger("afterplace",[e]),e},handlePlacementCallback:function(e){var t=e.callback||this.settings.callback;return e.element=this.element,t&&"function"==typeof t&&(e=t(e)),this.render(e),e},accountForScrolling:function(e){var t=e.container,i=window.getComputedStyle(this.element[0]).position;if("fixed"===i)return!1;if(t&&t.length||(t=this.element.parents().filter((function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===i}))),!t||!t.length)return!0;if(t[0]===document.body)return!1;var n=window.getComputedStyle(t[0]);return"fixed"!==(i=n.position)&&("absolute"!==i||"hidden"!==n.overflow)},getContainer:function(e){if(e.container instanceof $&&e.container.length)return e.container;var t=this.element.parents(".modal");return t.length?t:$(document.body)},checkBleeds:function(e){var t,i=this.settings.bleedFromContainer,n=this.getContainer(e),s=n.length&&n[0]===document.body,a=this.element[0].getBoundingClientRect(),o={},r=n?n[0].getBoundingClientRect():{},l=s?$(window).scrollLeft():n.scrollLeft(),c=s?$(window).scrollTop():n.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function u(e){switch(e){case"top":return(i?0:r.top)-(s?-1*c:0);case"left":return(i?0:r.left)-(s?-1*l:0);case"right":return(i?h:r.right)-(s?-1*l:0);default:return(i?d:r.bottom)-(s?-1*c:0)}}o.width=a.width,o.height=a.height,o.top=a.top,o.right=a.right,o.bottom=a.bottom,o.left=a.left;var p=u("right");if(o.width>=p){t=o.width-p+20;var g=o.width-t;e.width=g,this.element[0].style.width="".concat(g,"px"),o.width=g}var f=u("bottom");if(o.height>=f){t=o.height-f+20;var m=o.height-t;e.height=m,this.element[0].style.height="".concat(m,"px"),o.height=m}var v=o.right>u("right"),b=o.left<u("left"),y=o.top<u("top"),w=o.bottom>u("bottom");return v||b||y||w?(e.bleeds={},e.bleeds.right=v?o.right-u("right"):null,e.bleeds.left=b?-(o.left-u("left")):null,e.bleeds.top=y?-(o.top-u("top")):null,e.bleeds.bottom=w?o.bottom-u("bottom"):null,e):(e.bleeds=void 0,e)},nudge:function(e){e.nudges||(e.nudges={x:0,y:0});var t=0;return e.bleeds.right&&(t=Math.abs(e.bleeds.right)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x-t),e.nudges.x-=t),e.bleeds.left&&(t=Math.abs(e.bleeds.left)+Math.abs(e.containerOffsetX),e.setCoordinate("x",e.x+t),e.nudges.x+=t),e.bleeds.top&&(t=Math.abs(e.bleeds.top)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y+t),e.nudges.y+=t),e.bleeds.bottom&&(t=Math.abs(e.bleeds.bottom)+Math.abs(e.containerOffsetY),e.setCoordinate("y",e.y-t),e.nudges.y-=t),e.wasNudged=!0,e.bleeds=void 0,e},flip:function(e){if(!e.bleeds[e.placement])return e;if(e.attemptedFlips||(e.attemptedFlips=[]),e.attemptedFlips.push(e.placement),e.attemptedFlips.length>3)return e=this.giveup(e);var t=this.accountForScrolling(e),i=["left","right"].indexOf(e.placement)>-1,n=this.settings.bleedFromContainer,s=this.getContainer(e),a=s.length&&s[0]===document.body,o=s?s[0].getBoundingClientRect():{},r=e.parent[0].getBoundingClientRect(),l=a?$(window).scrollLeft():s.scrollLeft(),c=a?$(window).scrollTop():s.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function u(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function p(i){var s=0;switch(i){case"left":s=(n?0:o.left)-(t?l:0)-r.left+e.containerOffsetX;break;case"right":s=(n?h:o.right)-(t?l:0)-r.right-e.containerOffsetX;break;case"top":s=(n?0:o.top)-(t?c:0)-r.top+e.containerOffsetY;break;default:s=(n?d:o.bottom)-(t?c:0)-r.bottom-e.containerOffsetY}return Math.abs(s)}function g(t){return $.inArray(t,e.attemptedFlips)>-1}return e.placement=function(t){var n=u(t),s=i?"top":"left",a=u(s),o=p(t),r=p(n);if(!g(n))return o>=r?t:(e.wasFlipped=!0,n);var l=e.originalx;e.originalx=e.originaly,e.originaly=l;var c=p(s),d=p(a);if(!g(s)){if(c>=d)return s;if(!g(a))return a}return t}(e.placement),e},clockwise:function(e){return e},shrink:function(e,t){var i=0,n=0,s=null==t||"x"===t,a=null==t||"y"===t,o=this.accountForScrolling(e),r=u.getDimensions(this.element[0]),l=this.settings.bleedFromContainer,c=this.getContainer(e),d=c?c[0].getBoundingClientRect():{},h=c.length&&c[0]===document.body,p=null===e.parent,g=h?$(window).scrollLeft():c.scrollLeft(),f=h?$(window).scrollTop():c.scrollTop(),m=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=Math.max(document.documentElement.clientWidth,window.innerWidth||0),b=(o?g:0)+(l?0:d.left)+e.containerOffsetX,y=(o?f:0)+(l?0:d.top)+e.containerOffsetY,w=(o?g:0)+(l?v:d.right)-e.containerOffsetX,x=(o?f:0)+(l?m:d.bottom)-e.containerOffsetY,C=w-b,k=x-y;if(!p){var T=u.getDimensions(e.parent[0]),S=T.top-y,A=x-T.bottom,D=T.left-b,E=w-T.right;C=D>E?D:E,k=S>A?S:A}return s&&(r.width>C&&(e.width=C),r.left<b&&(i=b-r.left,e.setCoordinate("x",e.x+i))),a&&(r.height>k&&(e.height=k),r.top<y&&(n=y-r.top,e.setCoordinate("y",e.y+n))),e},giveup:function(e){return e.giveup=!0,e.strategy=this.settings.strategy,e.placement=this.settings.placement,e},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var e=this.originalStyles;return e&&(e.width&&(this.element[0].style.width=e.width),e.height&&(this.element[0].style.height=e.height)),this},setArrowPosition:function(e,t,i){var n=t.parent,s=i.find("div.arrow"),a=t.placement,o={},r=i[0].getBoundingClientRect(),l={},c={},d=!1;if(n&&n.length&&s.length){s[0].removeAttribute("style"),i.removeClass("top right bottom left").addClass(a),n.is(".colorpicker")&&(n=n.next(".trigger")),n.is(".datepicker, .timepicker")&&(n=n.next(".icon")),n.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(n=n.find(".icon").last()),n.is(".searchfield-category-button")&&(n=n.find(".icon.icon-dropdown")),n.is(".colorpicker-editor-button")&&(n=n.find(".trigger .icon")),n.is(".fontpicker")&&(n=n.find(".icon.icon-dropdown")),n.length||(n=t.parent),o=n.length?n[0].getBoundingClientRect():o,l=s.length?s[0].getBoundingClientRect():l,c={};var h,u,p={};p[(u=a,"right"===u||"left"===u?"margin-top":"margin-left")]=(h=0,"left"!==a&&"right"!==a||(h=o.top+o.height/2-(l.top+l.height/2),c.top=l.top+h,c.bottom=l.bottom+h,(c.top<=r.top||c.bottom>=r.bottom)&&(d=!0)),"top"!==a&&"bottom"!==a||(h=o.left+o.width/2-(l.left+l.width/2),c.left=l.left+h,c.right=l.right+h,(c.left<=r.left||c.right>=r.right)&&(d=!0)),h),d&&(p.display="none"),s.css(p)}},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat("place"," place.").concat("place")),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"place")}},$.fn.place=function(e){return this.each((function(){var t=$.data(this,"place");t?t.updated(e):t=$.data(this,"place",new ge(this,e))}))};var fe={use:"user-profile",focusable:!1};function me(e,t){this.settings=C.mergeSettings(e,t,fe),this.element=$(e),this.init()}me.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var e=this.element[0].getElementsByTagName("use")[0];return e?(e.getAttribute("href")!==this.getBasedUseTag()&&e.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return z.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var e=this.element.children("use");if(!e.length)return this;var t=e.attr("href");!t&&e.attr("xlink:href")&&(t=e.attr("xlink:href"));var i=z.url;return t&&z.element.length&&i.length&&(t=t.replace(i,"")),t=t.replace("#icon-",""),this.settings.use=t,this},handleEvents:function(){var e=this;return this.element.on("updated.".concat("icon"),(function(){e.updated()})),this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("icon")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"icon")}},$.fn.icon=function(e){return this.each((function(){var t=$.data(this,"icon");t?t.updated(e):t=$.data(this,"icon",new me(this,e))}))},function(){function e(e){var t={icon:"user-profile",classes:["icon"]};return"string"==typeof(e=e||$.extend({},t))&&(e=$.extend({},t,{icon:e.replace("icon-","")})),!e.classes&&e.class&&(e.classes=e.class,delete e.class),e.classes||(e.classes=[].concat(t.classes)),"string"==typeof e.classes&&(e.classes=e.classes.split(" ")),-1===e.classes.indexOf("icon")&&e.classes.push("icon"),e.icon||(e.icon=""),e}$.createIcon=function(t){return t=e(t),['<svg class="'.concat(t.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(t.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(e){return $($.createIcon(e))},$.createIconPath=function(t){return t=e(t),$.getBaseURL("#icon-".concat(t.icon.replace("icon-","")))},$.fn.changeIcon=function(e){e&&$(this).find("use").attr("href",$.createIconPath({icon:e}))},$.fn.getIconName=function(){var e=$(this),t=e.find("use");return 1===t.length&&t.attr("href")?t.attr("href").substr(t.attr("href").indexOf("#icon-")+6):1===t.length&&t.attr("xlink:href")?t.attr("xlink:href").substr(t.attr("xlink:href").indexOf("#icon-")+6):e.attr("data-icon")}}();var ve={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null};function be(e,t){this.settings=C.mergeSettings(e,t,ve),this.element=$(e),this.init()}be.prototype={get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!u.hasClass(this.element[0],"hidden")&&!u.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var e=document.activeElement;return!!this.activeElement.is($(e))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(e))},init:function(){this.uniqueId=C.uniqueId(this.element,"tooltip"),this.isTouch=m.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var e=this.element.attr("title");(!this.settings.popover&&e&&e.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:e,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.isPopover=null!==this.settings.content&&"object"===i(this.settings.content)||!0===this.settings.popover,this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),this.isRTL=M.isRTL(),u.addClass(this.element[0],"has-tooltip")},addAria:function(){this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.removeAttr("title").attr("aria-describedby",this.description.attr("id")),this.isPopover&&"click"===this.settings.trigger&&this.element.attr("aria-haspopup",!0))},addClassToLinks:function(e,t){if(e instanceof $&&e.length>0)return e;var i=$("<div/>").html(e);return $("a",i).addClass(t),i.html()},appendTooltip:function(){if(this.tooltip=this.settings.tooltipElement?$(this.settings.tooltipElement):$("#tooltip"),!this.tooltip.length){var e=this.settings.tooltipElement?this.settings.tooltipElement.substring(1,this.settings.tooltipElement.length):"tooltip";this.tooltip=$('<div class="'.concat(this.isPopover?"popover":"tooltip",' bottom is-hidden" role="tooltip" id="').concat(e,'"><div class="arrow"></div><div class="tooltip-content"></div></div>'))}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],"tooltip",this),this.setTargetContainer()},handleEvents:function(){var e,t=this;function i(){e&&e.destroy&&e.destroy()}function n(){i(),t.show()}function s(){i(),t.hide()}function a(){t.visible?s():n()}"hover"!==this.settings.trigger||this.settings.isError||(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat("tooltip"),(function(){t.isTouch||(i(),e=new W({duration:400/30,timeoutCallback:function(){t.show()}}),G.register(e))})).on("mouseleave.".concat("tooltip"),(function(){i(),e=new W({duration:400/30,timeoutCallback:function(){t.hide()}}),G.register(e)})).on("click.".concat("tooltip"),(function(){t.isTouch||n()})).on("longpress.".concat("tooltip"),(function(){n()})).on("updated.".concat("tooltip"),(function(){t.updated()})),"click"===this.settings.trigger&&this.element.on("click.".concat("tooltip"),(function(){a()})),"immediate"===this.settings.trigger&&(e=setTimeout((function(){a()}),1)),"focus"===this.settings.trigger&&this.element.on("focus.".concat("tooltip"),(function(){n()})).on("blur.".concat("tooltip"),(function(){t.settings.keepOpen||s()})),$(window).on("orientationchange.".concat("tooltip"),(function(){t.visible&&s()}),!1)},setContent:function(e,t){var i=this,n=this.settings.content,s=null==e;function a(){!0!==t&&(i.addAria(),i.render())}if(s&&null==n)return!1;if("function"==typeof n&&(e=n),s&&(e=n),e===this.content)return a(),!0;if(e instanceof $&&e.length)return this.content=e.addClass("hidden"),a(),!0;if("string"==typeof e){if(!e.length)return!1;if(0===(e=M.translate(e,{showAsUndefined:!0})||e).indexOf("#")){var o=$("".concat(e));return!!o.length&&(this.content=o,a(),!0)}}else{if("function"!=typeof e)return!1;var r=e.call(this.element);if(!r||"string"!=typeof r||!r.length)return!1;e=r}return this.content=h.sanitizeHTML(e),this.content="<p>".concat(this.content,"</p>"),a(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var e=this.tooltip[0].querySelectorAll(".tooltip-title")[0],t=this.tooltip[0].querySelectorAll(".tooltip-content")[0],i=this.settings.extraClass,n=this.content,s=this.tooltip[0],a="tooltip is-hidden";i&&(a+=" ".concat(i)),s.setAttribute("class",a),e&&(e.style.display="none"),t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains("arrow")&&t.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>');var o="string"==typeof this.content?n:n[0].innerHTML;u.html(t,o,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var e=this,t=this.settings.extraClass,i=this.tooltip.find(".tooltip-content"),n=this.tooltip[0].querySelector(".tooltip-title"),s=this.content,a="popover is-hidden";t&&(a+=" ".concat(t)),this.tooltip[0].setAttribute("class",a);var o="ie"===m.browser.name&&m.browser.isIE11()&&s instanceof $&&s.length&&"hover"===this.settings.trigger;if("string"==typeof s)s=$(s),i.html(s),i.find(".hidden").removeClass("hidden");else if(o){var r=s[0].cloneNode(!0),l=r.id;l&&(r.id="".concat(l,"-").concat(this.uniqueId)),i.html(r.outerHTML)}else i.html(s);var c=i.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),o||s[0].classList.remove("hidden"),i[0].firstElementChild.classList.remove("hidden");var d=this.settings.placementOpts.parent.width();if(M.isRTL()?this.settings.placementOpts.parentXAlignment=d>c?"left":"right":this.settings.placementOpts.parentXAlignment=d>c?"right":"left",null!==this.settings.title)if(n)n.style.display="",n.childNodes[0].nodeValue=this.settings.title;else{var h=document.createDocumentFragment();n=document.createElement("div"),u.html(n,this.settings.title,"*"),n.classList.add("tooltip-title"),this.settings.headerClass&&u.addClass(n,this.settings.headerClass,"filled"),h.appendChild(n),this.tooltip[0].insertBefore(h,this.tooltip[0].firstChild)}else n&&(n.style.display="none");if(this.settings.closebutton&&n&&!n.firstElementChild){var p=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",(function(){e.hide(!0)}));n.appendChild(p[0])}this.settings.initializeContent&&s.initialize()},open:function(){return this.show()},show:function(e,t){var i=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.settings.beforeShow&&!t){var n=function(e){("boolean"!=typeof e||e)&&(i.content=e,i.show({content:e},!0))};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](n,this.element):void this.settings.beforeShow(n,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),u.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),C.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var s=this.isTouch?"touchend":"mouseup",a=i.element.closest(".is-personalizable").length>0;i.tooltip[0].classList[a?"add":"remove"]("is-personalizable"),setTimeout((function(){$(document).on("".concat(s,".").concat("tooltip","-").concat(i.uniqueId),(function(e){var t=$(e.target);i.settings.isError||"focus"===i.settings.trigger||t.is(i.element)&&t.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||(0===t.closest(".popover").length&&0===t.closest(".dropdown-list").length&&i.hide(),1===t.closest(".popover").length&&t.closest(".popover").not(".monthview-popup").length&&i.element.prev().is(".datepicker")&&i.hide())})).on("keydown.".concat("tooltip","-").concat(i.uniqueId),(function(e){(27===e.which||i.settings.isError)&&i.hide()})),i.settings.isError&&!i.element.is(":visible, .dropdown")&&i.element.is("[aria-describedby]")&&i.hide(),void 0===window.orientation&&$("body").on("resize.".concat("tooltip"),(function(){i.hide()})),$("body").on("scroll.".concat("tooltip"),(function(){i.hide()})),i.element.closest(".modal-body-wrapper").on("scroll.tooltip",(function(){i.hide()})),i.element.closest(".scrollable").on("scroll.tooltip",(function(){i.hide()})),i.element.closest(".datagrid-wrapper").on("scroll.tooltip",(function(){i.hide()})),i.settings.isError&&i.tooltip.on("click.".concat("tooltip"),(function(){i.hide()})),i.element.trigger("aftershow",[i.tooltip])}),400)}}},setTargetContainer:function(){var e=$("body");this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(e=this.scrollparent),this.settings.parentElement&&(e=this.settings.parentElement),e[0].appendChild(this.tooltip[0])},handleAfterPlace:function(e,t){var i=this;this.tooltip.data("place").setArrowPosition(e,t,this.tooltip),setTimeout((function(){i.tooltip.triggerHandler("tooltipafterplace",[t])}))},position:function(){this.setTargetContainer(),this.tooltip[0].classList.remove("is-hidden");var e=this,t=this.isPopover?20:10,i=this.settings.placementOpts||{},n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=this.tooltip[0].getBoundingClientRect(),o=$.extend({},{x:0,y:t,container:this.scrollparent,containerOffsetX:i.containerOffsetX||this.settings.offset.left,containerOffsetY:i.containerOffsetY||this.settings.offset.top,parent:i.parent||this.activeElement,placement:i.placement||this.settings.placement,strategies:["flip","nudge"]},i);return"left"!==o.placement&&"right"!==o.placement||(o.x=t,o.y=0),a.width>=n&&/left|right/g.test(o.placement)||a.height>=s&&/top|bottom/g.test(o.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",(function(t,i){e.handleAfterPlace(t,i)})),this.tooltip.data("place")||this.tooltip.place(o),this.tooltip.data("place").place(o),this},close:function(){return this.hide()},hide:function(e){this.settings.keepOpen&&!e||!this.visible||(this.isInPopup?this.settings.content.addClass("hidden"):(u.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.triggerHandler("hide",[this.tooltip])))},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings));var t=this;return"immediate"===t.settings.trigger?setTimeout((function(){t.show()}),100):t.setContent(),this},detachOpenEvents:function(){this.tooltip.off("click.".concat("tooltip")),$(document).off(["keydown.".concat("tooltip","-").concat(self.uniqueId),"mouseup.".concat("tooltip","-").concat(self.uniqueId),"touchend.".concat("tooltip","-").concat(self.uniqueId)].join(" ")),$("body").off(["resize.".concat("tooltip"),"scroll.".concat("tooltip")].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat("tooltip")),this.element.closest(".scrollable").off("scroll.".concat("tooltip")),this.element.closest(".datagrid-body").off("scroll.".concat("tooltip"))},teardown:function(){return this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.element.removeAttr("aria-describedby").removeAttr("aria-haspopup"),this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data("tooltip")&&$.removeData(this.tooltip[0],"tooltip")),this.element.off(["mouseenter.".concat("tooltip"),"mouseleave.".concat("tooltip"),"longpress.".concat("tooltip"),"click.".concat("tooltip"),"updated.".concat("tooltip"),"focus.".concat("tooltip"),"blur.".concat("tooltip")].join(" ")),u.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat("tooltip")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tooltip")}},$.fn.tooltip=function(e){return this.each((function(){var t=$.data(this,"tooltip");t?t.updated(e):t=$.data(this,"tooltip",new be(this,e))}))};var ye=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive"],we=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],xe=["icon-favorite","btn-toggle"],Ce={style:ye[0],type:we[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,validate:!1};function ke(e,t){this.element=$(e),this.settings=C.mergeSettings(e,t,Ce),this.init()}ke.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element[0].disabled},set disabled(e){var t=!0===e;this.element[0].disabled=t},init:function(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},animateWithJS:function(e){var t=e[0].style,i="".concat(parseFloat(t.left)-100,"px"),n="".concat(parseFloat(t.top)-100,"px");e[0].style.opacity="0.4",e.animate({opacity:0,left:i,top:n,width:200,height:200},1e3)},createRipple:function(e){if(!(this.disabled||e&&(void 0!==e.which&&1!==e.which||-1===["click","touchstart"].indexOf(e.type)))){$("svg.ripple-effect",this.element).remove();var t,i,n=this.element.offset();e&&(m.features.touch?(e=e.originalEvent)&&e.touches&&1===e.touches.length&&(t=e.touches[0].pageX-n.left,i=e.touches[0].pageY-n.top):(t=e.pageX-n.left,i=e.pageY-n.top)),t=t<0?this.element.outerWidth()/2:t,i=i<0?this.element.outerHeight()/2:i;var s=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');if(s[0].style.left="".concat(t,"px"),s[0].style.top="".concat(i,"px"),this.element.prepend(s),!$.fn.cssPropSupport("animation")||m.browser.isSafari&&!m.features.touch||"firefox"===m.browser.name)s.removeClass("is-animation"),this.animateWithJS(s);else $("svg.ripple-effect",this.element).addClass("is-animation");setTimeout((function(){s.remove()}),1e3)}},render:function(){var e=this,t=this.element[0].classList;ye.indexOf(this.settings.style)>0&&t.add(this.settings.style),we.indexOf(this.settings.type)>0&&t.add(this.settings.type);var i=this.buttonsetAPI,n=!1;if(i){"modal"===i.settings.style&&(n=!0);["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(t[n?"remove":"add"]("btn"),t[n?"add":"remove"]("btn-modal"));["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(t[n?"remove":"add"]("btn-primary"),t[n?"add":"remove"]("btn-modal-primary"));["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(t[n?"remove":"add"]("btn-secondary"),t[n?"add":"remove"]("btn-modal-secondary"))}this.settings.isDefault&&(this.settings.style="btn-primary",t.remove("btn-primary"),t.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=h.stripHTML(this.settings.cssClass)),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled);if(this.settings.text){var s=this.element[0].querySelector("span"),a=s instanceof HTMLElement;a||(s=this.element);var o=this.settings.text||$(s).text().trim();o=h.stripHTML(o),a||(this.element[0].innerText="",s=document.createElement("span"),this.element.append($(s)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&s.classList.add("audible")),s.innerText=o}var r,l=this.icon;if(this.settings.icon?r=this.settings.icon:"btn-toggle"===this.settings.type?r=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?r=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(r="icon-more"),r&&(r=h.stripHTML(r),l instanceof SVGElement||l instanceof HTMLElement?l.querySelector("use").setAttribute("href","#".concat(r)):(l=$.createIconElement({icon:r.replace("icon-","")}),this.element.prepend($(l)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var c=this.element.children("svg.icon"),d=c.find("use"),u=!1;if(c.length>0&&d.length>=1){var p=d.last().attr("href");!p&&d.last().attr("xlink:href")&&(p=d.last().attr("xlink:href")),u=p.indexOf("#icon-dropdown")>-1}u||(c=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(c)),c.hasClass("icon-dropdown")||c.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",(function(e,t){$(this).find("span").text(t.text())})),this.settings.hideMenuArrow&&c.remove()}if(xe.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",(function(){e.toggle()})),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){var g=M.translate("More");this.element.attr("title",g).tooltip({content:g})}t[this.settings.ripple?"add":"remove"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",(function(t){e.createRipple(t)})),this.element.data("hidefocus")||this.element.hideFocus()},getSettingsFromElement:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={},s=this.element.parents(".buttonset, .modal-buttonset");s.length&&(e=s.data("buttonset"))&&(this.buttonsetAPI=e);var a=this.element[0].classList||"";if(ye.forEach((function(e){"default"!==e&&a.contains(e)&&(n.style=e)})),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var o={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(o).forEach((function(e){a.contains(e)&&(n.style=o[e])}))}we.forEach((function(e){"default"!==e&&a.contains(e)&&(n.type=e)})),this.settings.disabled||(n.disabled=this.disabled);var r=this.element[0].getAttribute("aria-pressed");void 0!==r&&(n.pressed=!0===r,"icon-favorite"===n.type&&(n.toggleOnIcon="icon-star-filled",n.toggleOffIcon="icon-star-outlined"));var l=this.element[0].id;"string"==typeof l&&l.length&&(n.id=l);var c=this.element[0].title;"string"==typeof c&&c.length&&(n.title=c),a.contains("no-ripple")&&(n.ripple=!1);var d=this.element[0].querySelector("span.audible");return d&&(n.audible=!0),i||Object.keys(n).forEach((function(e){t.settings[e]=n[e]})),n},toData:function(e){var t=this,i={};return Object.keys(this.settings).forEach((function(e){i[e]=t.settings[e]})),i.pressed=this.pressed,e&&(i.element=this.element[0]),i},get pressed(){return-1!==xe.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(e){var t,i=!0===e,n=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,s=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",i),this.element[0].classList[i?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":t=i?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":n&&(t=i?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0!==s.length&&"string"==typeof t&&(s.changeIcon(t),C.fixSVGIcons(s))},toggle:function(){this.pressed=!this.pressed},teardown:function(){this.element.off(["click.".concat("button"),"touchstart.".concat("button")].join(" "));var e=this.tooltipAPI;this.element.hasClass("btn-actions")&&e&&e.destroy();var t=this.element.data("hidefocus");return t&&t.destroy(),this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],"button")}},$.fn.button=function(e){return this.each((function(){var t=$.data(this,"button");t?t.updated(e):t=$.data(this,"button",new ke(this,e))}))};var Te={buttons:[],detectHTMLButtons:!1,style:"default"};function Se(e,t){if(!(e instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=e,this.settings=C.mergeSettings(e,t,Te),this.init()}Se.prototype={set disabled(e){e=!0===e,this.element.classList[e?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach((function(t){t.disabled=e}))},init:function(){this.build(),this.render()},build:function(e){var t=this;this.buttons&&e||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach((function(e){t.add(e)})):this.detectHTMLButtons()},render:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.element.classList,n={default:"buttonset",modal:"modal-buttonset"};Object.keys(n).forEach((function(t){var s=n[t];e.settings.style!==t&&i.remove(s)})),i.add(n[this.settings.style]),t||this.buttons.forEach((function(e){e.render()}))},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"object"!==i(e))throw new Error("Settings object is required to add a new button to the ButtonSet");var n=e.element,s=n instanceof HTMLElement;s||(n=document.createElement("button"));var a=h.stripHTML(e.id);"string"==typeof a&&a.length>0&&(n.id=a);var o=$(n);!t&&s||$(this.element).append(o),e.buttonsetAPI=this,o.button(e);var r=o.data("button");this.buttons.push(r)},remove:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0===i||"function"!=typeof i.destroy){if(i instanceof HTMLElement?e=i:"string"==typeof i&&(e=$(this.element).find("#".concat(i.replace("#","")))),t=$(e),void 0===(i=$(e).data("button"))||"function"!=typeof i.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else t=i.element;i.destroy(),n&&t.remove(),this.buttons=this.buttons.filter((function(e){return e!==i}))},removeAll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach((function(i){e.remove(i,t)}))},reset:function(){this.buttons=[]},at:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.buttons[e]},detectHTMLButtons:function(){var e=this;this.settings.detectHTMLButtons&&(this.reset(),(C.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach((function(t){var i=$(t).data("button");i||($(t).button(),i=$(t).data("button"));var n=i.getSettingsFromElement(!0);n.element=t,e.add(n)})))},toData:function(){var e=C.extend({},this.settings);return this.buttons.forEach((function(t){e.buttons.push(t.toData())})),e},teardown:function(e){return this.removeAll(e),this.reset(),this},updated:function(e){var t=this.settings.buttons;return e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),Array.isArray(e.buttons)&&t!==e.buttons?(this.settings.buttons=e.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach((function(e){e.updated()}))),this},destroy:function(){this.teardown(!0),$.removeData(this.element,"buttonset")}},$.fn.buttonset=function(e){return this.each((function(){var t=$.data(this,"buttonset");t?t.updated(e):t=$.data(this,"buttonset",new Se(this,e))}))};var $e={};function Ae(e,t){return this.init(e,t)}Ae.prototype={init:function(e,t){if(!this.element&&e instanceof HTMLElement&&(this.element=e),"object"===i(t)){var n=this.settings||$e;this.settings=C.mergeSettings(this.element,t,n)}return this.focusBehavior||(this.focusBehavior=new v(this.element)),this},handleEvents:function(){return this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(e){return this.each((function(){var t=$.data(this,"hyperlink");t?t.updated(e):(t=$.data(this,"hyperlink",new Ae(this,e))).destroy=function(){this.teardown(),$.removeData(this,"hyperlink")}}))};var De={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};De.LEGACY_DEFS={"#":De.DIGITS_REGEX,0:De.DIGITS_REGEX,x:De.ALPHAS_REGEX,"*":De.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},De.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:De.EMPTY_STRING,placeholderChar:De.PLACEHOLDER_CHAR,placeholder:De.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var Ee={prefix:De.EMPTY_STRING,suffix:De.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function Ie(e){return e.split(De.EMPTY_STRING).map((function(e){return De.DIGITS_REGEX.test(e)?De.DIGITS_REGEX:e}))}function Le(e,t){var i={any:De.ANY_REGEX,digits:De.DIGITS_REGEX,alphas:De.ALPHAS_REGEX};i[t]||(t="any");for(var n=e.toString().length,s=[];n>0;)s.push(i[t]),n-=1;return s}De.numberMask=function(e,t){(t=C.mergeSettings(void 0,t,Ee)).locale&&t.locale.length||(t.locale=M.currentLocale.name),t.allowLeadingZeroes&&(O("allowLeadingZeros","allowLeadingZeroes","Number Mask"),t.allowLeadingZeros=t.allowLeadingZeroes,t.allowLeadingZeroes=void 0);var i=t.prefix,n=t.suffix,s=t.symbols.decimal,a=t.symbols.thousands,o=i&&i.length||0,r=n&&n.length||0,l=a&&a.length||0;function c(e){"string"!=typeof e&&(e=De.EMPTY_STRING);var c=e.length;if(e===De.EMPTY_STRING||e[0]===i[0]&&1===c)return i.split(De.EMPTY_STRING).concat([De.DIGITS_REGEX]).concat(n.split(De.EMPTY_STRING));if(e===s&&t.allowDecimal)return i.split(De.EMPTY_STRING).concat(["0",s,De.DIGITS_REGEX]).concat(n.split(De.EMPTY_STRING));var d,h,u,p=e.lastIndexOf(s),g=-1!==p,f=e[0]===t.symbols.negative&&t.allowNegative;if(e.slice(-1*r)===n&&(e=e.slice(0,-1*r)),g?(d=e.slice(e.slice(0,o)===i?o:0,p),h=Ie((h=e.slice(p+1,c)).replace(De.NON_DIGITS_REGEX,De.EMPTY_STRING))):d=e.slice(0,o)===i?e.slice(o):e,t.integerLimit&&"number"==typeof t.integerLimit){var m="."===a?"[.]":"".concat(a),v=(d.match(new RegExp(m,"g"))||[]).length;d=d.slice(0,t.integerLimit+(f?1:0)+v*l)}d=d.replace(De.NON_DIGITS_REGEX,De.EMPTY_STRING),t.allowLeadingZeros||(d=d.replace(/^0+(0$|[^0])/,"$1"));var b={maximumFractionDigits:t.decimalLimit,style:"decimal",useGrouping:!0};return u=Ie(d=t.allowThousandsSeparator?function(e,t,i,n){if(""===e||isNaN(e))return e;var s=M.toLocaleString(Number(e),i.locale,n,t);if(i&&i.allowLeadingZeros&&0===e.indexOf("0")){var a="".concat(e).match(/^0*/)[0].length;for(0===s.indexOf("0")&&(s=s.substring(1));a>0;)a-=1,s="0".concat(s)}return s}(d,a,t,b):d),(g&&t.allowDecimal||!0===t.requireDecimal)&&(e[p-1]!==s&&u.push(De.CARET_TRAP),u.push(s,De.CARET_TRAP),h&&("number"==typeof t.decimalLimit&&(h=h.slice(0,t.decimalLimit)),u=u.concat(h)),!0===t.requireDecimal&&e[p-1]===s&&u.push(De.DIGITS_REGEX)),o>0&&(u=i.split(De.EMPTY_STRING).concat(u)),f&&(u.length===o&&u.push(De.DIGITS_REGEX),u=[/-/].concat(u)),n.length>0&&(u=u.concat(n.split(De.EMPTY_STRING))),u}return c.instanceOf="createNumberMask",c(e)};var Pe={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},Me={dd:31,d:31,MMM:void 0,MM:12,M:12,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function Be(e){return this.configure(e),this}De.dateMask=function(e,t){t=C.mergeSettings(void 0,t,Pe);var i=[],n=De.DIGITS_REGEX,s=t.format,a=D.removeDuplicates(s.replace(/[dMyHhmsa]+/g,"")),o=new RegExp("[".concat(a,"]+")),r=s.split(/[^dMyHhmsa]+/),l=e.split(o),c=Me;return r.forEach((function(e,t){var a,o=c[e];if("a"===e||"ah"===e){var d="AM",h="PM";if(M.calendar()){d=M.calendar().dayPeriods[0],h=M.calendar().dayPeriods[1];for(var u=[],p=0;p<d.length;p++)d[p]&&h[p]&&d[p].toLowerCase()===h[p].toLowerCase()?u.push(d[p].toLowerCase()):u.push(d[p].toLowerCase()+(h[p]?h[p].toLowerCase():""));for(var g=0;g<u.length;g++)i.push(new RegExp("[".concat(u[g],"]"),"i"))}else i.push(/[aApP]/,/[Mm]/);if("ah"===e){var f=l[t].replace(d,"").replace(h,"");i=i.concat(Le(f,"digits"))}}else if(o)if(l[t]){var m=l[t].toString(),v=parseInt(m.substr(0,1),10),b=parseInt(c[e].toString().substr(0,1),10);1===e.length&&v>b||"0"!==m&&1===m.length&&v<=b&&void 0!==l[t+1]&&"HH"!==e.toUpperCase()?i.push(n):i=i.concat(Le(o,"digits"))}else for(a=o.toString().length;a>0;)i.push(n),a-=1;else i=i.concat(Le(e,"alphas"));var y=r[t+1];if(void 0!==y){var w=e.toString().length,x=s.indexOf(e)+w,C=s.indexOf(y),k=s.substring(x,C).split(De.EMPTY_STRING);i=i.concat(k)}})),i},De.rangeDateMask=function(e,t){var i=e.split(t.delimeter),n=t.delimeter.split(""),s=De.dateMask(i[0],t),a=[];return i[1]&&(a=De.dateMask(i[1],t)),s.concat(n.concat(a))},De.autocorrectedDatePipe=function(e,t){t.dateFormat||(t.dateFormat=M.calendar().dateFormat.short);var i=[],n=t.dateFormat.split(/[^dMy]+/),s={d:31,M:12,yy:99,yyyy:9999},a={d:1,M:1,yy:0,yyyy:1},o=e.conformedValue.split("");n.forEach((function(e){var n=t.dateFormat.indexOf(e),a=parseInt(s[e].toString().substr(0,1),10);parseInt(o[n],10)>a&&(o[n+1]=o[n],o[n]=0,i.push(n))}));var r=new RegExp("[^".concat(e.placeholderChar,"]")),l=e.placeholder.split(r),c=e.conformedValue.split(/\D/g);return!n.some((function(e,t){var i=l[t].length>e.length?l[t].length:e.length,n=c[t]||"",o=parseInt(n,10);return o>s[e]||n.length===i&&o<a[e]}))&&{value:o.join(""),characterIndexes:i}},Be.prototype={configure:function(e){if(this.settings||(this.settings={}),!e)return this;if(e.locale&&(this.locale=e.locale),e.pattern)if(Array.isArray(e.pattern)||"function"==typeof e.pattern)this.pattern=e.pattern;else if("string"==typeof e.pattern){var t=C.mergeSettings(void 0,e.definitions||{},De.LEGACY_DEFS);this.pattern=this._convertPatternFromString(e.pattern,t)}return e.patternOptions&&(this.patternOptions=e.patternOptions),this},process:function(e,t){if("string"!=typeof e)throw new Error("No string provided");var i,n={originalValue:e,caretPos:t.selection.start,maskResult:!1};if("function"==typeof this.pattern){t.patternOptions||(t.patternOptions={});var s=C.extend({},this.patternOptions,t.patternOptions,{caretPos:t.selection.start,previousMaskResult:t.previousMaskResult});i=this.pattern(e,s);var a=this._processCaretTraps(i);i=a.maskWithoutCaretTraps,t.caretTrapIndexes=a.indexes}else i=this.pattern;if(!1===i)return n;try{n=this._conformToMask(e,i,t)}catch(e){return n}if(t.patternOptions&&t.patternOptions.delimeter&&n.conformedValue&&n.conformedValue!==e&&(n.caretPos=n.conformedValue.length),"function"==typeof t.pipe){var o={};try{o=t.pipe(n,t)}catch(e){o=!1}!1===o?(n.pipeResult=!1,n.pipedValue=t.previousMaskResult):C.isString(o)?(n.pipeResult=!0,n.pipedValue=o,n.pipedCharIndexes=[]):n=C.extend({},n,{pipeResult:o.result,pipedValue:o.value,pipedCharIndexes:o.characterIndexes})}return n},_conformToMask:function(e,t,i){(i=C.mergeSettings(void 0,i,De.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(t,i.placeholderChar);var n=!1,s=!1===i.guide&&void 0!==i.previousMaskResult,a=e.length,o=i.previousMaskResult.length,r=this.pattern.length,l=i.placeholder.length||0,c=i.placeholderChar,d=i.selection.start,h=De.EMPTY_STRING,u=a-o,p=u>0,g=d+(p?-u:0),f=g+Math.abs(u);if(!0===i.keepCharacterPositions&&!p){for(var m=De.EMPTY_STRING,v=g;v<f;v++)i.placeholder[v]===c&&(m+=c);e=e.slice(0,g)+m+e.slice(g,a)}for(var b=e.split(De.EMPTY_STRING).map((function(e,t){return{char:e,isNew:t>=g&&t<f}})),y=a-1;y>=0;y--){var w=b[y];if(w!==i.placeholderChar){var x=y>=g&&o===r;w===i.placeholder[x?y-u:y]&&b.splice(y,1)}}e:for(var k=0;k<l;k++){var T=i.placeholder[k];if(T===c){if(b.length>0)for(;b.length>0;){var S=b.shift();if(S.char===c&&!0!==s){h+=c;continue e}if(t[k].test(S.char)){if(!0===i.keepCharacterPositions&&!1!==S.isNew&&i.previousMaskResult!==De.EMPTY_STRING&&!1!==i.guide&&p){for(var $=b.length,A=null,D=0;D<$;D++){var E=b[D];if(E.char!==c&&!1===E.isNew)break;if(E.char===c){A=D;break}}null!==A?(h+=S.char,b.splice(A,1)):k--}else h+=S.char;continue e}n=!0}!1===s&&(h+=i.placeholder.substr(k,l));break}h+=T}if(s&&!1===p){for(var I=null,L=0;L<h.length;L++)i.placeholder[L]===c&&(I=L);h=null!==I?h.substr(0,I+1):De.EMPTY_STRING}return{caretPos:d,caretTrapIndexes:i.caretTrapIndexes,conformedValue:h,charactersRejected:n,placeholder:i.placeholder,placeholderChar:c,maskResult:!0}},_processCaretTraps:function(e){for(var t=[],i=e.indexOf(De.CARET_TRAP);-1!==i;)t.push(i),e.splice(i,1),i=e.indexOf(De.CARET_TRAP);return{maskWithoutCaretTraps:e,indexes:t}},_convertMaskToPlaceholder:function(e,t){if(Array.isArray(e)||(e=[]),t||(t=De.PLACEHOLDER_CHAR),-1!==e.indexOf(t))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?t:e})).join(De.EMPTY_STRING)},adjustCaretPosition:function(e){if(0===e.caretPos)return 0;function t(e){return e!==t}var i=e.rawValue.length,n=e.previousMaskResult.length,s=e.placeholder?e.placeholder.length:0,a=e.conformedValue?e.conformedValue.length:0,o=i-n,r=o>0;if(o>1&&!r&&!(0===n))return e.caretPos;var l,c,d=0;if(r&&(e.previousMaskResult===e.conformedValue||e.conformedValue===e.placeholder))d=e.caretPos-o;else{var h=e.conformedValue.toLowerCase(),u=e.rawValue.toLowerCase().substr(0,e.caretPos).split(De.EMPTY_STRING).filter((function(e){return-1!==h.indexOf(e)}));c=u[u.length-1];var p=e.previousPlaceholder.substr(0,u.length).split(De.EMPTY_STRING).filter(t).length,g=e.placeholder.substr(0,u.length).split(De.EMPTY_STRING).filter(t).length!==p,f=void 0!==e.previousPlaceholder[u.length-1]&&void 0!==e.placeholder[u.length-2]&&e.previousPlaceholder[u.length-1]!==e.placeholderChar&&e.previousPlaceholder[u.length-1]!==e.placeholder[u.length-1]&&e.previousPlaceholder[u.length-1]===e.placeholder[u.length-2];!r&&(g||f)&&p>0&&e.placeholder.indexOf(c)>-1&&void 0!==e.rawValue[e.caretPos]&&(l=!0,c=e.rawValue[e.caretPos]);var m=[];e.indexesOfPipedChars&&(m=e.indexesOfPipedChars.map((function(e){return h[e]})));for(var v=m.filter((function(e){return e===c})).length,b=u.filter((function(e){return e===c})).length,y=e.placeholder.substr(0,e.placeholder.indexOf(e.placeholderChar)).split(De.EMPTY_STRING).filter((function(t,i){return t===c&&e.rawValue[i]!==t})).length+b+v+(l?1:0),w=0,x=0;x<a;x++){if(d=x+1,h[x]===c&&w++,w>=y)break}}if(r)for(var C=d,k=d;k<=s;k++){if(!e.placeholder)return C;if(e.placeholder[k]===e.placeholderChar&&(C=k),e.placeholder[k]===e.placeholderChar||-1!==e.caretTrapIndexes.indexOf(k)||k===s)return C}else if(l){for(var T=d-1;T>=0;T--)if(e.conformedValue[T]===c||-1!==e.caretTrapIndexes.indexOf(T)||0===T)return T}else for(var S=d;S>=0;S--)if(e.placeholder[S-1]===e.placeholderChar||-1!==e.caretTrapIndexes.indexOf(S)||0===S)return S},_convertPatternFromString:function(e,t){var i,n,s=[],a=Object.keys(t);for(var o=0;o<e.length;o++)s.push((i=e[o],n=void 0,(n=a.indexOf(i))>-1&&(i=t[a[n]]),i));return s}};var Oe={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:Be,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function Re(e,t){return this.element=e,this.settings=C.mergeSettings(this.element,t,Oe),this.init()}Re.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){this._replaceLegacySettings();if("string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=De.numberMask,this.element.classList.add("is-number-mask");break;case"date":var e=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=e.settings.dateFormat)),this.settings.pattern=De.dateMask;break;case"rangeDate":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=t.settings.dateFormat),this.settings.pattern=De.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var e=this;this.locale=M.currentLocale,this.settings.locale?M.getLocale(this.settings.locale).done((function(t){e.locale=M.cultures[t],e.build()})):this.build()},handleEvents:function(){var e=this;return this.changeEventHandler=function(){e.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){e.state.previousMaskResult=e.element.value,e.state.initialValue=e.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(t){return e.hasTriggeredChangeEvent=!1,e.process(t)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(t){if(!0===this.processingJustHappenedOnInput)return t.preventDefault(),!1;if(e.settings.processOnBlur){if(e.element.readOnly)return t.preventDefault(),!1;!e._hasChangedValue()||!e._isEdgeIE()&&e.hasTriggeredChangeEvent||($(e.element).trigger("change"),e.hasTriggeredChangeEvent=!0)}return delete e.state.initialValue,e.process(t)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(e){if(!this.settings.pattern)return!0;var t=this.mask,i=this.settings.patternOptions||{},n=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(n=this.locale.data.numbers.decimal),i.symbols&&i.symbols.decimal&&(n=i.symbols.decimal),t.pattern||t.configure({pattern:this.settings.pattern,patternOptions:i});var s=this.element.value,a=!1;if(e&&"input"===e.type&&"insertText"===e.inputType&&(""===s?(s=this.state.previousMaskResult,a=!0):e.data===n&&s.indexOf(n)>-1&&(a=!0)),s===this.state.previousMaskResult)return a&&(this.element.value="",this.element.value="".concat(s)),!1;var o=this.element.selectionStart||0,r=this.element.selectionEnd||0;this._isAndroid()&&""===this.state.previousMaskResult&&o!==r&&(C.safeSetSelection(s.length,s.length),o=s.length,r=s.length),s=this._getSafeRawValue(s);var l={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:o,end:r}};o!==r&&(l.selection.contents=s.substring(o,r)),"function"==typeof this.settings.pipe&&(l.pipe=this.settings.pipe);var c=t.process(s,l);if(!c.maskResult)return c.maskResult;var d=c.pipedValue?c.pipedValue:c.conformedValue;""!==d&&i&&i.suffix&&d.indexOf(i.suffix)<0&&(d+=this.settings.patternOptions.suffix),l.patternOptions&&l.patternOptions.delimeter&&d&&d!==s&&(s=d);var h={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:d,placeholder:c.placeholder,rawValue:s,caretPos:c.caretPos,placeholderChar:this.settings.placeholderChar};c.pipedCharIndexes&&(h.indexesOfPipedChars=c.pipedCharIndexes),c.caretTrapIndexes&&(h.caretTrapIndexes=c.caretTrapIndexes),c.caretPos=t.adjustCaretPosition(h);var u=this.state.previousMaskResult;return this.state.previousMaskResult=d,this.state.previousPlaceholder=c.placeholder,"firefox"===m.browser.name?this.element.value!==d&&(this.element.value=d):this.element.value=d,C.safeSetSelection(this.element,c.caretPos),u!==d&&($(this.element).trigger("write.mask",[d]),c.maskResult)},_isAndroid:function(){return"android"===(m&&m.os&&m.os.name?m.os.name:"")},_isEdgeIE:function(){var e=m&&m.browser&&m.browser.name?m.browser.name:"";return"ie"===e||"edge"===e},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(e){if(C.isString(e))return e;if(C.isNumber(e))return String(e);if(null==e)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(e)))},_replaceLegacySettings:function(){var e=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var t=this.element.getAttribute("data-mask")||!1;"string"==typeof t&&t.length&&(this.settings.pattern=t);var i=this.element.getAttribute("data-mask-mode")||!1;if(i&&e.indexOf(i)>-1&&(this.settings.mode=i),this.settings.mode&&(-1===e.indexOf(this.settings.mode)&&delete this.settings.mode,"group"===this.settings.mode?this.settings.process=void 0:"date"===this.settings.mode?this.settings.process="date":this.settings.process=this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var n=this.element.getAttribute("data-thousands")||!1;if(n&&(this.settings.patternOptions.allowThousandsSeparator="true"===n),"string"==typeof this.settings.pattern){var s=-1!==this.settings.pattern.indexOf("-");s&&(this.settings.patternOptions.allowNegative=s,this.settings.patternOptions.symbols.negative="-");var a=M.currentLocale.data.numbers?M.currentLocale.data.numbers.group:",",o=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:a,r=-1!==this.settings.pattern.indexOf(o);this.settings.patternOptions.allowThousandsSeparator=r,r&&(this.settings.patternOptions.symbols.thousands=o);var l="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",c=this.settings.pattern.split(l);this.settings.patternOptions.integerLimit=c[0].replace(/[^#0]/g,"").length,c[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=c[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=l))}}var d=this.element.getAttribute("data-must-complete")||!1;d&&(this.settings.mustComplete=d),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var h,u,p=this.settings.showSymbol;if(["currency","percent"].indexOf(p)>-1){h="currency"===(u=this.settings.showSymbol)?{char:M.currentLocale.data.currencySign,format:M.currentLocale.data.currencyFormat}:"percent"===u?{char:M.currentLocale.data.numbers.percentSign,format:M.currentLocale.data.numbers.percentFormat}:{};var g,f,m,v="currency"===p?"¤":h.char,b=new RegExp(v,"g").exec(h.format),y=-1;if(b&&b.length){if(0===(y=h.format.indexOf(b[0])))m="prefix",g=new RegExp("[^".concat(v,"]\\S"),"g"),f=h.format.replace(g,"");else if(y>0){for(m="suffix",g=new RegExp("\\S[^".concat(v,"]"),"g");/\s/.test(h.format.charAt(y-1));)--y;f=h.format.substr(y).replace(g,"")}"currency"===p&&(f=f.replace("¤",h.char)),this.settings.patternOptions[m]=f}}},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown().init()},teardown:function(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(e){return this.each((function(){var t=$.data(this,"mask");t?t.updated(e):(t=$.data(this,"mask",new Re(this,e))).destroy=function(){this.teardown(),$.removeData(this.element,"mask")}}))},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var Fe={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new pe({containerOffsetX:10,containerOffsetY:"ios"===m.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1};function Ne(e,t){this.settings=C.mergeSettings(e,t,Fe),this.element=$(e),this.init()}Ne.prototype={init:function(){this.isFirefox="firefox"===m.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function(){return m.rtl},get isOpen(){return u.hasClass(this.element[0],"is-open")},get isFocused(){var e=document.activeElement,t=this.element.is(e),i=this.menu&&this.menu.length&&this.menu[0].contains(e);return!(!t&&!i)},setup:function(){this.element.attr("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element.attr("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(e){if(e&&e.length){var t=e.parent();t.is("body")||(this.menuOrgContainment={parent:t,index:t.children().index(e)})}},insertAtContainment:function(e,t){var i=function(e){return e&&e.length};if(t=t||this.menuOrgContainment||{},i(e)&&i(t.parent)){var n=t.index,s=t.parent,a=s.children().length;n<0&&(n=Math.max(0,a+1+n)),n<a?s.children().eq(n).before(e):s.append(e)}},addMarkup:function(){var e,t,n;if(!this.menu||!this.menu.length)switch(i(this.settings.menu)){case"string":e=this.settings.menu,this.menu=$("#".concat(this.settings.menu)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),n=this.menu.data("trigger")[0].id,t=this.menu.clone(),this.setMenuOrgContainment(t),t.detach().appendTo("body"),t.attr("data-trigger",n),this.menu.attr("data-trigger",n));break;case"object":null===this.settings.menu?this.menu=this.element.next(".popupmenu, .popupmenu-wrapper"):this.menu=$(this.settings.menu),(e=this.menu.attr("id"))&&""!==e||(this.menu.attr("id","popupmenu-".concat(this.id)),e=this.menu.attr("id"))}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu"),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper")),this.wrapper.find("svg").each((function(){$(this).data("icon")||$(this).icon()})),0===this.wrapper.parents().filter((function(){var e=this?this.style.overflow:null;return"auto"!==e&&"visible"!==e&&"scroll"!==e})).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each((function(e,t){var i=$(t);i.parent().hasClass("wrapper")||i.wrap('<div class="wrapper"></div>')}));var s=!1,a=this.element.parent().attr("class");if(!0===this.settings.showArrow)s=!1;else if(null===this.settings.showArrow){var o=this.element.closest(".toolbar"),r=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||o.length>0&&!o.is(".formatter-toolbar")||r.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||a&&a.indexOf("more")>=0||a&&a.indexOf("btn-group")>=0)&&(s=!0)}if(s){var l=$('<div class="arrow"></div>'),c=this.menu.parent(".popupmenu-wrapper");0===c.find(".arrow").length&&c.addClass("bottom").append(l)}var d=this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0;if(this.menu[d?"addClass":"removeClass"]("popupmenu-short"),void 0!==a&&this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",e),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem){var h=window.getComputedStyle(this.element[0]),u=0;h&&h.getPropertyValue("padding-left")&&(u=parseInt(h.getPropertyValue("padding-left"),10)+parseInt(h.getPropertyValue("padding-right"),10)),this.element.width(parseInt(this.getMaxMenuWidth(),10)-u)}}},renderItem:function(e){if(void 0===e)return"";var t=this;function i(e){var i="";return e.forEach((function(e){i+=t.renderItem(e)})),i}if(Array.isArray(e)){var n=i(e),s='<ul class="popupmenu">'.concat(n,"</ul>");return D.stripWhitespace(s)}var a="",o="";if(void 0!==e.separator)return e.heading&&(a+='<li class="heading">'.concat(e.heading,"</li>")),"single"===e.nextSectionSelect?o=" single-selectable-section":"multiple"===e.nextSectionSelect&&(o=" multi-selectable-section"),D.stripWhitespace('\n        <li class="separator'.concat(o,'"></li>\n        ').concat(a,"\n      "));if(e.menu){var r="";e.menuId&&(r=' id="'.concat(e.menuId,'"'));var l="";e.hasIcons&&(l+=" has-icons");var c="";return Array.isArray(e.menu)&&(c=i(e.menu)),e.noMenuWrap?c:D.stripWhitespace("\n        <ul".concat(r,' class="popupmenu').concat(l,'">\n          ').concat(c,"\n        </ul>\n      "))}var d="",h="",u="",p="",g="",f="",m="",v="";return e.disabled&&(d+=" is-disabled"),!1===e.visible&&(h+=" hidden"),e.id&&(p=' id="'.concat(e.id,'"')),"single"===e.selectable&&(g+=" is-selectable"),"multiple"===e.selectable&&(g+=" is-multiselectable"),e.icon&&(u='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(e.icon,'"></use>\n      </svg>')),Array.isArray(e.submenu)&&(f+=" submenu",m+=this.renderItem(e.submenu),v+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),D.stripWhitespace('<li class="popupmenu-item'.concat(d).concat(h).concat(g).concat(f,'">\n      <a').concat(p,' href="#">').concat(u,"<span>").concat(e.text,"</span>\n        ").concat(v,"\n      </a>\n      ").concat(m,"\n    </li>"))},toData:function(e){var t={},i=[],n=this;(e=e||{}).contextElement||(e.contextElement=this.menu),e.contextElement instanceof HTMLElement&&(e.contextElement=$(e.contextElement)),e.contextElement.is(".popupmenu-wrapper")&&(e.contextElement=e.contextElement.children("ul"));var s=e.contextElement.attr("id");s&&s.length&&(t.menuId="".concat(s));var a,o,r=e.contextElement.hasClass("has-icons");return t.hasIcons=r,e.contextElement.children("li").each((function(e,s){var r=function e(i){var s=$(i),r={};if(!s.hasClass("heading")){if(s.hasClass("separator")){r.separator=!0,s.hasClass("single-selectable-section")&&(a=!0,r.nextSectionSelect="single"),s.hasClass("multi-selectable-section")&&(o=!0,r.nextSectionSelect="multiple");var l=s.next();return l.hasClass("heading")&&(r.heading=l.text().trim()),r}var c=s.children("a"),d=c.children(".icon:not(.close):not(.icon-dropdown)"),h=c.attr("id");r.text=c.text().trim(),r.disabled=s.hasClass("is-disabled"),r.visible=!s.hasClass("hidden"),"string"==typeof h&&h.length&&(r.id=h),d.length&&d[0]instanceof SVGElement&&(r.icon=d[0].querySelector("use").getAttribute("href").replace("#icon-",""));var u=!a&&!o,p=!n.hasSelectableSeparator(s);r.selectable&&u&&p&&("single"===r.selectable?a=!0:"multiple"===r.selectable&&(o=!0),t.selectable=r.selectable);var g=s.find(".popupmenu");return g.length&&(r.submenu=[],g.first().children().each((function(t,i){var n=e(i);n&&r.submenu.push(n)}))),r}}(s);r&&i.push(r)})),e.noMenuWrap?t=i:t.menu=i,t},markupItems:function(e){var t=this;e?e instanceof HTMLElement&&(e=$(e)):e=this.menu;var i=e.find("li:not(.heading):not(.separator)"),n=!1;e[0].setAttribute("role","menu"),i.each((function(e,i){var s=$(i).children("a")[0],a=$(s).children("span")[0],o=$(i).children("ul")[0],r=$(i).find(".icon:not(.close):not(.icon-dropdown)"),l=$(i).children(".wrapper")[0];if(i.setAttribute("role",t.settings.ariaListbox?"option":"menuitem"),s){s.setAttribute("tabindex","-1");var c=$(s),d=$(i);if(d.hasClass("is-disabled")||"true"===s.getAttribute("disabled")||"disabled"===s.getAttribute("disabled")?(d.addClass("is-disabled"),s.setAttribute("aria-disabled","true"),s.setAttribute("disabled",!0)):(d.removeClass("is-disabled"),c.removeAttr("aria-disabled"),s.removeAttribute("disabled")),o instanceof HTMLElement&&o.classList.add("popupmenu"),l instanceof HTMLElement&&(i.className+="".concat(u.classNameExists(i)?" ":"","submenu"),(o=$(l).children("ul")[0])instanceof HTMLElement&&o.classList.add("popupmenu")),u.hasClass(i,"submenu")&&(a||(s.innerHTML="<span>".concat(s.innerHTML,"</span>"),a=c.children("span")[0]),0===c.find("svg.arrow").length&&c.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),s.setAttribute("aria-haspopup","true")),u.hasClass(i,"is-checked")&&(s.setAttribute("role","menuitemcheckbox"),s.setAttribute("aria-checked",!0),!t.hasSelectableSeparator(i))){var h="is-selectable";t.menu.is(".is-multiselectable")&&(h="is-multiselectable"),t.getAdjacentSelectables(i).addClass(h)}u.hasClass(i,"is-not-checked")&&(i.className=i.className.replace("is-not-checked",""),s.setAttribute("role","menuitemcheckbox"),s.removeAttribute("aria-checked"))}r&&r.length>0&&(n=!0)})),n?e.addClass("has-icons"):e.removeClass("has-icons")},refreshMenuItem:function(e,t,i){if(e&&e instanceof HTMLElement&&t&&$(this.menu)[0].contains(e)){var n,s=e.querySelector("a"),a=e.querySelector(".icon:not(.close):not(.icon-dropdown)");if(t.text&&s.innerText.trim()!==t.text&&(s.innerText="".concat(t.text)),!0===t.disabled?-1===e.className.indexOf("hidden")&&e.classList.add("is-disabled"):e.className.indexOf("is-disabled")>-1&&e.classList.remove("is-disabled"),!0===t.visible?e.className.indexOf("hidden")>-1&&e.classList.remove("hidden"):-1===e.className.indexOf("hidden")&&e.classList.add("visible"),t.icon?a&&((n=a.querySelector("use"))&&n.getAttribute("href").replace("#icon-","")!==t.icon&&a.remove(),n.setAttribute("href","#icon-".concat(t.icon))):a&&a.remove(),t.submenu){e.classList.add("submenu");var o=e.querySelector(".popupmenu");if(o)for(var r=o.children,l=0;l<t.submenu.length;l++)t.submenu[l].isSubmenuItem=!0,this.refreshMenuItem(r.item(l),t.submenu[l],i)}"function"==typeof i&&i.apply(this,[e,t])}},handleEvents:function(){var e=this,t="rightClick"!==this.settings.trigger;function i(e){return e.stopPropagation(),e.preventDefault(),!1}function n(t,i){if(e.keydownThenClick)delete e.keydownThenClick;else{var n=!0===i?0:2;if(!(t.button>n||e.element.is(":disabled"))){["android","ios"].indexOf(m.os.name)>-1&&(e.holdingDownClick=!0),function(t){if(e.element.hasClass("is-disabled"))return t.stopPropagation(),void t.preventDefault();var i="rightClick"===e.settings.trigger;if(t.stopPropagation(),t.preventDefault(),i&&e.menu.hasClass("is-open"))return e.close(),void e.open(t);e.menu.add(e.element).hasClass("is-open")?e.close():e.open(t)}(t)}}}if(!("immediate"===this.settings.trigger)&&(t&&this.element.on("click.popupmenu",(function(e){n(e,!0)})),!t)){this.menu.parent().on("contextmenu.popupmenu",i);-1===["android","ios"].indexOf(m.os.name)?this.element.on("contextmenu.popupmenu",(function(e){i(e),n(e)})):this.element.on("touchstart.popupmenu",(function(e){"ios"===m.os.name&&"INPUT"!==e.target.tagName&&e.preventDefault(),$(e.target).addClass("longpress-target")})).on("touchend.popupmenu",(function(e){$(e.target).removeClass("longpress-target")})).on("longpress.popupmenu",(function(t,i){e.openedWithTouch=!0,n(i)}))}this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",(function(){return!1})),this.element.not(".autocomplete, ul").on("keydown.popupmenu",(function(t){switch(t.which){case 13:case 32:"click"===e.settings.trigger&&(e.keydownThenClick=!0,e.open(t));break;case 121:t.shiftKey&&e.open(t)}})).on("updated.popupmenu",(function(t,i){t.stopPropagation(),e.updated(i)}))},handleKeys:function(){var e=this;this.menu.on("click.popupmenu","li",(function(t){var i=$(this).find("a");e.handleItemClick(t,i)}));var t="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",(function(){e.highlight($(this).children("a"))})),setTimeout((function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),(function(i){var n=i.which;if(27===n)return i.stopPropagation(),i.stopImmediatePropagation(),e.close(!0),!1;if(9===n&&(i.stopPropagation(),e.close(!0)),32===n){i.stopPropagation();var s=$(i.target),a=s.find("input:checkbox");if(a.length)return a.trigger("click"),!0;var o=$();if(s.is(".tab")||s.parent().is(".tab")||s.is(".tab-more"))return i.preventDefault(),!0;if(s.is("li")&&(o=s.children("a")),s.is("a")&&(o=s),o.length)return o.trigger("click"),!0}var r=e.menu.find(":focus");r[0]||(r=$(e.menu[0].querySelector(".is-focused a")));var l,c,d,h,u="colorpicker-menu"===e.settings.menu,p=e.element.is(".autocomplete");37!==n||p||(i.stopPropagation(),i.preventDefault(),r.closest(".popupmenu")[0]!==e.menu[0]&&r.closest(".popupmenu").length>0&&(r.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),e.highlight(r.closest(".popupmenu").parent().prev("a")))),l=function(e){var i;return e.parent().prevAll(t).each((function(){if(!i){var e=$(this),t=e.children("a");e.is(".is-disabled")||!0===t.prop("disabled")||(i=t)}})),i||h(e)},h=function(e){var i=e.parent().prevAll(t).last(),n=i.children("a");return i.is(".is-disabled")||!0===n.prop("disabled")?c(n):n},c=function(e){var i;return e.parent().nextAll(t).each((function(){if(!i){var e=$(this),t=e.children("a");e.is(".is-disabled")||!0===t.prop("disabled")||(i=t)}})),i||h(e)},d=function(e){var i=e.parent().nextAll(t).last(),n=i.children("a");return i.is(".is-disabled")||!0===n.prop("disabled")?l(n):n};for(var g=0,f=e.menu.children(t),m=f.length,v=0,b=0;b<m;b++){var y=f[b];if(0===v&&(v=y.offsetTop),y.offsetTop!==v)break;g++}if(!u&&38===n||u&&n===(M.isRTL()?39:37)){if(i.stopPropagation(),i.preventDefault(),0===r.parent().prevAll(t).length)return void(0===r.length?e.highlight(e.menu.children(t).last().find("a")):e.highlight(d(r)));e.highlight(l(r))}if(u&&38===n&&(i.stopPropagation(),i.preventDefault(),r.parent().prevAll(t).length>0&&e.highlight($(r.parent().prevAll(t)[g-1]).find("a"))),39!==n||p||(i.stopPropagation(),i.preventDefault(),r.parent().hasClass("submenu")&&(e.openSubmenu(r.parent()),e.highlight(r.parent().find(".popupmenu a:first")))),!u&&40===n||u&&n===(M.isRTL()?37:39)&&!p){if(i.stopPropagation(),i.preventDefault(),0===r.parent().nextAll(t).length)return void(0===r.length?e.highlight(e.menu.children(t).first().find("a")):e.highlight(h(r)));e.highlight(c(r))}if(u&&40===n&&(i.stopPropagation(),i.preventDefault(),r.parent().nextAll(t).length>0&&e.highlight($(r.parent().nextAll(t)[g-1]).find("a"))),e.isFirefox&&p&&!/37|39|38|40/.test(n)){e.element.triggerHandler(i),e.element[0].focus();var w=e.element[0].value;e.element[0].value="",e.element[0].value=w}}))}),1)},handleItemClick:function(e,t){var i=t.attr("href"),n=[t];return!(!e&&!t||!t.length)&&(t.parent().is(".submenu, .hidden, .is-disabled")||t[0].disabled?(e.preventDefault(),!1):!(t.find("input[checkbox]").length>0)&&(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(t),e.preventDefault()),this.isSelectable(t.parent())&&(n=this.select(t)),t.parent().hasClass("is-toggleable")&&t.parent().toggleClass("is-checked"),e&&this.settings.triggerSelect&&(1===n.length&&n.push(void 0),n.push(!0),this.element.triggerHandler("selected",n)),!(!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(t))||(this.close(),!!this.element.is(".autocomplete")||(i&&"#"!==i.charAt(0)?("_blank"===t.attr("target")?window.open(i,"_blank"):window.location.href=i,!0):(e&&(e.preventDefault(),e.stopPropagation()),!0)))))},iconFilteringSetup:function(e){if(this.element.hasClass("btn-filter")){var t=this.element.find("svg.icon-dropdown"),i=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=i.find("span").text();1===t.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),t.first().changeIcon(i.find("svg").getIconName()),this.element.find(".audible").text(n)}},iconFilteringUpdate:function(e){if(this.element.hasClass("btn-filter")){var t=e||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=t.find("span").text();this.element.find(".audible").text(i),this.element.find("svg:not(.ripple-effect):first").changeIcon(t.find("svg").getIconName())}},getPositionFromEvent:function(e){var t=0,i=0;if(e||(e=window.event),!e)return{};if(e.changedTouches){var n=e.changedTouches[0];t=n.pageX,i=n.pageY}else e.pageX||e.pageY?(t=e.pageX,i=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:t,y:i}},position:function(e){var t=this,i=this.element,n=this.isRTL(),s=this.menu.parent(".popupmenu-wrapper"),a=this.getPositionFromEvent(e),o=this.menu[0].offsetWidth;this.menu[0].offsetHeight;if(s.length){var r=this.element[0].offsetWidth;"click"===this.settings.trigger&&r>o&&this.menu.width(r),i.is("svg, .icon")&&i.closest(".tab").length&&(i=i.closest(".tab")),s.find(".arrow").removeAttr("style");var l=$.extend({},this.settings.placementOpts),c=["flip"];c.push("shrink-y"),l.strategies=c,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(l.x=m(0,"x")-(n?o:0)+(n?-1:1)*this.settings.offset.x,l.y=m(0,"y")+this.settings.offset.y,0===l.x&&0===l.y&&(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.parentXAlignment=n?"right":"left")):(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.strategies.push("nudge"));var d=i.parents(".toolbar"),h=d.length>0,u=i.parents(".title").length>0,p=h&&d.children(".buttonset, .title").length>1,g=i.parents(".pager-pagesize").length>0;i.is(".btn-menu")?g?b():h&&p?u?v():b():v():i.is(".btn-actions")||i.is(".tab-more")?b():i.is(".btn-split-menu, .tab, .searchfield-category-button")&&!i.parent(".pager-pagesize").length&&v(),i.parents(".masthead").length>0&&(l.y+=15);var f=this.element.parents(".page-container:not(.tab-container)");f.length&&(l.container=f.first()),s.one("afterplace.popupmenu",(function(e,i){t.handleAfterPlace(e,i)})),this.wrapperPlace=new ge(s,l),this.wrapperPlace.place(l)}function m(e,t){return a[t="x"===t||"y"===t?t:"x"]}function v(){l.parentXAlignment=n?"right":"left"}function b(){l.parentXAlignment=n?"left":"right"}},handleAfterPlace:function(e,t){var i=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(e,t,i),t.height<this.menu[0].offsetHeight&&this.menu[0].classList.contains("colorpicker")&&this.menu[0].classList.add("has-scrollbar"),t.height&&(i[0].style.height="",this.menu[0].style.height=t.height+(/(px|%)/i.test("".concat(t.height))?"":"px")),t.width&&(i[0].style.width="",this.menu[0].style.width=t.width+(/(px|%)/i.test("".concat(t.width))?"":"px")),i.triggerHandler("popupmenuafterplace",[t]),t},callSource:function(e,t,i,n){if("function"==typeof this.settings.beforeOpen){var s=this,a=this.menu;if(!(u.isElement(i)&&$(i).is(".popupmenu, .submenu")&&(a=$(i),i.hasClass("is-open")))){var o=function(i){if(a.children().filter((function(e,t){return-1===s.predefinedItems.index(t)})).off().remove(),!1===i)return!1;var n=$(i);a.append(n);var o=a.parent(".wrapper, .popupmenu-wrapper");return o.length||(o=a.wrap('<div class="wrapper">').parent()),o.removeAttr("style"),s.markupItems(a),t&&(a.is(s.menu)?s.open(e,!0):s.openSubmenu(o.parent("li"),!0)),!0},r={};a.is(this.menu)||(r.contextElement=a),r.element=this.element,r.isSubmenu=n,"string"!=typeof this.settings.beforeOpen?this.settings.beforeOpen(o,r):window[this.settings.beforeOpen](o,r)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var e=!this.isOpen;e&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var t=this.menu.width();return e&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),t},open:function(e,t,i){var n=this;if(this.menu&&this.menu.length){if((this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu]))&&(t||(this.callSource(e,!0),!this.settings.beforeOpen)))if(i||"ios"!==m.os.name){$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).not(this.menu).each((function(){var e=$(this).data("trigger");if(e&&e.length){var t=$(this).data("trigger").data("popupmenu");t&&"function"==typeof t.close&&t.close()}}));var s=this.element.data("tooltip");s&&s.visible&&s.hide();var a=$(".dropdown.is-open");if(a.length>0){var o=a.parent().prev().data("dropdown");o&&o.closeList("cancel")}var r=document.querySelector(".application-menu.is-open");r instanceof HTMLElement&&!r.contains(this.element[0])&&!r.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(e),C.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each((function(){var e=$(this),t=e.parent();t.hasClass("is-disabled")?(t.addClass("is-disabled"),e.attr("aria-disabled","true"),e.attr("disabled","disabled")):(t.removeClass("is-disabled"),e.removeAttr("aria-disabled"),e.removeAttr("disabled"))})),setTimeout((function(){$(document).on("touchend.popupmenu.".concat(n.id," click.popupmenu.").concat(n.id),(function(e){var t="colorpicker-menu"===n.settings.menu;2!==e.button&&(n.holdingDownClick?delete n.holdingDownClick:$(e.target).is(n.element)&&!t&&"rightClick"!==n.settings.trigger||(0===$(e.target).closest(".popupmenu").length&&n.close(!0,"rightClick"===n.settings.trigger),$(e.target).hasClass("colorpicker")&&n.close()))})),void 0===window.orientation&&$("body").on("resize.popupmenu",(function(){n.handleCloseEvent()})),$(window).on("scroll.popupmenu",(function(){setTimeout((function(){n.close()}),150)})),$(".datagrid-wrapper").on("scroll.popupmenu",(function(){setTimeout((function(){n.close()}),150)})),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",(function(){setTimeout((function(){n.close()}),150)})),n.element.triggerHandler("open",[n.menu])}),300),$("iframe").each((function(){var e=$(this);e.ready((function(){try{e.contents().find("body").on("click.popupmenu",(function(){n.close()}))}catch(e){}}))})),this.handleKeys();var l,c,d=0;n.menu.find(".popupmenu").removeClass("is-open"),n.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",(function(e){if(!$(e.target).hasClass("popupmenu")){var t=$(this);l=e.pageX,clearTimeout(n.submenuOpenTimeout),n.submenuOpenTimeout=setTimeout((function(){n.openSubmenu(t)}),300),$(document).on("mousemove.popupmenu.".concat(this.id),(function(e){d=e.pageX}))}})).on("mouseleave.popupmenu",".submenu",(function(){$(document).off("mousemove.popupmenu.".concat(this.id));var e=((c=$(this).find("ul")).parent(".wrapper").length>0?parseInt(c.parent(".wrapper")[0].style.left,10):0)<0,t=d-l<3.5;e&&(t=d-l>=0),t&&(c.removeClass("is-open").removeAttr("style"),c.parent(".wrapper").removeAttr("style"),c.parent().parent().removeClass("is-submenu-open"),c=null),clearTimeout(n.submenuOpenTimeout)})),n.settings.autoFocus&&setTimeout((function(){var e=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",t=n.menu.children(e).find(".is-selected").children("a");t.length||(t=n.menu.children(e).first().children("a")),n.highlight(t),n.element.triggerHandler("afteropen",[n.menu])}),1)}else setTimeout((function(){n.open(e,t,!0)}),400)}},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(e,t){if(!u.hasClass(e,"is-disabled")&&!e[0].disabled){var i=e.children(".wrapper, .popupmenu");i.length&&i.is(".wrapper")&&(i=i.children(".popupmenu"));var n=this.element.triggerHandler("beforeopen",[i]);!1!==n&&(!t&&(n=this.callSource(null,!0,i,!0),this.settings.beforeOpen)||this.showSubmenu(e))}},showSubmenu:function(e){this.element.triggerHandler("show-submenu",[e]);var t=e.children(".wrapper").filter(":first"),i=this.isRTL();if(0===t.length){var n=e.children("ul").filter(":first");n.wrap('<div class="wrapper"></div>'),t=n.parent()}var s,a=t.children(".popupmenu"),o=e.position().left+e.outerWidth();e.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),t.children(".popupmenu").addClass("is-open"),s=t.outerWidth(),i&&(o=e.position().left-s),t[0].style.left="".concat(o,"px"),t[0].style.top="".concat(parseInt(e.position().top,10)-5,"px");var r=a.outerWidth();if(t.offset().left+r>$(window).width()+$(document).scrollLeft()||i&&t.offset().left<0){if(t[0].style.left="-9999px",r=a.outerWidth(),o=e.position().left-r,i)o=t.closest(".popupmenu").outerWidth()-4;if(t[0].style.left="".concat(o,"px"),(t.offset().left<0||i&&t.offset().left+r>$(window).width()+$(document).scrollLeft())&&(o=e.position().left-r+Math.abs(t.offset().left)+40,i&&(o=e.position().left-r-30),t[0].style.left="".concat(o,"px"),r=a.outerWidth()),t.offset().left+r>$(window).width()+$(document).scrollLeft()||i&&t.offset().left<0)r-=t.offset().left+r-($(window).width()+$(document).scrollLeft()),a[0].style.width="".concat(r,"px")}var l=a.outerHeight(),c=this.settings.placementOpts.containerOffsetY;if(t.offset().top+l>window.innerHeight-c+$(document).scrollTop()){var d=t.offset().top+l-(window.innerHeight+$(document).scrollTop());if(t[0].style.top="".concat(t.position().top-d-c,"px"),t.offset().top+l>window.innerHeight+$(document).scrollTop()){var h=e.parents(".popupmenu-wrapper:first").offset().top;t[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-l-h,"px")}if(t.offset().top-$(document).scrollTop()<0&&(t[0].style.top=0,t[0].style.top="".concat(-1*t.offset().top,"px"),l=a.outerHeight()),t.offset().top+l>window.innerHeight+$(document).scrollTop())l=l-(t.offset().top+l-(window.innerHeight+$(document).scrollTop()))-32,a[0].style.height="".concat(l,"px")}e.parent().find(".is-submenu-open").removeClass("is-submenu-open"),e.addClass("is-submenu-open")},highlight:function(e){if(e&&e.length){var t=e.parent();t.parent().children("li").removeClass("is-focused"),t.addClass("is-focused"),e&&e.focus(),t.closest(".header").scrollTop(0)}},select:function(e){var t=this.menu.is(".is-selectable"),i=this.menu.is(".is-multiselectable"),n=this.isInSingleSelectSection(e),s=this.isInMultiselectSection(e),a=e.parent(),o=[e];return a.hasClass("is-selectable")||t||n?(a.prevUntil(".heading, .separator").add(a.nextUntil(".heading, .separator")).removeClass("is-checked"),a.addClass("is-checked"),o.push("selected"),o):a.hasClass("is-multiselectable")||i||s?a.hasClass("is-checked")?(a.removeClass("is-checked"),o.push("deselected"),o):(a.addClass("is-checked"),o.push("selected"),o):o},getSelected:function(){return this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(e){return $(e).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(e)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(e){return $(e).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(e){var t=this.getSelectableSeparator(e);return t&&t.length},getAdjacentSelectables:function(e){var t=this.getSelectableSeparator(e),i=":not(.heading):not(.separator):not(.submenu)";return t&&t.length?$(t).nextUntil(".separator").filter(i):$(e).parent().children("li".concat(i))},isInSelectableSection:function(e){O("hasSelectableSeparator()","isInSelectableSection()");var t=e.parent().prevAll().filter(".separator").first();return t.hasClass("multi-selectable-section")||t.hasClass("single-selectable-section")},isInSingleSelectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(e){return e.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu"),$("iframe").each((function(){var e=$(this);try{e.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch(e){}}))},close:function(e,t){if(e&&void 0!==e||(e=!1),this.menu&&this.menu.add(this.element).hasClass("is-open")){var i=this.menu.parent(".popupmenu-wrapper"),n=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),i[0]&&(i[0].style.left="-999px",i[0].style.height="",i[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),n[0]&&(n[0].style.left="",n[0].style.top="",n[0].style.height="",n[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[e]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch,t||!this.settings.returnFocus||m.features.touch||("function"!=typeof this.settings.returnFocus?document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function(){var e=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var t=this.menu.parent();t.find(".arrow").remove(),t.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&t.removeClass("bottom"),this.menu.off("dragstart.popupmenu"),!this.preExistingWrapper&&this.menu.parent().is(".popupmenu-wrapper")&&this.menu.unwrap();var i=this.element.parent().children(".searchfield");return i.length?this.menu.insertAfter(i.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each((function(e,t){var i=$(t).find("span").text()||$(t).text();$(t).find("span, svg").remove(),$(t).text(i)})),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each((function(){var e;(e=$(this)).parent().is(".popupmenu-wrapper, .wrapper")&&e.unwrap()})),this.wrapperPlace&&(this.wrapperPlace.destroy(),delete this.wrapperPlace),e.off().remove(),this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(e){return this.settings=C.mergeSettings(this.element[0],e,this.settings),this.teardown().init()},destroy:function(){this.menu&&(this.close(),this.teardown(),this.menu.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],"popupmenu"))}},$.fn.popupmenu=function(e){return this.each((function(){var t=$.data(this,"popupmenu");t?t.updated(e):t=$.data(this,"popupmenu",new Ne(this,e))}))};var ze={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0};function He(e,t){this.settings=C.mergeSettings(e,t,ze),this.element=$(e),this.init()}He.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==e?e.toString():this.settings.appName;var t=this.element.attr("data-about-content");this.settings.content=void 0!==t?t.toString():this.settings.content;var i=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==i?i.toString():this.settings.copyrightYear;var n=this.element.attr("data-device-specs");n&&(this.settings.deviceSpecs="true"===n);var s=this.element.attr("data-product-name");this.settings.productName=void 0!==s?s.toString():this.settings.productName;var a=this.element.attr("data-use-default");void 0!==a&&(this.settings.useDefaultCopyright="true"===a);var o=this.element.attr("data-version");return this.settings.version=void 0!==o?o.toString():this.settings.version,this.defaultCopyright="".concat(M.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var e=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(M.translate("Close"),"'</span>"))).appendTo(e),$.createIconElement({icon:"logo-trademark",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(e),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var t=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var i=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(i).appendTo(t)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(t),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(t),this.settings.deviceSpecs){var n=this.getDeviceSpecs(),s='<span class="ds">'.concat(M.translate("OperatingSystem")," : ").concat(m.devicespecs.os.replace(m.devicespecs.currentOSVersion,"")," ").concat(m.devicespecs.currentOSVersion,'</span><br>\n        <span class="platform">').concat(M.translate("Platform")," : ").concat(n.os,'</span><br>\n        <span class="ds">').concat(M.translate("Mobile")," : ").concat(m.devicespecs.isMobile,'</span><br>\n        <span class="locale">').concat(M.translate("Locale")," : ").concat(M.currentLocale.name,'</span><br>\n        <span class="locale">').concat(M.translate("Language")," : ").concat(M.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(M.translate("Browser")," :"," ".concat(m.devicespecs.browserVersionName)," ").concat(m.devicespecs.currentBrowser," (").concat(m.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(M.translate("BrowserLanguage")," : ").concat(n.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(M.translate("CookiesEnabled")," : ").concat(n.cookiesEnabled,'</span><br>\n        <span class="version">').concat(M.translate("Version")," : ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p></p>").html(s).appendTo(t)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",(function(){$(this).removeClass("hide-focus")})),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click"}),this},getDeviceSpecs:function(){var e,t,i,n="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(e=navigator.userAgent,t=[],i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE '".concat(t[1])):"Chrome"===i[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:n}},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this},close:function(){if(this.isBody)this.destroy();else{var e=this.modal.data("modal");e&&e.close()}},destroy:function(){this.buttons.off(),this.element.off("open.about");var e=this.modal.data("modal");e&&(e.element.off("beforeopen.about"),e.destroy()),this.element.length>0&&$.removeData(this.element[0],"about")},handleEvents:function(){var e=this;return this.element.on("open.about",(function(t){t.stopPropagation(),e.element.trigger("click")})),this.buttons.filter('[name="done"], [name="close"]').on("click.about",(function(){e.close()})),this.modal.data("modal").element.on("beforeopen.about",(function(){e.modal.find(".modal-body").scrollTop(0)})),this}},$.fn.about=function(e){return this.each((function(){var t=$.data(this,"about");t?t.updated(e):t=$.data(this,"about",new He(this,e))}))};var qe={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(e){var t=$.fn.transitionEndName();return e=C.mergeSettings(void 0,e,qe),this.each((function(){var i,n=this,s=$(this),a="horizontal"===e.direction?"width":"height",o=a.charAt(0).toUpperCase()+a.slice(1),r=isNaN(e.distance)?"auto":"".concat(parseInt(e.distance,10),"px");function l(){i&&clearTimeout(i),s.data("ignore-animation-once")&&$.removeData(s[0],"ignore-animation-once"),s.data("is-animating")&&$.removeData(s[0],"is-animating"),s.off("".concat(t,".animateopen")),n.style.transition="",n.style[a]=r,s.trigger("animateopencomplete")}s.one("animateopenstart.animation",(function(e){e.stopPropagation(),s.off("".concat(t,".animateopen"))})),s.trigger("animateopenstart"),t&&s.one("".concat(t,".animateopen"),l),s.data("is-animating",!0);var c=this.style[a];this.style[a]=r;var d=getComputedStyle(this)[a];this.style[a]=c,this["offset".concat(o)],this.style.transition="".concat(a," ").concat(e.timing,"ms ").concat(e.transition),i=setTimeout(l,e.timing),this.style[a]=d,(s.is(":hidden")||s.is(".no-transition")||s.data("ignore-animation-once"))&&l()}))};var Ve={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(e){var t=$.fn.transitionEndName();return e=C.mergeSettings(void 0,e,Ve),this.each((function(){var i,n=this,s=$(this),a="horizontal"===e.direction?"width":"height",o=a.charAt(0).toUpperCase()+a.slice(1);function r(){i&&clearTimeout(i),s.data("ignore-animation-once")&&$.removeData(s[0],"ignore-animation-once"),s.data("is-animating")&&$.removeData(s[0],"is-animating"),s.off("".concat(t,".animatedclosed")),n.style.transition="",n.style[a]="0px",s.trigger("animateclosedcomplete")}s.one("animateclosedstart",(function(e){e.stopPropagation(),s.off("".concat(t,".animatedclosed"))})),s.trigger("animateclosedstart"),t&&s.one("".concat(t,".animatedclosed"),r),s.data("is-animating",!0),this.style[a]=getComputedStyle(this)[a],this["offset".concat(o)],this.style.transition="".concat(a," ").concat(e.timing,"ms ").concat(e.transition),i=setTimeout(r,e.timing),this.style[a]="0px",(s.is(":hidden")||s.is(".no-transition")||s.data("ignore-animation-once"))&&r()}))},$.fn.isAnimating=function(){return this.each((function(){return!0===$(this).data("is-animating")}))};var We=["classic","plus-minus","chevron"],je={allowOnePane:!0,expanderDisplay:We[0],enableTooltips:!0,rerouteOnLinkClick:!0,source:null};function Ge(e){return void 0!==e.displayChevron&&(O("expanderDisplay setting","displayChevron setting"),!1===e.displayChevron?e.expanderDisplay=We[1]:e.expanderDisplay=We[0],delete e.displayChevron),e}function Ue(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,je),this.settings=Ge(this.settings),this.init()}function _e(e,t){return!!function(e){return e&&!(e instanceof jQuery)}(e)&&(void 0!==e[t]&&null!==e[t])}function Ye(e,t){return!!function(e,t){return _e(e,t)&&"function"==typeof e[t]}(e,t)&&(e[t](),!0)}function Ke(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[];return"string"==typeof t&&(t=[t]),$.each(e,(function(e,a){$.each($(a).data(),(function(e,o){i.length&&-1===i.indexOf(e)||t.forEach((function(e){(n&&Ye(o,e)||_e(o,e))&&s.push({elem:$(a),control:o})}))}))})),s}function Xe(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e&&t){var n=(e=$(e)).find("*").add(e).not(i.join(", ")),s=Ke(n,t,void 0,!0);return e.trigger("sift-".concat(t,"-complete"),[s]),e}}Ue.prototype={init:function(e){this.build(e).handleEvents(e).setupTooltips()},build:function(e,t){var i,n,s,a=this,o=this,r=!0;e&&e instanceof jQuery?(i=e.children("a"),s=(n=e.next(".accordion-pane")).children(".accordion-content"),r=!1,this.headers=this.headers.add(e),this.anchors=this.anchors.add(i),this.panes=this.panes.add(n),this.contentAreas=this.contentAreas.add(s)):(this.headers=this.element.find(".accordion-header"),e=this.element.find(".accordion-header"),this.anchors=e.children("a"),i=this.anchors,this.panes=e.next(".accordion-pane"),n=this.panes,this.contentAreas=n.children(".accordion-content"),s=this.contentAreas);var l=!1;if(e.each((function(){var e=$(this),t=!1,i=e.parent(),n=i.is(".accordion");function s(){n||(t?i.addClass("has-icons"):e.addClass("no-icon"))}e.hideFocus(),e.children("a").find("svg").detach().insertBefore(e.children("a"));var a=e.children(".icon, svg");if(a.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),n&&a.length&&(l=!0),(e.is(".list-item")||!n&&e.find("button").length||!n&&e.find("svg").length)&&(t=!0),e.hasClass("is-disabled")&&e.children("a, button").attr("tabindex","-1"),e.next(".accordion-pane").length){t=!0;var r=e.children(".btn");if(!r.length){r=$('<button class="btn" type="button"></button>');var c="insertBefore";"plus-minus"!==o.settings.expanderDisplay&&n&&(e.addClass("has-chevron"),c="insertAfter"),r[c](e.children("a")),e.data("addedExpander",r)}r.hideFocus(),a.length&&"plus-minus"===o.settings.expanderDisplay&&a.appendTo(r);var d=r.children(".icon, .svg, .plus-minus");if(!d.length){if("classic"===o.settings.expanderDisplay&&n||"chevron"===o.settings.expanderDisplay)d=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var h=o.isExpanded(e)?" active":"";d=$('<span class="icon plus-minus'.concat(h,'" aria-hidden="true" role="presentation"></span>'))}d.appendTo(r)}var u={role:"presentation","aria-hidden":"true"};d.is("span")||(u.focusable="false"),d.attr(u),d.is(".chevron")&&n?(e.addClass("has-chevron"),r.insertAfter(e.children("a"))):(e.removeClass("has-chevron"),r.insertBefore(e.children("a"))),"plus-minus"===o.settings.expanderDisplay&&n&&(l=!0),s();var p=r.children(".audible");p.length||(p=$('<span class="audible"></span>').appendTo(r)),p.text(M.translate("Expand"))}else s()})),l&&this.element.addClass("has-icons"),r&&!this.element.data("updating")){var c=e.filter(".is-selected, .is-expanded");c.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(c=c.first(),this.expand(c)):c.each((function(e){a.expand($(c[e]))})),this.select(c.last()),c.next(".accordion-pane").removeClass("no-transition")}return n.each((function(){var e=$(this),i=e.prev(".accordion-header");i.children("a").attr({"aria-haspopup":"true",role:"button"});var n=e.children(),s=!0;if(n.each((function(e,t){$(t).is(".accordion-header, .accordion-content")&&!$(t).hasClass("filtered")&&(s=!1)})),e[s?"addClass":"removeClass"]("all-children-filtered"),s&&(e.data("ignore-animation-once",!0),o.collapse(i,!1)),!t){var a="0px";o.isExpanded(i)&&(a="auto"),e.attr("style","height: ".concat(a))}})),t||(this.currentlyFiltered=$()),this},handleHeaderClick:function(e,t){if(!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||t.data("is-animating"))e.preventDefault();else{if(!$(e.target).is('[class^="btn"]')){var i=t.children("a");return this.handleAnchorClick(e,i)}e.preventDefault()}},handleAnchorClick:function(e,t){var i,n=this,s=t.parent(".accordion-header"),a=s.next(".accordion-pane"),o=t.attr("ng-reflect-href");if(e&&!o&&e.preventDefault(),!s.length||this.isDisabled(s)||this.isFiltered(s))return!1;if(!1!==this.element.triggerHandler("beforeselect",[t]))return this.originalSelection=t,this.select(t),this.closePopups(e),!(i=t.attr("href"))||""===i||"#"===i||n.settings.rerouteOnLinkClick&&(window.location.href=i,0)?a.length?(n.toggle(s),n.focusOriginalType(s),!0):(this.isControllingDetails?a.length||n.element.trigger("drilldown",[s[0]]):(n.orignalSelection=t,n.focusOriginalType(s)),this.element.trigger("selected",s),!0):(this.element.trigger("followlink",[t]),!0)},closePopups:function(e){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each((function(){return $(this).data("popupmenu").close(),void 0!==e&&(e.stopPropagation(),e.stopImmediatePropagation()),!1}))},handleExpanderClick:function(e,t){var i=t.parent(".accordion-header");if(i.length&&!this.isDisabled(i)&&!this.isFiltered(i)&&!i.data("is-animating"))return this.originalSelection=t,e&&e.stopPropagation(),this.closePopups(),i.next(".accordion-pane").length?(this.toggle(i),this.select(i),void this.focusOriginalType(i)):this.handleAnchorClick(e,i.children("a"))},handleKeys:function(e){var t=this,i=e.which,n=$(e.target),s=n.parent(),a=s.children('[class^="btn"]').first(),o=s.children("a");function r(e){e||(e=n),t.originalSelection||(t.originalSelection=e)}if(9===i&&(this.headers.removeClass("is-selected"),n.is("a")&&a.length?r(a):r(o)),32===i){if(e.preventDefault(),n.is('[class^="btn"]')&&(e.stopPropagation(),e.stopImmediatePropagation(),$("html").hasClass("is-firefox")))return;return a.length?(r(a),this.handleExpanderClick(null,n)):(r(o),this.handleAnchorClick(null,n))}return 37===i||38===i?(e.preventDefault(),r(),e.shiftKey?this.ascend(s):this.prevHeader(s)):39===i||40===i?(e.preventDefault(),r(),e.shiftKey?this.descend(s):this.nextHeader(s)):void 0},toData:function(e,t){var i=[];return this.element.children(".accordion-header").each((function(n,s){!function i(n,s,a,o){var r=$(n),l=$(n).next(".accordion-pane"),c=n.classList.contains("accordion-content"),d={index:"".concat(void 0!==a?"".concat(a,"."):"").concat(s),type:c?"content":"header"};t&&(d.element=n),n.getAttribute("id")&&(d.id=n.getAttribute("id")),c?(d.content="".concat(r.html()),d.contentText="".concat(r.text().trim().replace(/\n|\s{2,}/g," "))):d.text=r.children("a, span").text().trim();var h=r.children(".icon");if(h.length&&(d.icon="svg"===h[0].tagName.toLowerCase()?h[0].getElementsByTagName("use")[0].getAttribute("href"):""),r.hasClass("is-disabled")&&(d.disabled=!0),l.length){var u=l.children(".accordion-header, .accordion-content"),p=[];if(u.length){var g=p;e&&(g=o),u.each((function(e,t){i(t,e,d.index,g)})),d.children=p}}o.push(d)}(s,n,void 0,i)})),i},select:function(e){if(e&&e.length){var t=e,i=t.parent();if(e.is(".accordion-header")&&(t=(i=e).children("a")),t.is('[class^="btn"]')&&(t=e.next("a")),!this.isDisabled(i)&&!this.isFiltered(i))this.headers.removeClass("child-selected").removeClass("is-selected"),i.addClass("is-selected"),i.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected")}},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(e){return!!this.element.hasClass("is-disabled")||!!e&&e.hasClass("is-disabled")},isFiltered:function(e){if(!e||!e.length)return!1;var t=e[0].classList;return t.contains("filtered")&&!t.contains("has-filtered-children")},isExpanded:function(e){if(e&&e instanceof Element&&(e=$(e)),e&&e.length)return"true"===e.children("a").attr("aria-expanded")},toggle:function(e){var t=this;!e||!e.length||this.isDisabled(e)||this.isFiltered(e)||this.isAnimating||(this.isAnimating=!0,setTimeout((function(){t.isAnimating=!1}),500),this.isExpanded(e)?this.collapse(e):this.expand(e))},expand:function(e,t){if(e&&e.length){var i=this,n=e.next(".accordion-pane"),s=e.children("a"),a=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[s])?a.reject():(this.callSource(s,o)||o.apply(this),a)}function o(){if(!(n=e.next(".accordion-pane"))||!n.length)return a.reject();var o=e.children(".btn");o.length&&(o.children(".plus-minus, .chevron").addClass("active"),o.children(".audible").text(M.translate("Collapse")));var r=e.parentsUntil(i.element).filter(".accordion-pane").prev(".accordion-header").add(e),l=[];i.settings.allowOnePane&&!t&&i.headers.not(r).each((function(){var e=$(this);i.isExpanded(e)&&l.push(i.collapse(e))}));var c=[];function d(e){var t;e&&e.stopPropagation(),n.triggerHandler("afterexpand",[s]),i.element.trigger("afterexpand",[s]),(t=$).when.apply(t,c.concat(l)).done((function(){a.resolve()}))}r.not(e).each((function(){var e=$(this);i.isExpanded(e)||c.push(i.expand(e))})),e.add(n).addClass("is-expanded"),e.children("a").attr("aria-expanded","true"),i.element.trigger("expand",[s]),n.hasClass("no-transition")?d():n.one("animateopencomplete",d).animateOpen()}},expandAll:function(){var e;if(!0!==this.settings.allowOnePane){var t=this,i=$.Deferred(),n=[];return this.headers.each((function(){var e=$(this);t.isExpanded(e)||n.push(t.expand(e))})),(e=$).when.apply(e,n).always((function(){i.resolve()})),i}},collapse:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&e.length){var i=this,n=e.next(".accordion-pane"),s=e.children("a"),a=$.Deferred(),o=this.element.triggerHandler("beforecollapse",[s]);if(!1===o)return a.reject();var r=e.children(".btn");return r.length&&(r.children(".plus-minus, .chevron").removeClass("active"),r.children(".audible").text(M.translate("Expand"))),e.add(n).removeClass("is-expanded"),s.attr("aria-expanded","false"),t&&n.closeChildren(),i.element.trigger("collapse",[s]),n.hasClass("no-transition")?l():n.one("animateclosedcomplete",l).animateClosed(),a}function l(e){e&&e.stopPropagation(),n.triggerHandler("aftercollapse",[s]),i.element.trigger("aftercollapse",[s]),a.resolve()}},collapseAll:function(){var e,t=this,i=$.Deferred(),n=[];return this.headers.each((function(){var e=$(this);t.isExpanded(e)&&n.push(t.collapse(e))})),(e=$).when.apply(e,n).always((function(){i.resolve()})),i},callSource:function(e,t){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var i=this,n=e.parent(),s=n.next(".accordion-pane"),a={anchor:e,header:n,pane:s};return this.settings.source(a,(function(e,n){!0!==e&&i.updated(n),setTimeout((function(){t.apply(i)}),1)}))},getElements:function(e){var t,i,n,s,a=$(e);return a.is(".accordion-header")&&(t=a,n=a.children('[class^="btn"]'),i=a.children("a")),a.is(".btn")&&(i=(t=(n=a).parent()).children("a")),a.is("a")&&(n=(t=(i=a).parent()).children(".btn")),s=t.next(".accordion-pane"),{header:t,expander:n,anchor:i,pane:s}},prevHeader:function(e,t){var i=this.getElements(e),n=i.header.parent().children(),s=n.index(i.header),a=$(n.get(h.ensureAlphaNumeric(s)-1));if(!n.length||0===s){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header);a=n.last()}for(;a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);){if(a.is(":only-child")||a.is(":first-child"))return this.ascend(i.header);a=a.prev()}if(a.is(".accordion-pane")){var o=a.prev(".accordion-header");if(this.isExpanded(o))if(o.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(o,-1);if(!(a=o).length){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header);for(a=n.last();a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);)a=a.prev()}}this.focusOriginalType(a)},nextHeader:function(e,t){var i=this.getElements(e),n=i.header.parent().children(),s=n.index(i.header),a=$(n.get(h.ensureAlphaNumeric(s)+1));if(!n.length||s===n.length-1){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header,-1);a=n.first()}for(;a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);){if(a.is(":only-child")||a.is(":last-child"))return this.ascend(i.header);a=a.next()}if(a.is(".accordion-pane")){var o=a.prev(".accordion-header");if(this.isExpanded(o))if(o.next(".accordion-pane").children(":not(.accordion-content)").length&&!t)return this.descend(o);if(!(a=$(n.get(h.ensureAlphaNumeric(s)+2))).length){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header,-1);for(a=n.first();a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);)a=a.next()}}this.focusOriginalType(a)},ascend:function(e,t){t||(t=0);var i=e.parent(".accordion-pane"),n=i.prev();if(-1===t&&!(n=i.next(".accordion-header")).length)return i.parent(".accordion").length?this.nextHeader(i.prev().children("a"),!0):this.ascend(i.prev(),-1);this.focusOriginalType(n)},descend:function(e,t){t||(t=0);var i=e.next(".accordion-pane"),n=i.children(".accordion-header").first();return-1===t&&(n=i.children(".accordion-header").last()),n.length?this.isExpanded(n)?this.descend(n,-1):void this.focusOriginalType(n):this.focusOriginalType(e)},focusOriginalType:function(e){var t=e.children('[class*="btn"]');this.headers.not(e).removeClass("is-focused"),this.originalSelection.is('[class*="btn"]')&&t.length?t.first()[0].focus():(e.children("a")[0].focus(),e.addClass("is-focused").removeClass("hide-focus"))},filter:function(e){var t=this;if(e&&e.length){var i=this;this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var n=e.not(this.currentlyFiltered),s=$(),a=$();this.headers.add(this.contentAreas).not(n).addClass("filtered"),n.each((function(e,t){var i=$(t).is(".accordion-content"),n=$(t).parents(".accordion-pane");if(i){a.push($(t));var o=$(n[0]).prev(".accordion-header").filter((function(e,t){return-1===s.index(t)}));o.length&&(s=s.add(o))}if(n.length){var r=n.prev(".accordion-header").filter((function(e,t){return-1===n.index(t)}));s=s.add(r)}})),s.addClass("has-filtered-children");var o=this.expand(s,!0);$.when(o).done((function(){t.currentlyFiltered=n,i.build(void 0,!0)}))}},unfilter:function(e){var t=this;if(this.currentlyFiltered.length){e&&e.length||(e=this.currentlyFiltered);var i=$();this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),e.each((function(e,t){var n=$(t).parents(".accordion-pane");if(n.length){var s=n.prev(".accordion-header").filter((function(e,t){return-1===i.index(t)}));i=i.add(s)}})),i.removeClass("has-filtered-children");var n=[this.collapse(e),this.collapse(i)];$.when(n).done((function(){t.currentlyFiltered=t.currentlyFiltered.not(e)}))}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(e,t){this.element.data("updating",!0),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings),this.settings=Ge(this.settings));var i=$(document.activeElement);return $.contains(this.element[0],i[0])||(i=void 0),e&&e instanceof jQuery?this.teardown(e).init(e):this.teardown().init(),i&&i.length&&i.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(e){var t=!1,i=e;(this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),e&&e instanceof jQuery||(i=this.headers,t=!0),i&&i.length)&&(i.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each((function(){var e=$(this),t=e.children(".icon"),i=e.data("hidefocus");if(i&&i.destroy(),t.length){var n=t.data("icon");n&&n.destroy()}var s=e.data("addedExpander");s&&(s.remove(),$.removeData(this,"addedExpander"))})),i.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),i.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion"));return t&&(this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(e){var t=this,i=null,n=e,s=!1;function a(e,i){var n=function(e){var t="Header";return e.is("a")&&(t="Anchor"),e.is("button")&&(t="Expander"),t}(i);return $("body").children().not(".application-menu, .modal-page-container, .page-container").closeChildren(),t["handle".concat(n,"Click")](e,i)}return e&&e instanceof jQuery||(n=this.headers,s=!0),n.on("click.accordion",(function(e){return a(e,$(this))})).on("focusin.accordion",(function(e){var i=$(e.target);t.originalSelection||(t.originalSelection=i),n.not($(this)).removeClass("is-focused"),i.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus")})).on("focusout.accordion",(function(){$.contains(this,i)&&!$(this).is($(i))||$(this).removeClass("is-focused")})).on("keydown.accordion",(function(e){t.handleKeys(e)})).on("mousedown.accordion",(function(e){$(this).addClass("is-focused").removeClass("hide-focus"),i=e.target})).on("mouseup.accordion",(function(){i=null})),n.children('[class^="btn"]').on("click.accordion",(function(e){return a(e,$(this))})).on("keydown.accordion",(function(e){t.handleKeys(e)})),s&&this.element.on("selected.accordion",(function(e){e.stopPropagation()})).on("updated.accordion",(function(e,i){e.stopPropagation(),t.updated(i)})),this},hideTooltip:function(){var e=this,t=window;t.tooltip&&(this.removeTooltipData(t.tooltip),t.tooltip.classList.add("is-hidden"),t.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",(function(){e.hideTooltip()}))},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("spantooltip")&&$.removeData(e[0],"spantooltip")},setupTooltips:function(){if(this.settings.enableTooltips){var e,t=this,i=".accordion-header a span";this.element.off("mouseenter.spantooltip",i).on("mouseenter.spantooltip",i,(function(){var t;(t=this).style.width="auto",t.offsetWidth>t.parentElement.offsetWidth-parseInt($(t).parent().css("padding-left"),10)&&(t.style.width="",e=setTimeout((function(){$(t).tooltip({trigger:"immediate",content:"".concat(t.innerText),extraClass:"tooltip-accordion-style"})}),400))})).off("mouseleave.spantooltip click.spantooltip",i).on("mouseleave.spantooltip click.spantooltip",i,(function(){var i;(i=this).style.width="auto",i.offsetWidth>i.parentElement.offsetWidth-parseInt($(i).parent().css("padding-left"),10)&&(i.style.width="",t.hideTooltip(),clearTimeout(e))}))}}},$.fn.accordion=function(e){return this.each((function(){var t=$.data(this,"accordion");t?t.updated(e):t=$.data(this,"accordion",new Ue(this,e))}))};var Qe=[".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],Je=[];$.fn.destroy=function(){return Xe($(this),"destroy")},$.fn.closeChildren=function(){return Xe($(this),"close",Qe)},$.fn.handleResize=function(){return Xe($(this),"handleResize",Je)};var Ze={trigger:null,bottomBorder:!1,animationSpeed:300};function et(e,t){this.settings=C.mergeSettings(e,t,Ze),this.element=$(e),this.init()}et.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var e,t,i=this,n=this.element.hasClass("is-expanded");return this.header.attr({"aria-expanded":"".concat(n),"aria-controls":"".concat(this.id,"-content"),id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-content")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=(e=this,!0===this.isCard?((t=e.header.find("expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" role="button" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(M.translate("ShowMore"),"</span>")+"</a>").appendTo(e.header)),t):((t=e.footer.find(".expandable-expander")).length||(t=$("".concat('<a href="#" target="_self" role="button" class="expandable-expander hyperlink"><span data-translated="true">').concat(M.translate("ShowMore"),"</span>")+"</a>").prependTo(e.footer)),t)),this.expander.attr("href","#").hideFocus(),0===this.expander.length&&(this.expander=$("#".concat(this.settings.trigger))),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),n&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",(function(){i.content.removeClass("no-transition")})),this.open()),n||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",(function(){i.content.removeClass("no-transition")})),this.close()),this.resize(),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var e=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),this.header.attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(M.translate("ShowLess")?M.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",(function(){e.element.triggerHandler("afterexpand",[e.element])})).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var e=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(M.translate("ShowMore")?M.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",(function(){e.element.removeClass("is-expanded"),e.header.attr("aria-expanded","false"),e.element.triggerHandler("aftercollapse",[e.element]),e.content[0].style.display="none"})).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var e=this,t=$("html").hasClass("ie11");setTimeout((function(){t&&e.element.hasClass("is-expanded")?e.element.css("min-height",e.element.children(".expandable-pane").outerHeight(!0)+e.element.children(".expandable-footer").outerHeight(!0)):t&&!e.element.hasClass("is-expanded")&&e.element.css("min-height","auto")}),300)},resize:function(){var e=this;$("body").on("resize.expandablearea",(function(){e.applyIE11Fix()}))},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){this.header.children("a").off(),this.header.off(),this.header.removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],"expandablearea")},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this},handleEvents:function(){var e=this;return this.expander.on("click.expandablearea",(function(t){e.isDisabled()||(t.preventDefault(),e.toggleExpanded())})),this}},$.fn.expandablearea=function(e){return this.each((function(){var t=$.data(this,"expandablearea");t?t.updated(e):t=$.data(this,"expandablearea",new et(this,e))}))};var tt=setTimeout;function it(e){return Boolean(e&&void 0!==e.length)}function nt(){}function st(e){if(!(this instanceof st))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],dt(e,this)}function at(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,st._immediateFn((function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(e){return void rt(t.promise,e)}ot(t.promise,n)}else(1===e._state?ot:rt)(t.promise,e._value)}))):e._deferreds.push(t)}function ot(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof st)return e._state=3,e._value=t,void lt(e);if("function"==typeof i)return void dt((n=i,s=t,function(){n.apply(s,arguments)}),e)}e._state=1,e._value=t,lt(e)}catch(t){rt(e,t)}var n,s}function rt(e,t){e._state=2,e._value=t,lt(e)}function lt(e){2===e._state&&0===e._deferreds.length&&st._immediateFn((function(){e._handled||st._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)at(e,e._deferreds[t]);e._deferreds=null}function ct(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function dt(e,t){var i=!1;try{e((function(e){i||(i=!0,ot(t,e))}),(function(e){i||(i=!0,rt(t,e))}))}catch(e){if(i)return;i=!0,rt(t,e)}}st.prototype.catch=function(e){return this.then(null,e)},st.prototype.then=function(e,t){var i=new this.constructor(nt);return at(this,new ct(e,t,i)),i},st.prototype.finally=function(e){var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){return t.reject(i)}))}))},st.all=function(e){return new st((function(t,i){if(!it(e))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var s=n.length;function a(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var r=o.then;if("function"==typeof r)return void r.call(o,(function(t){a(e,t)}),i)}n[e]=o,0==--s&&t(n)}catch(e){i(e)}}for(var o=0;o<n.length;o++)a(o,n[o])}))},st.resolve=function(e){return e&&"object"==typeof e&&e.constructor===st?e:new st((function(t){t(e)}))},st.reject=function(e){return new st((function(t,i){i(e)}))},st.race=function(e){return new st((function(t,i){if(!it(e))return i(new TypeError("Promise.race accepts an array"));for(var n=0,s=e.length;n<s;n++)st.resolve(e[n]).then(t,i)}))},st._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){tt(e,0)},st._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var ht=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"];var ut={caseSensitive:!1,filterMode:ht[3],searchableTextCallback:void 0};function pt(e){this.settings=C.mergeSettings(void 0,e,ut),this.init()}pt.prototype={init:function(){for(var e,t,i,n=[{setting:this.settings.filterMode,limits:ht,preset:ut.filterMode}],s=0;s<n.length;s++)e=n[s].setting,t=n[s].limits,i=n[s].preset,-1===$.inArray(e,t)&&(e=i);return this.settings.filterMode===ht[0]&&O("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(e,t){if(!e)return!1;if(!($.isArray(e)||e instanceof jQuery))return!1;if(!t||"string"!=typeof t||!t.length)return!1;var n=this,s=[],a=!1;function o(e){var t,i,s,a=!0;if("function"==typeof n.settings.searchableTextCallback)return n.settings.searchableTextCallback(e);"string"==typeof e?t=e:e instanceof $?t=$(e).text():e instanceof HTMLElement?(a=!1,t=e.innerText):(i=e,s="",Object.keys(i).forEach((function(e){var t=s.length?" ":"";s+="".concat(t).concat(i[e])})),t=s);var o=t;return a&&(o=h.sanitizeHTML(t)),o}return this.settings.caseSensitive||(t=t.toLowerCase()),$.isArray(e)||(e instanceof jQuery||"object"===i(e))&&(e=$.makeArray(e),a=!0),e.forEach((function(e){var i=o(e);n.settings.caseSensitive||(i=i.toLowerCase());var a=!1;if(["startsWith","wordStartsWith"].indexOf(n.settings.filterMode)>-1&&(a=function(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)if(0===i[n].indexOf(t))return!0;return 0===e.indexOf(t)||t.indexOf(" ")>0&&e.indexOf(t)>0}(i,t)),"phraseStartsWith"===n.settings.filterMode&&0===i.indexOf(t)&&(a=!0),"contains"===n.settings.filterMode&&i.indexOf(t)>=0&&(a=!0),"keyword"===n.settings.filterMode)for(var r=t.split(" "),l=0;l<r.length;l++){var c=r[l];if(i.indexOf(c)>=0){a=!0;break}}null===n.settings.filterMode&&(a=!0),a&&s.push(e)})),a&&(s=$(s)),!(!a&&!s.length)&&s},updated:function(e){return this.settings=C.mergeSettings(void 0,e,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var gt={compile:function e(t,n,s,a){var o,r=e,l="";function c(e,t){return e=e[(t=t.pop?t:t.split(".")).shift()]||"",0 in t?c(e,t):e}n=Array.isArray(n)?n:n?[n]:[],n=a?0 in n?[]:[1]:n;var d=function(){var e="",a=0,d=void 0,h="object"===i(n[o])?n[o]:{};(h=C.extend({},s,h))[""]={"":n[o]},t.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,(function(t,n,s,o,u,p,g){a?e+=a&&!u||a>1?t:n:(l+=n.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,(function(e,t,i,n,s,a){return t?c(h,t):n?c(h,a):s?r(c(h,a),h):i?"":new Option(c(h,a)).innerHTML})),d=p),u?--a||(g=c(h,g),/^f/.test(i(g))?l+=g.call(h,e,(function(e){return r(e,h)})):l+=r(e,g,h,d),e=""):++a}))};for(o=0;o<n.length;o++)d();return l}},ft={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(e,t){var i=e,n=!1;if("string"==typeof t.alias&&void 0!==e[t.alias]&&(n=!0,i=e[t.alias]),"contains"===t.filterMode)i=i.replace(new RegExp("("+t.term+")","ig"),"<i>$1</i>");else if("keyword"===t.filterMode)for(var s=t.term.split(" "),a=0;a<s.length;a++){var o=s[a];o&&(i=i.replace(new RegExp("("+o+")","ig"),"<i>$1</i>"))}else{var r=i,l="".concat(r);t.caseSensitive||(l=M.toLowerCase(l));var c=l.indexOf(t.term);c>0?i=r.substr(0,c)+"<i>"+r.substr(c,t.term.length)+"</i>"+r.substr(t.term.length+c):0===c&&(i="<i>"+r.substr(0,t.term.length)+"</i>"+r.substr(t.term.length))}return n?e[t.alias]=i:e=i,e},resultIteratorCallback:function(e,t){var i="string"==typeof e,n={highlightTarget:"label",index:t,listItemId:"ac-list-option".concat(t)};return i?n.label=e:n=C.extend({},n,e),n.hasValue=void 0!==e.value,n.hasValue&&(n.value=e.value),n},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(e){return"string"==typeof e?e:e.label}};function mt(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,ft),this.init()}mt.prototype={init:function(){var e=this.element.attr("data-autocomplete");e&&"source"!==e&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"));var t={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(t):this.listFilter=new pt(t),this.addMarkup(),this.handleEvents()},get isFocused(){var e=document.activeElement,t=this.element[0],i=this.list;return!!(t.isEqualNode(e)||i&&i.length&&i[0].contains(e))},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"})},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(e,t){if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield"))if(!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var i=this;this.settings.caseSensitive||(e=M.toLowerCase(e)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var n=$(this.element.attr("data-tmpl"));this.tmpl=$(n).length?$(n).text():"string"==typeof n?n:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var s=this.listFilter.filter(t,e),a=[];!1!==s&&s.forEach((function(t,n){"string"==typeof t&&(t={label:t,value:t});var s=C.extend(!0,{},t);if(s=i.settings.resultIteratorCallback(s,n),i.settings.highlightMatchedText){var o={filterMode:i.settings.filterMode,caseSensitive:i.settings.caseSensitive,term:e};s.highlightTarget&&(o.alias=s.highlightTarget),i.settings.displayResultsCallback||(s=i.settings.highlightCallback(s,o))}a.push(s)})),this.currentDataSet=a,"function"!=typeof this.settings.displayResultsCallback?this.handleListResults(e,t,a):this.settings.displayResultsCallback(a,(function(){i.element.trigger("listopen",[a])}),e)}},handleListResults:function(e,t,i){var n=this;i.forEach((function(e){if(void 0!==gt){var t=gt.compile(n.tmpl,e);u.append(n.list,t,"*")}})),this.element.trigger("beforepopulated",[i]);var s={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(e){return!0===e.wasFlipped&&(n.list.add(n.element).addClass("is-ontop"),e.y+=1),e}}};if(this.previouslyOpened){var a=this.element.data("popupmenu");a&&a.position()}else this.element.addClass("is-open").popupmenu(s).one("close.autocomplete",(function(){n.closeList(!0)}));var o=n.list.find("li"),r=$(o[0]).find("span").outerWidth()+20;if(r>parseInt(this.element.outerWidth(),10)){for(var l=0;l<o.length;l++)o.width(r+"px");this.maxWidth=r}if(n.settings.autoSelectFirstItem&&n.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[i]).focus(),!this.previouslyOpened){n.list.on("touchend.".concat("autocomplete"," click.").concat("autocomplete"),"a",(function(e){n.select(e)})).on("focusout.".concat("autocomplete"),(function(){n.checkActiveElement()}));var c=n.list.find("a").on("focus.".concat("autocomplete"," touchend.").concat("autocomplete"),(function(){n.highlight($(this),c)}));if(this.settings.offset){var d=this.list.parent()[0];this.settings.offset.left&&(d.style.left="".concat(parseInt(d.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(d.style.top="".concat(parseInt(d.style.top,10)+this.settings.offset.top,"px"))}}var h=document.querySelectorAll("#ac-is-arialive");h&&h.forEach((function(e){e.parentNode.removeChild(e)})),u.append(n.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[i])},closeList:function(e){if(this.list.off(["click.".concat("autocomplete"),"touchend.".concat("autocomplete"),"focusout.".concat("autocomplete")].join(" ")),this.list.find("a").off("focus.".concat("autocomplete"," touchend.").concat("autocomplete")),this.element.trigger("listclose"),"function"!=typeof this.settings.clearResultsCallback){var t=this.element.data("popupmenu");t&&(e||t.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(e){if(this.isLoading())return e.preventDefault(),!1;if(!this.listIsOpen())return null;function t(e){e.removeClass("is-selected is-focused")}function i(e){e.addClass("is-selected").find("a").focus()}var n=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),s=function(e){return e.filter(".is-selected")}(n);return 40===e.keyCode&&this.listIsOpen()&&s.length&&(this.noSelect=!0,t(s),i(n.eq(n.index(s)+1)),e.preventDefault(),e.stopPropagation()),38===e.keyCode&&this.listIsOpen()&&s.length&&(this.noSelect=!0,t(s),i(n.eq(n.index(s)-1)),e.preventDefault(),e.stopPropagation()),9!==e.keyCode&&13!==e.keyCode||!this.listIsOpen()||(s.length?(e.stopPropagation(),e.preventDefault(),this.noSelect=!0,this.select(s)):this.closeList()),null},handleAutocompleteInput:function(e){var t=this;return t.isLoading()?(e.preventDefault(),!1):(this.getDataFromSource().done((function(e,i){t.currentDataSet=i,t.openList(e,i)})),null)},checkActiveElement:function(){var e=this;setTimeout((function(){var t=document.activeElement;e.listIsOpen()&&$.contains(e.list[0],t)||e.element.is(t)||e.element.trigger("safe-blur")}),0)},getDataFromSource:function(){var e=this;if(e.isLoading())return!1;var t,n=this.element,s=$.Deferred();function a(t,i,n){return e.element.triggerHandler("complete"),e.element.trigger("requestend",[t,i]),!1===n?s.reject(t):s.resolve(h.stripTags(t),i)}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout((function(){if(!e.isLoading()&&e.isFocused)if(""!==(t=n.val())){var o=i(e.settings.source);if(e.element.triggerHandler("start"),e.element.trigger("requeststart",[t]),"function"===o)e.settings.source(t,a,e.settings.sourceArguments);else if("object"===o){var r=$.isArray(e.settings.source)?e.settings.source:[e.settings.source];a(t,r,!0)}else if(e.settings.source)if("keyword"===e.settings.filterMode){var l=[],c=function(e){if(0===l.length)l=e;else for(var t=0;t<e.length;t++){for(var i=e[t],n=!1,s=0;s<l.length;s++)for(var a=l[s],o=0;o<Object.getOwnPropertyNames(a).length;o++){if(i[Object.getOwnPropertyNames(i)[o]]===a[Object.getOwnPropertyNames(a)[o]]){n=!0;break}}n||l.push(i)}},d=function(e){c(e),a(t,l,!0)},h=t.split(" ");""===h[h.length-1]&&h.splice(-1,1);for(var u=0;u<h.length;u++){var p=h[u];if(p.length>0){var g=e.settings.source.toString(),f=$.getJSON(g+p);u<h.length-1?f.done(c).fail(c):f.done(d).fail(d)}}}else{var m=e.settings.source.toString();$.getJSON(m+t).done((function(e){a(t,e,!0)})).fail((function(){a(t,[],!1)}))}else s.reject(t)}else e.element.data("popupmenu")&&e.element.data("popupmenu").close()}),e.settings.delay),s},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(e,t){var i=this.element.val(),n=e.text().trim();e.find(".display-value").length>0&&(n=e.find(".display-value").text().trim()),t&&t.length&&t.parent("li").removeClass("is-selected"),e.parent("li").addClass("is-selected"),this.noSelect=!0,this.element.val(n).focus(),i!==n&&this.element.triggerHandler("change")},select:function(e,t){var n,s,a={},o=!1;e instanceof $.Event?(o=!0,n=$(e.currentTarget)):n=e,n.is("li")&&(s=n,n=n.children("a"));var r=(s=n.parent("li")).attr("data-index"),l=s.attr("data-value");if(this.element.attr("aria-activedescendant",s.attr("id")),t&&t.length||(t=this.currentDataSet),r)a=t[parseInt(r,10)];else if(l)for(var c,d=0;d<t.length;d++)(c="object"===i(t[d])&&void 0!==t[d].value?t[d].value.toString():t[d].toString())===l&&("object"===i(t[d])&&(a=t[d]),a.value=c);return a.value&&0!==!a.value.length||(a.value=n.text().trim()),this.highlight(n),this.noSelect=!0,a.label=h.stripHTML(a.label),a.highlightTarget||(a.highlightTarget="label",a.index=parseInt(r,10),a.listItemId="ac-list-option"+a.index,a.hasValue=!0),this.element.trigger("selected",[n,a]),o&&e.preventDefault(),this.closeList(),this.element.focus(),a},handleAfterListOpen:function(){return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),e&&e.source&&(this.settings.source=e.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var e=this.element.data("popupmenu");return e&&e.destroy(),this.element.off(["focus.".concat("autocomplete"),"focusout.".concat("autocomplete"),"input.".concat("autocomplete"),"keydown.".concat("autocomplete"),"listopen.".concat("autocomplete"),"requestend.".concat("autocomplete"),"resetfilter.".concat("autocomplete"),"updated.".concat("autocomplete")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"autocomplete")},handleEvents:function(){var e=this;this.element.on("updated.".concat("autocomplete"),(function(){e.updated()})).on("keydown.".concat("autocomplete"),(function(t){e.handleAutocompleteKeydown(t)})).on("input.".concat("autocomplete"),(function(t){e.handleAutocompleteInput(t)})).on("focus.".concat("autocomplete"),(function(){e.handleAutocompleteFocus()})).on("focusout.".concat("autocomplete"),(function(){e.checkActiveElement()})).on("listopen.".concat("autocomplete"),(function(){e.handleAfterListOpen()})).on("resetfilter.".concat("autocomplete"),(function(){e.resetFilters()}))}},$.fn.autocomplete=function(e){return this.each((function(){var t=$.data(this,"autocomplete");if("string"==typeof t){var i="".concat(t),n=C.extend({},e,{source:i||e.source});t=$.data(this,"autocomplete",new mt(this,n))}else t?t.updated(e):t=$.data(this,"autocomplete",new mt(this,e))}))};var vt=[!1,"mobile",!0],bt={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:vt[0],collapseSize:void 0};function yt(e,t){this.element=$(e),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==t&&(void 0===t.clearable&&(t.clearable=!0),void 0===t.collapsible&&(t.collapsible=!0)),this.settings=C.mergeSettings(e,t,bt),this.init()}yt.prototype={get toolbarParent(){var e=this.element.parents(".toolbar"),t=this.element.parents(".flex-toolbar");if(!(e.add(t).length<1))return t.length>0?t.first()[0]:e.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var e=this.element.closest(".module-tabs");return e.length?e.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&this.shouldBeFullWidth()},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var e;return this.isContainedByFlexToolbar&&(e=$(this.element).data("toolbarflexitem")),e},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=C.uniqueId(this.element,"searchfield")),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var e=this.element.attr("data-autocomplete");e&&"source"!==e&&(this.settings.source=e,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete"))),this.element.attr("autocomplete","off");var t=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();t&&""!==t||(t=M.translate("Keyword")),this.element.attr({"aria-label":t}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.isInlineLabel?this.wrapper=this.inlineLabel.addClass("searchfield-wrapper"):this.wrapper=this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var i="remove";this.settings.collapsible&&this.settings.collapseSize&&(i="add"),this.wrapper[0].classList[i]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var n,s=["context","alternate"],a=0;a<s.length;a++)this.element.hasClass(s[a])&&(n=s[a],this.wrapper.addClass(n),this.element.removeClass(n));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=vt[1]),this.wrapper[0].classList[!0==!this.settings.collapsible?"add":"remove"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var o=this.wrapper.find(".icon:not(.icon-dropdown)");if(o&&o.length||(o=$.createIconElement("search")),o[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),o.appendTo(this.categoryButton),o=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var r=o.find(".icon-dropdown");if(r.length||(r=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),r.appendTo(o),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>'));var l=this.settings.categoryMultiselect?"is-multiselectable":"is-selectable";this.list.addClass(l);var c="is-selectable";this.settings.categoryMultiselect||(c="is-multiselectable"),this.list.removeClass(c),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var d=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){d.isFocused&&d.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$('\n          <button class="btn-secondary collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(M.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var h=this.wrapper.next(".go-button");h.length||(h=this.wrapper.find(".go-button")),h.length&&(this.settings.showGoButton=!0,this.goButton=h,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||M.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton.attr("id",C.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton)):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&(this.element.clearable(),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close"));var u=this,g=new W({duration:1,updateCallback:function(){},timeoutCallback:function(){u.calculateSearchfieldWidth()}});return G.register(g),(!1===this.settings.collapsible||"mobile"===this.settings.collapsible&&p.isAbove("phone-to-tablet"))&&this.expand(!0),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?this.isFocused||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.shouldBeFullWidth()){if(this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused){if(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded)return;return void this.expand(!0)}return this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth()}this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var e=this,t=new W({duration:1,updateCallback:function(){},timeoutCallback:function(){e.focusElem&&(e.focusElem.focus(),delete e.focusElem)}});G.register(t)}},appendToParent:function(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),C.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),C.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function(){var e=this.wrapper.closest(".header"),t=!1;return e.length&&(t=e.width()<p.phone),t||p.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=C.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},setupEvents:function(){var e=this,t=this;return t.element.on("updated.".concat(this.id),(function(e,i){t.updated(i)})).on("focus.".concat(this.id),(function(e){t.handleFocus(e)})).on("blur.".concat(this.id),(function(e){t.isContainedByFlexToolbar&&t.handleSafeBlur(e)})).on("click.".concat(this.id),(function(e){t.handleClick(e)})).on("keydown.".concat(this.id),(function(e){t.handleKeydown(e)})).on("beforeopen.".concat(this.id),(function(e,i){t.handlePopupBeforeOpen(e,i)})).on("safe-blur.".concat(this.id),(function(){t.handleSafeBlur()})).on("listclose.".concat(this.id),(function(){t.handleSafeBlur()})).on("input.".concat(this.id),(function(){t.checkContents()})),t.wrapper.on("mouseenter.".concat(this.id),(function(){$(this).addClass("is-hovered")})).on("mouseleave.".concat(this.id),(function(){$(this).removeClass("is-hovered")})),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),(function(e,i){t.handleCategorySelected(e,i)})).on("focus.".concat(this.id),(function(e){t.handleCategoryFocus(e)})).on("blur.".concat(this.id),(function(){t.handleSafeBlur()})).on("close.".concat(this.id),(function(){t.handleSafeBlur()})).on("beforeopen.".concat(this.id),(function(e,i){t.handlePopupBeforeOpen(e,i)})),t.hasGoButton()&&t.goButton.on("click.".concat(this.id),(function(e){return t.handleGoButtonClick(e)})).on("click.".concat(this.id),(function(e){return t.handleGoButtonFocus(e)})).on("blur.".concat(this.id),(function(){return t.handleSafeBlur()})),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),(function(e){t.handleFocus(e)})).on("focusout.".concat(this.id),(function(e){t.handleBlur(e)})).on("keydown.".concat(this.id),(function(e){t.handleKeydown(e)})).on("collapse.".concat(this.id),(function(){t.collapse()})),$("body").on("resize.".concat(this.id),(function(){t.adjustOnBreakpoint()})),t.adjustOnBreakpoint()):($("body").on("resize.".concat(this.id),(function(){t.simpleAdjustOnBreakpoint()})),t.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),(function(e){t.collapseResponsive(e)})).on("click.".concat(this.id),(function(e){t.collapseResponsive(e)})).on("blur.".concat(this.id),(function(){return t.handleSafeBlur()})),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),(function(){!t.isFocused&&t.isCurrentlyCollapsible&&t.collapse()})).on("rendered.".concat(this.id),(function(){t.element.removeClass("no-transition no-animation"),t.wrapper.removeClass("no-transition no-animation")})),t.element.on("beforepopulated.".concat(this.id),(function(e,i){i.length>0?t.settings.showAllResults&&t.addMoreLink():t.addNoneLink()})),t.settings.clearable&&(t.element.on("cleared.".concat(this.id),(function(){t.autocomplete&&t.autocomplete.closeList()})),t.xButton.on("blur.".concat(this.id),(function(e){t.handleSafeBlur(e)}))),t.element.on("listopen.".concat(this.id),(function(){var i=$("#autocomplete-list");t.wrapper.addClass("popup-is-open"),t.element.on("selected.".concat(e.id),(function(e,i,n){if(i.hasClass("more-results")){var s=t.settings.allResultsCallback;s&&"function"==typeof s&&s(n)}})),i.find(".more-results, .no-results").on("focus.".concat(e.id),(function(){var e=$(this);i.find("li").removeClass("is-selected"),e.parent("li").addClass("is-selected"),t.element.val("")}))})).on("listclose.".concat(this.id),(function(){var i=$("#autocomplete-list");t.element.off("selected.".concat(e.id)),i.off("focus.".concat(e.id))})),this},setAsActive:function(e,t){var i=this;if(e||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var n=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&n.push("is-open")),n.forEach((function(e){i.wrapper[0].classList.add(e)})),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||!0===t&&this.element.focus()}},get isFocused(){var e=document.activeElement;if(this.wrapper[0].contains(e))return!0;if(this.autocomplete){var t=this.autocomplete.list;if(t&&t[0].contains(e))return!0}if(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length)return!0;return!!(this.xButton&&this.xButton.length&&this.xButton.has(e).length)},hasFocus:function(){return O("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var e=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new W({duration:1,updateCallback:function(){},timeoutCallback:function(){e.isFocused||(e.wrapper[0].classList.remove("has-focus","active"),e.removeDocumentDeactivationEvents(),e.clearResponsiveState(),e.isCurrentlyCollapsible?e.collapse():e.isContainedByFlexToolbar&&e.wrapper[0].classList.remove("is-open"))}}),G.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(!0!==this.hasDeactivationEvents){var e=this;$(document).on("click.".concat(this.id),(function(t){e.handleOutsideClick(t)})).on("keydown.".concat(this.id),(function(t){e.handleOutsideKeydown(t)})),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(e){var t=e.target;this.isSearchfieldElement(t)||this.handleSafeBlur()},handleKeydown:function(e){var t=e.which,i=e.key;if(27===t&&m.browser.isIE11()&&e.preventDefault(),e.ctrlKey&&8===t&&this.element.val(""),9===t&&this.handleSafeBlur(),this.isContainedByFlexToolbar){["ArrowUp","Up","ArrowDown","Down"].indexOf(i)>-1&&this.collapse()}},handleOutsideKeydown:function(e){var t=e.which,i=e.target;9!==t||this.isSearchfieldElement(i)||this.handleSafeBlur()},handlePopupBeforeOpen:function(e,t){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!t)return!1;var i=this.wrapper.hasClass("context")?"addClass":"removeClass",n=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return t[i]("context"),t[n]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(e){var t=this.settings.goButtonAction;if("function"==typeof t){var i,n=this.element.val();return this.hasCategories()&&(i=this.getCategoryData()),t(e,n,i)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(e){if(this.settings.showCategoryText&&this.categoryButton.length){var t="",i=this.wrapper.find(".btn"),n=i.find("span");if(n&&n.length||(n=$('<span class="category"></span>').insertAfter(i.find(".icon").first())),n.empty(),"string"==typeof e&&e.length)n.text(e.trim());else{var s=this.getSelectedCategories();s.length&&(t=s.length>1?"".concat(s.length," ").concat(M.translate("Selected")):s.text().trim(),n.text(t))}}},isSearchfieldElement:function(e){if($.contains(this.wrapper[0],e))return!0;if(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(e).length)return!0;return!1},getFillSize:function(e,t){var i,n,s;function a(e){if(!e)return 0;if(!isNaN(parseInt(e,10)))return parseInt(e,10);if(e instanceof jQuery){if(!e.length)return 0;e.is(".title")&&(e=e.next(".buttonset")),e=e[0]}return e}function o(e,t){if(!isNaN(e))return null==e?0:e;t&&"string"==typeof t||(t="left");var i,n=["left","right"];return-1===$.inArray(t,n)&&(t=n[0]),(e instanceof HTMLElement||e instanceof SVGElement)&&(i=e.getBoundingClientRect()),i[t]}if(e=a(e),t=a(t),i=o(e),n=o(t,(s="left",(e===t||$(t).length&&$(t).is(".buttonset"))&&(s="right"),s)),!i&&!n)return 280;var r=n-i;return r<=280?280:r>=450?450:r},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var e=0;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var t=window.getComputedStyle(this.categoryButton[0]);e+=this.categoryButton.width()+(parseInt(t.paddingLeft,10)+parseInt(t.paddingRight,10))+2*parseInt(t.borderLeftWidth,10)}if(this.hasGoButton()){var i=window.getComputedStyle(this.goButton[0]);e+=this.goButton.width()+(parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10))+2*parseInt(i.borderLeftWidth,10)}e>0&&(this.input.style.width="calc(100% - ".concat(e,"px)")),delete this.openWidth},calculateOpenWidth:function(){var e,t=this.element.parents(".toolbar").children(".buttonset"),i=this.wrapper.next();if(t.length){if(i.is(".title")&&(i=t),this.shouldBeFullWidth())return e="100%",$(this.toolbarParent).closest(".header").length&&(e="calc(100% - 40px)"),$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(e="calc(100% - 1px)"),void(this.openWidth=e);var n=t.offset().left+10,s=i;s.length||(s=t.offset().left+10+t.outerWidth(!0)),e=this.getFillSize(n,s),this.openWidth="".concat(e-6,"px")}},calculateSearchfieldWidth:function(){var e,t="100%",i=0;this.element[0].getAttribute("style")&&this.element[0].removeAttribute("style");var n=window.getComputedStyle(this.element[0]);n.width&&!this.isContextSearch&&(t=n.width),this.hasCategories()&&(i+=this.categoryButton.outerWidth(!0)),this.hasGoButton()&&(i+=this.goButton.outerWidth(!0)),i>0&&(e="calc(".concat(t," - ").concat(i,"px)")),e&&(this.element[0].style.width=e)},handleCategorySelected:function(e,t){this.element.trigger("selected",[t]),this.settings.showCategoryText&&(this.setCategoryButtonText(e,t.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(e){var t=this.getCategories(),i=[];return t.each((function(){var t=this.classList.contains("is-checked");if(!0!==e||!1!==t){var n={name:this.innerText,checked:t};this.id&&(n.id=this.id);var s=this.getAttribute("data-value");void 0!==s&&(n.value=s),i.push(n)}})),i},updateCategories:function(e){this.settings.categories=e,this.setCategories(this.settings.categories)},setCategories:function(e){this.list.empty();var t=this,n=["string","number"],s=!1;e.forEach((function(e){if("string"==typeof e&&(e={name:e}),e.name){var a="";"string"==typeof e.id&&e.id.length&&(a=' id="'.concat(e.id,'"'));var o="";n.indexOf(i(e.value))>-1&&(o=' data-value="'.concat(e.value,'"'));var r="";!0===e.checked&&!0!==s&&(r=' class="is-checked"',t.settings.categoryMultiselect||(s=!0)),t.list.append("<li".concat(r).concat(a).concat(o,'><a href="#">').concat(e.name,"</a></li>"))}}));var a=this.categoryButton.data("popupmenu");a&&"function"==typeof a.updated&&a.updated()},expand:function(e){var t=this,i=this;return new st((function(n){if(i.isExpanded||i.isExpanding||i.isCollapsing)n();else{var s=!i.shouldBeFullWidth();i.isExpanding=!0,s||i.appendToParent(),i.wrapper.removeAttr("style"),i.input.removeAttribute("style");var a=0;i.buttonsetElem&&(a=parseInt(window.getComputedStyle(i.buttonsetElem).width,10));var o={buttonset:a+280};t.isContainedByFlexToolbar&&!p.isAbove("phone-to-tablet")||t.wrapper[0].classList.add("is-open"),t.calculateOpenWidth(),t.setOpenWidth(),(!e||"ios"===m.os.name||i.isFocused&&document.activeElement!==i.input)&&(i.focusElem&&(i.focusElem=i.input),i.input.focus());var r=[];o&&r.push(o),i.element.trigger("beforeexpand"),$(i.toolbarParent).triggerHandler("recalculate-buttons",r);var l=new W({duration:10,updateCallback:function(){},timeoutCallback:function(){$(i.toolbarParent).triggerHandler("recalculate-buttons",r),i.element.trigger("expanded"),delete i.isExpanding,i.isExpanded=!0,!i.isCurrentlyCollapsible||i.isFocused||i.focusElem||i.handleSafeBlur()}});G.register(l)}}))},collapse:function(){var e=this,t=this;return new st((function(i){if(t.isExpanded||!t.isExpanding||t.isCollapsing){t.isCollapsing=!0,t.wrapper.removeAttr("style"),t.appendToButtonset(),t.checkContents(),t.toolbarParent&&t.setInitalWidth(),t.clearResponsiveState(),t.wrapper[0].classList.remove("active","is-open"),m.browser.isIE11&&t.wrapper[0].classList.remove("is-open"),!e.isContainedByFlexToolbar&&e.isFocused||t.wrapper[0].classList.remove("has-focus"),t.categoryButton&&t.categoryButton.length&&t.categoryButton.data("popupmenu").close(!1,!0),t.element.trigger("beforecollapse"),delete t.isExpanded,delete t.isExpanding;var n=new W({duration:10,updateCallback:function(){},timeoutCallback:function(){delete t.isCollapsing,$(t.toolbarParent).triggerHandler("recalculate-buttons"),t.element.trigger("collapsed"),i()}});G.register(n)}else i()}))},collapseResponsive:function(e){if(this.previouslyCollapsedByKey&&"click"===e.type)delete this.previouslyCollapsedByKey;else{var t=this,i=1;e&&!e.key&&(i=0,this.toolbarFlexItem&&this.toolbarFlexItem.focused&&(i=1)),"keydown"===e.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then((function(){t.wrapper.trigger("collapsed-responsive",[i])}))}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){var e;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(e="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(e)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(e,"px")))},addMoreLink:function(){var e=$("#autocomplete-list"),t=this.element.val();if(!($(".more-results",e).length>0)){var i=$('<li class="separator" role="presentation"></li>').appendTo(e),n=$('<li role="presentation"></li>').appendTo(e);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(M.translate("AllResults"),' "').concat(h.ensureAlphaNumericWithSpaces(t),'"</span>')).appendTo(n),this.autocomplete.maxWidth&&i.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var e=$("#autocomplete-list");if(!($(".no-results",e).length>0)){var t=$('<li role="presentation" class="is-placeholder"></li>').appendTo(e);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(M.translate("NoResults"),"</span>")).appendTo(t)}},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings),Object.prototype.hasOwnProperty.call(e,"collapseSize")&&void 0===e.collapseSize&&(this.settings.collapseSize=e.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){return this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.categoryButton&&this.categoryButton.length&&(this.categoryButton.off().remove(),delete this.categoryButton),this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),this.xButton.remove()),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"searchfield")}},$.fn.searchfield=function(e){return this.each((function(){var t=$.data(this,"searchfield");t?t.updated(e):t=$.data(this,"searchfield",new yt(this,e))}))};var wt={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function xt(e,t){return this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,wt),this.init()}xt.prototype={get searchfieldAPI(){if(this.searchfield&&this.searchfield.length)return this.searchfield.data("searchfield")},init:function(){this.setup().handleEvents()},setup:function(){this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var e=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==e?"true"===e:this.settings.openOnLarge;var t=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==p[t]?t:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var i=this.menu.prevAll(".masthead"),n=this.menu.prevAll(".module-tabs");i.length>0&&(this.scrollTarget=i,this.menu.addClass("short")),n.length>0&&(this.scrollTarget=n),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var s=this.accordion.data("accordion");if(s||(this.accordion.accordion(),s=this.accordion.data("accordion")),this.accordionAPI=s,this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.settings.filterable&&"function"==typeof $.fn.searchfield){this.searchfield.length?this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.children(".searchfield")):this.searchfield=$("".concat('<div class="searchfield-wrapper"><label for="application-menu-searchfield">').concat(M.translate("Search"),"</label>")+'<input id="application-menu-searchfield" class="searchfield" /></div>').prependTo(this.element),this.element.addClass("has-searchfield");var a=this;this.searchfield.searchfield({clearable:!0,filterMode:this.settings.filterMode,source:function(e,t,i){t(e,a.accordion.data("accordion").toData(!0,!0),i)},searchableTextCallback:function(e){return e.text||e.contentText||""},resultIteratorCallback:function(e){return e.highlightTarget="text",e},clearResultsCallback:function(){a.searchfieldAPI&&!a.searchfieldAPI.isFocused&&a.accordionAPI.unfilter()},displayResultsCallback:function(e,t,i){return a.filterResultsCallback(e,t,i)}}),this.searchfield.on("cleared.".concat("applicationmenu"),(function(){a.accordionAPI.unfilter()}))}this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var o=this.element.find(".application-menu-switcher-trigger");o.length>0&&(this.switcherTrigger=o,this.switcherPanel=o.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea());return this},getAdjacentContainerElement:function(){var e=this.element.next(".page-container");return e.length||(e=$("body")),e},handleTriggerEvents:function(){var e=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",(function(t){return!$(t.currentTarget).find(".icon.app-header").hasClass("go-back")&&(!e.isAnimating&&(e.menu.hasClass("is-open")?e.closeMenu(!0):e.openMenu(void 0,!0),!0))})),$(document).on("keydown.applicationmenu",(function(t){e.handleKeyDown(t)}))},handleKeyDown:function(e){return!(121===e.which&&!e.shiftKey)||(e.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),!1)},notify:function(e,t){if(e&&void 0!==e&&(e instanceof HTMLElement&&(e=$(e)),e.is("a"))){var i=e.find(".tag");if(t&&void 0!==t&&0!==parseInt(t,10))return i.length||(i=$('<span class="tag"></span>').appendTo(e)),i.text(t.toString()),i;i.length&&i.remove()}},adjustHeight:function(){var e=this.scrollTarget.is(".is-sticky"),t=this.scrollTarget.outerHeight(!0)-(e?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(t+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=t>0?"calc(100% - ".concat(t,"px)"):"100%"},toggleScrollClass:function(){if("ie"===m.browser.name&&"11"===m.browser.version){var e=this.element[0];e&&e.classList.contains("has-menu-footer")&&(e.scrollHeight>e.clientHeight?e.classList.add("has-scrollbar"):e.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return p.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(p.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else p.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},openMenu:function(e,t,i){if(!0!==this.isAnimating){var n=this,s=$.fn.transitonEndName;if(i||(this.isAnimating=!0),this.adjustHeight(),this.triggers.each((function(){var e=$(this);if(e.parents(".header").length>0||e.parents(".masthead").length>0){if(e.parents(".header, .masthead").parents(".page-container").length)return;e.find(".icon.app-header").removeClass("go-back").addClass("close"),e.trigger("icon-change")}})),i||(this.menu.off("".concat(s,".applicationmenu")),this.menu[0].style.display="",this.menu[0].offsetHeight,this.menu.addClass("is-open"),m.features.touch&&$("body").addClass("is-open-touch")),p.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),e&&!0===e||this.menu.find(".is-selected > a").focus(),"ios"===m.os.name)this.getAdjacentContainerElement().addClass("ios-click-target");i?a():(this.menu.one("".concat(s,".applicationmenu"),a),this.timeout=setTimeout(a,300)),setTimeout((function(){$(document).on("click.applicationmenu",(function(e){$(e.target).parents(".application-menu").length<1&&!n.isLargerThanBreakpoint()&&n.closeMenu(!0)}))}),0)}function a(){null!==n.timeout&&(clearTimeout(n.timeout),n.timeout=null),t&&(n.userOpened=!0,n.userClosed=void 0),i||(n.isAnimating=!1,n.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),n.toggleScrollClass(),n.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(e){if(!0!==this.isAnimating){var t=this,i=$.fn.transitionEndName();if(this.isAnimating=!0,this.triggers.each((function(){var e=$(this);(e.parents(".header").length>0||e.parents(".masthead").length>0)&&(e.find(".icon.app-header").removeClass("close"),e.trigger("icon-change"))})),"ios"===m.os.name)this.getAdjacentContainerElement().removeClass("ios-click-target");this.menu.one("".concat(i,".applicationmenu"),n),this.timeout=setTimeout(n,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),m.features.touch&&$("body").removeClass("is-open-touch")}function n(){null!==t.timeout&&(clearTimeout(t.timeout),t.timeout=null),t.menu.off("".concat(i,".applicationmenu")),t.menu[0].style.display="none",t.isAnimating=!1,e&&(t.userOpened=void 0,t.userClosed=!0),t.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(e,t,i){if(e&&e.length){var n=$();$.each(e,(function(e,t){n=n.add($(t))})),this.triggers=this.triggers[t?"not":"add"](n),this.handleTriggerEvents(),i&&!0===i||this.updated()}},filterResultsCallback:function(e,t){if(!e||!e.length)return this.accordionAPI.unfilter(),void t();var i=$(e.map((function(e){return e.element})));this.accordionAPI.filter(i,!0),this.element.triggerHandler("filtered",[e]),t()},handleSearchfieldInputEvent:function(){if(this.searchfield&&this.searchfield.length){var e=this.searchfield.val();if(!e||""===e){var t=this.accordion.find(".has-filtered-children");this.accordionAPI.headers.removeClass("filtered has-filtered-children"),this.accordionAPI.collapse(t),this.accordionAPI.updated(),this.element.triggerHandler("filtered",[[]])}}},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var e=this.switcherPanel.data("expandablearea");if(e&&(e.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","keydown.".concat("applicationmenu","-switcher")].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.accordionAPI&&"function"==typeof this.accordionAPI.destroy&&(this.isFiltered&&this.accordionAPI.collapse(),this.accordionAPI.destroy()),this.switcherPanel&&(this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","afterexpand.".concat("applicationmenu")].join(" ")),delete this.switcherTrigger,delete this.switcherPanel),this.searchfield&&this.searchfield.length){this.searchfield.off(["input.applicationmenu","cleared.".concat("applicationmenu")].join(" "));var e=this.searchfield.data("searchfield");e&&e.destroy()}return this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],"applicationmenu")},handleEvents:function(){var e=this,t=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",(function(e,i,n){t.notify(i,n)})).on("updated.applicationmenu",(function(){t.updated()})),"ie"===m.browser.name&&"11"===m.browser.version&&t.element.find(".expandable-area").on("beforeexpand.applicationmenu",(function(){t.element[0].classList.remove("has-scrollbar")})).on("aftercollapse.applicationmenu",(function(){t.toggleScrollClass()})),this.accordion.on("blur.applicationmenu",(function(){t.closeMenu()})).on("selected.applicationmenu",(function(){t.handleDismissOnClick()})).on("followlink.applicationmenu",(function(){t.handleDismissOnClick()})).on("afterexpand.applicationmenu aftercollapse.applicationmenu",(function(){t.toggleScrollClass()})),this.switcherPanel&&this.switcherPanel.on("beforeexpand.applicationmenu",(function(){var i=e.element.height();t.element.addClass("has-open-switcher"),t.switcherPanel.find(".content").height(i-71),t.settings.onExpandSwitcher&&t.settings.onExpandSwitcher(t,t.element,t.settings),t.element.on("keydown.".concat("applicationmenu","-switcher"),(function(e){var i=e.key;"Escape"===i&&t.element[0].classList.contains("has-open-switcher")&&(e.preventDefault(),t.closeSwitcherPanel()),"Tab"===i&&(t.keyboardChangedFocus=!0)})),t.switcherPanel.one("afterexpand.".concat("applicationmenu"),(function(){var i;e.keyboardChangedFocus||((i=u.focusableElems(t.switcherPanel[0]))[0].classList.remove("hide-focus"),i[0].focus())}))})).on("aftercollapse.applicationmenu",(function(){e.element.removeClass("has-open-switcher"),e.settings.onCollapseSwitcher&&e.settings.onCollapseSwitcher(e,e.element,e.settings),e.element.off("keydown.".concat("applicationmenu","-switcher")),e.switcherPanel.off("afterexpand.".concat("applicationmenu")),delete e.keyboardChangedFocus})),$(document).on("open-applicationmenu",(function(){t.openMenu(void 0,!0)})).on("close-applicationmenu",(function(){t.closeMenu()})).on("dismiss-applicationmenu",(function(){t.handleDismissOnClick()})),$(window).on("scroll.applicationmenu",(function(){t.adjustHeight()})),$("body").on("resize.applicationmenu",(function(){t.testWidth(),t.toggleScrollClass()})),!0===this.settings.filterable&&this.searchfield&&this.searchfield.length&&this.searchfield.on("input.applicationmenu",(function(e){t.handleSearchfieldInputEvent(e)})),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout((function(){t.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}),800),this}},$.fn.applicationmenu=function(e){return this.each((function(){var t=$.data(this,"applicationmenu");return t?t.updated(e):t=$.data(this,"applicationmenu",new xt(this,e)),t}))};var Ct={dataset:[],selectable:!1,paging:!1,pagesize:25,pagesizes:[10,25,50,75]};function kt(e,t){this.element=$(e),this.settings=C.mergeSettings(e,t,Ct),t.dataset&&(this.settings.dataset=t.dataset),this.init()}kt.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var e=this,t=this;return this.element.on("click.".concat("blockgrid"),".block",(function(e){var i=$(e.currentTarget),n=$(e.target),s=n.is(".checkbox-label")||n.is(".checkbox");setTimeout((function(){t.select(i,s)}),0),e.stopPropagation(),e.preventDefault()})),this.element.on("focus.".concat("blockgrid"),".checkbox",(function(e){$(e.currentTarget).parent().addClass("has-focus")})),this.element.on("blur.".concat("blockgrid"),".checkbox",(function(e){$(e.currentTarget).parent().removeClass("has-focus")})),this.element.on("keypress.".concat("blockgrid"),".block",(function(e){if(32===e.which){var i=$(e.target);t.select(i,!1)}})),this.element.on("updated.".concat("blockgrid"),(function(){t.updated()})),this.pagerAPI&&this.element.on("page.".concat("blockgrid"),(function(){e.previousFocusedElement=!0,e.build()})).on("pagesizechange.".concat("blockgrid"),(function(){e.previousFocusedElement=!0,e.build()})),this},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.element.pager({componentAPI:this,dataset:this.settings.dataset,pagesize:this.settings.pagesize,pagesizes:this.settings.pagesizes}))},selectBlock:function(e,t){return F(this.select,this.selectBlock).apply(this,[e,t])},select:function(e,t){var i=this.element.find(".block"),n=this.element.find(".checkbox"),s=e.find(".checkbox"),a=s.is(":checked"),o="",r=Number(s.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],i.removeClass("is-selected").removeAttr("aria-selected"),n.prop("checked",!1)),"multiple"===this.settings.selectable&&a||"mixed"===this.settings.selectable&&t&&a){e.removeClass("is-selected").removeAttr("aria-selected"),s.prop("checked",!1);for(var l=0;l<this.selectedRows.length;l++)r===this.selectedRows[l].idx&&this.selectedRows.splice(l,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1===this.settings.selectable||"mixed"===this.settings.selectable&&!t||(a||(e.addClass("is-selected").attr("aria-selected","true"),s.prop("checked",!0)),this.selectedRows.push({idx:r,data:this.settings.dataset[r],elem:e}),o=a?"deselected":"selected"),"mixed"===this.settings.selectable&&!t){var c=e.hasClass("is-activated");return i.removeClass("is-activated"),void(c?(e.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:r,item:this.settings.dataset[r]}])):(e.addClass("is-activated"),this.element.triggerHandler("activated",[{row:r,item:this.settings.dataset[r]}])))}this.element.triggerHandler(a?"deselected":"selected",[{selectedRows:this.selectedRows,action:o}])}},render:function(){var e=this,t="",i=this.settings.dataset,n=M?M.translate("Select"):"Select";if(this.pagerAPI){var s=this.pagerAPI.state;if(s.pages>1){var a=s.activePage>0?s.activePage-1:0,o=s.pagesize*a,r=s.pagesize*(a+1);if((i=i.slice(o,r)).length!==this.settings.dataset.length)for(var l=0;l<r-o+1&&!i[l].id;l++)i[l].id=o+l}}var c=[];this.selectedRows.forEach((function(e){c.push(e.idx)}));for(var d=0;d<i.length;d++){var h=i[d],u="mixed"===this.settings.selectable?"0":"-1",p="",g="";c.indexOf(h.id)>-1&&(p=" is-selected",g=" checked"),t+='<div class="block is-selectable'.concat(p,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(d,'" tabindex="').concat(u,'" data-idx="').concat(h.id||d,'"').concat(g,'>\n        <label for="checkbox').concat(d,'" class="checkbox-label">\n          <span class="audible">').concat(n,'</span>\n        </label>\n        <img alt="Placeholder Image" src="').concat(h.img||h.image,'" class="image-round">\n        <p> ').concat(h.maintxt||h.title," <br> ").concat(h.subtxt||h.subtitle," </p>\n      </div>")}this.element.attr("role","list").append(t),this.previousFocusedElement&&setTimeout((function(){e.element.find(".block").first().focus(),delete e.previousFocusedElement}),0)},renderBlock:function(){return F(this.render,this.renderBlock).apply(this)},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat("blockgrid")),this.element.off("click.".concat("blockgrid")),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],"blockgrid")}},$.fn.blockgrid=function(e){return this.each((function(){var t=$.data(this,"blockgrid");t?t.updated(e):t=$.data(this,"blockgrid",new kt(this,e))}))};var Tt={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1};function St(e,t){this.settings=C.mergeSettings(e,t,Tt),this.element=$(e),this.init()}St.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var e=this.element.attr("data-block-ui"),t=this.element.attr("data-display-delay"),i=this.element.attr("data-completion-time");this.blockUI=void 0!==e?e:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:M.translate("Loading"),this.label&&this.label.text(this.loadingText));var n=void 0!==t&&!isNaN(t)&&parseInt(t,10)>20,s=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=n?t:s,this.completionTime=void 0===i||isNaN(i)?this.settings.timeToComplete:parseInt(i,10),this},activate:function(){var e=this;if(!e.isActive()){if(this.container)return e.closeTimeout&&clearTimeout(e.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var t="";if(this.blockUI&&(this.settings.transparentOverlay&&(t=" transparent"),this.originalPositionProp=this.element[0].style.position,this.element[0].style.position="relative",this.overlay=$('<div class="overlay busy is-hidden'.concat(t,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui")),this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var i;if(this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input"))i=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element);else i=this.element.data("dropdown").pseudoElem,this.container.appendTo(i.parent());this.overlay&&this.overlay.insertAfter(this.container);for(var n=i.position(),s=i.outerHeight(),a=i.outerWidth(),o=this.container.add(this.overlay),r=function(e,t,i){e.style[t]="".concat(i,"px")},l=0,c=o.length;l<c;l++)r(o[l],"left",n.left),r(o[l],"top",n.top),r(o[l],"bottom",n.bottom),r(o[l],"right",n.right),r(o[l],"height",s),r(o[l],"width",a)}else this.container.appendTo(this.element);setTimeout((function(){e.container&&e.container.removeClass("is-hidden"),e.overlay&&e.overlay.removeClass("is-hidden"),e.blockUI&&e.addScrollParent()}),e.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(e.isAnimating=!0,e.animateWithJS()),this.completionTime>0&&setTimeout((function(){e.element.trigger("complete")}),e.completionTime)}},close:function(e){var t=this;t.isActive()&&(this.removeScrollParent(),e&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),t.closeTimeout=setTimeout((function(){clearTimeout(t.closeTimeout),t.container&&t.container.remove(),t.container=void 0,t.loader=void 0,t.label=void 0,t.overlay&&(t.overlay.remove(),t.element[0].style.position=t.originalPositionProp,t.originalPositionProp=void 0),t.overlay=void 0,t.element.trigger("aftercomplete.busyindicator"),t.element.off("complete.busyindicator")}),600))},animateWithJS:function(){var e=this,t=this.container.find(".bar.one"),i=this.container.find(".bar.two"),n=this.container.find(".bar.three"),s=this.container.find(".bar.four"),a=this.container.find(".bar.five"),o=0;setInterval((function(){e.isAnimating?(1===(o+=1)&&t.addClass("half"),13===o&&(t.removeClass("half").addClass("full"),i.addClass("half")),26===o&&(t.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),n.addClass("half")),39===o&&(t.removeClass("half"),i.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),s.addClass("half")),51===o&&(i.removeClass("half"),n.removeClass("full").addClass("half"),s.removeClass("half").addClass("full"),a.addClass("half")),64===o&&(n.removeClass("half"),s.removeClass("full").addClass("half"),a.removeClass("half").addClass("full")),77===o&&(s.removeClass("half"),a.removeClass("full").addClass("half")),90===o&&a.removeClass("half"),103===o&&(o=0)):clearInterval(null)}),10)},addScrollParent:function(){var e=this;if(this.blockUI){this.scrollParent=$(this.getScrollParent(this.element[0]));var t=this.scrollParent[0]?this.scrollParent[0].offsetHeight:0;if(t&&this.container&&t<this.element[0].offsetHeight){var i=t/2-58,n=function(){return e.container.css({top:i+e.scrollParent[0].scrollTop})};n(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",(function(){e.container&&n()}))}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(e){var t=["overflow","overflow-x","overflow-y"],i=function(e){return t.reduce((function(t,i){return t+function(e,t){return getComputedStyle(e,null).getPropertyValue(t)}(e,i)}),0)},n=/(auto|scroll)/,s=function(e){return n.test(i(e))};return function(e){for(var t=!1,i=e.parentNode;!t&&i&&i.tagName&&"body"!==i.tagName.toLowerCase();){if(s(i)){t=!0;break}i=i.parentNode}return t?i:null}(e)},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],"busyindicator")},handleEvents:function(){var e=this;return this.element.on("start.busyindicator",(function(t){t.stopPropagation(),e.activate()})).on("afterstart.busyindicator",(function(){e.element.on("complete.busyindicator",(function(t){t.stopPropagation(),e.close(!0)}))})).on("updated.busyindicator",(function(){e.close(!0),e.updated()})),this}},$.fn.busyindicator=function(e){return this.each((function(){var t=$.data(this,"busyindicator");t?t.updated(e):t=$.data(this,"busyindicator",new St(this,e))}))};var $t={tooltip:{}};$t.isIE="ie"===m.browser.name,$t.isIEEdge="edge"===m.browser.name,$t.tooltipSize=function(e){return u.html(this.tooltip.find(".tooltip-content"),e,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},$t.formatToSettings=function(e,t){var i=e.data?e.data:e;return"value"===t.show?t.formatter?d3.format(t.formatter)(i.value):i.value:"label"===t.show?i.name:"label (percent)"===t.show?"".concat(i.name," (").concat(isNaN(i.percentRound)?0:i.percentRound,"%)"):"label (value)"===t.show?"".concat(i.name," (").concat(t.formatter?d3.format(t.formatter)(i.value):i.value,")"):"percent"===t.show?"".concat(isNaN(i.percentRound)?0:i.percentRound,"%"):"function"==typeof t.show?t.show(i):i.value},$t.appendTooltip=function(e){var t=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(e=e?" ".concat(e):"",this.tooltip=$('<div id="svg-tooltip" class="tooltip right is-hidden'.concat(e,'">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",(function(){t.hideTooltip()}))))},$t.hideTooltip=function(){var e=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",(function(){e.hideTooltip()}))},$t.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},$t.colorRange=function(){var e=J.themeColors().palette;return J.uplift?[e.azure[80].value,e.turquoise[40].value,e.amethyst[60].value,e.graphite[40].value,e.amber[40].value,e.emerald[70].value,e.ruby[60].value,e.azure[30].value,e.amber[70].value,e.graphite[60].value,e.turquoise[60].value,e.emerald[90].value,e.amethyst[30].value,e.azure[50].value,e.ruby[30].value,e.amethyst[80].value,e.emerald[30].value,e.turquoise[80].value,e.graphite[20].value,e.amber[90].value]:[e.azure[70].value,e.turquoise[30].value,e.amethyst[30].value,e.graphite[60].value,e.amber[50].value,e.emerald[60].value,e.ruby[60].value,e.azure[30].value,e.amber[90].value,e.turquoise[80].value,e.ruby[20].value,e.graphite[50].value,e.emerald[50].value,e.azure[50].value,e.amethyst[80].value,e.emerald[30].value,e.turquoise[50].value,e.amber[70].value,e.graphite[20].value,e.azure[20].value]},$t.colorNameRange=function(){return J.uplift?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},$t.chartColor=function(e,t,i){var n=$t.colorRange(),s=i&&i.color?i.color:null;if(s){if("error"===s)return J.themeColors().status.danger.value;if("alert"===s)return J.themeColors().status.warning.value;if("alertYellow"===s)return J.themeColors().status.caution.value;if("good"===s)return J.themeColors().status.success.value;if("neutral"===s)return J.themeColors().palette.graphite[30].value;if(s&&0===s.indexOf("#"))return i.color}return/^(pie|donut)$/.test(t)?n[e]:/^(bar-single|column-single)$/.test(t)?n[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?n[e]:""},$t.chartColorName=function(e,t,i){var n=i&&i.color?i.color:null;if(n){if("error"===n)return"alert01";if("alert"===n)return"alert02";if("alertYellow"===n)return"alert03";if("good"===n)return"alert04";if("neutral"===n)return"graphite03";if(n&&0===n.indexOf("#"))return i.color}return/^(pie|donut)$/.test(t)?this.colorNameRange()[e]:/^(bar-single|column-single)$/.test(t)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(t)?this.colorNameRange()[e]:""},$t.showTooltip=function(e,t,i,n,s){var a,o,r=this;e<0&&(e=2),this.tooltip[0].style.left="".concat(e,"px"),this.tooltip[0].style.top="".concat(t,"px"),u.html(this.tooltip.find(".tooltip-content"),i,"*"),this.tooltip.removeClass("bottom top left right").addClass(n),this.tooltip.css("max-width",(null==s||null===(a=null==s?void 0:s.tooltip)||void 0===a||null==a?void 0:a.maxWidth)||""),this.tooltip.find(".arrow").css("left",(null==s||null===(o=null==s?void 0:s.arrow)||void 0===o||null==o?void 0:o.left)||""),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){r.hideTooltip()})),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){r.hideTooltip()}))},$t.addLegend=function(e,t,i,n){var s;if(0!==e.length){var a=e[0].display&&"twocolumn"===e[0].display,o=a?$('<div class="chart-legend '.concat(e[0].placement?"is-".concat(e[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');"pie"!==t&&"donut"!==t||!i.showMobile||(o=$('<div class="chart-legend"><div class="container"></div></div>'));var r,l=0;for(s=0;s<e.length;s++)r=e[s].name?6*e[s].name.length:6,l=e[s].name&&r>l?r:l;var c=(l+=55)/$(n).width()*100;for(s=0;s<e.length;s++)if(e[s].name){var d="";(a||e[s].display&&"block"===e[s].display)&&(d+=" lg"),"column-positive-negative"===i.type&&e[s].option&&(d+=" ".concat(e[s].option));var u='<span class="chart-legend-item'.concat(d,'" tabindex="0"></span>'),p=$t.chartColor(s,t||(1===e.length?"bar-single":"bar"),e[s]),g=$t.chartColorName(s,t||(1===e.length?"bar-single":"bar"),e[s]),f="";"#"===g.substr(0,1)?(f=$('<span class="chart-legend-color"></span>'),e[s].pattern||f.css("background-color",p)):f=$('<span class="chart-legend-color '.concat(e[s].pattern?"":g,'"></span>')),"scatterplot"===t&&(f=$('<span class="chart-legend-color"></span>'));var m=$('<span class="chart-legend-item-text">'.concat(h.stripTags(e[s].name),"</span>"));if(e[s].pattern&&(f.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(e[s].pattern,')"/></svg>')),f.find("rect").css("fill",p)),e[s].percent){var v=$('<span class="chart-legend-percent"></span>').text(e[s].percent);m.append(v)}e[s].display&&"block"===e[s].display&&(u='<span class="chart-legend-item'.concat(d,'" tabindex="0"></span>')),a&&(u=c>45&&"right"!==i.legendPlacement?'<span class="chart-legend-item'.concat(d,'" tabindex="0"></span>'):'<span class="chart-legend-item'.concat(d,' is-two-column" tabindex="0" ></span>')),(u=$(u)).append(f,m),"pie"!==t&&"donut"!==t||!i.showMobile?o.append(u):o.find(".container").append(u),(e[s].display&&"block"===e[s].display||a&&c>45&&"right"!==i.legendPlacement)&&u.css({float:"none",display:"block",margin:"0 auto",width:"".concat(l,"px")}),"scatterplot"===t&&(self.svg=d3.select(f[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type((function(){return d3.symbols[s]}))).style("fill",p)),innerWidth<=480&&e[s].data&&e[s].data.legendAbbrName&&m.replaceWith('<span class="chart-legend-item-text">'.concat(e[s].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&e[s].data&&e[s].data.legendShortName&&m.replaceWith('<span class="chart-legend-item-text">'.concat(e[s].data.legendShortName,"</span>"))}o instanceof $&&(o.on("click.chart",".chart-legend-item",(function(){$t.handleElementClick(this,e,i)})).on("keypress.chart",".chart-legend-item",(function(t){13!==t.which&&32!==t.which||$t.handleElementClick(this,e,i)})),$(n).append(o))}},$t.handleElementClick=function(e,t,i){var n,s,a=$(null==i||null===(n=null==i?void 0:i.svg)||void 0===n||null==n?void 0:n.node()).closest(".chart-container").data("chart"),o=null==a||null==a?void 0:a.initialSelectCall,r=$(e).index(),l=t[r];if("radar"===i.type&&(s=d3.select(i.svg.selectAll(".chart-radar-area").nodes()[r])),"pie"===i.type||"donut"===i.type)s=d3.select(i.svg.selectAll(".slice").nodes()[r]);else if(/positive-negative/.test(i.type))s=!l.option||l.option&&"target"===l.option?i.svg.select(".target-bar"):i.svg.select(".bar.".concat(l.option));else if(-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type))if(i.isGrouped||i.isSingle)s=i.svg.select(".series-".concat(r));else if(i.isStacked&&!i.isSingle){s=d3.select(i.svg.selectAll("bar"===i.type||"bar-stacked"===i.type||"bar-normalized"===i.type?".series-group":".g").nodes()[r]).select(".bar")}-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&($t.clickedLegend=!0,s.dispatch("click")),l.selectionObj&&$t.selectElement(d3.select(l.selectionObj.nodes()[r]),l.selectionInverse,l.data,void 0,i.dataset,o)},$t.selected=[],$t.clearSelected=function(e){if(e){var t=function(e){Object.prototype.hasOwnProperty.call(e,"selected")&&delete e.selected};!function e(i){Array.isArray(i)&&i.forEach((function(i){t(i),i.data&&e(i.data)})),t(i)}(e)}},$t.selectElement=function(e,t,i,n,s,a){var o=e.node()&&e.classed("is-selected");$t.clearSelected(s),o||(i.selected=!0);var r=[{elem:e.nodes(),data:o?{}:i}];t.classed("is-selected",!1).classed("is-not-selected",!o),e.classed("is-not-selected",!1).classed("is-selected",!o),$t.selected=$.isEmptyObject(r[0].data)?[]:r,a||$(n).triggerHandler("selected",[r])},$t.setSelectedElement=function(e){var t,i=e.dataset,n=/positive-negative/.test(e.type),s=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(e.type),a="pie"===e.type||"donut"===e.type,o=/^(column|column-grouped|column-stacked|column-positive-negative|positive-negative)$/.test(e.type),r=e.svg,l=e.isSingle,c=e.isGrouped,d=e.isStacked,h="selected"===e.task,u=d3.select(e.selector),p=u.classed("positive"),g=e.svg.selectAll(".axis.x .tick"),f=e.svg.selectAll(".axis.y .tick"),m=e.svg.selectAll(".bartext.positive, .target-bartext.positive"),v=e.svg.selectAll(".bartext.negative, .target-bartext.negative"),b=e.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),y=d3.select(e.selector.parentNode),w=parseInt(y.node()?y.attr("data-group-id"):0,10),x=[],C=[];if(i=d||a?i||null:i&&i[w]?i[w].data||i[w]:null,g.style("font-weight","normal"),f.style("font-weight","normal"),m.style("font-weight","normal"),v.style("font-weight","normal"),r.selectAll(".is-selected").classed("is-selected",!1),$t.clearSelected(e.dataset),a&&r.selectAll(".is-not-selected").classed("is-not-selected",!1),n&&Object.prototype.hasOwnProperty.call(e.dataset[0],"targetBarsSelected")&&delete e.dataset[0].targetBarsSelected,h)if(r.selectAll(".bar, .target-bar").style("opacity",.6),$t.clickedLegend&&!a)n?(e.isTargetBar?(e.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),b.style("font-weight","bolder"),e.dataset[0].targetBarsSelected=!0):(e.svg.selectAll(p?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(p?m:v).style("font-weight","bolder")),r.selectAll(".bar").each((function(e,t){var n=d3.select(this);if(n.classed("is-selected")){var s=i?i[t]:e;s.selected=!0,C.push({elem:n.node(),bardata:s})}})),x=C):(o||s)&&(c||l?e.svg.selectAll(".series-"+e.i).classed("is-selected",!0).style("opacity",1):y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),r.selectAll(".bar.is-selected").each((function(i,n){var a=d3.select(this);(t=e.dataset)||(t=i),s&&!d?c?t=e.dataset[n].data[e.i]:(t[n][e.i]&&(t=t[n][e.i]),t[e.i]&&t[e.i][n]&&(t=t[e.i][n]),t[n]&&t[n][e.i]&&(t=t[n][e.i])):d&&!l?(t[w]&&t[w].data[n]&&(t=t[w].data[n]),s&&(e.dataset[w].selected=!0)):(t[n].data[e.i]&&(t=t[n].data[e.i]),t[e.i]&&t[e.i].data[n]&&(t=t[e.i].data[n]),t[n]&&t[n].data[e.i]&&(t=t[n].data[e.i])),t.selected=!0,C.push({elem:a.node(),data:t})})),x=C);else if(l&&d&&o)t=i[0]&&i[0].data?i[0].data:e.d,u.classed("is-selected",!0).style("opacity",1),x.push({elem:u.nodes(),data:t[e.i]});else if(!l&&!c||d||!o&&!s){if(o||s)r.selectAll("".concat(o?".axis.x":".axis.y"," .tick:nth-child(").concat(e.i+2,")")).style("font-weight","bolder"),r.selectAll(".bar:nth-child(".concat(e.i+1,")")).classed("is-selected",!0).style("opacity",1),r.selectAll(".bar.is-selected").each((function(t,n){var a=d3.select(this),o=t;i&&(o=s&&d&&void 0!==i[n][e.i]?i[n][e.i]:i[n].data[e.i]),o.selected=!0,C.push({elem:a.node(),data:o})})),x=C;else if(a){r.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var k=i&&i[0]&&i[0].data?i[0].data[e.i]:e.d?e.d.data:e.d;k.selected=!0,u.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),x.push({elem:u.nodes(),data:k,index:e.i})}}else{if(r.selectAll("".concat(o?".axis.x":".axis.y"," .tick:nth-child(").concat((c?w:e.i)+2,")")).style("font-weight","bolder"),u.classed("is-selected",!0).style("opacity",1),n){var T=e.isTargetBar?e.i:e.i-e.dataset[0].data.length;r.select(".target-bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),r.select(".bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),d3.select(r.selectAll(".bartext").nodes()[T]).style("font-weight","bolder"),d3.select(r.selectAll(".target-bartext").nodes()[T]).style("font-weight","bolder")}(c||n||o)&&((!n&&!o||o&&c)&&y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),y.selectAll(".bar").each((function(e,t){var n=d3.select(this);if(n.classed("is-selected")){var s=i?i[t]:e;s.selected=!0,C.push({elem:n.node(),data:s})}})),c?x.push({groupIndex:w,groupElem:y.nodes()[0],groupItems:C}):x=C)}else r.selectAll(".bar, .target-bar").style("opacity",1),m.style("font-weight","bolder"),v.style("font-weight","bolder"),a&&u.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");$t.clickedLegend&&($t.clickedLegend=!1),$t.selected=x,e.isTrigger&&$(e.container).triggerHandler(h?"selected":"unselected",[x])},$t.setSelected=function(e,t,i){if(e){var n,s,a,o,r,l=0,c=C.equals,d=i.isPie?i.svg.node().nextSibling:i.svg.node().parentNode.nextSibling,h=d3.select(d),u=h.node()&&h.classed("chart-legend"),p=function(t){var o=!!t;(t=o?d3.select(t):i.svg).selectAll(".bar").each((function(t,r){t&&l<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===t[e.fieldName]||void 0!==e.index&&e.index===r||e.data&&c(e.data,i.chartData[t.index].data[r])||e.elem&&$(this).is(e.elem))&&(l++,s=d3.select(this),n=r,o&&!i.isStacked&&(a=!0))}))};i.isGrouped||i.isStacked&&!i.isSingle?(i.chartData.forEach((function(t,r){l<1&&(o=$(i.svg.select('[data-group-id="'+r+'"]').node()),(void 0!==e.groupName&&void 0!==e.groupValue&&e.groupValue===t[e.groupName]||void 0!==e.groupIndex&&e.groupIndex===r||e.data&&c(e.data,t)||e.elem&&o.is(e.elem))&&void 0===e.fieldName&&void 0===e.fieldValue&&void 0===e.index&&(l++,s=i.svg.select('[data-group-id="'+r+'"]').select(".bar"),n=r,i.isStacked&&!i.isGrouped&&(a=!0)))})),l<1&&(r=i.svg.selectAll(".series-group")).nodes().length&&r.each((function(){p(this)}))):p(),l>0&&(t||!s.classed("is-selected"))&&(a?u&&$(h.selectAll(".chart-legend-item").nodes()[n]).trigger("click.chart"):s.on("click").call(s.node(),s.datum(),n))}},$t.labelsColide=function(e){var t=e.selectAll(".x text"),i=!1;return t.each((function(e,n){var s,a=this.getBoundingClientRect();t.each((function(e,t){n!==t&&(s=this.getBoundingClientRect(),!(a.right<s.left||a.left>s.right||a.bottom<s.top||a.top>s.bottom)&&(i=!0))}))})),i},$t.applyAltLabels=function(e,t,i,n,s){(n?e.selectAll(n):e.selectAll(".x text")).each((function(e,n){var a=t[n]?t[n][i]:"";a=a||(s?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(a)}))},$t.triggerContextMenu=function(e,t,i){d3.event.preventDefault(),d3.event.stopPropagation(),d3.event.stopImmediatePropagation();var n=$.Event("contextmenu");n.target=t,n.pageX=d3.event.pageX,n.pageY=d3.event.pageY,$(e).trigger(n,[t,i])},$t.calculateTextRenderWidth=function(e,t){var i;t=C.mergeSettings(void 0,t,{soho:"700 12px arial",uplift:"600 14px arial"});var n=((null==J||null===(i=null==J?void 0:J.currentTheme)||void 0===i||null==i?void 0:i.id)||"").match(/soho|uplift/);n=n?n[0]:"soho",this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var s=this.canvas.getContext("2d");return s.font=t[n],s.measureText(e).width},$t.calculatePercentage=function(e,t){return 100*e/t},$t.getPercentage=function(e,t){return e*t/100},$t.trimText=function(e,t){return e.length<=t?e:"".concat(e.substr(0,t),"...")},$t.getLabel=function(e,t){var i=e.name;return t.xxsmall||t.xsmall||t.small?i=e.shortName||e.abbrName||e.name:t.medium&&(i=e.abbrName||e.name),i},$t.wrap=function(e,t,i){i||(i=1.27),t||(i=60),e.each((function(){var e=d3.select(this),n=e.text().split(/\s+/).reverse(),s="",a=[],o=0;if(!(n.length<=1))for(var r=i,l=e.attr("y"),c=e.attr("x"),d=parseFloat(e.attr("dy")),h=e.text(null).append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(d,"em"));s=n.pop();)a.push(s),h.text(a.join(" ")),h.node().getComputedTextLength()>t&&(a.pop(),h.text(a.join(" ")),a=[s],h=e.append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(++o*r+d,"em")).text(s))}))};var At={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function Dt(e,t){this.settings=C.mergeSettings(e,t,At),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Dt.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var e=this,t=this.settings.dataset[0],n=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var s=0,a=[],o=t.data[0]?t.data[0].tooltip:[],r=!1,l=this.element.parent(),c=30,d=35,h=35,u=40,p=l.width()-u-d,g=l.height()-c-h-30;g=g<0?50:g;var f=d3.select(this.element[0]).append("svg").attr("width",p+u+d).attr("height",g+c+h).append("g").attr("transform","translate(".concat(u,",").concat(c,")"));for(var m=function(i,n,s){function a(e,t,i){var n=e(t,i);return void 0!==n?n:t}return t.format&&"function"==typeof t.format[i]?a(t.format[i],n,s):t.format&&"string"==typeof t.format[i]?d3.format(t.format[i])(n):e.settings.format&&"function"==typeof e.settings.format[i]?a(e.settings.format[i],n,s):e.settings.format&&"string"==typeof e.settings.format[i]?d3.format(e.settings.format[i])(n):n},v=function(e,t){return m("ranges",e,t)},b=function(e){return m("difference",e)},y=function(l){var c=e.settings.animate?400:0,d=e,h=t.data[l],u=h.ranges.slice().sort(d3.descending),g=h.markers?h.markers.slice().sort(d3.descending):[],m=h.measures?h.measures.slice().sort(d3.descending):[],y=h.ranges.slice().sort(d3.ascending),w=h.markers?h.markers.slice().sort(d3.ascending):[],x=h.measures?h.measures.slice().sort(d3.ascending):[];0===g.length&&(g=m,w=x,r=!0);var C=f.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*l,")"));C.append("g").append("text").attr("class","title").attr("dy","-10px").text((function(){return h.title})).append("tspan").attr("class","subtitle").attr("dx","15px").text((function(){return h.subtitle}));var k=Math.max(u[0],g[0],m[0]),T=Math.min(y[0],w[0],x[0]);T=T<0?T:0;var S,A,D=d3.scaleLinear().domain([T,k]).range([0,p]).nice(),E=(A=(S=D)(0),function(e){return Math.abs(S(e)-A)}),I=C.selectAll("rect.range").data(u);I.enter().append("rect").attr("class",(function(e,t){return"range s".concat(t)})).attr("data-idx",l).attr("width",0).attr("x",(function(e){return D(e<0?e:0)})).style("fill",(function(e,i){return t.barColors?t.barColors[i]:""})).attr("height",20).on("click.".concat(d.namespace),(function(){var e=d3.select(this);d.element.trigger("selected",[e,t.data[e.attr("data-idx")]])})).on("mouseenter.".concat(d.namespace),(function(e,r){var c=d3.select(this),d=t.data[c.attr("data-idx")],h=this.getBoundingClientRect(),u="<p>".concat(v(e,r),"</p>"),p=function(){var e=$t.tooltipSize(u),t=h.left+h.width-e.width/2,i=h.top-e.height+$(window).scrollTop()-5;""!==u&&($t.tooltip&&$t.tooltip.length&&$t.tooltip[n?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(t,i,u,"top"))};if(d.tooltip&&d.tooltip[r]&&(u=d.tooltip[d.tooltip.length-r-1]),o&&"function"==typeof o&&!a[r]){u="";var g=!0;s=setInterval((function(){g&&(g=!1,o((function(e){u=e,a[l]=e}))),""!==u&&(clearInterval(s),p())}),10)}else o="object"===i(o)?"":o,u=a[l]||o||u||"",p()})).on("mouseleave.".concat(d.namespace),(function(){clearInterval(s),$t.hideTooltip()})).on("contextmenu.".concat(d.namespace),(function(e){$t.triggerContextMenu(d.element,d3.select(this).nodes()[0],e)})).merge(I).transition().duration(c).attr("width",E);var L=C.selectAll("rect.measure").data(m);L.enter().append("rect").attr("class",(function(e,t){return"measure s".concat(t)})).attr("width",0).attr("height",3).attr("x",(function(e){return D(e<0?e:0)})).style("fill",(function(e,i){return t.lineColors?t.lineColors[i]:""})).attr("y",8.5).merge(L).transition().duration(c).attr("width",E);var P=C.selectAll("line.marker").data(g);P.enter().append("line").attr("class",r?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",(function(e,i){return t.markerColors?t.markerColors[i]:""})).attr("y1",20/6).attr("y2",100/6).merge(P).transition().duration(c).attr("x1",D).attr("x2",D).attr("y1",20/6).attr("y2",100/6);var M=(g[0]>m[0]?"-":"+")+Math.abs(g[0]-m[0]);0!==Math.abs(g[0]-m[0])&&P.enter().append("text").attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",$t.isRTL?"-20px":"20px").attr("x",0).text(b(M)).merge(P).transition().duration(c).attr("x",(function(){var e=0;return C.selectAll(".measure").each((function(t){var i=E(t),n=D(t);i>e&&(e=i),n>e&&(e=n)})),$t.isRTL?-e:e})).style("opacity",1);var B=C.selectAll("g.tick").data(D.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);B.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),B.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",(function(e){return e<0?"negative-value":"positive-value"})).text((function(e,t){return v(e,t)})),B.transition().duration(c).attr("transform",(function(e){return"translate(".concat(D(e),",0)")})).style("opacity",1),$t.isRTL&&$t.isIE&&f.selectAll("text").attr("transform","scale(-1, 1)")},w=0;w<t.data.length;w++)y(w);return $t.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".range").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],"bullet"),$.removeData(this.element[0],"chart"))}};var Et={dataset:[]};function It(e,t){this.settings=C.mergeSettings(e,t,Et),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}It.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var e=this,t=this.settings.dataset[0];0===this.settings.dataset.length&&((t={}).data=[{name:{text:M?M.translate("NoData"):"No Data Available"},completed:{value:0}}]);var i=t.data[0],n="completion-target"===this.settings.type,s="targeted-achievement"===this.settings.type;this.element.addClass("completion-chart").addClass("".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")).attr("role","image"),i.total=$.extend({},{value:100},i.total);var a,o=function(e){return void 0===e},r=function(e,t){var i=t?0:"";return o(e)?i:e},l=function(e,t){return t=t||i,Math.round(e/r(t.total.value,!0)*100)},c=function(e){return M.formatNumber(e/100,{style:"percent",maximumFractionDigits:0})},d=function(e,t){var n=e.toString();return-1!==n.indexOf("%")?function(e,t){return e/100*r((t=t||i).total.value,!0)}(n.replace(/%/g,""),t):e},h=function(e,t,i){var n=l(t,i),s=(n=n<0?0:n)>100?100:n;e[0].style.width="".concat(s,"%"),0===s&&(e[0].className+="is-empty")},p=function(e,t,i){var n=i?e._value:e.value;return e&&!o(n)&&e.format?function(e,t,i){return".0%"===t?c(l(e,i)):d3.format(t||"")(e)}(d(n,t),e.format,t):e?d(n,t):0},g=this,f=$.extend({},{show:!1,color1:"",color2:"inverse"},i.percentText);o(f.color)||""!==f.color1||(f.color1=f.color);var m,v={body:$('<div class="total bar" />')},b=function(e){var t={};return(e=e||i).info&&!o(e.info.color)&&0===i.info.color.indexOf("#")&&(t.info=!0),e.completed&&!o(e.completed.color)&&0===e.completed.color.indexOf("#")&&(t.completed=!0),e.remaining&&!o(e.remaining.color)&&0===e.remaining.color.indexOf("#")&&(t.remaining=!0),e.targetline&&!o(e.targetline.color)&&0===e.targetline.color.indexOf("#")&&(t.targetline=!0),t}();if(n||s){var y=function(e){var t="",n={};return(e=e||i).total.difference&&(n.value=e.total.value-e.completed.value,n.format=i.total.format),t=(e.total.textOnly?"":p(e.total.difference?n:e.total))+(e.total.text||""),t=s&&e.remaining?(e.remaining.textOnly?"":p(e.remaining))+(e.remaining.text||""):t}();v.body.addClass("chart-completion-target".concat(s?" chart-targeted-achievement":"")),v.label='<span class="label">\n        <span class="name">'.concat(r(i.name.text)," ").concat(i.completed.color&&"error"===i.completed.color?$.createIcon({icon:"error",classes:"icon-error"}):"",'</span>\n        <span class="l-pull-right total value">').concat(y,"</span>\n      </span>")}else{v.body.addClass("chart-completion");var w=r(i.name.text),x=r(i.completed.color),C=r(i.info.color),k=i.info.color&&!b.info?C:"",T=r(i.info.text);b.completed||(k=x);var S="";i.info.color&&b.info&&(S=C),b.completed&&(S=x);var A=i.info&&!o(i.info.value)?r(i.info.value):p(i.completed);v.label='<b class="label name">'.concat(w,'</b>\n      <b class="label info ').concat(k,' colored">\n      <span class="value ').concat(k,'" ').concat(S?'style="color:'.concat(S):"",'">').concat(A,'</span>\n      <span class="text ').concat(k,'" ').concat(S?'style="color:'.concat(S):"",'">').concat(T,"</span>\n      </b>")}return i.remaining?v.remaining="".concat('<div class="target remaining bar').concat(b.remaining?"":" ".concat(r(i.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(i.remaining.color,";background-color:").concat(i.remaining.color,';"'):"",'">').concat(s?"":"<span".concat(n||s?"":' class="audible"',">")+'<span class="value'.concat(b.remaining?"":" ".concat(r(i.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(i.remaining.color,';"'):"",'">').concat(p(i.remaining),"</span><br />")+'<span class="text'.concat(b.remaining?"":" ".concat(r(i.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(i.remaining.color,';"'):"",'">').concat(r(i.remaining.text),"</span>")+"</span>","</div>"):v.remaining='<div class="target remaining bar" style="opacity: 0"></div>',i.completed&&s&&(m=m||i,f._value=m.completed?m.completed.value:0,f.percent=l(r(f._value,!0),m),f.format=".0%",f._text=void 0!==f.text?f.text:void 0!==f.value?c(f.value):p(f,m,!0),f.color=f[f.percent>55?"color2":"color1"],b.percentText=0===f.color.indexOf("#"),v.completed="".concat('<div class="completed bar').concat(b.completed?"":" ".concat(r(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,";background-color:").concat(i.completed.color,';"'):"",'"></div>').concat(f.show?'<div class="chart-percent-text'.concat(b.percentText||""===f.color?"":" ".concat(f.color),'"').concat(b.percentText?' style="color:'.concat(f.color,';"'):"",">").concat(f._text,"</div>"):"",'<span class="completed-label"').concat(n||s?"":' class="audible"',">")+'<span class="text">'.concat(r(i.completed.text),"</span>")+"</span>"),(i.completed.text||i.completed.format&&!s)&&this.element.addClass("chart-completion-target-padding"),i.completed&&!s&&(v.completed="".concat('<div class="completed bar').concat(b.completed?"":" ".concat(r(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,";background-color:").concat(i.completed.color,';"'):"",">")+"<span".concat(n||s?"":' class="audible"',">")+'<span class="value'.concat(b.completed?"":" ".concat(r(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,';"'):"",'">').concat(p(i.completed),"</span><br />")+'<span class="text'.concat(b.completed?"":" ".concat(r(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,';"'):"",'">').concat(r(i.completed.text),"</span>")+"</span></div>"),i.targetline&&(v.targetline="".concat('<div class="target-line targetline bar').concat(b.targetline?"":" ".concat(r(i.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(i.targetline.color,";background-color:").concat(i.targetline.color,';"'):"",'">')+"<span".concat(n||s?"":' class="audible"',">")+'<span class="value'.concat(b.targetline?"":" ".concat(r(i.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(i.targetline.color,';"'):"",'">').concat(p(i.targetline),"</span><br />")+'<span class="text'.concat(b.targetline?"":" ".concat(r(i.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(i.targetline.color,';"'):"",'">').concat(r(i.targetline.text),"</span>")+"</span></div>"),u.append(v.body,(v.remaining||"")+(v.completed||"")+(v.targetline||""),"<a><use><svg><div><span><br>"),u.append(this.element,v.label+v.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),a={name:$(".name",e.element),info:{value:$(".info .value",e.element),text:$(".info .text",e.element)},completed:{bar:$(".completed.bar",e.element),value:$(".completed .value",e.element),text:$(".completed .text, .completed-label .text",e.element)},remaining:{bar:$(".remaining.bar",e.element),value:$(".remaining .value",e.element),text:$(".remaining .text",e.element)},targetline:{bar:$(".targetline",e.element),value:$(".targetline .value",e.element),text:$(".targetline .text",e.element)},total:{bar:$(".total.bar",e.element),value:$(".total.value",e.element)},percentText:$(".chart-percent-text",e.element)},function(e){e=e||i,a.name.data("jsonData",{name:e.name}),a.info.value.add(a.info.text).data("jsonData",{info:e.info}),a.completed.bar.add(a.completed.value).add(a.completed.text).data("jsonData",{completed:e.completed}),a.remaining.bar.add(a.remaining.value).add(a.remaining.text).data("jsonData",{remaining:e.remaining}),a.targetline.bar.add(a.targetline.value).add(a.targetline.text).data("jsonData",{targetline:e.targetline}),a.total.bar.add(a.total.value).data("jsonData",{total:e.total}),a.percentText.data("jsonData",{percentText:e.percentText})}(),function(e){var t;(e=e||i).completed&&(t=d(e.completed.value,e),h(a.completed.bar,t,e)),e.remaining&&(t=d(e.completed.value,e)+d(e.remaining.value,e),h(a.remaining.bar,t,e),n&&!s&&setTimeout((function(){var e=$(".remaining",g.element),t=$(".total",g.element),i=$(".completed .value",g.element)[0].getBoundingClientRect(),n=e.find(".value")[0].getBoundingClientRect();e.add(t)[i.right>n.left-20?"addClass":"removeClass"]("overlap")}),500)),e.targetline&&(t=d(e.targetline.value,e),function(e,t){var i=t>100?100:t<0?0:t;e[0].style.left="".concat(i,"%")}(a.targetline.bar,t))}(),this},handleEvents:function(){var e=this;return this.element.on("updated.".concat("completion-chart"),(function(){e.updated()})),this},updated:function(e){var t=e.type||this.settings.type;return this.settings=e,this.settings.type=t,e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("completion-chart")),this},destroy:function(){this.element.empty().removeClass("completion-chart"),$t.removeTooltip(),this.teardown(),$.removeData(this.element[0],"completion-chart"),$.removeData(this.element[0],"chart")}};var Lt={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function Pt(e,t){this.settings=C.mergeSettings(e,t,Lt),this.element=$(e),this.init()}Pt.prototype={init:function(){if(!this.settings.colors){var e=J.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=e.azure[J.uplift?"80":"70"].value,this.settings.colors[1]=e.graphite[40].value,this.settings.colors[2]=e.graphite[30].value,this.settings.colors[3]=e.graphite[20].value}return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var e,t,n,s=this,a=this.element.closest(".is-personalizable").length>0,o=[],r=[],l=s.settings.tooltip,c=0,d=0,h=0,u=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),p=u.width>300?4:3,g=s.settings.dataset;for(n=0;n<g.length;n++)d=d3.min([d3.min(g[n].data),d]),c=d3.max([d3.max(g[n].data),c]),h=d3.max([g[n].data.length,h]);var f=u.width,m=u.height,v=d3.scaleLinear().domain([0,h]).range([10,f-10]),b=d3.scaleLinear().domain([d,c]).range([m-10,10]),y=d3.line().x((function(e,t){return v(t)})).y((function(e){return b(e)}));$t.appendTooltip();var w=d3.select(this.element[0]).append("svg").attr("height",m).attr("width",f);if(s.settings.isMedianRange){c=d3.max(g[0].data),d=d3.min(g[0].data);var x=f-45,C=d3.median(g[0].data),k=c-d,T=d3.scaleLinear().domain([d,c]).range([0,m]),S=m-T(C>k?C:k),$=m-T(C<k?C:k);w.append("g").attr("class","medianrange").attr("transform",(function(){return"translate(".concat(10,",").concat(S,")")})).append("rect").attr("width",x).attr("height",$).style("opacity","0.06").on("mouseenter.".concat(s.namespace),(function(){var t=this.getBoundingClientRect(),r='<p class="sparkline-tooltip">'+M.translate("Median")+": <b>"+C+"</b><br>"+M.translate("Range")+": <b>"+k+"</b>"+(s.settings.isPeakDot?"<br>"+M.translate("Peak")+": <b>"+c+"</b>":"")+"</p>",d=function(){var e=$t.tooltipSize(r),i=t.left+(t.width-e.width)/2,n=t.top-e.height-5;""!==r&&($t.tooltip&&$t.tooltip.length&&$t.tooltip[a?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(i,n,r,"top"))};if(l&&"function"==typeof l&&!o[n]){r="";var h=!0;e=setInterval((function(){h&&(h=!1,l((function(e){r=e,o[n]=e}))),""!==r&&(clearInterval(e),d())}),10)}else l="object"===i(l)?"":l,r=o[n]||l||g[0].tooltip||r||"",d()})).on("mouseleave.".concat(s.namespace),(function(){clearInterval(e),$t.hideTooltip()}))}for(n=0;n<g.length;n++){var A=g[n];w.append("g").append("path").attr("d",y(A.data)).attr("stroke",s.settings.isMinMax?"#999999":this.sparklineColors(n)).attr("class","team connected-line")}return d=d3.min(g[0].data),w.selectAll(".point").data(g[0].data).enter().append("circle").attr("r",(function(e){return s.settings.isMinMax&&c===e||s.settings.isMinMax&&d===e?p+1:s.settings.isDots||s.settings.isPeakDot&&c===e?p:0})).attr("class",(function(e){return s.settings.isPeakDot&&c===e&&!s.settings.isMinMax?"point peak":s.settings.isMinMax&&c===e?"point max":s.settings.isMinMax&&d===e?"point min":"point"})).style("fill",(function(e){return s.settings.isPeakDot&&c===e&&!s.settings.isMinMax?"#ffffff":s.settings.isMinMax&&c===e?"#56932E":s.settings.isMinMax&&d===e?"#941E1E":s.sparklineColors(0)})).style("stroke",(function(e){return s.settings.isPeakDot&&c===e&&!s.settings.isMinMax?s.sparklineColors(0):s.settings.isMinMax&&c===e||s.settings.isMinMax&&d===e?"none":"#ffffff"})).style("cursor","pointer").attr("cx",(function(e,t){return v(t)})).attr("cy",(function(e){return b(e)})).on("mouseenter.".concat(s.namespace),(function(e){var o=this.getBoundingClientRect(),h="<p>".concat(g[0].name?"".concat(g[0].name,"<br> ").concat(s.settings.isMinMax&&c===e?"".concat(M.translate("Highest"),": "):s.settings.isMinMax&&d===e?"".concat(M.translate("Lowest"),": "):s.settings.isPeakDot&&c===e?"".concat(M.translate("Peak"),": "):""):"","<b>").concat(e,"</b></p>"),u=function(){var e=$t.tooltipSize(h),t=o.left-e.width/2+6,i=o.top-e.height-8;""!==h&&($t.tooltip&&$t.tooltip.length&&$t.tooltip[a?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(t,i,h,"top"))};if(l&&"function"==typeof l&&!r[n]){h="";var f=!0;t=setInterval((function(){f&&(f=!1,l((function(e){h=e,r[n]=e}))),""!==h&&(clearInterval(t),u())}),10)}else l="object"===i(l)?"":l,h=r[n]||l||g[0].tooltip||h||"",u();d3.select(this).attr("r",s.settings.isMinMax&&c===e||s.settings.isMinMax&&d===e?p+2:p+1)})).on("mouseleave.".concat(s.namespace),(function(e){clearInterval(t),$t.hideTooltip(),d3.select(this).attr("r",s.settings.isMinMax&&c===e||s.settings.isMinMax&&d===e?p+1:p)})).on("contextmenu.".concat(s.namespace),(function(e){var t={value:e,name:g[0].name||""};s.settings.isMinMax&&c===e&&(t.highest=!0),s.settings.isMinMax&&d===e&&(t.lowest=!0),s.settings.isPeakDot&&c===e&&(t.peak=!0),$t.triggerContextMenu(s.element,d3.select(this).nodes()[0],t)})),this.element.trigger("rendered",w),this},calculateAspectRatioFit:function(e){var t=Math.min(e.maxWidth/e.srcWidth,e.maxHeight/e.srcHeight);return{width:e.srcWidth*t,height:e.srcHeight*t}},handleEvents:function(){var e=this;return this.element.on("updated.".concat("sparkline"),(function(t,i){e.updated(i)})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".medianrange").off(t(["mouseenter","mouseleave"])),this.element.find(".point").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],"sparkline"),$.removeData(this.element[0],"chart"))}};var Mt={title:null,info:null,icon:null,button:null,color:"graphite"};function Bt(e,t){this.settings=C.mergeSettings(e,t,Mt),this.element=$(e),this.init()}Bt.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var e,t=this.settings;if((null==t||null===(e=null==t?void 0:t.button)||void 0===e||null==e?void 0:e.isPrimary)&&(this.settings.color="azure"),t.icon&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(t.icon,'"></use>\n          </svg></div>')).appendTo(this.element),t.title&&("[NoData]"===t.title&&(t.title=M?M.translate("NoData"):"No Data Available"),$('<div class="empty-title">'.concat(t.title,"</div>")).appendTo(this.element)),t.info&&$('<div class="empty-info">'.concat(t.info,"</div>")).appendTo(this.element),t.button){var i='<div class="empty-actions">\n          <button type="button" class="'.concat(t.button.isPrimary?"btn-primary":"btn-secondary"," ").concat(t.button.cssClass,' hide-focus" id="').concat(t.button.id,'">\n            <span>').concat(t.button.text,"</span>\n          </button>\n        </div>");$(i).appendTo(this.element),t.button.click&&this.element.on("click","button",t.button.click)}return this},updated:function(e){this.settings=C.mergeSettings(this.element,e,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],"emptymessage"),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(e){return this.each((function(){var t=$.data(this,"emptymessage");t?t.updated(e):t=$.data(this,"emptymessage",new Bt(this,e))}))};var Ot={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,hideDots:!1,animate:!0,redrawOnResize:!0,emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Rt(e,t){this.settings=C.mergeSettings(e,t,Ot),this.element=$(e),this.init()}Rt.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.initialSelectCall=!1,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,n,s,a=this,o=this.settings,r=this.element.closest(".is-personalizable").length>0,l=!!o.formatterString,c="line-chart";if(c+=o.isBubble?" bubble":"",c+=o.isScatterPlot?" scatterplot":"",this.element.addClass(c),0===o.dataset.length)return a.element.emptymessage(o.emptyMessage),this;var d,h={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};o.isBubble&&(h.radius=0,h.radiusOnHover=0,h.strokeWidth=0),o.isScatterPlot&&(h.radius=0,h.strokeWidth=50),$.extend(!0,h,o.dots),a.dots=h,this.isRTL=M.isRTL();var p,g,f=[],m=o.tooltip,v={},b={atLeastOne:!1},y=["left","top","right","bottom"];if(o.axisLabels&&$.extend(!0,v,o.axisLabels),!$.isEmptyObject(v))for(p=0,g=y.length;p<g;p++){var w=v[y[p]];w&&"string"==typeof w&&""!==$.trim(w)&&(b[y[p]]=!0,b.atLeastOne=!0)}var x="",k=0,T=o.dataset,S=o.hideDots,A=this.element.parent(),D=!!$(".widget-chart-action",A).length,E=A.width()<450,I=function(e){return void 0!==e&&"function"!=typeof e&&null!==e?"boolean"==typeof e?e?"-45":null:e:null},L={large:I(null===(e=o.xAxis)||void 0===e||null==e?void 0:e.rotate),small:I(null===(t=o.xAxis)||void 0===t||null==t?void 0:t.rotateOnSmallView)},P=!!L.large;P&&(L.use=L.large),E&&L.small&&(P=!0,L.use=L.small);var B=function(e,t){return d3.max(e.data,(function(e){return t?e.value[t]:e.value}))};if(P){T[0].data.forEach((function(e){e.name.length>x.length&&(x=e.name)}));var O=Math.abs(L.use);O=isNaN(O)?0:O,k=x.length*(O>50?5:2)}var R={top:b.top?D?15:40:D?5:30,right:b.right?65:55,bottom:b.bottom?P?60:50:k+35,left:b.left?75:65},F=A.width()-R.left-R.right,N=A.height()-R.top-R.bottom-30;D&&(N-=40),a.svg=d3.select(this.element[0]).append("svg").attr("width",F+R.left+R.right).attr("height",N+R.top+R.bottom).append("g").attr("transform","translate(".concat(R.left,",").concat(R.top,")"));var z=T[0].data.map((function(e){return e.name})),H={};T[0]&&T[0].valueFormatterString&&$.extend(!0,H,T[0].valueFormatterString);var q,V=function(e,t){return!$.isEmptyObject(H)&&e?d3.format(e)("0.0%"===e?t/100:t):t},W={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};T[0]&&T[0].labels&&$.extend(!0,W,T[0].labels);var j=(o.xAxis&&o.xAxis.scale?o.xAxis.scale:d3.scaleLinear()).range([0,F]),G=d3.scaleLinear().range([N,0]),U=d3.scaleLinear().range([1,25]);q=o.isBubble?{x:T.map((function(e){return B(e,"x")})),y:T.map((function(e){return B(e,"y")})),z:T.map((function(e){return B(e,"z")}))}:o.isScatterPlot?{x:T.map((function(e){return B(e,"x")})),y:T.map((function(e){return B(e,"y")}))}:T.map((function(e){return B(e)}));var _,Y,K=d3.max(T.map((function(e){return e.data.length}))),X=K<=1?K:K-1,Q=j.domain(o.xAxis&&o.xAxis.domain?o.xAxis.domain:[0,o.isBubble||o.isScatterPlot?d3.max(q.x):X]),J=G.domain([0,d3.max(o.isBubble||o.isScatterPlot?q.y:q)]).nice(),Z=U.domain([0,d3.max(o.isBubble?q.z:q)]).nice(),ee=X;(o.xAxis&&o.xAxis.ticks&&(ee="auto"===o.xAxis.ticks?Math.max(F/85,2):o.xAxis.ticks,(o.isBubble||o.isScatterPlot&&E)&&(ee=Math.round(X/2))),E)&&((null===(_=o.xAxis)||void 0===_||null==_?void 0:_.numTicksOnSmallView)&&(ee=null===(Y=o.xAxis)||void 0===Y||null==Y?void 0:Y.numTicksOnSmallView));var te,ie=d3.axisBottom(Q).ticks(ee).tickPadding(10).tickSize(o.isBubble||o.isScatterPlot?-(N+10):0).tickFormat((function(e,t){var i,n;return"function"==typeof(null===(i=o.xAxis)||void 0===i||null==i?void 0:i.formatter)?o.xAxis.formatter(e,t):"auto"===(null===(n=o.xAxis)||void 0===n||null==n?void 0:n.ticks)?z[e]:o.isBubble||o.isScatterPlot?e:z[e]})),ne=d3.axisLeft(J).ticks(8).tickSize(-(F+20)).tickPadding(a.isRTL?-18:20);if((null===(n=o.yAxis)||void 0===n||null==n?void 0:n.formatter)&&ne.tickFormat((function(e,t){return"function"==typeof o.yAxis.formatter?o.yAxis.formatter(e,t):e})),(null===(s=o.yAxis)||void 0===s||null==s?void 0:s.ticks)&&ne.ticks(o.yAxis.ticks.number,o.yAxis.ticks.format),b.atLeastOne){var se=a.svg.append("g").attr("class","axis-labels"),ae={top:"translate(".concat(F/2,",").concat(-10,")"),right:"translate(".concat(F+28,",").concat(N/2,")rotate(90)"),bottom:"translate(".concat(F/2,",").concat(N+40,")"),left:"translate(".concat(-40,",").concat(N/2,")rotate(-90)")},oe={top:"rotate(0deg) scaleX(-1) translate(-".concat(F/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(N/2+5,"px, -").concat(F+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(F/2,"px, ").concat(N+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(N/2-5,"px, ",55,"px)")};for(p=0,g=y.length;p<g;p++)b[te=y[p]]&&se.append("text").attr("class","axis-label-".concat(te)).attr("text-anchor","middle").attr("transform",a.isRTL?"":ae[te]).style("font-size","1.25em").style("transform",a.isRTL?oe[te]:"").text(v[te])}if(a.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(N,")")).call(ie),a.svg.append("g").attr("class","y axis").call(ne),a.svg.selectAll(".tick line").attr("x1","-10"),o.isBubble||o.isScatterPlot){a.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0);var re=a.svg.select(".x.axis .tick line");re.attr("x2","-10"),(!o.xAxis||o.xAxis&&!o.xAxis.hideLine)&&re.style("opacity",1),(!o.yAxis||o.yAxis&&!o.yAxis.hideLine)&&a.svg.select(".y.axis .tick line").style("opacity",1)}a.isRTL&&(a.svg.selectAll("text").attr("transform","scale(-1, 1)"),a.svg.selectAll(".y.axis text").style("text-anchor","end")),P&&a.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",(function(){return-(this.getBBox().width+10)})).attr("dy","1em").attr("transform","rotate(".concat(L.use,")")).style("text-anchor","start"),o.xAxis&&o.xAxis.formatText&&a.svg.selectAll(".x.axis .tick text").each((function(e){var t=d3.select(this),i=d3.select(this).text(),n=o.xAxis.formatText(i,e);u.html(t.node(),n,"<tspan><text><glyph>")}));var le=d3.line().x((function(e,t){var i;return Q("function"==typeof(null===(i=o.xAxis)||void 0===i||null==i?void 0:i.parser)?o.xAxis.parser(e,t):o.isBubble||o.isScatterPlot?e.value.x:t)})).y((function(e){return J(o.isBubble||o.isScatterPlot?e.value.y:e.value)}));T.forEach((function(e,t){var n=a.svg.append("g").attr("data-group-id",t).attr("class","line-group");if(o.isArea){var s=d3.area().x((function(e,t){return Q(t)})).y0(N).y1((function(e){return J(o.isBubble||o.isScatterPlot?e.value.y:e.value)}));n.append("path").datum(e.data).attr("fill",(function(){return $t.chartColor(t,"line",e)})).style("opacity",".2").attr("class","area").attr("d",s)}var c=n.append("path").datum(e.data).attr("d",le(e.data)).attr("stroke",(function(){return o.isBubble||o.isScatterPlot?"":$t.chartColor(t,"line",e)})).attr("stroke-width",2).attr("fill","none").attr("class","line").on("click.".concat(a.namespace),(function(){$t.selectElement(d3.select(this.parentNode),a.svg.selectAll(".line-group"),e,a.element,T,a.initialSelectCall)})).on("contextmenu.".concat(a.namespace),(function(){$t.triggerContextMenu(a.element,d3.select(this).nodes()[0],e)})),u=c.node().getTotalLength();c.attr("stroke-dasharray","".concat(u," ").concat(u)).attr("stroke-dashoffset",u).transition().duration(o.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var g=function(t,n){var s,a=t.getBoundingClientRect(),c="<p><b>".concat(n.name," </b> ").concat((s=n.value,l?d3.format(o.formatterString)(s):s),"</p>"),u=function(){var e=$t.tooltipSize(c),t=a.left-e.width/2+6,i=a.top-e.height-18;t=o.isBubble||o.isScatterPlot?a.left+a.width/2-e.width/2:t,""!==c&&($t.tooltip&&$t.tooltip.length&&$t.tooltip[r?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(t,i,c,"top"))};if(o.isBubble||o.isScatterPlot){for(var g in c='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(n.name,"</b></div>"),n)if(n.hasOwnProperty(g))if("object"!==i(n[g]))W[g]&&(c+="".concat('<div class="swatch-row"><span>').concat(W[g],"</span>")+"<b>".concat(e.name,"</b>")+"</div>");else{var v=n[g];for(var b in v)v.hasOwnProperty(b)&&(c+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(W[g][b],"</span>")+"<b>".concat(V(H[b],v[b]),"</b>")+"</div>")}c+="</div>"}if(m&&"function"==typeof m&&!f[p]){c="";var y=!0;d=setInterval((function(){y&&(y=!1,m((function(e){c=e,f[p]=e}))),""!==c&&(clearInterval(d),u())}),10)}else{m="object"===i(m)?"":m,c=f[p]||m||n.tooltip||e.tooltip||c||"",u();for(var w=document.querySelectorAll("#svg-tooltip .swatch-caption span"),x=0;x<w.length;x++)w[x].style.backgroundColor=$t.chartColor(o.isBubble||o.isScatterPlot?n.lineIdx:x,"line",n)}d3.select(this).attr("r",(function(e){return o.isBubble?2+Z(e.value.z):h.radiusOnHover}))};S||(o.isScatterPlot||n.selectAll("circle").data(e.data).enter().append("circle").attr("class",h.class).attr("cx",(function(e,t){return o.xAxis&&o.xAxis.parser?Q(o.xAxis.parser(e,t)):Q(o.isBubble||o.isScatterPlot?e.value.x:t)})).attr("cy",(function(e){return J(o.isBubble||o.isScatterPlot?0:e.value)})).attr("r",h.radius).style("stroke-width",h.strokeWidth).style("fill",(function(){return $t.chartColor(t,"line",e)})).style("opacity",o.isBubble||o.isScatterPlot?".7":"1").on("mouseenter.".concat(a.namespace),(function(e){e.lineIdx=t,g(this,e)})).on("mouseleave.".concat(a.namespace),(function(){clearInterval(d),$t.hideTooltip(),d3.select(this).attr("r",(function(e){return o.isBubble?Z(e.value.z):h.radius}))})).on("click.".concat(a.namespace),(function(e){$t.selectElement(d3.select(this.parentNode),a.svg.selectAll(".line-group"),e,a.element,T,a.initialSelectCall)})).on("contextmenu.".concat(a.namespace),(function(e){$t.triggerContextMenu(a.element,d3.select(this).nodes()[0],e)})),o.isScatterPlot&&n.selectAll(".symbol").data(e.data).enter().append("path").attr("class","symbol").attr("transform",(function(e){return"translate(".concat(Q(e.value.x),",").concat(J(e.value.y),")")})).attr("d",d3.symbol().size(h.strokeWidth).type((function(){return d3.symbols[t]}))).style("opacity",0).style("fill",(function(){return $t.chartColor(t,"line",e)})).on("mouseenter.".concat(a.namespace),(function(e){e.lineIdx=t,g(this,e)})).on("mouseleave.".concat(a.namespace),(function(){clearInterval(d),$t.hideTooltip(),d3.select(this).attr("r",(function(){return h.radius}))})).on("click.".concat(a.namespace),(function(e){$t.selectElement(d3.select(this.parentNode),a.svg.selectAll(".line-group"),e,a.element,T,a.initialSelectCall)})).on("contextmenu.".concat(a.namespace),(function(e){$t.triggerContextMenu(a.element,d3.select(this).nodes()[0],e)})),o.isBubble&&n.selectAll("circle").attr("cy",(function(e){return J(e.value.y)})).transition().duration(o.animate?750:0).ease(d3.easeCubic).attr("r",(function(e){return Z(e.value.z)})),o.isScatterPlot&&n.selectAll(".symbol").transition().duration(o.animate?750:0).ease(d3.easeCubic).style("opacity",1))})),a.svg.selectAll(".y.axis .tick").attr("class",(function(e){return"tick".concat(0===e?" tick0":"")}));var ce=T.map((function(e){return{color:e.color,name:e.name,selectionObj:a.svg.selectAll(".line-group"),selectionInverse:a.svg.selectAll(".line-group"),data:e}}));return o.showLegend&&$t.addLegend(ce,o.isScatterPlot?"scatterplot":"line",o,this.element),$t.appendTooltip(),$t.setSelected=function(e,t){var i,n,s,o=0,r=C.equals,l=function(t,l,c,d){c?(s=a.svg.select('[data-group-id="'.concat(l,'"]')).select(".dot:nth-child(".concat(d+2,")")),("number"==typeof e.groupIndex&&void 0!==e.fieldName&&void 0!==e.fieldValue&&e.groupIndex===l&&e.fieldValue===c[e.fieldName]||void 0!==e.index&&"number"==typeof e.groupIndex&&e.groupIndex===l&&e.index===d||e.elem&&$(s.node()).is(e.elem)||e.data&&r(e.data,c))&&(o++,n=c,i=a.svg.select('[data-group-id="'.concat(l,'"]')))):(s=a.svg.select('[data-group-id="'.concat(l,'"]')),(void 0!==e.groupName&&void 0!==e.groupValue&&e.groupValue===t[e.groupName]||void 0!==e.groupIndex&&e.groupIndex===l||e.elem&&$(s.node()).is(e.elem)||e.data&&r(e.data,t))&&(o++,n=t,i=s))};T.forEach((function(e,t){o<1&&e&&e.data&&(e.data.forEach((function(i,n){o<1&&i&&l(e,t,i,n)})),o<1&&l(e,t))})),o>0&&(t||!i.classed("is-selected"))&&$t.selectElement(i,a.svg.selectAll(".line-group"),n,a.element,T,a.initialSelectCall)},this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setInitialSelected:function(){var e,t,i=this,n=0,s=function(s,a,o){s.selected&&n<1&&(n++,e=d3.select(i.svg.selectAll(".line-group").nodes()[o]),t=a)};this.settings.dataset.forEach((function(e,t){e&&s(e,e,t)})),this.settings.dataset.forEach((function(e,t){(e||e.data)&&e.data.forEach((function(i){s(i,e,t)}))})),n>0&&(i.initialSelectCall=!0,$t.selectElement(e,i.svg.selectAll(".line-group"),t,i.element,i.settings.dataset,i.initialSelectCall)),i.initialSelectCall=!1},setTextValues:function(){var e,t,i,n,s,a,o,r,l=this,c=this,d={el:this.element[0].querySelector(".line-chart .axis.y")},h={el:d.el.querySelector(".tick line")},u=[].slice.call(d.el.querySelectorAll(".tick text")),p=null===(e=this.settings)||void 0===e||null===(t=null==e?void 0:e.axisLabels)||void 0===t||null==t?void 0:t.left,g="string"==typeof p&&""!==p.trim(),f={maxWidth:this.element.width(),boxWidth:g?23:43,transMatrix:null===(i=this.svg)||void 0===i||null===(n=null==i?void 0:i.node())||void 0===n||null===(s=null==n?void 0:n.transform)||void 0===s||null===(a=null==s?void 0:s.baseVal)||void 0===a||null===(o=null==a?void 0:a.consolidate())||void 0===o||null==o?void 0:o.matrix};if(f.transY=(null===(r=f.transMatrix)||void 0===r||null==r?void 0:r.f)||30,f.customCss=function(){return{tooltip:{maxWidth:"".concat(f.maxWidth,"px")},arrow:{left:l.isRTL?"calc(100% - 20px)":"20px"}}},d.width=d.el.getBBox().width,h.width=h.el.getBBox().width,f.xDiff=d.width-h.width,u.forEach((function(e,t){var i=e.textContent,n=$t.calculateTextRenderWidth(i),s=e.parentNode;if(n>=f.boxWidth){f.elem=e,m.browser.isIE11()?e.textContent=$t.trimText(i,5):(e.classList.add("hidden"),d3.select(s).append("foreignObject").attr("overflow","visible").attr("width","".concat(f.boxWidth)).attr("height","16").attr("class","foreign-object tick-y".concat(t)).attr("x","-".concat(f.boxWidth+(l.isRTL?12:16))).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml">'.concat(i,"</div>")),f.elem=s.querySelector(".text")),d3.select(f.elem).on("mouseover.".concat(c.namespace),(function(){var e,t,s,a,o=(e=this.getBoundingClientRect(),t=Math.ceil(n/f.maxWidth),s=e.left,a=e.top,s=s<0?30:s,a=(a<0?30:a)-36,t>1&&(a-=.5*(t-1)*33),l.isRTL&&(s=e.left-n+5),{x:s,y:a});$t.showTooltip(o.x,o.y,i,"top",f.customCss())})).on("mouseout.".concat(l.namespace),(function(){return $t.hideTooltip()}))}})),!g){d.width=d.el.getBBox().width,h.width=h.el.getBBox().width,f.xDiff=d.width-h.width;var v=[{min:0,max:23,val:62},{min:23,max:26,val:65},{min:26,max:30,val:67},{min:30,max:32,val:69},{min:32,max:34,val:70},{min:34,max:38,val:71},{min:38,max:42,val:73},{min:42,max:47,val:77},{min:47,max:55,val:78}].filter((function(e){return f.xDiff>=e.min&&f.xDiff<e.max}));v.length&&(f.newX=v[0].val,d3.select(this.svg.node()).attr("transform","translate(".concat(f.newX,",").concat(f.transY,")")),m.browser.isIE11()&&this.isRTL&&d3.selectAll(".line-chart .axis.y .tick text").attr("x",f.boxWidth+3))}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},width:0,getSelected:function(){return $t.selected},setSelected:function(e,t){var i={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};$t.setSelected(e,t,i)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout((function(){return t()}),300):t()},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this.element.empty(),e&&e.dataset&&(this.settings.dataset=e.dataset),this.build()},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".line-group .line").off(t(["click","contextmenu"])),this.element.find(".line-group .symbol").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(t(["mouseenter","mouseleave","click","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],"line"),$.removeData(this.element[0],"chart"))}};var Ft={dataset:[],isStacked:!1,showLegend:!0,animate:!0,format:null,redrawOnResize:!0,ticks:9,emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Nt(e,t){this.settings=C.mergeSettings(e,t,Ft),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Nt.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var e,t=this,i=this.element.closest(".is-personalizable").length>0,n=!!this.settings.formatterString,s=function(e){return n?d3.format(t.settings.formatterString)(e):e},a=this.settings.dataset;if(this.dataset=a,0===a.length)return t.element.emptymessage(t.settings.emptyMessage),this;var o=this.element.parent(),r=M.isRTL(),l="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,d=1===a.length;this.isSingle=d;var h=!(d||!d&&t.settings.isStacked);this.isGrouped=h;var p,g,f,m,v,b,y,w,x,k=40,T=40,S=d&&void 0===a[0].name?t.settings.isStacked?20:50:35,A=45,D=o.width()-A-T-10,E=o.height()-k-S-(d&&void 0===a[0].name?t.settings.isStacked||l?30:0:40),I=d3.min(a,(function(e){return d3.min(e.data,(function(e){return e.value}))})),L=d3.max(a,(function(e){return d3.max(e.data,(function(e){return e.value}))}));l&&(p=d3.min(a,(function(e){return d3.min(e.data,(function(e){return e.target}))})),g=d3.max(a,(function(e){return d3.max(e.data,(function(e){return e.target}))})),I=d3.min([I,p]),L=d3.max([L,g]),y={target:"Target",positive:"Positive",negative:"Negative"},v={target:"neutral",positive:"good",negative:"error"},b={},a[0]&&(a[0].colors&&$.extend(!0,v,a[0].colors),a[0].legends&&$.extend(!0,y,a[0].legends),a[0].patterns&&$.extend(!0,b,a[0].patterns)),w=[],$.each(y,(function(e,t){w.push({name:t,color:v[e],pattern:b[e],option:e})}))),this.element.addClass("column-chart");var P=[],B=t.settings.tooltip,O=d3.scaleBand().range([0,D]).round(!0).padding(.1),R=d3.scaleBand(),F=d3.scaleLinear().range([E,0]),N=null,z=null;if(t.settings.isStacked){var H={y1:[],y2:[]};e=d?a[0].data.map((function(e,t){var i=0;return 0===t?(H.y1.push(e.value),H.y2.push(0)):(i=H.y1[0]+H.y2[0],H.y1[0]=e.value,H.y2[0]=i),[$.extend({},e,{y0:i,y:e.value,x:e.name,color:e.color,pattern:e.pattern,parentName:e.name,tooltip:e.tooltip})]})):a.map((function(e,t){return e.data.map((function(i,n){var s=0;return 0===t?(H.y1.push(i.value),H.y2.push(0)):(s=H.y1[n]+H.y2[n],H.y1[n]=i.value,H.y2[n]=s),$.extend({},i,{y0:s,y:i.value,x:i.name,color:i.color,pattern:i.pattern,parentName:e.name,tooltip:e.tooltip})}))})),d3.stack()(e),N=d3.scaleBand().domain(d3.range(e[0].length)).rangeRound([0,D],.05),d&&t.settings.isStacked&&N.paddingInner(.095),z=d3.scaleLinear().domain([0,d3.max(e,(function(e){return d3.max(e,(function(e){return e.y0+e.y}))}))]).range([0,E])}var q=a[0].data.map((function(e){return e.name})),V=d3.axisBottom(O).tickSize(0).tickPadding(12),W=d3.axisLeft(F).tickSize(-D).tickPadding(r?-12:12).ticks(t.settings.ticks||9,d3.format(t.settings.format||"s"));t.settings.yAxis&&(t.settings.yAxis.formatter&&W.tickFormat((function(e,i){return"function"==typeof t.settings.yAxis.formatter?t.settings.yAxis.formatter(e,i):e})),t.settings.yAxis.ticks&&t.settings.yAxis.ticks.number>1&&t.settings.yAxis.ticks.format&&W.ticks(t.settings.yAxis.ticks.number,t.settings.yAxis.ticks.format));var j=d3.select(this.element[0]).append("svg").attr("width",D+A+T).attr("height",E+k+S).append("g").attr("transform","translate(".concat(A,",").concat(k,")"));this.svg=j;var G,U=a.map((function(e){return e.name})),_=a.map((function(e){return d3.max(e.data,(function(e){return l?e.target:e.value}))}));if(t.settings.isStacked&&(G=e.map((function(e){return d3.max(e,(function(e){return e.y+e.y0}))}))),d&&(U=a[0].data.map((function(e){return e.name}))),l&&(I+=I/F.ticks().length,_[0]+=_[0]/(F.ticks().length/2)),function(){if(t.settings.isStacked&&d)f=a[0].data;else for(var e,i=a.length-1;i>-1;i--)e=a[i].data.map((function(e){return e})),$.extend(!0,f,e),f=$.map(f,(function(e){return e}))}(),t.settings.isStacked&&!d&&(m=U.map((function(e,t){return a[t]}))),O.domain(t.settings.isStacked?q:U),R.domain(q).rangeRound([0,d||t.settings.isStacked?D:O.bandwidth()]),F.domain([I<0?I:t.settings.minValue||0,d3.max(t.settings.isStacked?G:_)]).nice(),(!d||d&&!t.settings.isStacked)&&j.append("g").attr("class","x axis").attr("transform","translate(0,".concat(E+(l?10:0),")")).call(V),j.append("g").attr("class","y axis").call(W),r&&I<0){var Y,K=0;j.selectAll(".axis.y text").attr("class",(function(e){return Y=d3.select(this).text().length,K=Y>K?Y:K,e<0?"negative-value":"positive-value"})).attr("x",(function(e){return K*(e<0?9:5)}))}var X,Q,J=[];a.forEach((function(e){J.push($.extend({},e,{values:e.data}))})),d&&(J=[],U=a[0].data.forEach((function(e){J.push(e)})));var Z=J[0]&&J[0].values?J[0].values.length:0,ee=D/J.length>35*(Z+1),te=function(e){return $t.chartColor(0,"",{color:e})},ie=function(e,i){var n;e.empty()?i():(n=e.size(),e.on("end.".concat(t.namespace),(function(){0===--n&&i()})))},ne=function(i){var n;if(i=l&&i,d||l){if(n=t.svg.selectAll("rect".concat(i?".target-bar":".bar")).data(t.settings.isStacked?e:J).enter().append("rect").attr("class",(function(e,t){var n="bar series-".concat(t);return l&&(n=(i?"target-bar series-".concat(t):n)+(e.value>0?" positive":" negative")),n})).attr("width",Math.min.apply(null,[R.bandwidth()-2,35])).attr("x",(function(e){return t.settings.isStacked?N(0):R(e.name)+(R.bandwidth()-35)/2})).attr("y",(function(){return F(0)>E?E:F(0)})).attr("height",(function(){return 0})).attr("mask",(function(e){return l?i?b.target?"url(#".concat(b.target,")"):null:e.value<0?b.negative?"url(#".concat(b.negative,")"):null:b.positive?"url(#".concat(b.positive,")"):null:null})).style("fill",(function(e){return l?te(i?v.target:e.value<0?v.negative:v.positive):null})),l){j.selectAll(i?".target-bartext":".bartext").data(J).enter().append("text").attr("class",(function(e){return(i?"target-bartext":"bartext")+(e.value>0?" positive":" negative")})).attr("text-anchor","middle").attr("x",(function(e){return(R(e.name)+R.bandwidth()/2)*(r?-1:1)})).attr("y",(function(e){return i?F(e.target)-6:F(e.value>0?0:e.value)+12})).style("opacity",0).style("fill",(function(e){return i?"":e.value<0?te(v.negative):te(v.positive)})).style("font-weight","bold").text((function(e){return s(i?e.target:e.value)}))}n.transition().duration(t.settings.animate?1e3:0).call(ie,(function(){j.selectAll(".target-bartext, .bartext").transition().duration(t.settings.animate?300:0).style("opacity",1)})).attr("y",(function(e){var n=t.settings.isStacked?E-z(e[0].y)-z(e[0].y0):e.value<0?F(0):F(e.value);return i?F(e.target):e.value<0?n:n>E-3?E-2:n})).attr("height",(function(e){var n;return n=t.settings.isStacked?z(e[0].y):e.value<0?E-F(0)-(E-F(e.value)):E-F(e.value)-(E-F(0)),n=e.value<0?n:n<3?2:n>E?E-F(e.value):n,i?E-F(e.target)-(E-F(0)):n}))}else{(n=j.selectAll(".x-value").data(t.settings.isStacked?e:J).enter().append("g").attr("class","series-group g").attr("data-group-id",(function(e,t){return t})).attr("transform",(function(e){var i=O(t.settings.isStacked?q[0]:e.name),n=O.bandwidth();(!t.settings.isStacked&&ee&&n>35*J.length*2&&(i+=O.bandwidth()/2/J.length/2),t.isGrouped&&!t.settings.isStacked)&&(i-=35/(O.bandwidth()>150?2:4));return"translate(".concat(i,",0)")})).selectAll("rect").data((function(e){return t.settings.isStacked?e:e.values})).enter().append("rect").attr("class",(function(e,t){return"series-".concat(t," bar")})).attr("width",Math.min.apply(null,[R.bandwidth()-2,35])).attr("x",(function(e,i){var n=Math.min.apply(null,[R.bandwidth()-2,35]);return t.settings.isStacked?N(i):R.bandwidth()/2+(n+2)*i-(1===J[0].values.length||5===J[0].values.length||4===J[0].values.length?n/2:0)})).attr("y",(function(){return F(0)>E?E:F(0)})).attr("height",(function(){return 0}))).transition().duration(t.settings.animate?600:0).attr("y",(function(e){var i=t.settings.isStacked?E-z(e.y)-z(e.y0):e.value<0?F(0):F(e.value);return e.value<0?i:i>E-3?E-2:i})).attr("height",(function(e){var i;return i=t.settings.isStacked?z(e.y):e.value<0?E-F(0)-(E-F(e.value)):E-F(e.value)-(E-F(0)),e.value<0?i:i<3?2:i>E?E-F(e.value):i}))}return n};l&&(X=ne(!0));var se=ne();return l&&(Q=d3.selectAll([].concat(c(X.nodes()),c(se.nodes())))),l||(t.settings.isStacked?t.settings.isStacked&&!d?se.style("fill",(function(){var e=d3.select(this.parentNode).attr("data-group-id");return $t.chartColor(e,"bar",a[e])})).attr("mask",(function(){var e=d3.select(this.parentNode).attr("data-group-id");return a[e].pattern?"url(#".concat(a[e].pattern,")"):null})):t.settings.isStacked&&d&&se.style("fill",(function(e,t){return $t.chartColor(t,"bar",e[0])})).attr("mask",(function(e){return e[0].pattern?"url(#".concat(e[0].pattern,")"):null})):se.style("fill",(function(e,t){return d?$t.chartColor(t,"column-single",a[0].data[t]):$t.chartColor(t,"bar",f[t])})).attr("mask",(function(e,t){return d?a[0].data[t].pattern?"url(#".concat(a[0].data[t].pattern,")"):null:f[t].pattern?"url(#".concat(f[t].pattern,")"):null}))),$.extend($t.settings,{svg:j,chartType:"Column",isSingle:d,isGrouped:h,isStacked:t.settings.isStacked}),(l?Q:se).on("mouseenter.".concat(t.namespace),(function(n,o){var r,c,h,u,p,g,m,w=this,C=$(this),k="",T=d3.event.pageY,S=function(e,t){return e&&t?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(t,'" mask="url(#').concat(e,')" height="12" width="12" />')+"</svg>":""},A=function(e){g=$t.tooltipSize(k),r=C[0].getBoundingClientRect().left-g.width/2+C.attr("width")/2,t.settings.isStacked?c=C[0].getBoundingClientRect().top-g.height-10:(c=T-$t.tooltip.outerHeight()-25,a.length>1&&(r=w.parentNode.getBoundingClientRect().left-g.width/2+w.parentNode.getBoundingClientRect().width/2,e?(c+=$t.tooltip.outerHeight()+50)>w.parentNode.getBoundingClientRect().bottom+10&&(c=w.parentNode.getBoundingClientRect().bottom+10):c=w.parentNode.getBoundingClientRect().top-$t.tooltip.outerHeight()+25)),""!==k&&($t.tooltip&&$t.tooltip.length&&$t.tooltip[i?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(r,c,k,e?"bottom":"top"))},D=function(){"string"==typeof k?k=function(e,t,i){if(null==i?i=/{{(\w+)}}/g:"string"==typeof i&&(i=new RegExp(i,"g")),"string"==typeof e&&"function"==typeof t&&i instanceof RegExp)for(var n=9999;i.test(e)&&n>0;)e=e.replace(i,(function(e,i){return t(e,i)})),n--;return e}(k,(function(e,t){return s(n[t])})):"number"==typeof k&&(k=k.toString())},E=function(e){k="";var t={index:o,data:n},i=function(e){"string"!=typeof e&&"number"!=typeof e||(k=e,D(),P[o]=k)},s=!0;x=setInterval((function(){s&&(s=!1,e(i,t)),""!==k&&(clearInterval(x),A())}),10)};if(t.settings.isStacked){if(d)k="<p><b>".concat(s(n[0].value),"</b> ").concat(n[0].name,"</p>");else{for(k="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(e[0][o].name,"</b></div>"),h=e.length-1,u=0;h>=u;h--)p=$t.chartColor(h,"bar",a[h]),k+="".concat('<div class="swatch-row"><div style="background-color:').concat(a[h].pattern?"transparent":p,';">').concat(S(a[h].pattern,p),"</div>")+"<span>".concat(e[h][o].parentName,"</span><b>").concat(s(e[h][o].value),"</b>")+"</div>";k+="</div>"}g=$t.tooltipSize(k),r=C[0].getBoundingClientRect().left-g.width/2+C.attr("width")/2,c=C[0].getBoundingClientRect().top-g.height-10}else{if(l)k="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(n.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(b.target?"transparent":te(v.target),';">').concat(S(b.target,te(v.target)),"</div>")+"<span>".concat(y.target,"</span><b>").concat(s(n.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(n.value<0?b.negative?"transparent":te(v.negative):b.positive?"transparent":te(v.positive),';">').concat(n.value<0?S(b.negative,te(v.negative)):S(b.positive,te(v.positive)),"</div>")+"<span>".concat(y[n.value<0?"negative":"positive"],"</span><b>").concat(s(n.value),"</b>")+"</div></div>";else if(1===a.length)k="<p><b>".concat(s(n.value),"</b> ").concat(n.name,"</p>");else{var I=d3.select(this.parentNode).datum().values;for(k='<div class="chart-swatch">',h=0,u=I.length;h<u;h++)p=$t.chartColor(h,"bar",f[h]),k+="".concat('<div class="swatch-row"><div style="background-color:').concat(f[h].pattern?"transparent":p,';">').concat(S(f[h].pattern,p),"</div>")+"<span>".concat(I[h].name,"</span><b>").concat(s(I[h].value),"</b>")+"</div>";k+="</div>",m=I.length>6}g=$t.tooltipSize(k),r=C[0].getBoundingClientRect().left-g.width/2+C.attr("width")/2,c=T-$t.tooltip.outerHeight()-25,a.length>1&&(r=this.parentNode.getBoundingClientRect().left-g.width/2+this.parentNode.getBoundingClientRect().width/2,c=this.parentNode.getBoundingClientRect().top-$t.tooltip.outerHeight()+25)}B&&"function"==typeof B&&void 0===n.tooltip&&!P[o]?E(B):(k=P[o]||B||k||"",P[o]||!1===n.tooltip||void 0===n.tooltip||null===n.tooltip||("function"==typeof n.tooltip?E(n.tooltip):(k=n.tooltip.toString(),D(),P[o]=k)),"string"==typeof k&&""!==k&&A(m))})).on("mouseleave.".concat(t.namespace),(function(){clearInterval(x),$t.hideTooltip()})).on("click.".concat(t.namespace),(function(e,i,n){var s=this&&d3.select(this).classed("target-bar"),a=this&&d3.select(this).classed("is-selected"),o=parseInt(d3.select(this.parentNode).attr("data-group-id"),10);if(s)for(var r=d3.selectAll(".bar").nodes(),l=r.length,c=0;c<l;c++){var d=r[c];if(d3.select(d).classed("is-selected")){a=!1;break}}$t.setSelectedElement({task:a?"unselected":"selected",container:t.element,selector:this,isTrigger:!t.initialSelectCall&&!a,isTargetBar:s,triggerGroup:h,d:e,i:i,type:t.settings.type,dataset:t.dataset,isSingle:t.isSingle,isGrouped:t.isGrouped,isStacked:t.settings.isStacked,svg:t.svg,clickedLegend:!0===n}),a&&!t.initialSelectCall&&t.element.triggerHandler("selected",[d3.select(this).nodes(),{},h?o:i])})).on("contextmenu.".concat(t.namespace),(function(e){$t.triggerContextMenu(t.element,d3.select(this).nodes()[0],e)})),t.settings.isGrouped=h,t.settings.isSingle=d,t.settings.svg=this.svg,t.settings.showLegend&&(d&&a[0].name?$t.addLegend(a,"column-single",t.settings,t.element):l?$t.addLegend(w,t.settings.type,t.settings,t.element):t.settings.isStacked&&d?$t.addLegend(f,t.settings.type,t.settings,t.element):d||$t.addLegend(t.settings.isStacked?m:f,t.settings.type,t.settings,t.element)),t.settings.xAxis&&t.settings.xAxis.formatText&&t.svg.selectAll(".x.axis .tick text").each((function(e){var i=d3.select(this),n=d3.select(this).text(),s=t.settings.xAxis.formatText(n,e);u.html(i.node(),s,"<tspan>")})),$t.isRTL&&$t.isIE&&(j.selectAll("text").attr("transform","scale(-1, 1)"),j.selectAll(".y.axis text").style("text-anchor","start"),l&&j.selectAll(".negative-value").style("text-anchor","end")),j.selectAll(".y.axis .tick").attr("class",(function(e){return"tick".concat(0===e?" tick0":"")})),$t.appendTooltip(),$t.labelsColide(j)&&$t.applyAltLabels(j,J,"shortName"),$t.labelsColide(j)&&$t.applyAltLabels(j,J,"abbrName"),$t.labelsColide(j)&&($t.applyAltLabels(j,J,null,null,!0),l&&j.selectAll(".target-bartext, .bartext").attr("x",(function(){return+d3.select(this).attr("x")-(r?-6:6)}))),$t.setSelected=function(e,i){var n,s,o,r,l,c=0,u=C.equals,p=j.node().parentNode.nextSibling,g=d3.select(p),f=g.node()&&g.classed("chart-legend"),m=function(i,r){var l=!!i;i=l?d3.select(i):j,r=void 0!==r?r:0,i.selectAll(".bar").each((function(i,h){i&&c<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===(d&&t.settings.isStacked?i[0][e.fieldName]:i[e.fieldName])||void 0!==e.index&&e.index===h||e.data&&u(e.data,a[r].data[h])||e.elem&&$(this).is(e.elem))&&(c++,s=d3.select(this),n=h,l&&!t.settings.isStacked&&(o=!0))}))};h||t.settings.isStacked&&!d&&!h?(a.forEach((function(i,a){c<1&&(r=$(j.select('[data-group-id="'.concat(a,'"]')).node()),(void 0!==e.groupName&&void 0!==e.groupValue&&e.groupValue===i[e.groupName]||void 0!==e.groupIndex&&e.groupIndex===a||e.data&&u(e.data,i)||e.elem&&r.is(e.elem))&&void 0===e.fieldName&&void 0===e.fieldValue&&void 0===e.index&&(c++,s=j.select('[data-group-id="'.concat(a,'"]')).select(".bar"),n=a,t.settings.isStacked&&!h&&(o=!0)))})),c<1&&(l=j.selectAll(".series-group")).nodes().length&&l.each((function(e,t){m(this,t)}))):m(),c>0&&(i||!s.classed("is-selected"))&&(o?f&&$(g.selectAll(".chart-legend-item")[0][n]).trigger("click.chart"):s.on("click.".concat(t.namespace)).call(s.node(),s.datum(),n))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var e,t,i,n,s=this,a=/positive-negative/.test(s.settings.type),o=s.svg.node().parentNode.nextSibling,r=d3.select(o),l=r.node()&&r.classed("chart-legend"),c=!1,d=0,h=function(i){(i=i?d3.select(i):s.svg).selectAll(".bar").each((function(i,n){i&&((s.isSingle&&s.settings.isStacked?i[0]:i).selected&&d<1&&(d++,t=d3.select(this),e=n))}))};if(a){var u=function(t){c=!0,e=t,d++};if(s.dataset[0].targetBarsSelected)u(0);else{var p={selected:0,i:-1};s.dataset[0].data.forEach((function(e,t){e.selected&&(p.selected++,p.i=t)})),p.selected>1&&(p.elem=s.svg.select(".target-bar.series-".concat(p.i)),u(p.elem.classed("positive")?1:2))}}c||!s.isGrouped&&(!s.settings.isStacked||s.isSingle||s.isGrouped)?h():(s.dataset.forEach((function(i,a){i.selected&&d<1&&(d++,t=s.svg.select('[data-group-id="'.concat(a,'"]')).select(".bar"),e=a,!s.settings.isStacked||s.isSingle||s.isGrouped||(n=!0))})),d<1&&function(){var t=s.svg.selectAll(".series-group");if(t.nodes().length){var n={groups:[],itemsInGroup:0};if(t.each((function(e,t){var s;h(this),((i=Array.isArray(e))||(null==e||null==e?void 0:e.data)&&Array.isArray(null==e||null==e?void 0:e.data))&&(n.itemsInGroup=(i?e:e.data).length,d>0&&n.groups.push({i:t,totalSel:(s=i?e:e.data,s.reduce((function(e,t){return t.selected?e+1:e}),0))}))})),n.gLen=n.groups.length,!c&&(i&&n.gLen&&n.groups[0].totalSel>1||n.gLen===t.size()&&!i)){var a=n.groups.filter((function(e){return(null==e||null==e?void 0:e.totalSel)>1})).length;c=i?!!a:!a,i&&(e=n.groups[0].i)}}}()),d>0&&(n||c?l&&(this.initialSelectCall=!0,$(r.node()).find(".chart-legend-item").eq(e).trigger("click.chart")):(this.initialSelectCall=!0,t.on("click.".concat(s.namespace)).call(t.node(),t.datum(),e))),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},getSelected:function(){return $t.selected},setSelected:function(e,t){var i={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};$t.setSelected(e,t,i)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build()},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],"column"),$.removeData(this.element[0],"chart"))}};var zt={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,showLines:!0,labelFactor:1.27,wrapWidth:60,emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ht(e,t){this.settings=C.mergeSettings(e,t,zt),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Ht.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var e,t,i,n,s,a,o,r,l,c,d=this,h=this.settings,u=this.element.parent(),p=this.element.closest(".is-personalizable").length>0,g=!!h.formatterString,f=function(e){return g?d3.format(h.formatterString)(e):e},m=[],v=[],b=h.tooltip,y=0,w=30,x=u.width()<450,C=h.dataset;this.isRTL=M.isRTL(),this.dataset=C;var k=window.innerWidth;this.viewport={xxsmall:k<=380,xsmall:k>=381&&k<=450,small:k>=451&&k<=480,medium:k>=481&&k<=992,large:k>992};var T={top:20,left:30,right:30,bottom:1===C.length?5:30};if(h.isGrouped&&1===C.length&&(T.bottom=30,y=2),this.element.addClass("bar-chart"),h.isGrouped&&this.element.addClass("bar-chart-grouped"),h.isStacked&&this.element.addClass("bar-chart-stacked"),0===C.length)return d.element.emptymessage(h.emptyMessage),this;var A=C.map((function(e){return{name:e.name,color:e.color,pattern:e.pattern}}));this.ellipsis={use:!1,percentageWidth:25,threshold:12},this.viewport.xxsmall?(this.ellipsis.percentageWidth=37,this.ellipsis.threshold=10):this.viewport.xsmall?(this.ellipsis.percentageWidth=28,this.ellipsis.threshold=10):this.viewport.small&&(this.ellipsis.percentageWidth=35);var D={y1:[],y2:[]};C=C.map((function(e,t){return e.data.map((function(e,i){var n=0;return 0===t?(D.y1.push(e.value),D.y2.push(0)):(n=D.y1[i]+D.y2[i],D.y1[i]=e.value,D.y2[i]=n),$.extend({},e,{y0:n,y:e.value,x:$t.getLabel(e,d.viewport),color:e.color,pattern:e.pattern})}))})),e=0,t="",C=C.map((function(i,n){if(!h.isStacked&&A[n]){var s=$t.getLabel(A[n],d.viewport),a=s.length;t=a>e?s:t,e=a>e?a:e}return i.map((function(i){if(h.isStacked){var n=i.x.length;t=n>e?i.x:t,e=n>e?n:e}return $.extend({},i,{x:i.y,y:i.x,x0:i.y0,color:i.color,pattern:i.pattern})}))}));var E=parseInt(u.height(),10)-T.top-T.bottom-30,I=parseInt(u.height(),10)-T.bottom-(h.isStacked?0:15),L=parseInt(u.width(),10)-T.left,P=$t.calculateTextRenderWidth(t);P<200&&(P+=26),$t.calculatePercentage(P,L)>55&&(P=$t.getPercentage(L,this.ellipsis.percentageWidth),this.ellipsis.use=!0),d.svg=d3.select(this.element[0]).append("svg").attr("width",L).attr("height",I).append("g").attr("class","group").attr("transform","translate(".concat(P,",").concat(T.top,")"));var B=d3.min(C,(function(e){return d3.min(e,(function(e){return h.isStacked?e.x+e.x0:e.x}))})),O=d3.max(C,(function(e){return d3.max(e,(function(e){return h.isStacked?e.x+e.x0:e.x}))}));if(h.isStacked&&h.isNormalized){var R=[];C.forEach((function(e){e.forEach((function(e,t){R[t]=(void 0===R[t]?0:R[t])+e.x}))})),C.forEach((function(e){e.forEach((function(e,t){var i=R[t]/100;e.x/=i,e.x0/=i}))})),O=100}var F,N=L-P-T.left;F=h.useLogScale?d3.scaleLog().domain([B>0?B:1,O]).range([1,N]).nice():d3.scaleLinear().domain([B<0?B:0,O]).range([0,N]).nice(),h.isStacked?(i=C[0].map((function(e){return e.y})),l=.32):(i=A.map((function(e){return e.name})),function(){for(var e,t=C.length-1;t>-1;t--)e=C[t].map((function(e){return e})),$.extend(!0,m,e),m=$.map(m,(function(e){return e}))}(),n=0,s=m.length,l=(a=E/i.length)/s,r=a-(o=s>1?a-.6*l:w),w=o/s,l=0);var z=d3.scaleBand().domain(i).rangeRound([0,E]).padding(l,l),H=d3.axisBottom().scale(F).tickSize(-E);x&&H.ticks(P<100?5:3),h.isStacked&&h.isNormalized&&H.tickFormat((function(e){return"".concat(e,"%")})),h.useLogScale&&(H.ticks(10,",.1s"),!1===h.showLines&&H.tickSize(0)),h.ticks&&!h.useLogScale&&(d.viewport.small?H.ticks(h.ticks.smallNumber,h.ticks.format):d.viewport.medium?H.ticks(h.ticks.mediumNumber,h.ticks.format):d.viewport.large&&H.ticks(h.ticks.largeNumber,h.ticks.format));var q=d3.axisLeft().scale(z).tickPadding(15).tickSize(0);d.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(E,")")).call(H),d.svg.append("g").attr("class","axis y").call(q);var V=d.svg.selectAll("g.group").data(C).enter().append("g").attr("class","series-group").attr("data-group-id",(function(e,t){return t}));if(h.isGrouped=d.svg.selectAll(".series-group").nodes().length>1&&!h.isStacked||h.isGrouped&&1===C.length,h.isSingle=1===d.svg.selectAll(".series-group").nodes().length&&h.isStacked,V.selectAll("rect").data((function(e,t){return e.forEach((function(e){e.index=t,h.isStacked||(e.gindex=n++)})),e})).enter().append("rect").attr("class",(function(e,t){return"bar series-".concat(t)})).style("fill",(function(e,t){return h.isStacked?1===A.length?$t.chartColor(t,"bar-single",e):$t.chartColor(e.index,"bar",A[e.index]):$t.chartColor(t,"bar",m[t])})).attr("mask",(function(e,t){return 1===C.length&&C[0][t].pattern?"url(#".concat(C[0][t].pattern,")"):h.isStacked&&A[e.index].pattern?"url(#".concat(A[e.index].pattern,")"):!h.isStacked&&m[t]&&m[t].pattern?"url(#".concat(m[t].pattern,")"):""})).attr("x",(function(e){return h.useLogScale?0:h.isStacked&&!h.isSingle?F(e.x0)+1:F(0)+1})).attr("y",(function(e){return h.isStacked?z(e.y):(a-o)/2+(e.gindex*w+e.gindex*y)+e.index*r})).attr("height",(function(){return h.isStacked?z.bandwidth():w})).attr("width",0).on("mouseenter.".concat(d.namespace),(function(e,t){var i,n,s,a=0,o=[],r="",l=d3.select(this.parentNode).datum(),d=Math.round(l.length/2),u=d3.select(this),y=function(e,t){return e&&t?'<svg width="12" height="12"><rect mask="url(#'.concat(e,')" height="12" width="12" /></svg>'):""},w=function(e,t,i){var n=$t.tooltipSize(r),s=e+parseFloat(u.attr("width"))/2-n.width/2,a=i?t:t-n.height-13;""!==r&&($t.tooltip&&$t.tooltip.length&&$t.tooltip[p?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(s,a,r,i?"bottom":"top"))},x=function(){"string"==typeof r?r=function(e,t,i){if(null==i?i=/{{(\w+)}}/g:"string"==typeof i&&(i=new RegExp(i,"g")),"string"==typeof e&&"function"==typeof t&&i instanceof RegExp)for(var n=9999;i.test(e)&&n>0;)e=e.replace(i,(function(e,i){return t(e,i)})),n--;return e}(r,(function(t,i){return f(e[i])})):"number"==typeof r&&(r=r.toString())};if(1===C.length)r="<p><b>".concat(e.y," </b>").concat(e.x,"</p>");else{if(r='<div class="chart-swatch">',h.isStacked)for(i=0,n=C.length;i<n;i++){a=0,s=$t.chartColor(i,"bar",A[i]);for(var k=0,T=C.length;k<T;k++)a+=C[k][t].x,o[k]=C[k][t].x;r+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(y(A[i].pattern,s),"</div>\n                  <span>").concat(A[i].name,"</span>\n                  <b> ").concat(g?f(o[i]):"".concat(Math.round(o[i]/a*100),"%")," </b>\n                </div>")}else for(d>1&&(u=d3.select(this.parentNode).select(".series-".concat(d))),i=0,n=l.length;i<n;i++)s=$t.chartColor(i,"bar",m[i]),r+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(y(m[i].pattern,s),"</div>\n                  <span>").concat(l[i].name,"</span><b>").concat(f(l[i].value),"</b>\n                </div>");r+="</div>"}a>0&&(r='<span class="chart-tooltip-total"><b>'.concat(a,"</b> ").concat(M.translate("Total"),"</span>").concat(r));var S=u.nodes()[0].getBoundingClientRect().top+$(window).scrollTop(),D=u.nodes()[0].getBoundingClientRect().left+$(window).scrollLeft(),E=!h.isStacked&&l.length>6;if(b&&"function"==typeof b&&!v[t]){r="";var I=!0;c=setInterval((function(){I&&(I=!1,b((function(e){r=e,v[t]=e}))),""!==r&&(clearInterval(c),w(D,S,E))}),10)}else if(r=v[t]||b||r||"",v[t]||!1===e.tooltip||void 0===e.tooltip||null===e.tooltip||("function"==typeof e.tooltip?function(i){r="";var n={index:t,data:e},s=function(e){"string"!=typeof e&&"number"!=typeof e||(r=e,x(),v[t]=r)},a=!0;c=setInterval((function(){a&&(a=!1,i(s,n)),""!==r&&(clearInterval(c),w())}),10)}(e.tooltip):(r=e.tooltip.toString(),x(),v[t]=r)),"string"==typeof r&&""!==r&&w(D,S,E),h.isStacked)for(i=0,n=C.length;i<n;i++){s=$t.chartColor(i,"bar",A[i]);var L=$("#svg-tooltip").find(".swatch-row").eq(i);A[i].pattern||L.find("div").css("background-color",s),L.find("rect").css("fill",s)}else for(i=0,n=l.length;i<n;i++){s=$t.chartColor(i,"bar",m[i]);var P=$("#svg-tooltip").find(".swatch-row").eq(i);m[i].pattern||P.find("div").css("background-color",s),P.find("rect").css("fill",s)}})).on("mouseleave.".concat(d.namespace),(function(){clearInterval(c),$t.hideTooltip()})).on("click",(function(e,t){var i=this&&d3.select(this).classed("is-selected");parseInt(d3.select(this.parentNode).attr("data-group-id"),10);$t.setSelectedElement({task:i?"unselected":"selected",container:d.element,selector:this,isTrigger:!d.initialSelectCall&&!i,triggerGroup:h.isGrouped,d:e,i:t,type:h.type,dataset:h.dataset,isSingle:d.isSingular,isGrouped:h.isGrouped,isStacked:h.isStacked,svg:d.svg,clickedLegend:h.clickedLegend}),i&&!d.initialSelectCall&&d.element.triggerHandler("selected",[d3.select(this).nodes(),{},t])})).on("contextmenu.".concat(d.namespace),(function(e){$t.triggerContextMenu(d.element,d3.select(this).nodes()[0],e)})),d.svg.selectAll(".axis.y text").attr("x",(function(){return d.isRTL?15:-15})),d.svg.selectAll(".axis.x text").attr("class",(function(e){return e<0?"negative-value":"positive-value"})),d.isRTL&&($t.isIE||$t.isIEEdge)&&(d.svg.selectAll("text").attr("transform","scale(-1, 1)"),d.svg.selectAll(".y.axis text").style("text-anchor","start")),x&&h.useLogScale){var W=d3.selectAll(".x .tick text"),j=!1;W.attr("class",(function(e,t){var i=Math.round(W.size()/2);t>=i&&!j&&e.toString().startsWith("1")&&(j=!0,i=e),0!==t&&t!==W.size()-1&&(h.useLogScale?e!==i:t!==i)&&d3.select(this).remove()}))}return d.svg.selectAll(".x.axis .tick").attr("class",(function(e){return"tick".concat(0===e?" tick0":"")})),d.svg.selectAll(".bar").transition().duration(h.animate?600:0).attr("width",(function(e){var t=F(e.x),i=F(0);return!isNaN(t)&&S.isFinite(t)||(t=0),!isNaN(i)&&S.isFinite(i)||(i=0),Math.abs(t-i)})).attr("x",(function(e){return h.useLogScale?0:h.isStacked&&!h.isSingle?F(e.x0)+1:e.x<0?F(e.x)+1:F(0)+1})),h.svg=d.svg,h.showLegend&&$t.addLegend(h.isStacked?A:m,h.type,h,this.element),$t.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){var e,t=this,i=null===(e=this.settings)||void 0===e||null==e?void 0:e.dataset;if(i&&(!i||i.constructor===Array)){var n,s,a,o,r,l,c=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),d={};if(this.ellipsis.use)d.maxWidth=this.element.width(),d.transX=(null===(n=this.svg)||void 0===n||null===(s=null==n?void 0:n.node())||void 0===s||null===(a=null==s?void 0:s.transform)||void 0===a||null===(o=null==a?void 0:a.baseVal)||void 0===o||null===(r=null==o?void 0:o.consolidate())||void 0===r||null===(l=null==r?void 0:r.matrix)||void 0===l||null==l?void 0:l.e)||1,d.customCss=function(){return{tooltip:{maxWidth:"".concat(d.maxWidth,"px")},arrow:{left:t.isRTL?"calc(100% - 20px)":"20px"}}};var h=function(e,i){var n;if(t.ellipsis.use){if("..."===(n=$t.trimText(e.name,t.ellipsis.threshold)).substr(-3)){var s=$t.calculateTextRenderWidth(e.name),a=$t.calculateTextRenderWidth(n),o=c[i].parentNode;m.browser.isIE11()||(n=e.name,c[i].classList.add("hidden"),d3.select(o).append("foreignObject").attr("overflow","visible").attr("width","".concat(d.transX)).attr("height","16").attr("class","foreign-object tick-y".concat(i)).attr("x","-".concat(d.transX)).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml">'.concat(e.name,"</div>"))),d3.select(o).on("mouseover.".concat(t.namespace),(function(){var i,n,r,l,c=(i=o.getBoundingClientRect(),n=Math.ceil(s/d.maxWidth),r=d.transX-a,l=i.top,r=(r<0?30:r)+20,l=(l<0?30:l)-36,n>1&&(l-=.5*(n-1)*33),t.isRTL&&(r=i.left-s+d.transX),{x:r,y:l});$t.showTooltip(c.x,c.y,e.name,"top",d.customCss())})).on("mouseout.".concat(t.namespace),(function(){return $t.hideTooltip()}))}}else n=$t.getLabel(e,t.viewport);return n};this.settings.isGrouped?i.forEach((function(e,t){c[t].textContent=h(e,t)})):i.forEach((function(e){Object.keys(e).map((function(t){return e[t]})).forEach((function(e){e&&e.constructor===Array&&e.forEach((function(e,t){c[t].textContent=h(e,t)}))}))}))}},setInitialSelected:function(){var e,t,i,n=this,s=n.svg.node().parentNode.nextSibling,a=d3.select(s),o=a.node()&&a.classed("chart-legend"),r=!1,l=0,c=function(i){(i=i?d3.select(i):n.svg).selectAll(".bar").each((function(i,n){i&&i.selected&&l<1&&(l++,t=d3.select(this),e=n)}))};n.settings.isGrouped||n.settings.isStacked&&!n.settings.isSingle?(n.settings.dataset.forEach((function(s,a){s.selected&&l<1&&(l++,t=n.svg.select('[data-group-id="'.concat(a,'"]')).select(".bar"),e=a,n.settings.isStacked&&!n.settings.isGrouped&&(i=!0))})),l<1&&function(){var t=n.svg.selectAll(".series-group");if(t.nodes().length){var i,s={groups:[],itemsInGroup:0};if(t.each((function(e,t){var i;c(this),Array.isArray(e)&&(s.itemsInGroup=e.length,l>0&&s.groups.push({i:t,d:e,totalSel:(i=e,i.reduce((function(e,t){return t.selected?e+1:e}),0))}))})),s.gLen=s.groups.length,!r&&n.settings.isGrouped&&s.gLen===t.size()&&1===(null===(i=s.groups[0])||void 0===i||null==i?void 0:i.totalSel)){r=!0;for(var a=0,o=s.groups[0].d;a<o;a++)if(s.groups[0].d[a].selected){e=a;break}}}}()):c(),l>0&&(i||r?o&&(this.initialSelectCall=!0,$(a.node()).find(".chart-legend-item").eq(e).trigger("click.chart")):(this.initialSelectCall=!0,t.on("click").call(t.node(),t.datum(),e))),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},getSelected:function(){return $t.selected},setSelected:function(e,t){var i={svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle};$t.setSelected(e,t,i)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){var e=this,t=function(){e.width!==e.element.width()&&(e.width=e.element.width(),e.element.is(":visible")&&e.updated())};this.element.closest(".homepage").length?setTimeout((function(){return t()}),300):t()},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],"bar"),$.removeData(this.element[0],"chart"))}};var qt={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Vt(e,t){this.settings=C.mergeSettings(e,t,qt),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}Vt.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===m.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.initialSelectCall=!1,this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var e=this;e.svg=d3.select(this.element[0]).append("svg"),e.mainGroup=e.svg.append("g"),e.mainGroup.append("g").attr("class","slices"),e.mainGroup.append("g").attr("class","labels"),e.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),this.settings.showMobile&&(this.settings.legendPlacement="bottom"),e.settings.legendPlacement&&this.element.addClass("has-".concat(e.settings.legendPlacement,"-legend"));var t=parseInt(this.element.width(),10),i=parseInt(this.element.height(),10),n={height:i,width:t};("label"===this.settings.lines.show&&"bottom"===this.settings.legendPlacement||"label"===this.settings.lines.show&&"false"===this.settings.showLegend)&&e.mainGroup.attr("transform","translate(".concat(.67777*n.width,", ").concat(n.height/2,")")),"right"===e.settings.legendPlacement&&(n.width=.75*t),this.settings.showMobile&&(n.height=.8*i,this.element.addClass("is-mobile")),n.radius=Math.min(n.width,n.height)/2,e.dims=n,e.pie=d3.pie().sort(null).value((function(e){return e.value})),e.arc=d3.arc().outerRadius(.75*n.radius).innerRadius(e.settings.isDonut?.5*n.radius:0),e.outerArc=d3.arc().innerRadius(.75*n.radius).outerRadius(.75*n.radius+20),e.svg.attr("width","right"===e.settings.legendPlacement?"75%":"100%").attr("height",e.settings.showMobile?"80%":"100%"),e.mainGroup.attr("transform","translate(".concat(n.width/2,",").concat(n.height/2,")")),n.center={x:n.width/2,y:n.height/2},e.key=function(e){return e.data.name};var s=!e.settings.dataset||0===e.settings.dataset.length;this.chartData=s?[]:e.settings.dataset[0].data,this.sum=d3.sum(this.chartData,(function(e){return e.value}));var a=this.chartData.map((function(t){return t.value/e.sum*100})),o=this.roundLargestRemainer(a);this.chartData=this.chartData.map((function(t,i){return t.percent=t.value/e.sum,t.percentRound=o[i],t}));var r=0;if(this.chartData.map((function(e){r+=e.percentRound})),s||0===r||isNaN(r)){var l=J.themeColors().palette;this.chartData.push({data:{},color:l.graphite[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(e.updateData(e.chartData),e.settings.showTooltips&&$t.appendTooltip("is-pie"),this.settings.showLegend){var c=e.chartData.map((function(t){var i=$t.formatToSettings(t,e.settings.legend);return e.settings.legendFormatter&&(i="".concat(t.name," (").concat(d3.format(e.settings.legendFormatter)(t.value),")")),"Empty-Pie"===t.name&&(i=""),{name:i,display:"twocolumn",placement:e.settings.legendPlacement,color:t.color}}));this.settings.svg=e.svg,$t.addLegend(c,"pie",this.settings,this.element)}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(e){var t=this;this.chartData=this.chartData.map((function(t){return t.value=e?0:Math.random(),t})),this.sum=d3.sum(this.chartData,(function(e){return e.value}));var i=this.chartData.map((function(e){return e.value/t.sum*100})),n=this.roundLargestRemainer(i);return this.chartData=this.chartData.map((function(e,i){return e.percent=e.value/t.sum,e.percentRound=n[i],e})),this.chartData},addCenterLabel:function(){if(this.settings.isDonut&&!this.settings.hideCenterLabel){var e=this.settings.dataset[0].centerLabel,t=this.svg.selectAll(".slices");if(t.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(e),$t.isIE&&!$t.isIEEdge)if(C.isHTML(e)){var i=t.select(".chart-donut-text"),n=document.createElement("text");n.innerHTML=e,Array.prototype.slice.call(n.childNodes).forEach((function(e){i.append("tspan").attr("style",e.getAttribute&&e.getAttribute("style")).attr("x",e.getAttribute&&e.getAttribute("x")).attr("dy",e.getAttribute&&e.getAttribute("dy")).text(e.textContent)}))}else t.select(".chart-donut-text").text(e)}},updateData:function(e){var t,i=this,n=this.element.closest(".is-personalizable").length>0,s=!i.settings.dataset||0===i.settings.dataset.length,a=i.svg.select(".slices").selectAll("path.slice").data(i.pie(e),i.key);if(i.isRTL=M.isRTL(),a.enter().insert("path").style("fill",(function(e,t){return $t.chartColor(t,"pie",e.data)})).attr("class","slice").on("contextmenu.".concat(i.namespace),(function(e){$t.triggerContextMenu(i.element,d3.select(this).nodes()[0],e)})).on("click.".concat(i.namespace),(function(e,n){clearTimeout(t);var s=this&&d3.select(this).classed("is-selected");$t.setSelectedElement({task:s?"unselected":"selected",container:i.element,selector:s?".chart-container .is-selected":this,isTrigger:!i.initialSelectCall&&!s,d:e.data,i:n,type:i.settings.type,dataset:i.settings.dataset,svg:i.svg}),s&&!i.initialSelectCall&&i.element.triggerHandler("selected",[d3.select(this).nodes(),{},n])})).on("mouseenter.".concat(i.namespace),(function(e,s){if(i.settings.showTooltips){var a=function(e){var t,n=document.body;if(i.isFirefox&&0===i.settings.dotSize){var s=d3.select(e);s.attr("r",2),t=e.getBoundingClientRect(),s.attr("r",i.settings.dotSize)}else t=e.getBoundingClientRect();return{top:t.top+n.scrollTop,left:t.left+n.scrollLeft}}(i.svg.selectAll("circle").nodes()[s]),o=i.midAngle(e),r=o<=Math.PI/4&&o>=0||o>7*Math.PI/4,l=o<=3*Math.PI/4&&o>=Math.PI/4,c=o<=5*Math.PI/4&&o>=3*Math.PI/4,d=o<=7*Math.PI/4&&o>=5*Math.PI/4,h="",u=$t.formatToSettings(e,i.settings.tooltip);-1===(h=(h=(h=(h=(h=e.data.tooltip||u).replace("{{percent}}","".concat(e.data.percentRound,"%"))).replace("{{value}}",e.value)).replace("%percent%","".concat(e.data.percentRound,"%"))).replace("%value%",e.value)).indexOf("<b>")&&(h=(h=h.replace("(","<b>")).replace(")","</b>")),null!=t&&clearTimeout(t),t=setTimeout((function(){!function(){if(""!==h){var e=$t.tooltipSize(h),t=a.left,i=a.top;$t.tooltip&&$t.tooltip.length&&(r||l||c||d)&&$t.tooltip[n?"addClass":"removeClass"]("is-personalizable"),r&&(t-=e.width/2,i-=e.height-5,$t.showTooltip(t,i,h,"top")),l&&(i-=e.height/2,$t.showTooltip(t,i,h,"right")),c&&(t-=e.width/2,$t.showTooltip(t,i,h,"bottom")),d&&(t-=e.width-5,i-=e.height/2,$t.showTooltip(t,i,h,"left"))}}()}),300)}})).on("mouseleave.".concat(i.namespace),(function(){clearTimeout(t),$t.hideTooltip()})).merge(a).transition().duration(i.settings.animationSpeed).attrTween("d",(function(e){this.current=this.current||e;var t=d3.interpolate(this.current,e);return this.current=t(0),function(e){return i.arc(t(e))}})),a.exit().remove(),!s){var o=i.element.parent().width()<520,r=i.settings.showLines;if(!i.settings.showLinesMobile&&r&&(r=!o),i.settings.dotSize=r?2:0,r){var l=i.svg.select(".labels").selectAll("text").data(i.pie(e),i.key);l.enter().append("text").attr("dy",".35em").text((function(e){return o?e.data.shortName:$t.formatToSettings(e,i.settings.lines)})).merge(l).transition().duration(i.settings.animationSpeed).attrTween("transform",(function(e){this.current=this.current||e;var t=d3.interpolate(this.current,e);return this.current=t(0),function(e){var n=t(e),s=i.outerArc.centroid(n);return s[0]=i.dims.radius*(i.midAngle(n)<Math.PI?1:-1),s[0]-=i.midAngle(n)<Math.PI?20:-20,"translate(".concat(s,")")}})).styleTween("text-anchor",(function(e){this.current=this.current||e;var t=d3.interpolate(this.current,e);return this.current=t(0),function(e){var n=t(e);return i.isRTL?i.midAngle(n)>Math.PI?"start":"end":i.midAngle(n)<Math.PI?"start":"end"}})),l.exit().remove();var c=i.svg.select(".lines").selectAll("polyline").data(i.pie(e),i.key);c.enter().append("polyline").merge(c).transition().duration(i.settings.animationSpeed).attrTween("points",(function(e){this.current=this.current||e;var t=d3.interpolate(this.current,e);return this.current=t(0),function(e){var n=t(e),s=i.outerArc.centroid(n);return s[0]=.85*i.dims.radius*(i.midAngle(n)<Math.PI?1:-1),[i.outerArc.centroid(n),i.outerArc.centroid(n),s]}})),c.exit().remove()}var d=i.svg.select(".lines").selectAll("circle").data(i.pie(e),i.key);d.enter().append("circle").attr("class","circles").attr("r",i.settings.dotSize).merge(d).transition().duration(i.settings.animationSpeed).attrTween("transform",(function(e){this.current=this.current||e;var t=d3.interpolate(this.current,e);return this.current=t(0),function(e){var n=t(e);return"translate(".concat(i.outerArc.centroid(n)," )")}})),d.exit().remove()}},setInitialSelected:function(){var e,t=this,i=0;this.svg.selectAll(".slice").each((function(n,s){n&&n.data&&n.data.selected&&i<1&&(i++,t.initialSelectCall=!0,(e=d3.select(this)).on("click.".concat(t.namespace)).call(e.node(),e.datum(),s))})),this.initialSelectCall=!1},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},getSelected:function(){return $t.selected},setSelected:function(e,t){var i,n,s=this,a=0,o=C.equals;this.svg.selectAll(".slice").each((function(t,r){t&&t.data&&a<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===t.data[e.fieldName]||void 0!==e.index&&e.index===r||e.data&&o(e.data,s.chartData[r].data)||e.elem&&$(this).is(e.elem))&&(a++,i=d3.select(this),n=r)})),a>0&&(t||!i.classed("is-selected"))&&i.on("click.".concat(s.namespace)).call(i.node(),i.datum(),n)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(e){for(var t=0,i=0,n=0,s=[],a=0;a<e.length;a++)t+=parseInt(e[a],10),s[a]=a;var o=100-t;s.sort((function(t,i){return n=e[t]-parseInt(e[t],10),e[i]-parseInt(e[i],10)-n})),e.sort((function(e,t){return n=e-parseInt(e,10),t-parseInt(t,10)-n}));for(var r=0;r<e.length;r++)i=r,e[r]=i<o?parseInt(e[r],10)+1:parseInt(e[r],10);for(var l=[],c=0;c<e.length;c++)l[s[c]]=e[c];return l},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".slice").off(t(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],"pie"),$.removeData(this.element[0],"chart"))}};var Wt={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function jt(e,t){this.settings=C.mergeSettings(e,t,Wt),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}jt.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=$t.colorRange(),this.useBuiltInColors=!0),this},updateData:function(e){var t=this,i=this.settings,n=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==e.length){var s,a=this.element.parent(),o={w:a.width(),h:a.height(),extra:.957};if("right"===i.legendPlacement&&(o.w*=.75),J.uplift&&o.w>=420&&(o.extra-=.12),i.showLegend&&o.w<420&&!i.margin.bottom)s=o.w>405?5:o.w>390?3:o.w>350?.9:.5,o.h-=(420-o.w)*s;o.transform={x:o.w/2+(i.margin.left+i.margin.right)/2,y:o.h/2*o.extra+(i.margin.top+i.margin.bottom)/2};var r,l=d3.scaleOrdinal(i.colors),c=Math.max(i.maxValue,d3.max(e,(function(e){return d3.max(e.data.map((function(e){return e.value})))}))),d=e[0].data.map((function(e){return function(e){var t=328,i=469,n="";return o.w<=t?n=e.shortName||e.abbrName||e.name||"":o.w>=t+1&&o.w<=i?n=e.abbrName||e.name||"":o.w>i&&(n=e.name||""),n}(e)})),h=d.length,u=2*Math.PI/h,p=Math.min(o.w/3,o.h/3)*o.extra,g=d3.scaleLinear().range([0,p]).domain([0,c]),f=this.element[0];d3.select(f).select("svg").remove();var m=d3.select(f).append("svg").attr("width",o.w+(i.margin.left+i.margin.right)).attr("height",o.h+(i.margin.top+i.margin.bottom)).attr("class","chart-radar");this.svg=m;var v=m.append("g").attr("transform","translate(".concat(o.transform.x,",").concat(o.transform.y,")"));if(i.opacityCircles>0){var b=v.append("defs").append("filter").attr("id","glow");b.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var y=b.append("feMerge");y.append("feMergeNode").attr("in","coloredBlur"),y.append("feMergeNode").attr("in","SourceGraphic")}var w=v.append("g").attr("class","chart-radar-axis-wrapper");w.selectAll(".levels").data(d3.range(1,i.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",(function(e){return p/i.levels*e})).style("fill-opacity",i.opacityCircles).style("filter",i.opacityCircles>0?"url(#glow)":""),i.showAxisLabels&&w.selectAll(".axis-label").data(d3.range(1,i.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",(function(e){return-e*p/i.levels})).attr("dy","0.4em").style("font-size",J.uplift?"12px":"10px").attr("fill","#737373").text((function(e){var t=Math.round(10*c)/10;return i.axisFormatter.indexOf("%")>-1?d3.format(i.axisFormatter)(t*e/i.levels):d3.format(i.axisFormatter)(e/i.levels)}));var x=w.selectAll(".axis").data(d).enter().append("g").attr("class","axis");i.showCrosslines&&x.append("line").attr("x1",0).attr("y1",0).attr("x2",(function(e,t){return g(1.05*c)*Math.cos(u*t-Math.PI/2)})).attr("y2",(function(e,t){return g(1.05*c)*Math.sin(u*t-Math.PI/2)})).attr("class","chart-radar-crossline").style("stroke-width","1px"),x.append("text").attr("class","legend").style("font-size",J.uplift?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",(function(e,t){return g(c*i.labelFactor)*Math.cos(u*t-Math.PI/2)})).attr("y",(function(e,t){return g(c*i.labelFactor)*Math.sin(u*t-Math.PI/2)})).text((function(e){return e})),this.element[o.w<420?"addClass":"removeClass"]("is-small"),o.w>456&&m.selectAll(".chart-radar-axis-wrapper .axis .legend").each((function(){$t.wrap(d3.select(this),i.wrapWidth,i.labelFactor)}));var C=d3.lineRadial().curve(d3.curveBasisClosed).radius((function(e){return g(e.value)})).angle((function(e,t){return t*u}));i.roundStrokes&&C.curve(d3.curveCardinalClosed);var k=v.selectAll(".radarWrapper").data(e.map((function(e){return e.data}))).enter().append("g").attr("class","chart-radar-wrapper");if(k.append("path").attr("class","chart-radar-area").attr("d",(function(e){return C(e)})).style("fill",(function(e,t){return l(t)})).style("fill-opacity",i.opacityArea).on("click.".concat(t.namespace),(function(e,n){clearTimeout(r);var s=d3.select(this),a=s.classed("is-selected");m.selectAll(".is-selected").classed("is-selected",!1),m.selectAll(".is-not-selected").classed("is-not-selected",!1),$t.clearSelected(i.dataset),a||(m.selectAll(".chart-radar-area").classed("is-not-selected",!0),s.classed("is-selected",!0).classed("is-not-selected",!1),s.style("fill-opacity",i.opacityArea),i.dataset[n].selected=!0);var o={elem:s.nodes(),data:e,index:n};t.element.triggerHandler(a?"deselected":"selected",o),$t.selected=a?[]:o})).on("contextmenu.".concat(t.namespace),(function(e){$t.triggerContextMenu(t.element,d3.select(this).nodes()[0],e)})),k.append("path").attr("class","chart-radar-stroke").attr("d",(function(e){return C(e)})).style("stroke-width","".concat(i.strokeWidth,"px")).style("stroke",(function(e,t){return l(t)})).style("fill","none").style("filter",i.opacityCircles>0?"url(#glow)":""),k.selectAll(".chart-radar-circle").data((function(e){return e})).enter().append("circle").attr("class","chart-radar-circle").attr("r",i.dotRadius).attr("cx",(function(e,t){return g(e.value)*Math.cos(u*t-Math.PI/2)})).attr("cy",(function(e,t){return g(e.value)*Math.sin(u*t-Math.PI/2)})).style("fill",(function(){return l($(this.parentNode).index()-1)})).style("fill-opacity",.6),v.selectAll(".radar-circle-wrapper").data(e.map((function(e){return e.data}))).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data((function(e){return e})).enter().append("circle").attr("class","radar-invisible-circle").attr("r",1.5*i.dotRadius).attr("cx",(function(e,t){return g(e.value)*Math.cos(u*t-Math.PI/2)})).attr("cy",(function(e,t){return g(e.value)*Math.sin(u*t-Math.PI/2)})).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(t.namespace),(function(e){if(i.showTooltips){var t=$(this).offset(),s=$t.formatToSettings(e,i.tooltip);-1===s.indexOf("<b>")&&(s=(s=s.replace("(","<b>")).replace(")","</b>"));var a=$t.tooltipSize(s),o=t.left,l=t.top;o-=a.width/2-6,l-=a.height+6,null!=r&&clearTimeout(r),r=setTimeout((function(){$t.tooltip&&$t.tooltip.length&&$t.tooltip[n?"addClass":"removeClass"]("is-personalizable"),$t.showTooltip(o,l,s,"top")}),300)}})).on("mouseleave.".concat(t.namespace),(function(){clearTimeout(r),$t.hideTooltip()})).on("contextmenu.".concat(t.namespace),(function(e){$t.triggerContextMenu(t.element,d3.select(this).nodes()[0],e)})),i.showTooltips&&$t.appendTooltip("is-pie"),i.showLegend){i.legendPlacement&&this.element.addClass("has-".concat(i.legendPlacement,"-legend"));var T=i.dataset.map((function(e,t){return{name:e.name,display:"twocolumn",placement:i.legendPlacement,color:l(t)}}));i.svg=t.svg,$t.addLegend(T,"pie",i,this.element)}}else t.element.emptymessage(i.emptyMessage)},setInitialSelected:function(){var e=this.settings;if(Array.isArray(e.dataset))for(var t=0,i=e.dataset.length;t<i;t++)if(e.dataset[t].selected){var n=this.svg.selectAll(".chart-radar-area").nodes(),s=d3.select(n[t]);this.svg.selectAll(".is-selected").classed("is-selected",!1),this.svg.selectAll(".is-not-selected").classed("is-not-selected",!1),this.svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),s.classed("is-selected",!0).classed("is-not-selected",!1),s.style("fill-opacity",e.opacityArea);break}},handleEvents:function(){var e=this;return this.element.on("updated.".concat(this.namespace),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){e.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){e.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){e.updated()})),this},getSelected:function(){return $t.selected},setSelected:function(e,t){var i,n,s=0,a=this;this.svg.selectAll(".chart-radar-area").each((function(t,o){var r=a.settings.dataset[o];r&&r.data&&s<1&&(void 0!==e.fieldName&&void 0!==e.fieldValue&&e.fieldValue===r[e.fieldName]||void 0!==e.index&&e.index===o||e.elem&&$(this).is(e.elem))&&(s++,i=d3.select(this),n=o)})),s>0&&(t||!i.classed("is-selected"))&&i.on("click.".concat(a.namespace)).call(i.node(),i.datum(),n)},toggleSelected:function(e){this.setSelected(e,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=e.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var e=this,t=function(t){return"".concat(t.join(".".concat(e.namespace," ")),".").concat(e.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(t(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(t(["mouseenter","mouseleave","contextmenu"])),this.element.off(t(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),$t.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],"radar"),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(e){var t=null;switch(this.empty(),e.type){case"targeted-achievement":case"completion":case"completion-target":if(t=this.data(e.type))return t.updated(e),this;var i=new It(this,e);this.data("completion-chart",i),this.data("chart",i),this.data(e.type,i);break;case"bullet":if(t=this.data("bullet"))return t.updated(e),this;var n=new Dt(this,e);this.data("bullet",n),this.data("chart",n);break;case"radar":if(t=this.data("radar"))return t.updated(e),this;var s=new jt(this,e);this.data("radar",s),this.data("chart",s);break;case"sparkline":if(t=this.data("sparkline"))return t.updated(e),this;var a=new Pt(this,e);this.data("sparkline",a),this.data("chart",a);break;case"sparkline-dots":if(e.isDots=!0,t=this.data("sparkline"))return t.updated(e),this;var o=new Pt(this,e);this.data("sparkline",o),this.data("chart",o);break;case"sparkline-peak":if(e.isPeakDot=!0,t=this.data("sparkline"))return t.updated(e),this;var r=new Pt(this,e);this.data("sparkline",r),this.data("chart",r);break;case"sparkline-dots-n-peak":if(e.isPeakDot=!0,e.isDots=!0,t=this.data("sparkline"))return t.updated(e),this;var l=new Pt(this,e);this.data("sparkline",l),this.data("chart",l);break;case"sparkline-minmax":if(e.isMinMax=!0,t=this.data("sparkline"))return t.updated(e),this;var c=new Pt(this,e);this.data("sparkline",c),this.data("chart",c);break;case"sparkline-medianrange":if(e.isMedianRange=!0,t=this.data("sparkline"))return t.updated(e),this;var d=new Pt(this,e);this.data("sparkline",d),this.data("chart",d);break;case"sparkline-medianrange-n-peak":if(e.isMedianRange=!0,e.isPeakDot=!0,t=this.data("sparkline"))return t.updated(e),this;var h=new Pt(this,e);this.data("sparkline",h),this.data("chart",h);break;case"line":if(t=this.data("line"))return t.updated(e),this;var u=new Rt(this,e);this.data("line",u),this.data("chart",u);break;case"area":if(e.isArea=!0,t=this.data("line"))return t.updated(e),this;var p=new Rt(this,e);this.data("line",p),this.data("chart",p);break;case"bubble":if(e.isBubble=!0,t=this.data("line"))return t.updated(e),this;var g=new Rt(this,e);this.data("line",g),this.data("chart",g);break;case"scatterplot":if(e.isScatterPlot=!0,t=this.data("line"))return t.updated(e),this;var f=new Rt(this,e);this.data("line",f),this.data("chart",f);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(t=this.data("column"))return t.updated(e),this;var m=new Nt(this,e);this.data("column",m),this.data("chart",m);break;case"column-stacked":if(e.isStacked=!0,t=this.data("column"))return t.updated(e),this;var v=new Nt(this,e);this.data("column",v),this.data("chart",v);break;case"bar":if(e.isStacked=!0,t=this.data("bar"))return t.updated(e),this;var b=new Ht(this,e);this.data("bar",b),this.data("chart",b);break;case"bar-stacked":if(e.isStacked=!0,t=this.data("bar"))return t.updated(e),this;var y=new Ht(this,e);this.data("bar",y),this.data("chart",y);break;case"bar-normalized":if(e.isNormalized=!0,t=this.data("bar"))return t.updated(e),this;var w=new Ht(this,e);this.data("bar",w),this.data("chart",w);break;case"bar-grouped":if(e.isStacked=!1,e.isGrouped=!0,t=this.data("bar"))return t.updated(e),this;var x=new Ht(this,e);this.data("bar",x),this.data("chart",x);break;case"pie":if(t=this.data("pie"))return t.updated(e),this;var C=new Vt(this,e);this.data("pie",C),this.data("chart",C);break;case"donut":if(e.isDonut=!0,t=this.data("pie"))return t.updated(e),this;var k=new Vt(this,e);this.data("pie",k),this.data("chart",k);break;default:t=null}return this};var Gt={isToday:function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},firstDayOfWeek:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.getDay(),n=new Date(e),s=i>=t?i-t:6-i;return n.setDate(e.getDate()-s),n.setHours(0,0,0,0),n},lastDayOfWeek:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.firstDayOfWeek(e,t);return i.setDate(i.getDate()+6),i.setHours(23,59,59,999),i},dateDiff:function(e,t,i){var n=new Date;return Math.round((t-e)/(36e5*(i?1:Math.abs(n.getTimezoneOffset()))))}},Ut={addCalculatedFields:function(e,t,i,n){var s=function(e,i){return M.formatDate(e,C.extend(!0,{locale:t.name},i))},a={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:t.name},o=function(e){return M.parseDate(e,a)},r=function(e){return M.translate(e,{locale:t.name,language:i})};e.color=this.getEventTypeColor(e.type,n),e.duration=Math.abs(Gt.dateDiff(new Date(e.ends),new Date(e.starts),!1));var l=new Date,c=Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),d=new Date(e.starts),h=Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u="".concat(d.getDate(),"-").concat(d.getMonth()+1,"-").concat(d.getFullYear()),p="".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear());e.durationUnits=r(e.duration>1?"Days":"Day"),e.daysUntil=e.starts?Gt.dateDiff(h,c):0;var g,f,m=(new Date(e.ends)-new Date(e.starts))/36e5;if(e.durationHours=m>0&&m<.5?1:Math.round(m),e.isDays=!0,c>h&&u!==p&&(e.daysUntil=1),void 0===e.isAllDay&&(e.isAllDay=!0),e.durationHours<24&&(e.isDays=!1,e.isAllDay=!1,e.durationUnits=r(e.durationHours>1?"Hours":"Hour")),"true"===e.isAllDay.toString()){e.duration=(g=new Date(e.starts),f=new Date(e.ends),Math.abs(Math.round((f-g)/864e5))||1),e.durationUnits=r(e.duration>1?"Days":"Day"),e.isDays=!0,delete e.durationHours}if(e.starts){var v=o(e.starts);e.startsLocale=s(v),e.startsHourLocale=s(v,{date:"hour"}),Array.isArray(v)?e.startsHour=parseFloat(v[3]+v[4]/60):e.startsHour=parseFloat(v.getHours()+v.getMinutes()/60)}if(e.ends){var b=o(e.ends);e.endsLocale=s(b),e.endsHourLocale=s(b,{date:"hour"}),Array.isArray(b)?e.endsHour=parseFloat(b[3]+b[4]/60):e.endsHour=parseFloat(b.getHours()+b.getMinutes()/60)}if(e.eventTypes=n,e.isAllDay=e.isAllDay.toString(),"false"===e.isAllDay.toString()&&delete e.isAllDay,!e.isAllDay&&e.durationHours>=24&&(e.isAllDay=!1,e.durationUnits=r("Hours"),e.isDays=!1,delete e.duration),e.starts&&e.ends){var y=this.timeDiffInSeconds(o(e.starts),o(e.ends));e.durationInTime=this.timeBySeconds(y)}else e.durationInTime&&delete e.durationInTime;return e},timeDiffInSeconds:function(e,t){var i=Math.abs(t.getTime()-e.getTime());return Math.ceil(i/1e3)},timeBySeconds:function(e){return e=Number(e),{days:Math.floor(e/86400),hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)}},formateTimeString:function(e,t,i){if(e.durationInTime){var n=function(e){return M.translate(e,{locale:t.name,language:i})},s=e.durationInTime,a="";if(s.days){var o=n(s.days>1?"Days":"Day");a+="".concat(s.days," ").concat(o)}if(s.hours){var r=n(s.hours>1?"Hours":"Hour");s.days&&(a+="".concat(s.minutes||s.seconds?", ":" ".concat(n("And")," "))),a+="".concat(s.hours," ").concat(r)}if(s.minutes){var l=n(s.minutes>1?"Minutes":"Minute");(s.days||s.hours)&&(a+="".concat(s.seconds?", ":" ".concat(n("And")," "))),a+="".concat(s.minutes," ").concat(l)}if(s.seconds){var c=n(s.seconds>1?"Seconds":"Second");a+="".concat(s.days||s.hours||s.minutes?" ".concat(n("And")," "):""),a+="".concat(s.seconds," ").concat(c)}""!==a&&(e.duration="",e.durationUnits="",e.durationHours=a)}},getEventTypeColor:function(e,t){var i="azure";if(!e)return i;var n=t.filter((function(t){return t.id===e}));return 1===n.length&&(i=n[0].color||"azure"),i},cleanEventData:function(e,t,i,n,s,a,o){var r={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:n.name},l=function(e){return M.formatDate(e,r)},c=function(e,t){return M.parseDate(e,C.extend(!0,{locale:n.name},t))},d="on"===e.isAllDay||"true"===e.isAllDay||e.isAllDay,h=i,u=i;if(e.startsLocale&&e.endsLocale&&(h=new Date(c(e.startsLocale)),u=new Date(c(e.endsLocale))),"string"!=typeof e.starts||e.startsLocale||(h=new Date(e.starts)),"string"!=typeof e.ends||e.endsLocale||(u=new Date(e.ends)),M.isValidDate(h)||(h=i),M.isValidDate(u)||(u=i),d)h.setHours(0,0,0,0),e.starts=l(new Date(h)),u.setHours(23,59,59,999),e.ends=l(new Date(u)),e.duration=e.starts===e.ends?1:null,e.isAllDay=!0;else{if(h===u)u.setHours(u.getHours()+parseInt(e.durationHours,10)),e.ends=l("safari"===m.browser.name?u:u.toISOString()),e.duration=null;else if(e.endsHourLocale&&e.startsHourLocale){var p=c(e.startsHourLocale,{date:"hour"}),g=c(e.endsHourLocale,{date:"hour"});h.setHours(p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()),u.setHours(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()),"safari"===m.browser.name?(e.starts=l(h),e.ends=l(u)):(e.starts=l(h.toISOString()),e.ends=l(u.toISOString())),e.duration=Gt.dateDiff(new Date(e.starts),new Date(e.ends))}else e.ends=l(new Date(u));e.starts=l(new Date(h)),e.isAllDay=!1}if(void 0===e.comments&&t&&(e.comments=M.translate("NoCommentsEntered",{locale:n.name,language:s}),e.noComments=!0),!e.subject&&t&&(e.subject=M.translate("NoTitle",{locale:n.name,language:s})),e.type||(e.type=o[0].id),void 0===e.id&&t){var f=0===a.length?0:parseInt(a[a.length-1].id,10);e.id=(f+1).toString()}"NewEvent"===e.title&&(e.title=M.translate("NewEvent",{locale:n.name,language:s}))}};$.fn.popover=$.fn.tooltip;var _t=["default","neutral","secondary","error","alert","good","info"],Yt={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:_t[0],value:void 0};function Kt(e,t){var i;if(this.settings=C.mergeSettings(e,t,Yt),e instanceof HTMLElement?e.querySelector(".tag-content")?i=e:((i=document.createElement("span")).className+="".concat(e.className),e.id&&e.id.length?(i.id=e.id,e.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(i.id=this.settings.id,delete this.settings.id),e.insertAdjacentElement("beforebegin",i),i.appendChild(e),i.classList.add("tag"),e.className="",e.classList.add("tag-content")):((i=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(i),"string"==typeof this.settings.id&&this.settings.id.length&&(i.id=this.settings.id,delete this.settings.id)),e){var n=e.querySelector(".audible");n&&i.insertAdjacentElement("afterbegin",n)}this.element=i,this.getSettingsFromElement(),this.init()}Kt.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var e=this.element.classList,t=C.getArrayFromList(this.element.classList),i=this.settings.style;t.forEach((function(t){_t.indexOf(t)>-1&&e.remove(t)})),-1===this.element.className.indexOf(i)&&"default"!==i&&e.add(i),this.settings.disabled&&e.add("is-disabled");var n="";this.settings.audibleContent&&(n='<span class="audible">'.concat(h.stripHTML(this.settings.audibleContent),"</span>"));var s="span",a="",o="",r="",l=this.settings.href&&this.settings.href.length;(l||this.originallyAnchor)&&(s="a",this.settings.disabled&&(r=' tabIndex="-1"')),l&&(a=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(e.add("is-linkable"),o='<button class="linkable-btn" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),"\n      </button>"));var c="<".concat(s,' class="tag-content"').concat(a).concat(r,">").concat(h.sanitizeHTML(this.settings.content),"</").concat(s,">"),d="";this.settings.dismissible&&(e.add("is-dismissible"),d='<button class="dismissible-btn" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(M.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(n).concat(c).concat(o).concat(d),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".dismissible-btn")},getSettingsFromElement:function(){var e=this.element.className,t="";_t.forEach((function(i){e.indexOf(i)>-1&&(t=i)})),t&&(this.settings.style=t),this.settings.disabled=this.disabled;var i=this.dismissibleBtn,n=this.element.className.indexOf("is-dismissible")>-1;(i||n)&&(this.settings.dismissible=!0);var s=this.element.querySelector("a"),a=this.element.className.indexOf("is-linkable")>-1,o=this.element.querySelector(".linkable-btn");if(s||a||o){this.originallyAnchor=!0;var r=s.getAttribute("href");r&&r.length&&(r=h.stripTags(r),this.settings.href=r)}(a||o)&&(this.settings.clickable=!0);var l=this.element.querySelector(".audible");l instanceof HTMLElement&&(this.settings.audibleContent=h.stripHTML(l.innerText));var c=this.contentElement;c&&(this.settings.content=h.sanitizeHTML(c.innerText))},remove:function(){var e=this.element,t=e.parentNode;this.settings.parentAPI&&(t=this.settings.parentAPI.element),$(t).triggerHandler("beforetagremove",[this]),this.destroy(),e.remove(),$(t).triggerHandler("aftertagremove",[this])},dismiss:function(e){if(!this.disabled){this.remove(e),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var t=this.settings.parentAPI;t&&t.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var e=$(this.element);e.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var t=this.dismissibleBtn;t&&t.parentNode.removeChild(t);var i=e.data("hidefocus");return i&&"function"==typeof i.destroy&&i.destroy(),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Yt)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function(){var e=this;$(this.element).on("focusin.tag",(function(){e.element.classList.add("is-focused")})).on("focusout.tag",(function(){e.element.classList.remove("is-focused")}));var t=this;$(this.element).on("click.tag","a, .linkable-btn",(function(e){var i;return"function"==typeof t.settings.clickHandler&&(i=t.settings.clickHandler(t)),!(!1===i||t.settings.href&&"#"===t.settings.href)||(e.preventDefault(),!1)})),this.settings.dismissible&&($(this.element).on("click.tag",".dismissible-btn",(function(t){e.dismiss(t)})),$(this.element).on("keydown.tag","a",(function(t){8===t.keyCode&&e.dismiss(t)})))}};var Xt={tags:[]};function Qt(e,t){var i=this;if(!(e instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=C.mergeSettings(e,t,Xt),this.element=e;var n=C.getArrayFromList(this.element.querySelectorAll(".tag"));n.length&&(this.settings.tags=[],n.forEach((function(e){i.settings.tags.push(new Kt(e))}))),this.init()}Qt.prototype={get length(){return this.tags.length},get elements(){return this.tags.map((function(e){return e.element}))},init:function(){var e=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach((function(t){e.add(t)})),this.render()},getTargetProp:function(){return"content"},add:function(e){var t,i=this;if(!e)throw new Error("No object was provided");if(Array.isArray(e)){var n=[];return e.forEach((function(e){n.push(i.add(e))})),n}if(A.isEmpty(e))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return e instanceof Kt?(t=e,e.settings.parentAPI=this):(e.parent=this.element,e.parentAPI=this,t=new Kt(void 0,e)),-1===this.tags.indexOf(t)&&this.tags.push(t),t},remove:function(e,t){e instanceof Kt&&(e=e.settings);var i,n=this.getTargetProp(e),s=this.tags.filter((function(t){return t.settings[n]===e[n]||(i=t,!1)}));return s.length<this.tags.length&&(this.tags=s),t&&i.remove(),i},removeAll:function(){this.tags.forEach((function(e){e.remove()})),this.tags=[]},render:function(){this.tags.forEach((function(e){e.render()})),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.elements,i=0,n=t.length;e<i&&(e=i),e>n&&(e=n);var s=t[e],a=s.querySelector("a");return a&&a.focus(),s},focusPreviousElement:function(e){if(!(e instanceof HTMLElement))throw new Error("".concat(e," is not an HTMLElement"));var t=this.elements.indexOf(e);if(!(t>-1))throw new Error("".concat(e," does not exist within this TagList"));return this.focusByIndex(t-1)},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings),Array.isArray(e.tags)&&(this.settings.tags=e.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach((function(e){e.remove()})),delete this.tags,$(this.element).data("taglist")&&$.removeData(this.element,"taglist")}};var Jt=["none","all","group"],Zt={closeOnSelect:!0,cssClass:null,filterMode:"contains",maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{}};function ei(e,t){this.settings=C.mergeSettings(e,t,Zt),this.element=$(e),this.init()}ei.prototype={get value(){var e=this.settings.reload,t=this.settings.multiple;if("typeahead"===e)return t?this.selectedValues:this.element.val();for(var i,n=[],s=this.element[0].options,a=0;a<s.length;a++)(i=s[a]).selected&&n.push(i.value||i.text);return t||1!==n.length?n:n[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var e=this.pseudoElem.find("span").css("max-width","");if(Math.round(e.width())>Math.round(this.pseudoElem.width()))return e.css("max-width","100%"),!0}return!1},get isFocused(){var e=document.activeElement;return!!(this.pseudoElem&&this.pseudoElem.length&&this.pseudoElem.is($(e)))||!!(this.list&&this.list.length&&this.list[0].contains(e))},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map((function(e){return e.value}))},get selectedOptions(){return C.getArrayFromList(this.element[0].querySelectorAll("option")).filter((function(e){return e.selected}))},init:function(){var e=this,t=this.element.attr("id");t=t?h.stripTags(t):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",t||(t=C.uniqueId(this.element,"dropdown"),u.setAttribute(this.element[0],"id",t),u.setAttribute(this.element.parent().find("label").first()[0],"for",t)),"ios"!==m.os.name&&"android"!==m.os.name||(this.settings.noSearch=!0);var i=this.element[0].classList;0===i.length&&(this.element[0].classList="dropdown");var n=i.contains("dropdown-xs")?"dropdown input-xs":i.contains("dropdown-sm")?"dropdown input-sm":i.contains("dropdown-lg")?"dropdown input-lg":"dropdown",s=this.element.attr("style");this.isHidden=s&&s.indexOf("display: none")>=0;var a=this.isInlineLabel?this.inlineLabel:this.element;this.wrapper=a.next(".dropdown-wrapper"),this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(a)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(n)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(t,"-shdo")),i.contains("text-align-reverse")?n+=" text-align-reverse":i.contains("text-align-center")&&(n+=" text-align-center"),this.label=$('label[for="'.concat(h.stripTags(t),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",n):this.pseudoElem=$('<div class="'.concat(n,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var o=u.getAttributes(this.element[0]),r=this.getDataAttributes(o,["data-validate"]);this.pseudoElem.attr(r.obj).attr({role:"button","aria-haspopup":"listbox"}),function(e){var t=e.element.prop("disabled"),i=e.element.prop("readonly");t?e.disable():i?e.readonly():e.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".icon"),this.icon.length||(this.icon=$.createIconElement("dropdown"),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var l=this.element.attr("data-source");l&&"source"!==l&&(this.settings.source=l);var c=this.element.attr("data-maxselected");function d(e,t){switch(e){case!t||"true":return"all";case!!t&&"false":return"none";default:return Jt.indexOf(e)>-1?e:"none"}}c&&!isNaN(c)&&(this.settings.maxSelected=parseInt(c,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var p=this.element.attr("data-move-selected");this.settings.moveSelected=p?d(p,!0):d(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var g=this.element.attr("data-close-on-select");g&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===g);var f=this.element.attr("data-no-search");f&&!this.settings.noSearch&&(this.settings.noSearch="true"===f);for(var v=["-xs","-sm","-mm","-md","-lg"],b=this.element.attr("class"),y=null,w=0;w<v.length;w++)y=v[w],b.match(y)&&this.pseudoElem.addClass("dropdown".concat(y));return this.dataset=[],this.listfilter=new pt({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout((function(){e.toggleTooltip()}),0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var e=this;function t(t){e.settings.dismissHandler&&e.settings.dismissHandler(t);var i=e.selectedOptions.filter((function(e){return h.stripHTML(e.value)===t.settings.value}));i.length&&e.deselect(i[0]),e.tagListAPI.element.classList[e.selectedOptions.length?"remove":"add"]("empty"),e.isOpen()&&e.updateList()}var i=this.toTagData();i.forEach((function(i){i.dismissHandler=t,e.settings.clickHandler&&(i.clickHandler=e.settings.clickHandler),e.isDisabled()&&(i.disabled=!0)}));var n=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:i}):(this.tagListAPI=new Qt(n,{tags:i}),n.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),this.isOpen()&&this.position()},inputTimer:function(){if(this.inputTimeout)return!1;var e=this;return this.inputTimeout=setTimeout((function(){clearTimeout(e.inputTimeout),e.inputTimeout=null}),100),!0},setWidth:function(){var e=this.element[0].style;e.width&&(this.pseudoElem[0].style.width=e.width),"absolute"===e.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=e.left,this.pseudoElem[0].style.top=e.top,this.pseudoElem[0].style.bottom=e.bottom,this.pseudoElem[0].style.right=e.right)},setItemIcon:function(e){if(!e.icon)return e.isIcon=!1,e.html="",void this.listIcon.items.push(e);"object"===i(e.icon)&&(e.obj=e.icon,e.icon=e.icon.icon,e.obj.color?0===e.obj.color.indexOf("#")?e.specColor=e.obj.color:e.classList=" ".concat(e.obj.color):e.obj.class&&(0===e.obj.class.indexOf("#")?e.specColor=e.obj.class:e.classList=" ".concat(e.obj.class)),e.obj.colorOver?0===e.obj.colorOver.indexOf("#")?e.specColorOver=e.obj.colorOver:e.classListOver=" ".concat(e.obj.colorOver):e.obj.classOver&&(0===e.obj.classOver.indexOf("#")?e.specColorOver=e.obj.classOver:e.classListOver=" ".concat(e.obj.classOver))),e.isIcon=e.icon&&e.icon.length,e.classList&&e.classList.length&&(e.isClassList=!0),e.classListOver&&e.classListOver.length&&(e.isClassListOver=!0),e.html=$.createIcon({icon:e.isIcon?e.icon:"",class:"listoption-icon".concat(e.isClassList?" ".concat(e.classList):"")}),"swatch"===e.icon&&(e.isSwatch=!0,e.html='<span class="swatch '.concat(e.isClassList?e.classList:"",'"></span>')),this.listIcon.items.push(e)},setListIcon:function(){var e=this,t=!e.settings.multiple&&e.element.find("[data-icon]").length>0,i=t?this.element.find("option"):[];if(e.listIcon={hasIcons:t,items:[]},t){var n=0;i.each((function(t){var i=$(this).attr("data-icon"),s=null;"string"==typeof i&&i.length&&(s=0!==i.indexOf("{")?i:$.fn.parseOptions(this,"data-icon"),e.setItemIcon({html:"",icon:s}),e.listIcon.items[t]&&e.listIcon.items[t].isIcon&&n++)})),t=n>0}t&&(e.pseudoElem.prepend($.createIcon({icon:"",class:"listoption-icon"})),e.listIcon.pseudoElemIcon=e.pseudoElem.find("> .listoption-icon"),e.listIcon.idx=-1),e.listIcon.hasIcons=t},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var e=this,t=this.element.find("option:selected"),i=this.getOptionText(t);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:h.escapeHTML(i),parentElement:this.pseudoElem,trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",(function(){e.removeTooltip()})).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(e){var t=this;if(t.listIcon.hasIcons){var i=e?e.find(".listoption-icon"):null;t.list.find("li").each((function(n){var s=$(this),a=s.find(".listoption-icon"),o=t.listIcon.items[n];o&&(s.is(".is-focused")&&o.isClassListOver&&a.removeClass(o.classListOver).addClass(o.classList),i&&s.is(e)&&o.isClassListOver&&(i.removeClass(o.classList),i.addClass(o.classListOver)))}))}},updateItemIcon:function(e){if(this.listIcon.hasIcons){var t=this.listIcon.pseudoElemIcon,i=e.index(),n=this.listIcon.idx,s=this.listIcon.items[i],a=s&&s.isIcon?s.icon:"";if(!s)return;if(n>-1){var o=this.listIcon.items[n];o&&(t.removeClass("".concat(o.classList," ").concat(o.classListOver)),t[0].style.fill="")}this.listIcon.idx=i,t.changeIcon(a),s.isClassList&&t.addClass(s.classList)}},updateList:function(e){var t=this,i=t.isMobile(),n=void 0!==t.list&&null!==t.list&&t.list.length>0,s="",a="",o=0,r=this.element.find("optgroup").length,l="",c=!0===this.settings.multiple,d="".concat(this.settings.moveSelected),h=!0===this.settings.showSelectAll;this.element[0].classList.contains("text-align-reverse")?l=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(l=" text-align-center"),n||(s='<div class="dropdown-list'.concat(l).concat(i?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="dropdown-list" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(M.translate("TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(l,'" id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(i?$.createIcon({icon:"close",classes:["close"]}):$.createIcon("dropdown"),'<span class="audible">').concat(i?M.translate("Close"):M.translate("Collapse"),'</span></span>\n        <ul role="listbox" aria-label="').concat(M.translate("Dropdown"),'">'));var p=this.element.find("option"),g=this.element.find("optgroup"),f=":selected",m=[];"typeahead"===this.settings.reload&&(f=function(e,i){return!!t.selectedValues&&t.selectedValues.indexOf(i.value)>-1});var v=p.filter(f);function b(e){return'<li role="presentation" class="group-label" focusable="false">\n        '.concat(e,"\n      </li>")}function y(i,n){var s="",a=i.innerHTML,o=u.getAttributes(i),r=o.getNamedItem("value"),l=o.getNamedItem("title"),c=l?'" title="'.concat(l.value,'"'):"",d=o.getNamedItem("data-badge"),h=o.getNamedItem("data-badge-color"),p="",g=i.selected?" is-selected":"",f=i.disabled?" is-disabled":"",m=i.className?" ".concat(i.className.value):"",v=m.indexOf("clear")>-1?' class="clear-selection"':"",b=' tabIndex="'.concat(n&&0===n?0:-1,'"'),y=" ".concat(t.getDataAttributes(o,["data-badge","data-badge-color","data-val","data-icon"]).str),w=(r&&"value"in r?r.value:a).replace(/"/g,"/quot/"),x="";if(t.listIcon.hasIcons&&t.listIcon.items[n]&&(x=t.listIcon.items[n].html),d&&(p='<span class="badge '.concat(h?h.value:"azure07",'">').concat(d.value,"</span>")),m.indexOf("clear")>-1&&""===a&&(a=M.translate("ClearSelection")),e&&e.length>0){var C=t.getSearchRegex(e);a=a.replace(C,"<i>$1</i>").trim()}return t.listIcon.hasIcons&&t.listIcon.items[n]&&t.listIcon.items[n].isSwatch&&(m+=" is-swatch"),s+='<li class="dropdown-option'.concat(g).concat(f).concat(m,'" ').concat(g?'aria-selected="true"':"",' data-val="').concat(w,'" ').concat(y).concat(b).concat(c,' role="option">\n        <a id="list-option-').concat(n,'" href="#" ').concat(v,' role="option">').concat(x).concat(a).concat(p,"</a></li>")}if("typeahead"===this.settings.reload&&v.prop("selected",!0),c&&h){var w=p.not("[disabled], .hidden").length===v.not("[disabled], .hidden").length;a+='<li role="presentation" class="dropdown-select-all-list-item'.concat(w?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(M.translate("SelectAll"),"</a>")+"</li>"}"group"===d&&(g&&g.length?g.each((function(e,t){var i=v.filter((function(){return $.contains(t,this)}));m.push(i)})):d="all"),"all"===d&&(p=p.not(v),v.length>0&&(a+=b("".concat(M.translate("Selected")," ").concat(t.isInlineLabel?t.inlineLabelText.text():this.label.text()))),v.each((function(e){a+=y(this,e),o++})),!r&&p.length>0&&(a+=b("".concat(M.translate("All")," ").concat(t.isInlineLabel?t.inlineLabelText.text():this.label.text())))),p.each((function(e){var t,i=e+o,n=$(this),s=n.parent();s.is("optgroup")&&g.length&&(t=s.index(),g.index(s)>-1&&(g=g.not(s),a+=b("".concat(s.attr("label"))),"group"===d&&m[t].each((function(e){a+=y(this,e),o++})))),"none"!==d&&n.is(":selected")||(a+=y(this,i))})),n?this.listUl.html(a):(s+="".concat(a,"</ul>")+"</div>",this.list=$(s),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),this.listIcon.hasIcons&&(this.list.addClass("has-icons"),this.listIcon.pseudoElemIcon.clone().appendTo(this.list)),r&&this.listUl.addClass("has-groups"),$.fn.tooltip&&this.listUl.find("[title]").addClass("has-tooltip").tooltip(),this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},setDisplayedValues:function(){var e=this.element.find("option:selected"),t=this.getOptionText(e);if(e.hasClass("clear")&&(t=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===e.length){var i=this.pseudoElem.find("span").first();return u.html(i,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),i=$("#".concat(this.element.attr("id"))).next().find("span").first(),u.html(i,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),void this.setPlaceholder(t)}var n=this.element.attr("maxlength");n&&(t=t.substr(0,n)),t=t.trim();var s=this.pseudoElem.find("span");s.length>0&&(s[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(h.escapeHTML(t)))}this.setPlaceholder(t),this.previousActiveDescendant=e.first().val(),this.updateItemIcon(e),this.setBadge(e)},copyClass:function(e,t,i){e.hasClass(i)&&t.addClass(i)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next("svg").hide())},setPlaceholder:function(e){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var t="string"!=typeof e||"string"==typeof e&&""===e;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",t?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(e,t){var i=t.which;if(t.altKey&&38===i)return t.stopPropagation(),t.preventDefault(),!1;if(!e.is(":disabled")&&!e.hasClass("is-readonly")){if(t.ctrlKey)if(this.settings.onKeyDown)if(!1===this.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;return!0}},handleSearchEvents:function(){var e=this;this.settings.noSearch&&this.searchInput.prop("readonly",!0),this.filterTerm||(this.searchKeyMode=!1),this.searchInput.on("keydown.".concat("dropdown"),(function(t){var i=$(e);return!!e.ignoreKeys(i,t)&&e.handleKeyDown(i,t)})).on("input.".concat("dropdown"),(function(t){e.isFiltering=!0,e.handleAutoComplete(t)}))},filterList:function(e){var t=!1;this.settings.source&&"typeahead"===this.settings.reload&&(t=!0,this.callSource());var i,n=this,s=!1,a=$(".dropdown-option",this.listUl),o=$(".group-label",this.listUl),r=!1;a.length&&this.list&&(!this.list||this.list.length)&&(e||(e=""),i=!t&&e&&e.length?this.listfilter.filter(a,e):a,this.list.addClass("search-mode"),this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.searchInput.removeAttr("aria-activedescendant"),this.unhighlightOptions(),i&&(i.length||e)?(i.removeClass("hidden"),a.not(i).add(o).addClass("hidden"),a.filter(i).each((function(t){var i=$(this),a=i.children("a");i.attr("tabindex",0===t?"0":"-1"),s||(n.highlightOption(i),s=!0);var o=n.getSearchRegex(e),l=i.text();l=(l=(l=(l=(l=(l=(l=(l=(l=(l=(l=h.escapeHTML(l)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(o,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var c=0!==i.children("a").find("svg").length?(new XMLSerializer).serializeToString(i.children("a").find("svg")[0]):"",d=i.children("a").find(".swatch"),u=0!==d.length?d[0].outerHTML:"";c&&(r=!0),a[0]&&(a[0].innerHTML=u+c+l)})),o.each((function(){var e=$(this).nextUntil(".group-label, .selector").not(".hidden");(n.settings.showEmptyGroupHeaders||e.length)&&$(this).removeClass("hidden")})),e="",this.position(),r&&this.list.find("svg").length>2&&this.list.find("svg").last().changeIcon("icon-empty-circle")):this.resetList())},resetList:function(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var e=this.listUl.find("li"),t=!1;e.removeAttr("style").each((function(){var e=$(this).children("a"),i=$(this),n=h.escapeHTML(e.text()),s=0!==i.children("a").find("svg").length?(new XMLSerializer).serializeToString(i.children("a").find("svg")[0]):"",a=i.children("a").find(".swatch"),o=0!==a.length?a[0].outerHTML:"";s&&(t=!0),e[0]&&(e[0].innerHTML=o+s+n)})),this.list.hasClass("is-ontop")&&(this.list[0].style.top="".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px")),this.settings.multiple&&this.updateList(),e.removeClass("hidden"),this.position(),t&&this.list.find("svg").length>2&&this.list.find("svg").last().changeIcon("icon-empty-circle"),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function(){var e=this.element.find("option").filter((function(){return!this.value||0===$.trim(this.value).length}));e.length&&(e[0].selected=!0,e[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.triggerHandler("change"))},handleKeyDown:function(e,t){var i,n=this.element[0].selectedIndex||-1,s=this.element[0].options,a=t.which;if(!this.isLoading()){if(this.settings.onKeyDown)if(!1===this.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;switch(this.isOpen()&&(s=this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),n=-1,$(s).each((function(e){$(this).is(".is-focused")&&(n=e)}))),a){case 37:case 8:case 46:if(!this.isOpen())return this.selectBlank(),t.stopPropagation(),t.preventDefault(),!1;break;case 9:return this.isOpen()&&(this.closeList("tab"),this.activate()),!0;case 27:if(this.isOpen()){this.element.closest(".modal.is-visible").data("listclosed",!0);var o=this.pseudoElem?this.pseudoElem.parents("td"):null;return this.closeList("cancel"),this.activate(),o&&o.focus(),t.stopPropagation(),!1}break;case 32:case 13:if(this.isOpen()){if(32===a&&!0===this.searchKeyMode)break;t.preventDefault(),s.length&&n>-1&&this.selectOption(this.correctValue($(s[n]))),this.settings.closeOnSelect&&(this.closeList("select"),this.activate())}return t.stopPropagation(),!1;case 38:if(t.shiftKey)return;return this.searchKeyMode=!1,n>0&&(i=$(s[n-1]),this.highlightOption(i),this.setItemIconOverColor(i),i.parent().find(".is-focused").removeClass("is-focused"),i.addClass("is-focused")),t.stopPropagation(),t.preventDefault(),!1;case 40:if(t.shiftKey)return;return this.searchKeyMode=!1,n<s.length-1&&(i=$(s[n+1]),this.highlightOption(i),this.setItemIconOverColor(i),i.parent().find(".is-focused").removeClass("is-focused"),i.addClass("is-focused")),t.stopPropagation(),t.preventDefault(),!1;case 35:this.searchKeyMode=!1;var r=$(s[s.length-1]);return this.highlightOption(r),t.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var l=$(s[0]);return this.highlightOption(l),t.stopPropagation(),!1}return this.isOpen()||this.isControl(a)||this.settings.source||this.settings.noSearch||(this.isFiltering=!0,this.filterTerm=$.actualChar(t),this.searchInput&&this.searchInput.length&&this.searchInput.val($.actualChar(t)),this.toggle()),this.searchKeyMode=!0,this.searchInput&&this.searchInput.attr("aria-activedescendant",""),!0}},handlePseudoElemKeydown:function(e){var t=$(e.target),i=e.key;if(t.is(".is-readonly"))return!0;var n="Esc"===i||"Escape"===i;if(["Alt","Shift","Control","Meta"].indexOf(i)>-1)return!1;if(!this.ignoreKeys(t,e))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(i)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!e.ctrlKey&&this.handleKeyDown(t,e),!1;var s="Mac OS X"===m.os.name;return!s&&"Delete"===i||s&&"Backspace"===i?(this.selectBlank(),"Backspace"===i&&(e.stopPropagation(),e.preventDefault()),!0):n||"Tab"===i?!this.settings.noSearch||!this.isOpen()||this.handleKeyDown(t,e):(this.handleAutoComplete(e),!0)},handleAutoComplete:function(e){var t=this;if(!this.isLoading()){var i=this;if(this.timer&&clearTimeout(this.timer),"input"===e.type)this.filterTerm=this.searchInput.val();else{if(this.filterTerm+=$.actualChar(e).toLowerCase(),""===this.filterTerm)return;e.key===this.filterTerm||e.key.toLowerCase()!==this.filterTerm||i.settings.noSearch||(this.filterTerm=e.key)}this.timer=setTimeout((function(){i.settings.noSearch?i.selectStartsWith(i.filterTerm):(t.searchKeyMode=!0,i.isOpen()?n():i.open(n))}),i.settings.delay)}function n(){""===i.filterTerm?i.resetList():i.filterList(i.filterTerm.toLowerCase())}},isControl:function(e){return e>7&&e<48||e>90&&e<94||e>111&&e<146},activate:function(e){var t=this,i=this.pseudoElem;(e||t.isMobile())&&(i=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),e&&i&&(i.hasClass("is-readonly")||!0===i.prop("readonly"))||(t.isMobile()||t.filterTerm||!i||(i[0].setSelectionRange?i[0].setSelectionRange(0,i[0].value.length):"INPUT"===i[0].tagName&&i[0].select()),i&&i[0].focus())},getSearchRegex:function(e){var t;try{t=new RegExp("(".concat(D.escapeRegExp(e),")"),"i")}catch(e){t=/[\s\S]*/i}return t},getOptionText:function(e){var t="";return e||(e=this.element.find("option:selected")),e.each((function(){t.length>0&&(t+=", "),t+=$(this).text().trim()})),t},open:function(e){var t=this;function i(){t.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),t.updateList(),t.openList(),e&&"function"==typeof e&&e.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||t.callSource(i)||i())},openList:function(){var e,t=this.previousActiveDescendant?this.list.find('.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]')):this.list.find(".is-selected"),i=this;if(this.touchPrevented=!1,$("select").each((function(){var e=$(this).data();e.dropdown&&e.dropdown.closeList("cancel")})),$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).each((function(){var e=$(this).data("trigger");if(e&&e.length){var t=$(this).data("trigger").data("popupmenu");t&&"function"==typeof t.close&&t.close()}})),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.isShortField&&this.list[0].classList.add("dropdown-short"),this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),this.searchInput.attr("aria-activedescendant",t.children("a").attr("id")),this.settings.showTags&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var n=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(n))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var s=this.settings.cssClass;if(s&&"string"==typeof s&&this.list.addClass(s),this.position(),this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showTags){var a=$(this.selectedOptions),o=this.getOptionText(a);this.searchInput.val(o)}var r=this.settings.multiple;function l(e){return e.closest(".dropdown, .multiselect").length>0||e.closest(".dropdown-list").length>0||!0===i.touchmove}function c(e){var t=$(e.target);if(i.touchPrevented||l(t)&&!t.is(".icon"))return e.preventDefault(),void(i.touchPrevented=!1);i.closeList("cancel")}this.highlightOption(t,r),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout((function(){i.listUl.scrollTop(0)}),0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&i.searchInput.on("keypress.dropdown",(function(e){13===e.which&&i.closeList("select")})),i.list.removeClass("dropdown-tall").on("touchend.list click.list","li",(function(e){if(!i.touchPrevented){var t=i.selectListItem($(this));e.preventDefault(),t&&e.stopPropagation()}})).on("mouseenter.list","li",(function(){i.highlightOption($(this),!0)})),setTimeout((function(){i.list.addClass("is-closable")}),100),$(document).on("touchstart.dropdown",(function(t){i.touchPrevented=!1,e={x:t.originalEvent.touches[0].pageX,y:t.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",(function(t){var n=t.originalEvent.touches[0].pageX,s=t.originalEvent.touches[0].pageY;(n>=e.x+10||n<=e.x-10||s>=e.y+10||s<=e.y-10)&&(i.touchPrevented=!0)}))})).on("touchend.dropdown touchcancel.dropdown",(function(e){if($(document).off("touchmove.dropdown"),e.preventDefault(),i.touchPrevented)return e.stopPropagation(),!1;c(e)})).on("click.dropdown",c);var d=$(".modal.is-visible .modal-body-wrapper"),h=i.element.parents(".scrollable, .scrollable-x, .scrollable-y, .card-content");h.length&&(d=h),d.length&&(this.parentScrollableArea=d,this.parentScrollableArea.on("scroll.dropdown",(function(e){var t=$("*:focus");i.touchPrevented||l($(e.target))||t.is(".timepicker")?i.touchPrevented=!1:i.closeList("cancel")}))),$("body").on("resize.dropdown",(function(){i.position(),void 0===window.orientation&&i.closeList("cancel")})),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",(function(){i.closeList("cancel")}))},position:function(){var e=this,t={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var i=this.pseudoElem;this.isInGrid&&(i=this.element.closest(".datagrid-cell-wrapper"));var n=window.getComputedStyle(i[0]),s=2*parseInt(n.borderLeftWidth,10),a=Math.round(parseInt(i[0].clientWidth,10)+s);this.searchInput[0].style.cssText="width: ".concat(a,"px !important");var o=Math.round(this.list.width())<=a;if(this.searchInput[0].style.width="",t.parent=i,t.useParentWidth=o,!this.settings.showTags){var r=window.devicePixelRatio>1,l="chrome"===m.browser.name;t.y=-(parseInt(i[0].clientHeight,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)-(!l&&r?1:0)),t.x=0}e.settings.placementOpts&&e.settings.placementOpts.x&&(t.x=e.settings.placementOpts.x),this.list.one("afterplace.dropdown",(function(t,i){!0===i.wasFlipped&&(e.list.addClass("is-ontop"),e.listUl.prependTo(e.list));var n=window.getComputedStyle(e.list[0]),s=n.top?parseInt(n.top,10):0,a=0;"firefox"===m.browser.name&&(a=4);var o,r=parseInt(e.listUl[0].offsetHeight,10),l=parseInt(e.list[0].offsetHeight,10)+5,c=parseInt(e.searchInput[0].offsetHeight,10),d=parseInt(e.list[0].offsetTop,10)+parseInt(e.list[0].offsetHeight,10)>=window.innerHeight;return c<l-2*c&&r+c>=l&&(o="".concat(l-c-5,"px"),d&&(e.list[0].style.height="".concat(parseInt(l,10)-10,"px"))),i.wasFlipped&&(o="".concat(l-c-a-5,"px"),e.isShortField||(e.list[0].style.top="".concat(s,"px"))),o&&(e.listUl[0].style.height=o),i})).place(t),this.list.data("place").place(t)},selectListItem:function(e){var t=e.closest("li");if(t.length&&(e=t),e.is(".separator, .group-label"))return!1;if(e.is(".dropdown-select-all-anchor")&&(e=e.parent()),this.settings.multiple&&e[0].classList.contains("dropdown-select-all-list-item")){var i=!e[0].classList.contains("is-selected");return e[0].classList[i?"add":"remove"]("is-selected"),i?e[0].setAttribute("aria-selected","true"):e[0].removeAttribute("aria-selected"),this.selectAll(i),!0}var n=this.correctValue(e);if(n.is(":disabled"))return!1;if(this.selectOption(n),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var s=this.element.find("option"),a=s.filter(":selected");s.length>a.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").removeAttr("aria-selected"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(e){var t=e.attr("data-val").replace(/"/g,"/quot/"),i=this.element.find('option[value="'.concat(t,'"]'));return(0===i.length||i.length>1)&&(i=this.element.find("option").filter((function(){var e=$(this),i=e.attr("value");return e.text()===t||i&&i.replace(/"/g,"/quot/")===t}))),i},close:function(){return this.closeList("cancel")},closeList:function(e){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),this.searchInput.off(["input.".concat("dropdown"),"keydown.".concat("dropdown")].join(" ")),this.listUl.find(".has-tooltip").each((function(){var e=$(this).data("tooltip");e&&e.destroy()})),this.list.off(["click.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown"),"mousewheel.".concat("dropdown"),"mouseenter.".concat("dropdown")].join(" ")).remove(),this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat("dropdown"),"scroll.".concat("dropdown"),"touchstart.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown")].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",e),this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},scrollToOption:function(e){e&&0!==e.length&&(this.listUl.scrollTop(0),this.listUl.scrollTop(e.offset().top-this.listUl.offset().top-this.listUl.scrollTop()-40))},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return F(this.toggle,this.toggleList).apply(this)},highlightOption:function(e,t){if(e&&(0===e.length&&(e=this.list.find(".dropdown-option").eq(0)),!e.is(".separator, .group-label"))){var i=this.element.find('option[value="'.concat(e.attr("data-val"),'"]'));i.hasClass(".is-disabled")||i.is(":disabled")||this.isOpen()&&(this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").attr({tabindex:"-1"}),i.hasClass("clear")||(this.setItemIconOverColor(e),e.addClass("is-focused").attr({tabindex:"0"})),this.searchInput.attr("aria-activedescendant",e.children("a").attr("id")),t&&!1!==t&&void 0!==t||this.scrollToOption(e))}},unhighlightOptions:function(e,t){e&&e.length||(e=this.list.find(".is-selected")),this.setItemIconOverColor(),e.removeClass("is-focused").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),t&&!1!==t&&void 0!==t||this.scrollToOption(e.first())},renderListItem:function(e){var t=e.value,i=e.selected,n=this.listUl.find('li[data-val="'.concat(t,'"]'));if(i)return n[0].classList.add("is-selected"),void n[0].setAttribute("aria-selected",!0);n[0].classList.remove("is-selected"),n[0].removeAttribute("aria-selected")},selectAll:function(e){var t="option:not(.is-disabled):not(:disabled)",i="li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)",n=[].slice.call(this.element[0].querySelectorAll(t)),s=[].slice.call(this.listUl[0].querySelectorAll(i)),a=n[n.length-1],o="";if(e){s.forEach((function(e){e.classList.add("is-selected"),e.setAttribute("aria-selected",!0)})),n.forEach((function(e){e.selected=!0,e.setAttribute("selected",!0)})),o=this.getOptionText($(n));var r=this.element[0].getAttribute("maxlength");r&&(o=o.substr(0,r))}else s.forEach((function(e){e.classList.remove("is-selected"),e.removeAttribute("aria-selected")})),n.forEach((function(e){e.selected=!1,e.setAttribute("selected",!1),e.removeAttribute("selected")}));this.previousActiveDescendant=a.value||"",this.pseudoElem[0].querySelector("span").textContent=o,this.searchInput[0].value=o,this.updateItemIcon(a),this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(a),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(e,t){Array.isArray(e)&&(e=$(e));var i=this;e.each((function(){i.selectOption($(this),t)})),i.element.trigger("change").triggerHandler("selected")},selectOption:function(e,t){var i;if(e&&e.length&&(!e.is("li")||(i=e,0===(e=this.element.find('option[value="'.concat(e.attr("data-val"),'"]'))).length&&(e=this.element.find("option").filter((function(){return $(this).text()===i.attr("data-val")}))),!e.prop("disabled")))){var n=e.val();"string"==typeof e?(i=this.listUl.find('li[data-val="'.concat(e,'"]')),n=e,e=this.element.find('option[value="'.concat(n,'"]'))):"string"==typeof n&&(n=n.replace(/"/g,"/quot/"),i=this.listUl.find('li[data-val="'.concat(n,'"]')));var s=!0,a=this.selectedValues,o=!1;!e.hasClass("clear")&&i||(o=!0),o&&this.deselectAll(),this.settings.multiple&&(Array.isArray(a)||(a=[a]),a.indexOf(n)>-1&&(s=!1)),s?(this.select(e[0]),this.previousActiveDescendant=n):(this.deselect(e[0]),this.previousActiveDescendant=void 0);var r=this.listUl[0].scrollTop;r>0&&(this.currentlyScrolledPos=r),this.renderListItem(e[0]),this.setDisplayedValues(),this.updateItemIcon(e),t||(this.element.trigger("change").triggerHandler("selected",[e,s]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(e);var l=this.element.attr("id");if(m.browser.isIE11()&&l){var c=$("#".concat(l)).html(),d=$("#".concat(l)).val();c&&this.element.html(c),d&&this.element.val(d)}}},select:function(e){e&&e instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(e.selected=!0))},selectValue:function(e){if("string"==typeof e){var t=this.element.find('option[value="'.concat(e,'"]'));t&&t.length&&(this.select(t[0]),this.updated())}},deselect:function(e){e&&e instanceof HTMLOptionElement&&(e.selected=!1)},deselectValue:function(e){if("string"==typeof e){var t=this.element.find('option[value="'.concat(e,'"]'));t&&t.length&&(this.deselect(t[0]),this.updated())}},deselectAll:function(){var e=this;this.element.find("option").each((function(t){$(t).prop("selected",!1),e.deselectValue(t)}))},selectStartsWith:function(e){if("string"==typeof e){var t=this.element[0];this.filterTerm="";var i=-1,n=0;this.searchMatches&&this.searchMatches[e]||(this.searchMatches={},this.searchMatches[e]=[]);for(var s=0;s<t.options.length;s++){if(0===t.options[s].innerText.toLowerCase().indexOf(e)){if(-1===this.searchMatches[e].indexOf(s)){this.searchMatches[e].push(s),i=s;break}n++}else;}if(-1===i){if(!this.searchMatches[e].length)return;n===this.searchMatches[e].length&&(i=this.searchMatches[e][0],this.searchMatches[e].length=1)}t.selectedIndex=i,this.updated(),this.element.trigger("change")}},setBadge:function(e){if(this.badges){var t=this.element.parent().find(".badge");0===t.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),t=this.element.parent().find(".badge")),t.attr("class","badge ".concat(e.attr("data-badge-color")?e.attr("data-badge-color"):"azure07")).text(e.attr("data-badge"))}},callSource:function(e,t){var n=this,s="";if(t||!this.isOpen()||this.element.hasClass("search-mode")||(s=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var a=i(this.settings.source),o=function(t,i){var a="",o=n.element.val();function r(e){return e.replace(/"/g,"'")}function l(e){if(null!=e){var t="",i="",s="";"string"==typeof e&&(e={value:e}),void 0!==e.value&&(e.value=r(e.value)),void 0!==e.id&&(isNaN(e.id)||(e.id="".concat(e.id)),e.id=r(e.id),t=' id="'.concat(e.id,'"')),void 0!==e.label&&e.label.length&&(e.label=r(e.label),s=e.label);var l=n.selectedValues.indexOf(o)>-1;n.settings.multiple?o.forEach((function(t){t===e.value&&(e.selected=!0,i=" selected")})):(e.value===o||l)&&(e.selected=!0,i=" selected"),s.length||s===e.value||(s+=e.value),a+="<option".concat(t,' value="').concat(e.value,'"').concat(i,">\n          ").concat(s,"\n        </option>")}}if(!n.isFiltering&&!C.equals(t,n.dataset)){if(n.dataset=t,!i){n.element.empty();for(var c=0;c<t.length;c++){var d=void 0;if(t[c].group){d=t[c].options,a+='<optgroup label="'.concat(t[c].group,'">');for(var h=0;h<d.length;h++)l(d[h]);a+="</optgroup>"}else l(t[c])}n.element.append(a)}n.updateList(s)}n.element.triggerHandler("complete"),n.element.trigger("requestend",[s,t]),"function"==typeof e&&e()};if(n.element.triggerHandler("start"),n.element.trigger("requeststart"),"function"===a)this.settings.source(o,s,this.settings.sourceArguments);else if("object"===a){var r=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];o(r)}else{var l=this.settings.source.toString();$.getJSON(l).done((function(e){o(e)})).fail((function(){o([])}))}return!0},getDataAttributes:function(e,t){if(e){"string"==typeof e&&(e=[e]);var i=t||[];"string"==typeof i&&(i=[i]);var n={obj:{},str:"",isExclude:function(e){return $.inArray(e,i)>-1}};for(var s in e)e.hasOwnProperty(s)&&(n.name="".concat(e[s].name),n.isData="data-"===n.name.substr(0,5),n.isData&&!n.isExclude(n.name)&&(n.obj[n.name]=e[s].value,n.str+=" ".concat(n.name,'="').concat(e[s].value,'"')));return{str:n.str,obj:n.obj}}},setCode:function(e){O(this.setCode,this.element.val);var t=this,i=function(){t.element.val(e),t.updated()};t.callSource(i)||i()},isMobile:function(){return["ios","android"].indexOf(m.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var e=[],t=this.element[0].id;return t||(t=C.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach((function(i){e.push({content:i.innerText.trim(),dismissible:!0,href:"#",id:"".concat(t,"-tag-").concat(i.value),style:"secondary",value:i.value})})),e},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.settings.multiple&&!0===this.settings.multiple?this.element.prop("multiple",!0):this.element.prop("multiple",!1),!0===this.element.prop("readonly")?this.readonly():this.pseudoElem.removeClass("is-readonly"),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],"dropdown"),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var e=document.body.querySelector("#dropdown-list");e&&this.isOpen()&&e.parentNode.removeChild(e)},handleEvents:function(){var e=this,t=this;function i(e){var t=$(e.target).parents(".tag").length>0,i=!1;return e.target instanceof HTMLElement&&"string"==typeof e.target.className&&(i=e.target.classList.contains("tag")),!(!i&&!t)}this.pseudoElem.on("keydown.dropdown",(function(t){return e.handlePseudoElemKeydown(t)})).on("click.dropdown touchstart.dropdown",(function(e){e.originalEvent.ctrlKey&&e.originalEvent.shiftKey||e.stopPropagation()})).on("mouseup.dropdown touchend.dropdown",(function(e){2!==e.button&&(i(e)||t.toggle())})).on("touchcancel.dropdown",(function(e){i(e)||(e.stopPropagation(),t.toggle(),e.preventDefault())})),t.element.on("activated.dropdown",(function(){t.label.trigger("click")})).on("updated.dropdown",(function(e){e.stopPropagation(),t.updated()})).on("openlist.dropdown",(function(){t.toggle()})),t.element.closest("form").on("reset.dropdown",(function(){setTimeout((function(){t.element.triggerHandler("updated")}),1)})),this.label.on("click",(function(){t.pseudoElem.focus()}))}},$.fn.dropdown=function(e){return this.each((function(){var t=$.data(this,"dropdown");t?t.updated(e):t=$.data(this,"dropdown",new ei(this,e))}))};var ti=["standard","range"],ii=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:ti[0],roundToInterval:!0,parentElement:null,returnFocus:!0}};function ni(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,ii),this.init()}ni.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=M.getLocale(this.settings.language),i=M.getLocale(this.settings.locale);return $.when(i,t).done((function(t,i){e.locale=M.cultures[t]||M.currentLocale,e.language=i||e.settings.language||e.locale.language||null,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents()})),this},setCurrentCalendar:function(){return this.currentCalendar=M.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function(){function e(e,t){(!t||["minute","second"].indexOf(t)<0)&&(t="minute");var i=ii()["".concat(t,"Interval")];if(void 0===e||isNaN(e))return i;var n=parseInt(e,10);return n>0&&n<60?n:i}function t(e){return!0===e}var i;return this.id="".concat(C.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=t(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=e(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=(i=24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat)&&i.toUpperCase().match("H")&&i.match("mm")?i:ii().timeFormat,this.settings.minuteInterval=e(this.settings.minuteInterval,"minute"),this.settings.secondInterval=e(this.settings.secondInterval,"second"),this.settings.mode=function(e){return $.inArray(e,["standard","range"])>-1?e:ii().mode}(this.settings.mode),this.settings.roundToInterval=t(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){return this.setup(),this.settings.parentElement?(this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this):(this.trigger=this.element.next("svg.icon"),0===this.trigger.length&&(this.trigger=$.createIconElement("clock").insertAfter(this.element)),this.addAria().addMask().handleEvents().roundMinutes(),this)},addAria:function(){return this.element.attr({"aria-expanded":"false",role:"combobox"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(M.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>")),this},handleKeys:function(){var e=this;this.element.on("keydown.timepicker",(function(t){var i=!1;return 27===t.which&&e.isOpen()&&(i=!0,e.closeTimePopup()),40!==t.which||e.isOpen()||(i=!0,e.openTimePopup()),!i||(t.stopPropagation(),t.preventDefault(),!1)}))},handleBlur:function(){var e=this;this.element.on("blur.timepicker",(function(){e.roundMinutes(),setTimeout((function(){e.isOpen()&&0===e.popup.find(":focus").length&&e.closeTimePopup()}),20)}))},is24HourFormat:function(e){return e||(e=this.settings.timeFormat),!!e&&(e.match("H")||[]).length>0},hourText:function(e){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&e<10?"0":"")+e},hasSeconds:function(e){return e||(e=this.settings.timeFormat),(e.match("ss")||[]).length>0},hasDayPeriods:function(e){return e||(e=this.settings.timeFormat),(e.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(D.toBoolean(this.settings.roundToInterval)){var e=this.element.val(),t=this.getTimeSeparator(),i=e?e.split(t):[],n=this.settings.minuteInterval;if(i[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var s=i[1].split(" ");i[1]=s[0],s[1]&&i.push(s[1])}if(i[1]=parseInt(i[1],10),i[1]%n!=0){i[1]=Math.round(i[1]/n)*n,i[1]=i[1].toString(),i[1]=(i[1].length<2?"0":"")+i[1],"60"===i[1]&&(i[1]="00",i[0]=(parseInt(i[0],10)+1).toString());var a="".concat(i[0]+t+i[1]," ").concat(i[2]?i[2]:"");this.element.val(a)}}}},addMask:function(){this.element.data("mask")&&"object"===i(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var e={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.element[0].getAttribute("data-validate")||this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate(),e&&this.element.mask(e),this},buildStandardPopup:function(){var e,t=this,i=$('<div class="timepicker-popup-content"></div>'),n=this.getTimeSeparator(),s="";this.initValues=t.getTimeFromField();var a=$('<div class="time-parts"></div>').appendTo(i),o=this.is24HourFormat(),r=this.hasSeconds(),l=this.hasDayPeriods(),c=o?0:1,d=o?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));c<d;)e="",parseInt(t.initValues.hours,10)===c&&(e=" selected"),t.hourSelect.append($("<option".concat(e,">").concat(t.hourText(c),"</option>"))),c++;a.append($('<label for="'.concat(this.hoursId,'" class="audible">').concat(M.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.hourSelect),a.append($('<span class="label colons">'.concat(n,"</span>")));var h=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));h<=59;)s=h<10?"0".concat(h):h,e="",parseInt(t.initValues.minutes,10)===h&&(e=" selected"),t.minuteSelect.append($("<option".concat(e,">").concat(s,"</option>"))),h+=t.settings.minuteInterval;if(this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(t.initValues.minutes,"</option>"))),a.append($('<label for="'.concat(this.minutesId,'" class="audible">').concat(M.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.minuteSelect),r){var u=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));u<=59;)s=u<10?"0".concat(u):u,e="",(parseInt(t.initValues.seconds,10)===u||!t.initValues.seconds&&"00"===s)&&(e=" selected"),this.secondSelect.append($("<option".concat(e,">").concat(s,"</option>"))),u+=t.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(t.initValues.seconds,"</option>"))),a.append($('<span class="label colons">'.concat(n,"</span>"))),a.append($('<label for="'.concat(this.secondsId,'" class="audible">').concat(M.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.secondSelect)}if(!o&&l){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),a.append($('<span class="label colons"></span>'));for(var p=this.currentCalendar.dayPeriods,g=0,f=new RegExp(t.initValues.period,"i");g<2;)e="",f.test(p[g])&&(e=" selected"),this.periodSelect.append($('<option value="'.concat(p[g],'"').concat(e,">").concat(p[g],"</option>"))),g++;a.append($('<label for="'.concat(this.periodId,'" class="audible">').concat(M.translate("TimePeriod",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.periodSelect)}if(this.settings.parentElement)this.settings.parentElement.append(i),t.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{i.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(M.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var m=this.element,v=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(v="center",m=this.element.next(".icon")),this.trigger.popover({content:i,trigger:"immediate",placement:"bottom",placementOpts:{parent:m,parentXAlignment:v,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",(function(e,i){t.afterShow(i)})).on("hide.timepicker",(function(){t.settings.returnFocus&&t.element.focus()}))}this.trigger.data("tooltip")&&(t.popup=this.trigger.data("tooltip").tooltip,t.popup.addClass("timepicker-popup"))},afterShow:function(e){var t=this;e.find("button").button(),this.hourSelect.val(this.initValues.hours),this.hourSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.hours),this.minuteSelect.val(this.initValues.minutes),this.minuteSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.minutes),this.secondSelect&&(this.secondSelect.val(this.initValues.seconds),this.secondSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.seconds)),t.hasDayPeriods()&&(this.periodSelect.val(this.initValues.period),this.periodSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.period)),e.find("div.dropdown").first().focus(),e.find(".set-time").off("click.timepicker").on("click.timepicker",(function(e){e.preventDefault(),t.setTimeOnField(),t.closeTimePopup()})),this.settings.parentElement||e.on("keydown.timepicker","button, div.dropdown",(function(e){return 9!==(e.keyCode||e.charCode||0)||(t.containFocus(e),e.stopPropagation(),e.preventDefault(),!1)}))},containFocus:function(e){var t=e.shiftKey,i=this.popup.find(":focusable"),n=i.index($(":focus")),s=n+1>=i.length?0:n+1,a=n-1<0?i.length:n-1;n=t?a:s,i.eq(n).focus()},setupStandardEvents:function(){var e=this;e.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",(function(e){e.preventDefault(),e.target.click()})).on("keydown.timepicker","input.dropdown",(function(t){var i=!1;if(27===t.which&&(i=!0,e.closeTimePopup(),e.element.focus()),32===t.which&&(i=!0,e.popup.find(".set-time").click()),37===t.which||39===t.which){i=!0;var n=e.popup.find('input[id$="-shdo"]');if(37===t.which){var s=n.eq(n.index(this)-1);s&&0!==s.length||(s=n.eq(n.length)),s.focus()}if(39===t.which){var a=n.eq(n.index(this)+1);a&&0!==a.length||(a=n.eq(0)),a.focus()}}return!i||(t.preventDefault(),t.stopPropagation(),!1)})),e.trigger.on("hide.timepicker",(function(){e.onPopupHide()}))},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(e){var t,i,n=this,s=e||this.element.val(),a=this.getTimeSeparator(),o={};t=(s=(s=s.replace(/[T\s:.-]/g,a).replace(/z/i,"")).replace("午","午".concat(a))).split(a);var r=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),l=-1!==r&&r<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");!this.is24HourFormat()&&l&&(t=[t[1],t[2],t[0]]);var c,d=this.currentCalendar.dayPeriods;function h(e){return e.replace(/^\s+|\s+$/g,"")}function u(e){return!e||isNaN(e)?"00":e=(e=parseInt(e,10))<10?"0".concat(e):e}return t[2]&&(d[0].indexOf(".")>-1||d[1].indexOf(".")>-1)&&(d[0].replace(".","")===t[2]&&(t[2]=d[0]),d[1].replace(".","")===t[2]&&(t[2]=d[1])),this.is24HourFormat()||l||(i=t[t.length-1].split(" "),t.pop(),t=t.concat(i)),t[0]&&t[0].length&&!isNaN(t[0])||(t[0]="1"),t[0]=parseInt(t[0],10),isNaN(t[0])||(t[0]="".concat(parseInt(t[0],10))),o.hours=n.hourText(t[0]),t[1]?(t[1]=h(t[1]),t[1]=u(t[1]),o.minutes=t[1]):o.minutes="00",(c=t[2])?(c=h(c),n.hasSeconds()?(c=u(c),o.seconds=c):(function(e){return n.dayPeriods.indexOf(e)>-1}(c)||(c=n.translateDayPeriod("AM")),o.period=c)):(n.hasSeconds()&&(c="00",o.seconds=c),n.is24HourFormat()||(c=n.translateDayPeriod("AM"),o.period=c)),t[3]?(t[3]=h(t[3]),o.period=t[3]):!this.is24HourFormat()&&this.hasSeconds()&&(o.period=this.translateDayPeriod("AM")),o},getTimeFromField2:function(e){function t(e){return!e||isNaN(e)?"00":e=(e=parseInt(e,10))<10?"0".concat(e):e}var i=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,n=this.hasSeconds()?"timestamp":"hour",s=M.parseDate(e||this.element.val(),{date:n}),a=(s?s.getHours():"1").toString(),o=(a>=12?this.translateDayPeriod("PM"):this.translateDayPeriod("AM")).toString();!this.is24HourFormat()&&a>12&&(a=(parseInt(a,10)-12).toString()),this.is24HourFormat()||"0"!==a||(a="12");var r=i.indexOf("a")>-1?o:void 0,l=s?s.getMinutes():"00",c=s?s.getSeconds():"00";return{hours:t(a),minutes:t(l),seconds:t(c),period:r}},translateDayPeriod:function(e){return/am|pm|AM|PM/i.test(e)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(e)?0:1]:e},setTimeOnField:function(){var e=$("#".concat(this.hoursId)).val()||"",t=$("#".concat(this.minutesId)).val()||"",i=$("#".concat(this.secondsId)).val()||"",n=($("#".concat(this.periodId)).val()||"").toUpperCase(),s=this.getTimeSeparator(),a="".concat(e).concat(s).concat(t).concat(this.hasSeconds()?s+i:"");a+=(n=this.is24HourFormat()||""!==n?n:$("#".concat(this.periodId,"-shdo")).val())?" ".concat(this.translateDayPeriod(n)):"",this.element.val(a).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){this.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&this.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===this.settings.mode?(this.buildRangePopup(),this.setupRangeEvents()):(this.buildStandardPopup(),this.setupStandardEvents()),this.element.attr({"aria-expanded":"true"}),this.popup.find("div.dropdown").first().focus())},closeTimePopup:function(){this.trigger.data("tooltip")&&this.trigger.data("tooltip").hide()},onPopupHide:function(){if("standard"===this.settings.mode){var e=$("#".concat(this.hoursId)),t=$("#".concat(this.minutesId)),i=$("#".concat(this.secondsId)),n=$("#".concat(this.periodId));e&&e.data("dropdown")&&"function"==typeof e.data("dropdown").destroy&&e.data("dropdown").destroy(),t&&t.data("dropdown")&&"function"==typeof t.data("dropdown").destroy&&t.data("dropdown").destroy(),this.hasSeconds()&&i&&i.data("dropdown")&&"function"==typeof i.data("dropdown").destroy&&i.data("dropdown").destroy(),this.hasDayPeriods()&&n&&n.data("dropdown")&&"function"==typeof n.data("dropdown").destroy&&n.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.element.attr({"aria-expanded":"false"}),this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("tooltip").destroy(),this.trigger.data("tooltip",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(e){var t=this.element.val();if(!e||!1===e)return t;var i=this.currentCalendar.dateFormat.timeSeparator,n=new RegExp(i,"g"),s=(t=t.replace(n,"")).split(" ");return s[0].length<4&&(t="0".concat(s[0]).concat(s[1]?s[1]:"")),t},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var e=this.element.data("mask");return e&&"function"==typeof e.destroy&&e.destroy(),$.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"timepicker")},handleEvents:function(){var e=this;return this.trigger.off("click.timepicker").on("click.timepicker",(function(){e.toggleTimePopup()})),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(e){return this.each((function(){var t=$.data(this,"timepicker");t?t.updated(e):t=$.data(this,"timepicker",new ni(this,e))}))};var si=new function(){var e=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(e,t){return!(!("placeholder"in document.createElement("input"))&&t&&(e===t.attr("placeholder")||e===M.translate("Required")))&&("string"==typeof e?(e=$.trim(e.replace(/<\/?[^>]*>/g,"")),0!==$.trim(e).length):"number"==typeof e?!isNaN(e):$.isArray(e)?e.length>0:!!e)},isRadioChecked:function(e){var t=e.attr("name");return t&&t.length&&$('input[name="'.concat(t,'"]:radio:checked')).length},check:function(e,t){this.message=M.translate("Required");return!(!$(t).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(t.is(":radio")?this.isRadioChecked(t):this.isNotEmpty(e,t))},message:"Required",type:"error",id:"required"},date:{check:function(e,t){if(this.message=M.translate("InvalidDate"),e instanceof Date)return e&&e.getTime&&!isNaN(e.getTime());var i=e.indexOf(":")>-1?M.calendar().dateFormat.datetime:M.calendar().dateFormat.short,n=null;t&&t.data("datepicker")&&(i=(n=t.data("datepicker")).pattern);var s=!("MMMM"===i||"MMM"===i||"MM"===i||"MMMM d"===i||"d MMMM"===i||"yyyy"===i);return n&&(i={locale:n.locale.name,pattern:i,calendarName:n.currentCalendar.name}),!(void 0===M.parseDate(e,i,s)&&""!==e)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(t,n){this.message=M.translate("UnavailableDate");var s=!0;if(""===t)return s;if(!e.rules.date.check(t,n))return s=!1,this.message="",s;var a,o,r,l,c=n.data("datepicker"),d=c?c.settings:{},h=Object.keys(d).length>0,u=t;if("string"==typeof u){var p="locale"!==d.dateFormat?d.dateFormat:M.calendar().dateFormat.short;if(d.showTime){var g=d.timeFormat||M.calendar().timeFormat;p+=" ".concat(g)}c&&c.isIslamic&&(p={pattern:c.pattern,locale:c.locale.name}),u=M.parseDate(u,p)}c&&c.isIslamic&&u instanceof Date&&(u=M.umalquraToGregorian(u.getFullYear(),u.getMonth(),u.getDate()));var f=d.useUTC?M.dateToUTC(u):u;if(f&&h&&"function"==typeof d.disable.callback)return!d.disable.callback(f.getFullYear(),f.getMonth(),f.getDate());if(f instanceof Array)return s;if(f&&h){r=d.useUTC?M.dateToUTC(new Date(d.disable.minDate)).setHours(0,0,0,0):new Date(d.disable.minDate).setHours(0,0,0,0),l=d.useUTC?M.dateToUTC(new Date(d.disable.maxDate)).setHours(0,0,0,0):new Date(d.disable.maxDate).setHours(0,0,0,0),-1!==d.disable.dayOfWeek.indexOf(f.getDay())&&(s=!1);var m=f.getFullYear();((f=f.setHours(0,0,0,0))<=r||f>=l)&&(s=!1),/string|number/.test(i(d.disable.years))&&(d.disable.years=[d.disable.years]);for(var v=0,b=d.disable.years.length;v<b;v++)if(m===Number(d.disable.years[v])){s=!1;break}for(d.disable.dates.length&&"string"==typeof d.disable.dates&&(d.disable.dates=[d.disable.dates]),a=0,o=d.disable.dates.length;a<o;a++)if(f===(d.useUTC?M.dateToUTC(d.disable.dates[a]):new Date(d.disable.dates[a])).setHours(0,0,0,0)){s=!1;break}}return h&&(s=!!(s&&!d.disable.isEnable||!s&&d.disable.isEnable)),s},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(t,i){var n=this;this.message=M.translate("rangeDate");var s=!0,a=i.data("datepicker");if(a){var o=a.settings,r=t.split(o.range.separator),l=function(t,a){i.val(a),n.message="".concat(e.rules[t].message," (").concat(a,")"),e.rules[t].check(a,i)||(s=!1)};if(t.indexOf(a.pattern)>-1){if(1===r.length)l("date",r[0]);else if(2===r.length){var c=r[0]===a.pattern?1:0;l("date",r[c]),s&&l("availableDate",r[c])}}else 1===r.length?(l("date",r[0]),s&&l("availableDate",r[0])):2===r.length&&(l("date",r[0]),s&&l("date",r[1]),s&&l("availableDate",r[0]),s&&l("availableDate",r[1]))}return i.val(t),s},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(e){this.message=M.translate("EmailValidation");return!e.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(e)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(t,i){var n=i.closest(".signin").find('button[type="submit"]');return t.length&&(e.rules.email.check(t)||e.rules.passwordConfirm.check(t,i))?n.enable():n.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(t,i){if($.trim(t).length&&!i.is("[readonly]")){e.rules.emailPositive.positive=!0,this.message=M.translate("EmailValidation");var n=e.rules.email.check(t,i);return n&&(this.message=""),n}return e.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(e){this.message=M.translate("PasswordValidation");return!e.length||e.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(t,i){this.message=M.translate("PasswordConfirmValidation");var n=$('input[type="password"]:not('.concat(i.attr("id"),")"),i.closest(".signin")).eq(0).val(),s=t===n&&e.rules.passwordReq.check(n);return!t.length||s},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(e,t){e=e.replace(/ /g,""),this.message=M.translate("InvalidTime");var i=t&&t.data("timepicker"),n=i?t.data("timepicker").settings:{},s=n&&n.timeFormat?n.timeFormat:M.calendar().timeFormat;if(t.attr("data-options")&&n&&!n.timeFormat){var a=JSON.parse(t.attr("data-options"));a.patternOptions&&a.patternOptions.format&&(s=a.patternOptions.format)}var o,r=(s.match("HH")||s.match("H")||[]).length>0,l=r?24:12,c=e.indexOf(M.calendar().dateFormat.timeSeparator),d=0,h=0,u=0;if(""===e)return!0;if(d=parseInt(e.substring(0,c),10),h=parseInt(e.substring(c+1,c+3),10),i&&(d=(o=i.getTimeFromField()).hours,h=o.minutes,i.hasSeconds()&&(u=o.seconds)),d.toString().length<1||isNaN(d)||parseInt(d,10)<0||parseInt(d,10)>l)return!1;if(h.toString().length<1||isNaN(h)||parseInt(h,10)<0||parseInt(h,10)>59)return!1;if(u.toString().length<1||isNaN(u)||parseInt(u,10)<0||parseInt(u,10)>59)return!1;if(!r){if(parseInt(d,10)<1)return!1;var p=new RegExp(M.calendar().dayPeriods[0],"i"),g=new RegExp(M.calendar().dayPeriods[1],"i");if(0===(e.match(p)||e.match(g)||[]).length)return!1}return!0},message:"Invalid Time",type:"error",id:"time"},test:{check:function(e){return"1"===e},message:"Value is not valid (test).",type:"error",id:"test"}}},ai={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function oi(e,t){this.element=$(e),this.settings=C.mergeSettings(e,t,ai),this.init()}oi.prototype={init:function(){this.show()},show:function(){var e=this,t=this.settings,i=parseFloat(S.convertDelayToFPS(t.timeout)),n=t.allowLink?h.stripTags(t.message,"<a><br><p>"):h.stripHTML(t.message),s=!1,a=100;this.uniqueId=t.uniqueid?this.generateUniqueId("usersettings-position"):"";var o=$("#toast-container".concat(this.uniqueId)),r=$('\n      <div class="toast">\n        <span class="toast-title">'.concat(h.stripHTML(t.title),'</span>\n        <span class="toast-message">').concat(n,"</span>\n      </div>")),l=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(M.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(M.translate("Close"),"</span>\n      </button>\n    ")),c=$('<div class="toast-progress"></div>');o.length||(o=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container" aria-relevant="additions" aria-live="polite"></div>')).appendTo("body")),o.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(t.position.replace(" ","-"))),t.timeout=t.audibleOnly?100:t.timeout,t.progressBar&&r.append(c);var d=new W({duration:S.convertDelayToFPS(t.timeout),timeoutCallback:function(){e.remove(r)},updateCallback:function(e){a=(e.duration-e.elapsedTime)/i*100,M.isRTL()&&(a=100-a),t.progressBar&&(c[0].style.width="".concat(a,"%"))}});G.register(d),o.append(r),r.addClass(t.audibleOnly?"audible":"effect-scale"),r.append(l),e.createDraggable(r,o),$(document).on("keydown.toast keyup.toast",(function(e){(e=e||window.event).ctrlKey&&e.altKey&&80===e.keyCode&&(s="keydown"===e.type,d[s?"pause":"resume"]())})),r.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",(function(e){s=!!/mousedown|touchstart/i.test(e.type),d[s?"pause":"resume"]()})),l.on("click.toast",(function(){d.destroy(),e.remove(r)}))},createDraggable:function(e,t){var i=this;if(this.settings.draggable&&e[0]&&t[0]){var n=m.features.touch,s=t.parent();t.css({top:"",left:"",right:""});var a=t[0].getBoundingClientRect(),o=this.restorePosition(),r=a;o&&((r={top:o.top,left:o.left,width:e.outerWidth(),height:e.outerHeight()}).right=r.left+r.width,r.bottom=r.top+r.height,this.isPosInViewport(r)||(r=a));var l={top:"".concat(r.top,"px"),left:"".concat(r.left,"px")};t.is(".toast-bottom-right, .toast-top-right")&&(l.right="auto"),t.css(l),t.addClass("is-draggable");e.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",(function(e){n||e.preventDefault(),$(e.target).is("a, .btn-close")||t.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",(function(){e.stopImmediatePropagation(),t.attr("aria-grabbed","true"),s.attr("aria-dropeffect","move")})).off("dragend.toast").on("dragend.toast",(function(){t.removeAttr("aria-grabbed"),s.removeAttr("aria-dropeffect"),i.savePosition({left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))});var e=t.data("drag");e&&"function"==typeof e.destroy&&e.destroy()}))}));var c=function(e){var t=e.dragApi,i=e.x,n=e.y,s=t.getElementsFromPoint(i,n)[0];return!$(s).closest(".toast").length},d=function(e){var t=$.Event("keyup");$.extend(t,{ctrlKey:!0,altKey:!0,keyCode:80}),e.trigger(t)},h=$(document);h.off("mouseup.toast").on("mouseup.toast",(function(e){if(1===$("#toast-container".concat(i.uniqueId," .toast")).length){var n=t.data("drag");if(n&&"function"==typeof n.getElementsFromPoint){var s={dragApi:n,x:e.pageX,y:e.pageY};c(s)&&d(h)}}})).off("touchend.toast").on("touchend.toast",(function(e){if(1===$("#toast-container".concat(i.uniqueId," .toast")).length){var n=t.data("drag");if(n&&"function"==typeof n.getElementsFromPoint){var s=e.originalEvent;if(s.targetTouches.length>1)return;var a=s.changedTouches[0],o={dragApi:n,x:a.pageX,y:a.pageY};c(o)&&d(h)}}}))}},savePosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(e)&&(localStorage[this.uniqueId]=JSON.stringify(e),this.element.triggerHandler("settingschanged",[e]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var e=localStorage[this.uniqueId];return e?JSON.parse(e):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(e){return!1}return!1},generateUniqueId:function(e){return e=null==e?"":e,"toast-".concat(this.settings.uniqueid||"","-").concat(e).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(e){return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(e){return e.closest(".toast-container").off("dragstart.toast dragend.toast"),e.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),e.find(".btn-close").off("click.toast"),this},remove:function(e){var t=this,i=function(){e.remove(),!$("#toast-container".concat(t.uniqueId," .toast")).length&&t.destroy()};if(this.unbind(e),this.settings.audibleOnly)i();else{e.addClass("effect-scale-hide");var n=new W({duration:20,updateCallback:function(){},timeoutCallback:function(){i()}});G.register(n)}},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,ai)),this.show()},destroy:function(){var e=this,t=$("#toast-container".concat(this.uniqueId));t[0]&&[].slice.call(t[0].querySelectorAll(".toast")).forEach((function(t){e.settings.audibleOnly=!0,e.remove($(t))}));$(document).off("keydown.toast keyup.toast mouseup.toast touchend.toast"),t.remove(),delete this.uniqueId,$.removeData(this.element[0],"toast")}},$.fn.toast=function(e){return this.each((function(){var t=$.data(this,"toast");t?t.updated(e):t=$.data(this,"toast",new oi(this,e))}))};var ri={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function li(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,ri),this.init()}li.prototype={init:function(){this.fields="input, textarea, select, div[data-validate], div[data-validation]",this.isPlaceholderSupport=!!("placeholder"in document.createElement("input")),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(e){if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),"object"===i(e)){var t="";for(var n in e)-1===t.indexOf(e[n])&&(t+="".concat(e[n]," "));e=t=t.split(" ").join(".validate ")}return e},filterValidations:function(e,t){var n=[];if(!e)return[];if(e.indexOf("{")>-1&&(e=JSON.parse(e.replace(/'/g,'"'))),"object"===i(e))for(var s in e)t&&e[s].indexOf(t)>-1&&n.push(s);return n},setErrorIconOpacity:function(e){if(e.is(":text")&&e.is('[data-error-type="tooltip"]')){var t=this.calculateTextWidth(e.val()),i=e.outerWidth()-35;e.closest(".field, .field-short").find(".icon-error")[t>i?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(e,t){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");return i.font=t||"14px arial",i.measureText(e).width},attachEvents:function(){var e=this,t="[data-validate],[data-validation]";this.inputs.each((function(){var e=$(this),t=e.attr("data-validate")||e.attr("data-validation");t&&t.indexOf("required")>-1&&e.addClass("required")})),this.inputs.filter("input, textarea, div").filter(t).not("input[type=file]").each((function(){var t=$(this),i=t.attr("data-validation-events"),n=e.extractEvents(i||"blur.validate change.validate keyup.validate");n.indexOf("enter.validate")>-1&&t.off("keypress.enter.validate").on("keypress.enter.validate",(function(t){var i=$(this);13===t.which&&e.validate(i,!0,t)})),t.off(n).on(n,(function(i){if("keyup"===i.type){if(9===i.keyCode)return;e.setErrorIconOpacity(t)}var n=$(this),s=n.data("handleEvent".concat([i.type||""]));n.is("[readonly]")&&!n.parent().is(".field-fileupload")||s&&s.type===i.type&&"validate"===i.handleObj.namespace&&!n.closest(".modal:visible").length||(n.data("handleEvent".concat([i.type||""]),i.handleObj),setTimeout((function(){n.closest(".modal-engaged").length&&!n.closest(".modal-body").length||e.validate(t,!0,i)}),300))}))})),this.inputs.filter("input[type=checkbox]").filter(t).off("click.validate").on("click.validate",(function(t){e.validate($(this),!0,t)})),this.inputs.filter(":radio").off("click.validate").on("click.validate",(function(t){var i=$(this).parent().find(".radio").first();e.validate(i,!0,t)}));var i=this.inputs.filter("select").filter(t);if(i.length&&(i.off("change.validate listopened.validate listclosed.validate").on("change.validate",(function(t){e.validate($(this),!0,t)})).on("listopened.validate",(function(){var e=$(this),t=e.data("tooltip");t&&document.activeElement===e.data("dropdown").searchInput[0]&&t.hide(),$("#validation-tooltip").hide()})).on("listclosed.validate",(function(){var e=$(this),t=e.data("tooltip"),i=e.data("dropdown");m.features.touch&&(i.pseudoElem.focus(),setTimeout((function(){i.pseudoElem.blur()}),100)),i&&i.wrapper&&(t=i.wrapper.find(".icon-error").data("tooltip")),t&&document.activeElement!==e.data("dropdown").searchInput[0]&&t.show()})),i.filter((function(){return void 0!==$(this).data("dropdown")})).each((function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",(function(t){var i=$(this).closest(".field, .field-short").find("select");e.validate(i,!0,t)}))}))),this.element.is("form")&&this.element.attr("data-validate-on")){this.element.off("submit.validate").on("submit.validate",(function t(i){i.stopPropagation(),i.preventDefault(),e.validateForm((function(i){e.element.off("submit.validate"),e.element.triggerHandler("validated",i),e.element.data("isValid",i),e.element.on("submit.validate",t)}))}))}},validateForm:function(e){var t,i=this,n=[];i.inputs=this.element.find(i.fields),i.inputs.each((function(e){var t=$(this);if(t.attr("data-validate")){if("true"===t.attr("data-disable-validation")||t.hasClass("disable-validation"))return;for(var s=i.validate(t,!1,e),a=0;a<s.length;a++)n.push(s[a])}})),(t=$).when.apply(t,n).then((function(){e(!0)}),(function(){e(!1)}))},setPrimaryBtn:function(e,t){var i=e.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),n=!0;i.length>0&&i.each((function(){var e=$(this);if(!(e.closest(".datagrid-filter-wrapper").length>0)){var t=null!==e[0].offsetParent;e.is(".required")&&(t&&e.is(".editor")&&!e.html()&&(n=!1),!t&&!e.is("select, :checkbox")||e.val()||e.is(".editor")||(n=!1)),!t&&!e.is("select, :checkbox")||e.isValid()||(n=!1)}})),n?t.removeAttr("disabled"):t.attr("disabled","disabled")},value:function(e){return e.is("input[type=checkbox]")?e.prop("checked"):e.is("div")?e[0].innerHTML:e.val()},getTypes:function(e,t){var i,n=this.filterValidations(e.attr("data-validation-events"),t.type);return i=e.is("input.dropdown")&&e.prev().prev("select").attr("data-validate")?e.prev().prev("select").attr("data-validate").split(" "):e.is("input.dropdown")&&e.prev().prev("select").attr("data-validation")?e.prev().prev("select").attr("data-validation").split(" "):e.attr("data-validation")?e.attr("data-validation").split(" "):e.attr("data-validate")?e.attr("data-validate").split(" "):[],n.length>0&&(i=i.filter((function(e){return-1!==n.indexOf(e)}))),"keyup"===t.type&&(i=i.filter((function(e){return"date"!==e&&"time"!==e}))),i},setIconOnParent:function(e,t){var i,n,s,a=$.createIcon({classes:["icon-".concat(t)],icon:"".concat(t,"-alert")}),o=e.closest(".tab-panel, .expandable-pane"),r=e.closest(".row.flex-align-bottom"),l=o.attr("id"),c=e.closest(".tab-container, .tab-panel-container, .expandable-area");if(r&&r.length&&($(".".concat(t),r).length?r.addClass("has-messages"):r.removeClass("has-messages")),c.is(".tab-panel-container")&&(c=c.prev(".tab-container")),c.is(".tab-container"))(i=$('.tab-list a[href="#'.concat(l,'"]'),c).closest(".tab")).length?$(".count",i).length&&(i=$(".count",i)):(l=$('a[href="#'.concat(l,'"]'),".popupmenu").closest(".popupmenu").attr("id"),i=$('.tab-list .tab[aria-controls="'.concat(l,'"]'),c),n=l);else{if(!c.is(".expandable-area"))return;i=$('.expandable-header[aria-controls="'.concat(l,'"] .title'),c)}n&&n.length&&(s=o.add($($(n).attr("href"))),$('a[role="menuitem"]',"#".concat(n)).each((function(){s=s.add($($(this).attr("href")))})));var d=$('a[href="#'.concat(o.attr("id"),'"]'),"#".concat(l));o&&$(".".concat(t),o).length||s&&$(".".concat(t),s).length?($(".".concat(t),o).length||(d.removeClass("is-".concat(t)),$(".icon-".concat(t),d).remove()),$(".".concat(t),o).length&&$(".".concat(t),s).length&&!$(".icon-".concat(t),d).length&&d.addClass("is-".concat(t)).append(a),$(".icon-".concat(t),i).length||i.addClass("is-".concat(t)).append(a)):((i=i.add(d)).removeClass("is-".concat(t)),$(".icon-".concat(t),i).remove())},validate:function(e,t,i){if(e.data("handleEvent".concat([i.type||""]),null),"true"===e.attr("data-disable-validation")||e.hasClass("disable-validation")||e.is(":disabled"))return[];var n,s,a,o,r,l=this,c=l.getTypes(e,i)||[],d=[],h=[],u=l.value(e),p=e.attr("placeholder");function g(t,i,s,a){!1===(n=si.rules[s]).positive&&l.removePositive(e),r=si.ValidationTypes[n.type]||si.ValidationTypes.error;var o="tooltip"!==e.attr("data-".concat(r.type,"-type"));if(t)0===$.grep(h,(function(e){return e===r.type})).length?(a.resolve(),n.positive&&(l.addMessage(e,n,o,i),l.removeMessage(e,n,!0),a.resolve(),l.addPositive(e))):r.errorsForm||a.resolve();else{if(!l.isPlaceholderSupport&&u===p&&n.message!==M.translate("Required"))return;l.addMessage(e,n,o,i),h.push(n.type),r.errorsForm?a.reject():a.resolve()}l.setIconOnParent(e,n.type);var c=l.getField(e).data("".concat(r.type,"message"));t&&c&&c.filter((function(e){return e.id===n.id||n.message})).length>0&&l.removeMessage(e,n,!0);var d=e.closest(".modal").find(".btn-modal-primary").not(".no-validation");d.length&&l.setPrimaryBtn(e.closest(".modal"),d);var g=e.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");g.length&&l.setPrimaryBtn(e.closest("#calendar-popup"),g),"error"===n.type&&e.closest("form").triggerHandler("aftervalidate",{field:e,rule:n,isValid:t})}for(a=0,o=c.length;a<o;a++)n=si.rules[c[a]],s=$.Deferred(),n&&(n.async?n.check(u,e,g,s):g(n.check(u,e),t,c[a],s),d.push(s));return d},getField:function(e){return e.is("select")&&void 0!==e.data("dropdown")&&(e=e.data("dropdown").pseudoElem),e},hasError:function(e){return this.getField(e).hasClass("error")},addMessage:function(e,t,i,n,s){if(!(""===t.message||e.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){s=s||!1;var a=this.getField(e),o=a.data("".concat(t.type,"message")),r=si.ValidationTypes[t.type]||si.ValidationTypes.error;if(s||a.addClass("icon"===t.type?"custom-icon":t.type),!(o&&o===t.message||o&&o.filter((function(e){return(e.id||e.message)===(t.id||t.message)&&e.message===t.message})).length>0)){var l=t.message;if(o){for(var c=0;c<o.length;c++)l="• ".concat(o[c].message);l+="<br>• ".concat(t.message)}o||(o=[]),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),(o=o.filter((function(e){return e.id!==t.id}))).push({id:t.id,message:t.message,type:t.type}),a.data("".concat(r.type,"message"),o),void 0!==$.fn.toast&&$("body").toast({title:M.translate(r.titleMessageID),audibleOnly:!0,message:l}),i?(e.data("isValid",!1),this.showInlineMessage(e,t,s)):this.showTooltipMessage(e,l,r.type,n)}}},showIcon:function(e,t){var i=this.getField(e).addClass("icon"===t?"custom-icon":t),n=$.createIconElement({classes:["icon-".concat(t)],icon:t}),s=i.closest(".field, .field-short"),a=e.parent();return 0===s.find("svg.icon-".concat(t)).length?(a.is(".editor-container")&&e.parent().addClass("is-error"),1===e.parent(":not(.editor-container)").find(".btn-actions").length?a.find(".btn-actions").before(n):1===a.find(".data-description").length?a.find(".data-description").before(n):1===a.find(".field-info").length?a.find(".field-info").before(n):e.is("textarea")?e.after(n):e.is(".dropdown, .multiselect")?a.find(".dropdown-wrapper").append(n):(e.is(".spinbox")||e.is(".lookup"),a.append(n)),$(".icon-success",s).remove()):n=s.find("svg.icon-error"),n},showTooltipMessage:function(e,t,i,n){if(!e.is(":radio")){var s=this.showIcon(e,i),a=e;if(e.is(".dropdown, .multiselect")&&void 0!==e.data("dropdown")){var o=e.data("dropdown").pseudoElem;a=o,o.addClass("icon"===i?"custom-icon":i)}e.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===i?"custom-icon":i);var r=s.data("tooltip");r?r.content=t:(s.tooltip({content:t,placement:"bottom",placementOpts:{callback:function(e){var t=a[0].getBoundingClientRect(),i=r.tooltip[0].getBoundingClientRect(),n=$("html").is('[dir="rtl"]'),s=e.x,o=0;return n?i.left<t.left&&(o+=t.left-i.left):i.right>t.right&&(o+=-1*(i.right-t.right)),e.setCoordinate("x",s+o),e.nudges||(e.nudges={}),e.nudges.x=o,e}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),r=s.data("tooltip")),e.on("focus.validate",(function(){r&&r.show()})).on("blur.validate",(function(){r&&r.hide()})),r&&e.attr("data-error-type","tooltip"),this.setErrorIconOpacity(e),n&&r&&r.show()}},toggleRadioMessage:function(e,t,i,n,s){var a,o,r=e.attr("name");r&&r.length&&(a=$(':radio[name="'.concat(r,'"], :radio[name="').concat(r,'"] + label')),o=e.parent().is(".inline")?$(':radio[name="'.concat(r,'"]:last')).parent():$(':radio[name="'.concat(r,'"]:last + label')),s?(a.addClass("icon"===i?"custom-icon":i),$(n).addClass("radio-group-".concat(i)).insertAfter(o)):(a.removeClass(i),o.next(".radio-group-".concat(i)).remove()))},showInlineMessage:function(e,t,i){i=i||!1;var n,s=this.getField(e),a=si.ValidationTypes[t.type]||si.ValidationTypes.error;t.icon=t.icon||a.icon;var o=J.currentTheme.id&&J.currentTheme.id.indexOf("uplift")>-1?"".concat(a.type,"-alert"):"".concat(a.type);n="icon"===t.type?""+'<div class="custom-icon-message" data-rule-id="'.concat(t.id||t.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:t.icon}),'\n          <pre class="audible">\n            ').concat(M.translate(a.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(t.message,"</p>\n        </div>"):""+'<div class="'.concat(a.type,'-message" data-rule-id="').concat(t.id||t.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(a.type)],icon:o}),'\n          <pre class="audible">\n            ').concat(M.translate(a.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(t.message,"</p>\n        </div>"),i||s.addClass("icon"===t.type?"custom-icon":t.type),e.is(":radio")?this.toggleRadioMessage(e,t.message,a.type,n,!0):(s.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===a.type?"custom-icon":a.type),s.closest(".field, .field-short").append(n),s.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===a.type?"custom-icon":a.type)),e.is(".spinbox")&&s.closest(".spinbox-wrapper").addClass("icon"===a.type?"custom-icon":a.type),"error"===a.type&&e.parent().find(".icon-success").remove(),e.triggerHandler(a.type,{field:e,message:t.message}),e.closest("form").triggerHandler(a.type,{field:e,message:t.message})},addPositive:function(e){var t=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",e.parent(".field, .field-short")).length||e.parent(".field, .field-short").append(t)},removeMessage:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getField(e),s=n.data("".concat(t.type,"message")),a=t.id||t.message;if(t&&("error"!==t.type||s)&&0!==s.filter((function(e){return e.id===a})).length){var o=s.filter((function(e){return e.id!==a})),r=0===o.length;if(r?n.removeData("".concat(t.type,"message")):n.data("".concat(t.type,"message"),o),e.closest(".field, .field-short").find('[data-rule-id="'.concat(t.id||t.message,'"]')).remove(),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&e.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(t.id||t.message,'"]')).off("click.validate").remove(),r&&"error"===t.type&&i&&(e.triggerHandler("valid",{field:e,message:""}),e.closest("form").triggerHandler("valid",{field:e,message:""})),r&&(e.removeClass("".concat(t.type," custom-icon")).data("isValid",!0),(e.hasClass("dropdown")||e.hasClass("multiselect"))&&(e.next().next().removeClass("".concat(t.type," custom-icon")),e.next().find("div.dropdown").removeClass("".concat(t.type," custom-icon"))),e.is(":radio")&&this.toggleRadioMessage(e,"",t.type,"",!1),e.hasClass("spinbox")&&e.closest(".spinbox-wrapper").removeClass("".concat(t.type," custom-icon")),e.hasClass("colorpicker")&&e.parent(".colorpicker-container").removeClass(t.type),e.closest(".field-fileupload").length>0&&e.closest(".field-fileupload").find("input.".concat(t.type)).removeClass(t.type),"tooltip"===e.attr("data-".concat(t.type,"-type")))){var l=e.closest(".field, .field-short").find(".icon-error"),c=l.data("tooltip");c&&c.destroy(),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),e.parent().find(".dropdown-wrapper > .icon-".concat(t.type)).off("click.validate").remove(),e.parent().find(".icon-".concat(t.type)).remove(),e.next(".icon-".concat(t.type)).off("click.validate").remove(),e.parent(".field, .field-short").find(".icon-".concat(t.type)).remove(),e.next(".inforCheckboxLabel").next(".icon-".concat(t.type)).remove()}}},removePositive:function(e){$(".icon-success",e.parent(".field, .field-short")).remove()},resetForm:function(e){var t=e.find("input, select, textarea");t.removeClass("error"),e.find(".error").removeClass("error"),e.find(".icon-error").remove(),e.find(".icon-success").remove(),e.find(".error-message").remove(),t.removeClass("alert"),e.find(".alert").removeClass("alert"),e.find(".icon-alert").remove(),e.find(".alert-message").remove(),t.removeClass("info"),e.find(".info").removeClass("info"),e.find(".icon-info").remove(),e.find(".info-message").remove(),setTimeout((function(){$("#validation-errors").addClass("is-hidden")}),300),t.data("isDirty",!1).removeClass("isDirty"),e.find(".isDirty").removeClass("isDirty"),e.is("form")&&e[0].reset();var i=$.fn.validation.ValidationTypes;Object.keys(i).forEach((function(e){t.removeData("".concat(e,"message"))}))},isFormValid:function(e){if($(e).find(".error-message").length>0)return!1;for(var t=$(e).find('[data-validate*="required"]'),i=0;i<t.length;i++){var n=$(t[i]),s=this.value(n);if((n.is(":visible")||n.is("select"))&&!s)return!1}return!0},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.init()}};var ci={type:"error",inline:!0};$.fn.validation=si,$.fn.getMessage=function(e){e||(e={type:"error"});var t="".concat(e.type,"message"),i=$.fn.getField($(this)).data(t),n="";if(i){if(1===i.length)return i[0].message;for(var s=0;s<i.length;s++)n+="• ".concat(i[s].message)}return n},$.fn.getMessages=function(e){e||(e={type:"error"});var t="".concat(e.type,"message"),i=$.fn.getField($(this)).data(t);return i||(i=[]),i},$.fn.getField=function(e){return e.is("select")&&void 0!==e.data("dropdown")&&(e=e.data("dropdown").pseudoElem),e},$.fn.getErrorMessage=function(e){return O("$.fn.getMessage","$.fn.getErrorMessage"),e=C.extend({},e,ci),$(this).getMessage(e)},$.fn.scrollIntoView=function(e,t){"boolean"!=typeof e&&(e=void 0);var i=new li(this,t).getField($(this));i[0].scrollIntoView(e),i.focus(),i.is("input.checkbox")&&(i=i.next(".checkbox-label"))[0]&&i[0].scrollIntoView(e)},$.fn.addMessage=function(e){return this.each((function(){var t=$.data(this,"Validator");t||(t=$.data(this,"Validator",new li(this,e)));var i={message:e.message,type:e.type,triggerEvents:e.triggerEvents,icon:e.icon,id:e.id||e.message},n=$(this);t.addMessage(n,i,e.inline,e.showTooltip,e.isAlert),t.setIconOnParent(n,e.type)}))},$.fn.addError=function(e){O("$.fn.addMessage","$.fn.addError");var t=!0;return"boolean"==typeof e.inline&&!1===e.inline&&(t=!1),(e=C.extend({},e,ci)).inline=t,this.each((function(){$(this).addMessage(e)}))},$.fn.removeMessage=function(e){return e||(e={type:"error"}),this.each((function(){var t=$.data(this,"Validator");t||(t=$.data(this,"Validator",new li(this,e)));var i=$(this),n="".concat(e.type,"message"),s=$.fn.getField(i).data(n);if(i.hasClass("error")&&"error"===e.type&&i.removeClass("error"),s){for(var a=0;a<s.length;a++)t.removeMessage(i,s[a],e.triggerEvents);t.setIconOnParent(i,e.type),$.removeData(this,"Validator")}}))},$.fn.removeError=function(e){return O("$.fn.removeMessage","$.fn.removeError"),e=C.extend({},e,ci),this.each((function(){return $(this).removeMessage(e)}))},$.fn.validate=function(e,t){var i="string"==typeof e;return this.each((function(){var n=$.data(this,"validate");if(n&&"string"!=typeof n){if(i)return void("function"==typeof n[e]&&n[e](t));n.updated(e)}else n=$.data(this,"validate",new li(this,e))}))},$.fn.isValid=function(){var e=$(this).data("isValid");return null==e||e},$.fn.validateField=function(){var e=$(this),t=Soho.components.Validator.prototype;t&&t.validate&&t.validate(e,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var di={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,hideDays:!1,yearsAhead:5,yearsBack:4,legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1};function hi(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,di),this.init()}hi.prototype={init:function(){this.build(),this.handleEvents()},build:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.element.attr("autocomplete","off"),this.element.next().is("svg")?this.trigger=this.element.next():this.trigger=$.createIconElement("calendar").insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar()},setLocale:function(){var e=this,t=this.settings;this.locale=M.currentLocale,this.settings.language?(M.getLocale(this.settings.language),this.language=this.settings.language):this.language=M.currentLanguage.name,t.locale&&M.getLocale(t.locale).done((function(t){var i=e.getSimilarApi("locale",t);i.forEach((function(i){i.locale=M.cultures[t],i.language=e.settings.language||i.locale.language,i.setCurrentCalendar()})),0===i.length&&(e.locale=M.cultures[t],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar())})),t.language&&M.getLocale(t.language).done((function(){e.getSimilarApi("language",t.language).forEach((function(e){e.language=t.language}))}))},getSimilarApi:function(e,t){var i=[].slice.call(document.querySelectorAll(".datepicker")),n=[];return i.forEach((function(i){var s=$(i).data("datepicker");s&&s.settings[e]===t&&n.push(s)})),n},setCurrentCalendar:function(){this.currentCalendar=M.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.append('<span class="audible">'.concat(M.translate("PressDown",{locale:this.locale.name,language:this.language}),"</span>"))},handleKeys:function(e){var t=this,i=this.settings;if(e.is("#monthview-popup"))return e.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",(function(e){var i=!1,n=e.keyCode||e.charCode||0;return 9===n&&(t.containFocus(e),i=!0),27===n&&(t.closeCalendar(),t.element.focus(),e.stopImmediatePropagation(),i=!0),84===n&&(t.closeCalendar(),t.element.focus(),i=!0),!i||(e.stopPropagation(),e.preventDefault(),!1)})),void e.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",(function(e){return 9!==(e.keyCode||e.charCode||0)||(i.range.useRange&&$(e.target).is(".next")&&!i.range.selectWeek?t.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():t.containFocus(e),e.stopPropagation(),e.preventDefault(),!1)}));e.off("keydown.datepicker").on("keydown.datepicker",(function(e){var i=!1,n=e.keyCode||e.charCode||0;return 40!==n||t.isOpen()||(i=!0,t.openCalendar(),setTimeout((function(){t.setFocusAfterOpen()}),200)),84===n&&(i=!0,t.setToday()),!i||(e.stopPropagation(),e.preventDefault(),!1)}))},containFocus:function(e){var t=e.shiftKey,i=this.popup.find(":focusable"),n=$(e.currentTarget);(n.is(".monthview-monthyear-pane, #btn-monthyear-pane")||n.closest(".is-monthyear.is-monthonly").length>0)&&(i=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var s=i.index($(":focus"));s=t?s-1<0?i.length-1:s-1:s+1>=i.length?0:s+1,i.eq(s).focus()},setFormat:function(){var e=this.settings,t="object"===i(M)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,n="object"===i(M)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===i(M)&&this.settings.calendarName&&(t=M.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,n=M.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===i(t)&&void 0!==t.short&&(t=t.short),"locale"===e.dateFormat?(this.pattern=t+(e.showTime?" ".concat(e.timeFormat||n):""),e.dateFormat=this.pattern):this.pattern=e.dateFormat+(e.showTime&&e.timeFormat?" ".concat(e.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){this.setFormat();var e=this.settings,t={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},i="date availableDate",n={date:"change blur enter",availableDate:"change blur"};e.range.useRange&&(t.process="rangeDate",t.patternOptions.delimeter=e.range.separator,i="rangeDate",n={rangeDate:"change blur"}),t.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(t),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":i,"data-validation-events":JSON.stringify(n)}).validate()),this.setPlaceholder()},setPlaceholder:function(){var e,t=this,i=this.settings,n=this.pattern;!i.placeholder||this.element.attr("placeholder")&&"M / D / YYYY"!==this.element.attr("placeholder")||(i.range.useRange&&(n=i.range.first&&i.range.first.date?(e=i.range.first.date,M.formatDate(e,{pattern:t.pattern,locale:t.locale.name})+i.range.separator+this.pattern):this.pattern+i.range.separator+this.pattern),this.element[0].setAttribute("placeholder",n))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},openCalendar:function(){var e,t=this,i=this,n=this.settings,s={};if(this.lastValue="string"==typeof this.currentDate?this.currentDate:null===(e=this.currentDate)||void 0===e||null==e?void 0:e.getTime(),!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var a='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(M.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),o=' <button type="button" class="is-select btn-primary">\n      '.concat(M.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?o+a:a+o,"\n      </div>")),n.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(M.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(M.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),n.hideButtons&&(this.footer=$("")),n.showTime&&(void 0===n.timeFormat?s.timeFormat=this.pattern.slice(this.pattern.indexOf(" ")).trim():s.timeFormat=n.timeFormat,void 0!==n.minuteInterval&&(s.minuteInterval=n.minuteInterval),void 0!==n.secondInterval&&(s.secondInterval=n.minuteInterval),void 0!==n.mode&&(s.mode=n.mode),void 0!==n.roundToInterval&&(s.roundToInterval=n.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var r=this.settings.timeFormat?this.settings.timeFormat:null;r||(r=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),s.parentElement=this.timepickerContainer,s.locale=this.settings.locale,s.language=this.settings.language,this.time=M.formatDate(this.currentDate,{pattern:r,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(s).data("timepicker"),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",(function(){t.currentDate=t.setTime(t.currentDate),t.setValue(t.currentDate,!0,!0)})),setTimeout((function(){t.timepicker.initValues=t.timepicker.getTimeFromField(t.time),t.timepicker.afterShow(t.timepickerContainer)}),1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=M.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.month=this.currentMonth,this.settings.year=this.currentYear,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?M.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.settings.month=this.settings.activeDate.getMonth(),this.settings.year=this.settings.activeDate.getFullYear(),this.isIslamic&&(this.settings.activeDateIslamic=M.gregorianToUmalqura(this.settings.activeDate))):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentIslamicDate||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(e,n){if(t.currentDate=new Date(n.year,n.month,n.day),i.settings.range.useRange&&i.settings.range.first&&i.settings.range.selectWeek){var s=Gt.firstDayOfWeek(new Date,t.settings.firstDayOfWeek),a=Gt.lastDayOfWeek(new Date,t.settings.firstDayOfWeek);return i.settings.range.first={},i.settings.range.second=void 0,i.setWeekRange({day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},{day:a.getDate(),month:a.getMonth(),year:a.getFullYear()}),i.closeCalendar(),void i.element.focus()}i.settings.range.useRange&&i.settings.range.first&&!i.settings.range.selectWeek||(i.insertDate(t.currentDate),n.close&&(i.closeCalendar(),i.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(e){return 37!==e.key&&39!==e.key&&(38!==e.key&&40!==e.key&&13!==e.key)}),this.settings.language||(this.settings.language=this.language),this.calendarAPI=new ki(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,n.showTime&&this.calendar.addClass("is-timepicker"),n.hideDays&&(this.calendar.addClass("is-monthyear"),"MMMM"!==n.dateFormat&&"MMM"!==n.dateFormat&&"MM"!==n.dateFormat||this.calendar.addClass("is-monthonly"),"yyyy"===n.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(n.showTime?this.timepickerContainer:"",this.footer);var l=this.element,c=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(c="center",l=this.element.next(".icon"));var d={content:this.calendar,placementOpts:{parent:l,parentXAlignment:c,strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1};this.trigger.popover(d).off("show.datepicker").on("show.datepicker",(function(){if(window.innerHeight<400&&t.popupClosestScrollable&&1===t.popupClosestScrollable.length&&(t.popup.find(".arrow").hide(),t.popup.css({"min-height":$("html").hasClass("theme-uplift-light")?"":"".concat(t.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),t.popupClosestScrollable.css("min-height","375px")),n.range.useRange&&n.range.first&&n.range.first.date&&n.range.second&&n.range.second.date&&t.popup.addClass("is-hidden"),t.settings.hideButtons&&t.popup.addClass("hide-buttons"),t.settings.showMonthYearPicker&&(t.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),t.popup.find(".btn-monthyear-pane").button()),t.settings.range.selectWeek){var e=t.popup.find("tbody");t.popup.find(".monthview-table tr").hover((function(t){var i=$(t.currentTarget);e.find("td").removeClass("is-selected range-selection end-date"),i.find("td").addClass("range-selection")}))}})).off("hide.datepicker").on("hide.datepicker",(function(){t.popupClosestScrollable.add(t.popup).css("min-height",""),t.closeCalendar()})),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentIslamicDate=this.currentIslamicDate,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",(function(){var e=$(this);if(e.hasClass("is-disabled"))i.calendarAPI.activeTabindex(e,!0);else{if(!n.range.useRange||n.range.first&&!n.range.second||n.range.selectWeek||i.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),n.range.useRange&&n.range.selectWeek){var t=i.calendarAPI.getCellDate(i.calendar.find("td.range-selection").first()),s=i.calendarAPI.getCellDate(i.calendar.find("td.range-selection").last());return void i.setWeekRange(t,s)}n.range.useRange||i.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var a=$(this);a.addClass("is-selected".concat(n.range.useRange?" range":"")).attr("aria-selected","true"),i.insertSelectedDate(a),n.range.useRange?i.isFocusAfterClose=!0:(i.closeCalendar(),i.element.focus())}})),this.footer.off("click.datepicker").on("click.datepicker","button",(function(e){var t=$(this);if(t.hasClass("is-cancel")&&(i.settings.isMonthPicker||(i.element.val("").trigger("change").trigger("input"),i.currentDate=null,i.clearRangeDates()),i.closeCalendar()),t.hasClass("is-cancel-month-pane")&&i.calendarAPI.monthYearPane.data("expandablearea").close(),t.hasClass("is-select-month")||t.hasClass("is-select-month-pane")){var s=parseInt(i.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),a=parseInt(i.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);i.currentDate=new Date(s,a,1),i.isIslamic&&(i.currentDateIslamic[0]=s,i.currentDateIslamic[1]=a,i.currentDateIslamic[2]=1,i.currentYear=s,i.currentMonth=a,i.currentDay=1,i.currentDate=M.umalquraToGregorian(s,a,1)),n.range.useRange?i.isFocusAfterClose=!1:t.hasClass("is-select-month")&&(i.insertDate(i.isIslamic?i.currentDateIslamic:i.currentDate),i.closeCalendar()),t.hasClass("is-select-month-pane")&&i.calendarAPI.showMonth(a,s)}if(t.hasClass("is-select")){var o=i.calendarAPI.setRangeSelByClick();if(1===o)i.closeCalendar();else if(2===o)i.element.trigger("change",[n.range.data]).trigger("input",[n.range.data]),i.closeCalendar();else{if(3===o)return void e.preventDefault();i.insertSelectedDate(),i.closeCalendar()}}i.element.focus(),e.preventDefault(),t.hasClass("is-select-month-pane")&&i.calendarAPI.monthYearPane.data("expandablearea").close()})),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today",(function(e){e.preventDefault(),n.range.useRange?(i.setToday(!0),(!n.range.second||n.range.second&&!n.range.second.date)&&e.preventDefault()):(i.setToday(),i.closeCalendar())})),setTimeout((function(){i.calendarAPI.validatePrevNext(),i.setFocusAfterOpen()}),50)}},clearRangeDates:function(){var e=this.settings;e.range.useRange&&(e.range.start=di.range.start,e.range.end=di.range.end,e.range.data&&delete e.range.data)},insertSelectedDate:function(e){var t=this.calendarAPI.getCellDate(e||this.calendar.find("td.is-selected").last()),i=t.day,n=t.month,s=t.year;this.currentDate=new Date(s,n,i),this.isIslamic&&(this.currentDateIslamic[0]=s,this.currentDateIslamic[1]=n,this.currentDateIslamic[2]=i,this.currentYear=s,this.currentMonth=n,this.currentDay=i,this.currentDate=M.umalquraToGregorian(s,n,i)),this.insertDate(this.isIslamic?this.currentDateIslamic:this.currentDate)},setWeekRange:function(e,t){var i=this.settings;i.range.first.date=new Date(e.year,e.month,e.day),i.range.second=void 0,this.setValue(new Date(t.year,t.month,t.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){return F(this.closeCalendar,this.close).apply(this)},closeCalendar:function(){var e=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:e}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var t=this.trigger.data("tooltip");t&&t.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var e=this.settings;if(this.calendar){if(e.range.useRange&&(e.range.first&&e.range.first.label&&(!e.range.second||e.range.second&&!e.range.second.date)&&this.setRangeFirstPart(e.range.first.date),this.calendarAPI.setRangeSelected(),e.range.second&&e.range.first.date&&e.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,e.range.useRange&&e.range.selectWeek){var t=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void t.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(e){var t,i=this,n=this.settings,s=function(e){return new Date(e.year,e.month,e.day)},a=this.calendarAPI.days.find("td:visible:first"),o=this.calendarAPI.days.find("td:visible:last"),r=(t=e,M.formatDate(t,{date:"full",locale:i.locale.name})),l=this.calendarAPI.days.find('[aria-label="'.concat(r,'"]')),c=l.closest("tr");this.currentDate=e,n.range.first={date:e,label:r,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()},n.range.extra={minCell:a,maxCell:o,min:s(this.calendarAPI.getCellDate(a)),max:s(this.calendarAPI.getCellDate(o)),cellLength:c.children("td").length},this.calendarAPI.settings.range.first=n.range.first,this.calendarAPI.settings.range.extra=n.range.extra},insertDate:function(e,t){var i=this.settings,n="",s="",a="";if(e instanceof Array)n=e[0],s=e[1],a=e[2].toString();else{if(!(e instanceof Date)||isNaN(e.getTime()))return;n=e.getFullYear(),s=e.getMonth(),a=e.getDate().toString()}if(this.calendarAPI.currentMonth===s&&this.calendarAPI.currentYear===n||this.calendarAPI.showMonth(s,n),this.isOpen()){var o=this.calendarAPI.days.find("td:not(.alternate)").filter((function(){return $(this).text().toLowerCase()===a}));o.hasClass("is-disabled")||(this.settings.showTime&&(t?(this.time=M.formatDate(e,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),e=this.setTime(e))):e=this.setTime(e)),this.setValue(e,!0),i.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),o.addClass("is-selected".concat(i.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(o,!0)}},setValue:function(e,t,i){var n,s=this.settings;this.currentDate=e,e instanceof Array&&(this.currentIslamicDate=e,this.currentDate=M.umalquraToGregorian(e[0],e[1],e[2],e[3],e[4],e[5])),s.range.useRange?i||this.setRangeToElem(e,!1):this.element.val(M.formatDate(e,{pattern:this.pattern,locale:this.locale.name}));var a="string"==typeof this.currentDate?this.currentDate:null===(n=this.currentDate)||void 0===n||null==n?void 0:n.getTime(),o=this.lastValue!==a;this.lastValue=a,t&&o&&(s.range.useRange?i||this.element.trigger("change",[s.range.data]).trigger("input",[s.range.data]):this.element.trigger("change").trigger("input"))},setRangeToElem:function(e,t){var i=this,n=this.settings,s=function(e){return M.formatDate(e,{pattern:i.pattern,locale:i.locale.name})},a=s(e),o=!1;if(this.isOpen()){var r=function(e){return M.formatDate(e,{date:"full",locale:i.locale.name})}(e),l=this.calendarAPI.days.find('[aria-label="'.concat(r,'"]')),c=l.closest("tr");n.range.second&&(n.range.second.date?this.resetRange({cell:l}):(delete n.range.second.date,$.isEmptyObject(n.range.second)&&delete n.range.second));var d={};n.range.first&&(d.date=e.getTime(),d.firstdate=n.range.first.date.getTime(),d.min=this.calendarAPI.getDifferenceToDate(n.range.first.date,n.range.minDays),d.max=this.calendarAPI.getDifferenceToDate(n.range.first.date,n.range.maxDays)),!n.range.first||t?(this.setRangeFirstPart(e),a=this.getRangeValue(),this.setPlaceholder()):!n.range.second&&n.range.selectBackward&&d.date>d.firstdate||n.range.selectForward&&d.date<d.firstdate||n.range.maxDays>0&&d.date>d.max.aftertime||d.date<d.max.beforetime?(this.resetRange({cell:l}),this.setRangeFirstPart(e),a=this.getRangeValue(),this.setPlaceholder()):(o=!0,this.currentDate=e,n.range.minDays>0&&(d.date>=d.firstdate&&d.date<d.min.aftertime?(e=d.min.after,d.date===d.firstdate&&(d.date=e.getTime())):d.date<d.firstdate&&d.date>d.min.beforetime&&(e=d.min.before),c=(l=this.calendarAPI.days.find('[aria-label="'.concat(r,'"]'))).closest("tr")),d.date>d.firstdate?n.range.second={date:e,label:r,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}:(n.range.second=n.range.first,n.range.first={date:e,label:r,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}),a=this.getRangeValue())}else if(!t){o=!0;var h=e||new Date;this.currentMonth=h.getMonth(),this.currentYear=h.getFullYear(),this.currentDay=h.getDate(),this.currentDate=h,n.range.first=n.range.first||{},n.range.second=n.range.second||{},n.range.first.date=h,n.range.second.date=h,a=this.getRangeValue()}this.element.val(a),o?(n.range.data={value:a,dates:this.calendarAPI?this.calendarAPI.getDateRange(n.range.first.date,n.range.second.date):[n.range.first.date],startDate:n.range.first.date,start:s(n.range.first.date),endDate:n.range.second.date,end:s(n.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):n.range.data={value:a,dates:[n.range.first.date],startDate:n.range.first.date,start:s(n.range.first.date)}},resetRange:function(e){e=e||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,e.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,e.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),e.cell&&e.cell.addClass("is-selected"))},setRangeValueFromField:function(){var e,t=this,i=function(e){return M.formatDate(e,{pattern:t.pattern,locale:t.locale.name})},n=function(e){return M.parseDate(e,{pattern:t.pattern,locale:t.locale.name},!1)},s=function(e){return e&&"function"==typeof e.getTime?e.getTime():(new Date).getTime()},a=function(e){var t=n(e[0]),i=n(e[1]);return t&&i?(t=s(t))>(i=s(i))?[e[1],e[0]]:[e[0],e[1]]:e},o=this.settings,r={};(r.value=o.range.value||this.element.val().trim(),r.isEmpty=""===r.value,!r.isEmpty&&r.value.indexOf(o.range.separator)>-1?r.dates=a(r.value.split(o.range.separator)):!r.isEmpty&&r.value.indexOf(o.range.separator.slice(0,-1))>-1?r.dates=r.value.split(o.range.separator.slice(0,-1)):r.isEmpty||-1!==r.value.indexOf(o.range.separator)||(r.dates=[i(r.value)]),!o.range.data&&o.range.start&&o.range.end&&r.isEmpty)&&(e="string"==typeof o.range.start&&"string"==typeof o.range.end?a([o.range.start,o.range.end]):"string"!=typeof o.range.start&&"string"==typeof o.range.end?a([i(o.range.start),o.range.end]):"string"==typeof o.range.start&&"string"!=typeof o.range.end?a([o.range.start,i(o.range.end)]):a([i(o.range.start),i(o.range.end)]),o.range.start=i(e[0]),o.range.end=i(e[1]));if(o.range.first=o.range.first||{},o.range.second=o.range.second||{},o.range.data&&o.range.data.startDate?o.range.first.date=o.range.data.startDate:o.range.start&&"string"==typeof o.range.start?o.range.first.date=n(o.range.start):r.dates&&(o.range.first.date=n(r.dates[0])),o.range.data&&o.range.data.endDate?o.range.second.date=o.range.data.endDate:o.range.end&&"string"==typeof o.range.end?o.range.second.date=n(o.range.end):r.dates&&(o.range.second.date=n(r.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!r.isEmpty&&(r.isEmpty||o.range.data))return!1;var l=i(o.range.first.date);return l&&this.element.val(l),!0},setValueFromField:function(){var e=this,t=this.settings;if(this.setCurrentCalendar(),t.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),t.range.useRange&&(""!==this.element.val().trim()||t.range.start&&t.range.end||t.range.data&&t.range.data.startDate&&t.range.data.endDate)&&!this.setRangeValueFromField())this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());else{var i=this.element.val(),n=i;if(this.isIslamic&&i){var s=M.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});s instanceof Date?n=M.umalquraToGregorian(s.getFullYear(),s.getMonth(),s.getDate()):s instanceof Array&&(n=M.umalquraToGregorian(s[0],s[1],s[2],s[3],s[4],s[5]))}var a=function(){var t=(new Date).getDate();if(e.calendarAPI){var i=e.calendarAPI.dayMap.filter((function(e){return e.elem.is(".is-selected")}));i.length&&(t=parseInt(i[0].key.substr(6),10))}return t}();this.currentDate=n||new Date,"string"==typeof this.currentDate&&(this.currentDate=M.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(a)),void 0===this.currentDate&&(this.currentDate=M.parseDate(n,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=M.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2],this.currentIslamicDate=this.currentDateIslamic):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var o=this.pattern,r=!("MMMM d"===o||"d MMMM"===o||"yyyy"===o||"MMMM"===o||"MMM"===o||"MM"===o),l=this.element.val().trim();if(""!==l&&!t.range.useRange){var c=M.parseDate(l,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},r),d=0;d=this.isIslamic?c[3]:null==c||null==c?void 0:c.getHours(),c&&d<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&c.setHours(d+12),this.pattern&&-1===this.pattern.indexOf("d")&&c.setDate(a),void 0===c||""===this.element.val().trim()||t.range.useRange||this.setValue(c)}t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&(t.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))}},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},setToday:function(e){var t=this.settings;if(this.currentDate=new Date,this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var i=M.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=i}var n=this.isIslamic?this.currentDateIslamic:this.currentDate;if(this.isOpen())if(t.range.useRange)if(!t.range.first||t.range.first&&!t.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(n,!0),e&&this.calendarAPI){var s=this.calendarAPI.dayMap.filter((function(e){return e.elem.is(".is-selected")}));s&&s.length&&setTimeout((function(){s[0].elem.focus()}),0)}}else t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date)?this.setRangeToElem(n,!1):t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(n,!0));else this.insertDate(n,!0);else{if(t.range.useRange)this.setRangeToElem(this.currentDate);else{var a={pattern:this.pattern,locale:this.locale.name},o=M.formatDate(n,a);this.element.val(o)}t.range.useRange?this.element.trigger("change",[t.range.data]).trigger("input",[t.range.data]):this.element.trigger("change").trigger("input")}},setTime:function(e){var t=void 0!==this.popup;if(!this.timepicker||!t)return this.settings.useCurrentTime||e.setHours(0,0,0,0),e;var i=this.popup.find(".dropdown.hours").val(),n=this.popup.find(".dropdown.minutes").val(),s=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,a=this.popup.find(".dropdown.period"),o=a.val();return i=a.length&&o===this.currentCalendar.dayPeriods[1]&&i<12?parseInt(i,10)+12:i,i=!a.length||o!==this.currentCalendar.dayPeriods[0]&&o||12!==parseInt(i,10)?i:0,e instanceof Array?(e[3]=i,e[4]=n,e[5]=s):(e=new Date(e)).setHours(i,n,s),e},getCurrentDate:function(){return this.currentDate},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,di)),this.teardown().init()},getRangeValue:function(){var e=this,t=this.settings,i=function(t){return M.formatDate(t,{pattern:e.pattern,locale:e.locale.name})};return t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date?"".concat(i(t.range.first.date)+t.range.separator+i(t.range.second.date)):t.range.useRange&&t.range.first&&t.range.first.date?t.placeholder?"".concat(i(t.range.first.date)+t.range.separator+this.pattern):i(t.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var e=this.element.data("mask");return e&&e.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],"datepicker")},handleEvents:function(){var e=this,t=this,i=this.settings;if(this.trigger.on("click.datepicker",(function(){t.isOpen()?t.closeCalendar():t.openCalendar()})),this.handleKeys(this.element),t.element.on("blur.datepicker",(function(){var t;e.lastValue=null===(t=e.currentDate)||void 0===t||null==t?void 0:t.getTime,""!==e.element.val().trim()&&e.setValueFromField()})),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",(function(){e.isOpen()||""!==e.element.val().trim()||t.clearRangeDates()})),!this.isOpen()&&i.range.useRange&&!i.range.first){this.setRangeValueFromField();var n=this.getRangeValue();n&&this.element.val(n)}}},$.fn.datepicker=function(e){return this.each((function(){var t=$.data(this,"datepicker");t?t.updated(e):t=$.data(this,"datepicker",new hi(this,e))}))};var ui={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"1a1a1a"},{label:"Slate",number:"09",value:"292929"},{label:"Slate",number:"08",value:"383838",border:"dark"},{label:"Slate",number:"07",value:"454545",border:"dark"},{label:"Slate",number:"06",value:"5C5C5C"},{label:"Slate",number:"05",value:"737373"},{label:"Slate",number:"04",value:"999999"},{label:"Slate",number:"03",value:"BDBDBD"},{label:"Slate",number:"02",value:"D8D8D8"},{label:"Slate",number:"01",value:"F0F0F0",border:"light, contrast"},{label:"Amber",number:"10",value:"D66221"},{label:"Amber",number:"09",value:"DE7223"},{label:"Amber",number:"08",value:"E68425"},{label:"Amber",number:"07",value:"EB9728"},{label:"Amber",number:"06",value:"EFAA30"},{label:"Amber",number:"05",value:"F2BC41"},{label:"Amber",number:"04",value:"F4C951"},{label:"Amber",number:"03",value:"F7D475"},{label:"Amber",number:"02",value:"F8E09C"},{label:"Amber",number:"01",value:"FBE9BF"},{label:"Ruby",number:"10",value:"880E0E"},{label:"Ruby",number:"09",value:"941E1E"},{label:"Ruby",number:"08",value:"A13030"},{label:"Ruby",number:"07",value:"AD4242"},{label:"Ruby",number:"06",value:"B94E4E"},{label:"Ruby",number:"05",value:"C65F5F"},{label:"Ruby",number:"04",value:"D26D6D"},{label:"Ruby",number:"03",value:"DE8181"},{label:"Ruby",number:"02",value:"EB9D9D"},{label:"Ruby",number:"01",value:"F4BCBC"},{label:"Turquoise",number:"10",value:"0E5B52"},{label:"Turquoise",number:"09",value:"206B62"},{label:"Turquoise",number:"08",value:"317C73"},{label:"Turquoise",number:"07",value:"448D83"},{label:"Turquoise",number:"06",value:"579E95"},{label:"Turquoise",number:"05",value:"69ADA3"},{label:"Turquoise",number:"04",value:"7BBFB5"},{label:"Turquoise",number:"03",value:"8ED1C6"},{label:"Turquoise",number:"02",value:"A9E1D6"},{label:"Turquoise",number:"01",value:"C0EDE3"},{label:"Emerald",number:"10",value:"397514"},{label:"Emerald",number:"09",value:"44831F"},{label:"Emerald",number:"08",value:"56932E"},{label:"Emerald",number:"07",value:"66A140"},{label:"Emerald",number:"06",value:"76B051"},{label:"Emerald",number:"05",value:"89BF65"},{label:"Emerald",number:"04",value:"9CCE7C"},{label:"Emerald",number:"03",value:"AFDC91"},{label:"Emerald",number:"02",value:"C3E8AC"},{label:"Emerald",number:"01",value:"D5F6C0"},{label:"Amethyst",number:"10",value:"4B2A5E"},{label:"Amethyst",number:"09",value:"5A3A6F"},{label:"Amethyst",number:"08",value:"6C4B81"},{label:"Amethyst",number:"07",value:"7D5F92"},{label:"Amethyst",number:"06",value:"8E72A4"},{label:"Amethyst",number:"05",value:"A189B8"},{label:"Amethyst",number:"04",value:"B59ECA"},{label:"Amethyst",number:"03",value:"C7B4DB"},{label:"Amethyst",number:"02",value:"DACCEC"},{label:"Amethyst",number:"01",value:"EDE3FC"},{label:"Azure",number:"10",value:"133C59"},{label:"Azure",number:"09",value:"134D71"},{label:"Azure",number:"08",value:"1D5F8A"},{label:"Azure",number:"07",value:"2876A8"},{label:"Azure",number:"06",value:"2578A9"},{label:"Azure",number:"05",value:"4EA0D1"},{label:"Azure",number:"04",value:"69B5DD"},{label:"Azure",number:"03",value:"8DC9E6"},{label:"Azure",number:"02",value:"ADD8EB"},{label:"Azure",number:"01",value:"C8E9F4"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function pi(e,t){this.settings=C.mergeSettings(e,t,ui),t&&t.colors&&(this.settings.colors=t.colors),this.element=$(e),this.init()}pi.prototype={init:function(){this.isIe="ie"===m.browser.name,this.isIeEdge="edge"===m.browser.name,this.isIe11=this.isIe&&"11"===m.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=M?M.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor="editor"===this.settings.placeIn;var e=this.element,t=this.isEditor?this.element.attr("data-value"):this.element.val(),i="swatch".concat(t&&""!==$.trim(t)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),e.wrap(this.container)),this.container=e.parent(),this.swatch=$('<span class="'.concat(i,'"></span>')).prependTo(this.container),this.settings.showLabel){var n=e.data("mask");n&&"function"==typeof n.destroy&&n.destroy()}else{e.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]})}var s=this.element.children(".trigger");this.container&&this.container.length&&(s=this.container.children(".trigger")),s&&s.length&&s.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),t&&this.setColor(t),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria()},getHexFromLabel:function(e){for(var t=0;t<this.settings.colors.length;t++){var i=this.settings.colors[t],n=M.translate(i.label,!0);if(e===i.label+i.number||e===n+i.number){var s=i.value;return"#"!==s.substr(0,1)&&(s="#".concat(s)),s}}return""},getLabelFromHex:function(e){if(!e)return"";for(var t=0;t<this.settings.colors.length;t++){var i=this.settings.colors[t];if(e.replace("#","")===i.value.replace("#",""))return this.translateColorLabel(i.label)+i.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var e=parseInt(this.element[0].style.width,10);this.container.css({width:e}),this.element.css({width:e-4-this.swatch.width()})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(M.translate("UseArrow"),"</span>"))},toggleList:function(){var e=this,t=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||t.length&&this.isPickerOpen)){t=this.updateColorMenu();var i=C.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:M.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(i).on("open.colorpicker",(function(){e.element.parent().addClass("is-open"),e.isPickerOpen=!0})).on("close.colorpicker",(function(){[].slice.call(e.menu[0].querySelectorAll("a")).forEach((function(e){var t=$(e).data("tooltip");t&&t.hide()})),t.on("destroy.colorpicker",(function(){e.element.off("open.colorpicker selected.colorpicker close.colorpicker"),e.menu.off("destroy.colorpicker").remove()})),e.element.parent().removeClass("is-open"),e.isPickerOpen=!1,e.element.trigger("listclosed","select")})).on("selected.colorpicker",(function(t,i){e.isEditor||e.setColor(i.data("value"),i.data("label")),e.element.focus(),e.element.trigger("change")})),this.menu=$("#colorpicker-menu"),setTimeout((function(){e.menu.find(".is-selected").focus()}),1)}},setColor:function(e,t){e=e||"";var i=this.settings,n=e,s=t;"#"!==e.substr(0,1)&&""!==e&&(n="#".concat(n));var a=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(n);if(i.showLabel&&t===i.clearableText)this.setValueOnField({hex:n,label:i.clearableText,isEmpty:!0});else{if(!a){if(!i.showLabel)return n="#"!==n?n:"",void this.setValueOnField({hex:n,invalid:!0});s=e.replace("#",""),n=this.getHexFromLabel(s)}s||(s=this.getLabelFromHex(n)),this.setValueOnField({hex:n,label:s})}},setValueOnField:function(e){var t=this.settings,i=this.isEditor?"data-value":"value",n="";e.isEmpty||"string"!=typeof e.hex||(n=t.uppercase?e.hex.toUpperCase():e.hex.toLowerCase()),this.swatch&&(e.isEmpty||e.invalid?(this.swatch.addClass(e.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=n)),this.element[0].value=t.showLabel?e.label:n,this.element[0].setAttribute(i,n),this.element[0].setAttribute("aria-describedby",e.label||"")},translateColorLabel:function(e){return e?"string"==typeof M.translate(e,!0)?M.translate(e,!0):e:""},getThemeVariant:function(e){var t=Object.keys(ui.themes).filter((function(t){return e.indexOf(t)>-1})),i="light";return t.length>0&&(i=t[0]),i},updateColorMenu:function(){for(var e=this,t=this.settings,i=!!$("#colorpicker-menu").length,n=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),s=ie.currentTheme,a=this.getThemeVariant(s),o="all"===t.themes[a].border,r=t.themes[a].checkmark,l="",c=function(a,c){var d=$("<li></li>"),h=$('<a href="#"><span class="swatch"></span></a>').appendTo(d),u=(e.translateColorLabel(t.colors[a].label)||t.colors[a].label)+(t.colors[a].number||""),p=parseInt(t.colors[a].number,10),g=new RegExp("\\b".concat(s,"\\b")),f=t.colors[a].value,m=!1,v=e.isEditor?e.element.attr("data-value"):e.element.val();t.showLabel&&!e.isEditor&&(v=e.getHexFromLabel(v)),(o||g.test(t.colors[a].border))&&(m=!0),v&&"".concat(v).toLowerCase().replace("#","")==="".concat(f).toLowerCase()&&(r&&$.each(r,(function(e,t){p>=t[0]&&p<=t[1]&&(l=" checkmark-".concat(e))})),h.addClass("is-selected".concat(l))),f=t.uppercase?f.toUpperCase():f.toLowerCase();var b=h.find(".swatch");b[0]&&(b[0].style.backgroundColor="#".concat(f)),b.addClass(m?"is-border":""),h.data("label",u).data("value",f).attr("title","".concat(u," #").concat(f)).tooltip(),i||n.append(d)},d=0,h=t.colors.length;d<h;d++)c(d);if(!i){if(t.clearable){var u=$("<li></li>"),p="foreColor"===this.element.attr("data-action")?"000000":"";$('<a href="#" title="'.concat(t.clearableText,'"><span class="swatch is-empty').concat(o?" is-border":"",'"></span></a>')).appendTo(u).data("label",t.clearableText).data("value",p).tooltip(),n.append(u)}$("body").append(n)}return n},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(e){return"number"!=typeof e?e:"rgb(".concat(255&e,", ").concat((65280&e)>>8,", ").concat((16711680&e)>>16,")")},rgb2hex:function(e){if(!e||-1===e.search("rgb"))return e;if("rgba(0, 0, 0, 0)"===e)return"transparent";var t=function(e){return"0".concat(parseInt(e,10).toString(16)).slice(-2)},i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(t(i[1])).concat(t(i[2])).concat(t(i[3]))},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat("colorpicker"),"keyup.".concat("colorpicker"),"blur.".concat("colorpicker"),"openlist.".concat("colorpicker"),"change.".concat("colorpicker"),"paste.".concat("colorpicker")].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat("colorpicker")),this.swatch.remove(),delete this.swatch);var e=this.element.data("mask");if(e&&e.destroy(),this.icon&&this.icon.length){var t=this.icon.parent(".trigger");this.icon.off().remove(),t.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],"colorpicker"),this},handleEvents:function(){var e,t=this,i=this.element,n=i.parent();this.icon.parent().on("click.colorpicker",(function(){t.toggleList()})),i.on("focus.colorpicker",(function(){e=i.val(),n.addClass("is-focused")})).on("blur.colorpicker",(function(){n.removeClass("is-focused"),t.isIeEdge&&!i.is(".is-open")&&e!==i.val()&&i.triggerHandler("change")})).on("openlist.colorpicker",(function(){t.toggleList()}));var s="blur.colorpicker paste.colorpicker change.colorpicker";s+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",i.on(s,(function(){var e=t.isEditor?i.attr("data-value"):i.val();t.settings.showLabel?t.setColor(i.attr("value"),e):t.setColor(e)})),i.on("keydown.colorpicker",(function(e){38!==e.keyCode&&40!==e.keyCode||t.toggleList(),13===e.keyCode&&t.setColor(i.val())}))}},$.fn.colorpicker=function(e){return this.each((function(){var t=$.data(this,"colorpicker");t?t.updated(e):t=$.data(this,"colorpicker",new pi(this,e))}))};var gi=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function(e){return!$(e).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function(e){if("A"!==e.nodeName)throw new Error("Unspecified error occured");return $(e).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],fi={actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},mi={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1};function vi(e,t){this.element=e,this.settings=C.mergeSettings(this.element,t,mi),this.init()}vi.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function(e){var t=!1;if(gi.forEach((function(i){$(e).is(i.selector)&&("function"!=typeof i.filter||i.filter(e))&&(t=i.type)})),!t)throw new Error("Element ".concat(e," is not a valid Toolbar Item Type."));return t}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&(!0!==this.overflowed&&this.visible))},get focused(){return 0===this.element.tabIndex},set focused(e){this.element.tabIndex=e?0:-1},get selected(){return this.trueSelected},set selected(e){if(e)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var e=$(this.element),t=fi[this.type];if(t)return e.data(t)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["colorpicker","searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var e=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&e.push(this.selectedAnchor),$(this.element).trigger("selected",e)}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(e){var t="searchfield"===this.type||"toolbarsearchfield"===this.type;if(e)return t&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");t&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(e){if(e)return this.element.disabled=!0,this.element.setAttribute("aria-disabled",!0),void(this.element.readOnly=!1);this.element.disabled=!1,this.element.removeAttribute("aria-disabled")},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(e){if(this.hasReadOnly)return e?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var e=m.rtl,t=this.element.getBoundingClientRect(),i=this.section.getBoundingClientRect();return e?t.left<i.left:t.right>i.right},set hasNoOverflowedItems(e){if("actionbutton"===this.type&&this.componentAPI){var t=this.componentAPI.toData({noMenuWrap:!0}).length-this.predefinedItems.length<1;if(e&&t)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},handleEvents:function(){var e=this,t=this,i=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&i.on("selected.".concat("toolbarflexitem"),(function(i,n){if(!e.selectedAnchor){if(i.stopPropagation(),"actionbutton"===e.type){var s,a=$(n).parent(),o=a.data("originalButton"),r=$(o).data("toolbarflexitem");if(a.parents("ul").length>1&&(s=a.data("original-menu-element"),o=a.parents("li").last().data("originalButton"),r=$(o).data("toolbarflexitem")),r)return s?(i.preventDefault(),r.selectedAnchor=$(s).children("a")):r.selectedAnchor=n,void(r.selected=!0)}t.selectedAnchor=n,t.selected=!0}})),"actionbutton"===this.type&&(i.on("beforeopen.".concat("toolbarflexitem"),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat("toolbarflexitem")).on("resize.".concat("toolbarflexitem"),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||i.on("focus.".concat("toolbarflexitem"),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(e){e.target&&e.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly);var e=$(this.element),t=fi[this.type];if(t){var i=e.data(t);i?i.updated(this.settings.componentSettings):e[t](this.settings.componentSettings)}"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var e=this.componentAPI;if(e&&this.toolbarAPI){var t=e.menu;t&&t.length||(t=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var i=this.toolbarAPI.toPopupmenuData();!function e(t,i){t.menuId&&delete t.menuId;var n=i?"submenu":"menu";Array.isArray(t[n])&&t[n].forEach((function(t){e(t,!0)}))}(i);var n=$(e.renderItem(i));this.predefinedItems=n,this.linkToolbarItems(i),t.prepend(this.predefinedItems),e.updated({menu:t,predefined:n}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if("actionbutton"===this.type){var e=this.componentAPI;if(e&&this.toolbarAPI&&!e.isOpen){this.hasNoOverflowedItems=!0,e.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var t=!0;this.toolbarAPI.items.forEach((function(t){if(t.actionButtonLink){var n=t.toPopupmenuData();n.overflowed=t.overflowed,n.id&&delete n.id,e.refreshMenuItem(t.actionButtonLink,n,i)}})),this.hasNoOverflowedItems=t}}function i(e,i){if(!i.isSubmenuItem){if(!0===i.overflowed)return e.classList.add("is-overflowed"),i.visible&&e.classList.remove("hidden"),void(t=!1);e.classList.remove("is-overflowed"),e.classList.add("hidden")}}},unlinkToolbarItems:function(){function e(t){var i=$($(t).data("original-menu-element"));if(i.removeData("action-button-link"),$(t).removeData("original-menu-element"),i.hasClass("submenu"))for(var n=t.querySelector(".popupmenu").children,s=0;s<n.length;s++)e(n[s])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each((function(t,i){var n=$(i).data("originalButton"),s=$(n).data("toolbarflexitem");if(s.actionButtonLink=null,$(i).removeData("original-button"),"menubutton"===s.type)for(var a=i.querySelector(".popupmenu").children,o=0;o<a.length;o++)e(a[o])}))},linkToolbarItems:function(e){function t(e,i){var n=e.elementLink;$(n).data("action-button-link",i),$(i).data("original-menu-element",n);var s=e.submenu;if(s&&s.length)for(var a=i.querySelector(".popupmenu").children,o=0;o<a.length;o++)t(s[o],a[o])}"actionbutton"===this.type&&e&&(Array.isArray(e)||(e=e.menu),this.predefinedItems.each((function(i,n){var s=e[i].itemLink;s.actionButtonLink=n,$(n).data("original-button",s.element);var a=e[i].submenu;if(a&&a.length)for(var o=n.querySelector(".popupmenu").children,r=0;r<o.length;r++)t(a[r],o[r])})))},toPopupmenuData:function(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var e={itemLink:this,disabled:this.disabled,visible:this.visible},t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),"button"!==this.type&&"menubutton"!==this.type||(e.text=this.element.textContent.trim()),"menubutton"===this.type){var i=this.componentAPI.menu;if(i.length){var n=this.componentAPI.toData({noMenuWrap:!0}),s=this.componentAPI.element[0].id;s&&(e.id="".concat(this.toolbarAPI.uniqueId,"-").concat(s)),e.submenu=function e(t,i){var n=t.querySelectorAll("li:not(.heading)");return i.forEach((function(t,i){if(t.elementLink=n[i],t.submenu){var s=n[i].querySelector(".popupmenu");t.submenu=e(s,t.submenu)}})),i}(i[0],n)}else e.submenu=[]}return e}},toData:function(){var e={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(e.readOnly=this.readOnly),this.actionButtonLink&&(e.actionButtonLink=this.actionButtonLink),this.componentAPI&&(e.componentAPI=this.componentAPI);var t=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return t&&t.getAttribute("href")&&(e.icon=t.getAttribute("href").replace("#icon-","")),t&&t.getAttribute("xlink:href")&&(e.icon=t.getAttribute("xlink:href").replace("#icon-","")),"button"!==this.type&&"menubutton"!==this.type||(e.text=this.element.textContent.trim()),"actionbutton"===this.type&&(e.predefinedItems=this.predefinedItems),"menubutton"!==this.type&&"actionbutton"!==this.type||(e.submenu=this.componentAPI.toData({noMenuWrap:!0})),e},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat("toolbarflexitem")).off("beforeopen.".concat("toolbarflexitem")).off("focus.".concat("toolbarflexitem")),$("body").off("resize.".concat("toolbarflexitem")),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered}},$.fn.toolbarflexitem=function(e){return this.each((function(){var t=$.data(this,"toolbarflexitem");if(t)t.updated(e);else{var i=(t=$.data(this,"toolbarflexitem",new vi(this,e))).destroy;t.destroy=function(){"function"==typeof i&&i.call(this),$.removeData(this,"toolbarflexitem")}}}))};var bi={allowTabs:!1,beforeMoreMenuOpen:null,moreMenuSettings:{}};function yi(e,t){this.element=e,this.settings=C.mergeSettings(this.element,t,bi),this.init()}yi.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var e=this;this.uniqueId=C.uniqueId(this.element),this.sections=C.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.items=this.getElements().map((function(t){var i={};return $(t).hasClass("btn-actions")&&(i=e.settings.moreMenuSettings||i,e.settings.beforeMoreMenuOpen&&(O("settings.moreMenuSettings.beforeOpen","settings.beforeMoreMenuOpen","Flex Toolbar"),i.beforeOpen=e.settings.beforeMoreMenuOpen)),$(t).toolbarflexitem({toolbarAPI:e,componentSettings:i,allowTabs:e.settings.allowTabs}),$(t).data("toolbarflexitem")})),this.items&&(this.settings.allowTabs||(this.items.forEach((function(t){t.focused&&(void 0===e.focusedItem?e.focusedItem=t:t.focused=!1)})),this.focusedItem||(this.focusedItem=this.items[0])),this.render(),this.handleEvents())},render:function(){this.element.setAttribute("role","toolbar"),this.items.forEach((function(e){e.render()}))},handleEvents:function(){var e=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat("toolbar-flex"),(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n]})),$(this.element).on("collapsed-responsive.".concat("toolbar-flex"),(function(t,i){t.stopPropagation(),e.navigate(i,null,!0)}))},handleKeydown:function(e){var t=e.target;$(t).data("toolbarflexitem")&&this.handleItemKeydown(e)},handleItemKeydown:function(e){var t=M.isRTL(),i=e.key,n=this.getItemFromElement(e.target);function s(){e.preventDefault()}if("Enter"!==i)if(" "!==i){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(i)>-1){if("searchfield"===n.type&&("ArrowLeft"===i||"Left"===i))return;return this.navigate(t?1:-1,void 0,!0),void s()}if(["ArrowRight","Right","ArrowDown","Down"].indexOf(i)>-1){if("searchfield"===n.type&&("ArrowRight"===i||"Right"===i))return;this.navigate(t?-1:1,void 0,!0),s()}}else"hyperlink"===n.type&&this.select(e.target);else this.clickByEnterKey=!0},handleKeyup:function(e){this.clearClickByEnter(e)},handleClick:function(e){var t=e.target;$(t).data("toolbarflexitem")&&this.handleItemClick(e),this.clearClickByEnter()},handleItemClick:function(e){var t=this.getItemFromElement(e.target);this.select(t),this.focusedItem=t},clearClickByEnter:function(e){this.clickByEnterKey&&("menubutton"!==this.type&&"actionbutton"!==this.type||e.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var e=[],t=[];return gi.forEach((function(e){t.push(e.selector)})),t=t.join(", "),C.getArrayFromList(this.element.querySelectorAll(t)).forEach((function(t){var i=!1;gi.forEach((function(n){!i&&$(t).is(n.selector)&&("function"!=typeof n.filter||n.filter(t))&&(i=!0,e.push(t))}))})),e},getItemFromElement:function(e){if(e instanceof vi||e.isToolbarFlexItem)return e;for(var t,i=0;i<this.items.length;i++)this.items[i].element.innerHTML===e.innerHTML&&(t=this.items[i]);if(!t)throw new Error("No Toolbar Item instance available for element ".concat(e,"."));return t},get searchfieldAPI(){for(var e=0;e<this.items.length;e++)if("searchfield"===this.items[e].type)return this.items[e].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var e=0;e<this.items.length;e++)if(!0===this.items[e].focused)return this.items[e]},set focusedItem(e){if(0!==this.items.length){for(var t=0;t<this.items.length;t++)this.items[t].focused=!1;e.focused=!0,this.trueFocusedItem=e}},get hasFocusableItems(){for(var e=0;e<this.items.length;e++)if(!0===this.items[e].focusable)return!0;return!1},get canManageFocus(){var e=document.activeElement;if(this.element.contains(e))return!0;for(var t=0;t<this.items.length;t++)if("searchfield"===this.items[t].type&&this.items[t].componentAPI.isFocused)return!0;return"BODY"===e.tagName},get overflowedItems(){for(var e=[],t=0;t<this.items.length;t++)!0===this.items[t].overflowed&&e.push(this.items[t]);return e},navigate:function(e,t,i){if(!1!==this.hasFocusableItems){var n=0+e;for(null==t&&(t=this.items.indexOf(this.focusedItem));0!==e;)e>0&&(t===this.items.length-1?t=0:t++,--e),e<0&&(0===t?t=this.items.length-1:--t,e++);var s=this.items[t];!1!==s.focusable?(this.focusedItem=s,i&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(n>0?1:-1,t,i)}},select:function(e){var t=this.getItemFromElement(e);switch(t.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;t.selected=!0;break;default:t.selected=!0}},toPopupmenuData:function(){var e={noMenuWrap:!0};return e.menu=this.items.filter((function(e){return"actionbutton"!==e.type&&"searchfield"!==e.type})).map((function(t){return function(t){var i=t.toPopupmenuData();return i&&(i.icon&&(e.hasIcons=!0),i.selectable&&(e.selectable=i.selectable)),i}(t)})),e},toData:function(){var e={};return e.items=this.items.map((function(e){return e.toData()})),e},get disabled(){return this.trueDisabled},set disabled(e){this.trueDisabled=e,!0!==e?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(e){if(!e)return!1;var t;if(e instanceof HTMLElement||e instanceof $){if(!(t=$(e).data("toolbarflexitem")))return!1;e=t}return!(this.items.indexOf(e)<0)&&e.overflowed},updated:function(e){"object"===i(e)&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.settings.allowTabs||(this.element.removeEventListener("keydown",this.keydownListener),this.element.removeEventListener("keyup",this.keyupListener),this.element.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat("toolbar-flex")),$(this.element).off("collapsed-responsive.".concat("toolbar-flex")),this.items.forEach((function(e){e.teardown()})),delete this.items,delete this.sections},destroy:function(){this.teardown()}},$.fn.toolbarflex=function(e){return this.each((function(){var t=$.data(this,"toolbar-flex");if(t)t.updated(e);else{var i=(t=$.data(this,"toolbar-flex",new yi(this,e))).destroy;t.destroy=function(){"function"==typeof i&&i.call(this),$.removeData(this,"toolbar-flex")}}}))};var wi={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1};function xi(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,wi),this.init()}xi.prototype={init:function(){this.setLocale().build().handleEvents()},build:function(){if(this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false"),this.settings.isAlternate){this.element[0].classList.add("is-alternate");this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(this.settings.isMenuButton?'<button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n        <span class="month">november</span>\n        <span class="year">2019</span>\n        <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n        <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </button>':'<span class="month">november</span><span class="year">2015</span>','\n        </div>\n        <div class="toolbar-section buttonset l-align-').concat(this.isRTL?"left":"right",'">\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(M.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>').concat(M.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(M.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n          </button>\n        </div>\n      ")}else this.element[0].innerHTML='\n        <div class="toolbar-section">\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>'.concat(M.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(M.translate("NextMonth",{locale:this.locale.name,language:this.language}),'</span>\n          </button>\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(M.translate("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(M.translate("Today",{locale:this.locale.name,language:this.language}),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(M.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(this.settings.showViewChanger?'<label for="calendar-view-changer" class="label audible">'.concat(M.translate("ChangeView",{locale:this.locale.name,language:this.language}),'</label>\n            <select id="calendar-view-changer" name="calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===this.settings.viewChangerValue?" selected":"",">").concat(M.translate("Month",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="week"').concat("week"===this.settings.viewChangerValue?" selected":"",">").concat(M.translate("Week",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="day" ').concat("day"===this.settings.viewChangerValue?" selected":"",">").concat(M.translate("Day",{locale:this.locale.name,language:this.language}),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      ");return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:M.calendar(this.locale.name,this.settings.language,this.settings.calendarName).dateFormat.year,locale:this.settings.locale,language:this.settings.language,onOpenCalendar:this.settings.onOpenCalendar,isMonthPicker:this.settings.isMonthPicker,showToday:this.settings.showToday}),this.settings.showViewChanger&&(this.viewChanger=this.element.find("#calendar-view-changer").dropdown()),this.todayLink=this.element.find(".hyperlink.today"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(new Date(this.settings.year,this.settings.month,1)),this},setInternalDate:function(e){this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentDay=e.getDate(),this.currentDate=e,this.monthPicker.text(M.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language})),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=M.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var t=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(t),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var i=M.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" ")[0];this.element.find("span.year").text("".concat(i," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=M.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function(){var e=this;return this.settings.language?(M.getLocale(this.settings.language),this.language=this.settings.language):this.language=M.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=M.currentLocale,this.setCurrentCalendar()):M.getLocale(this.settings.locale).done((function(t){e.locale=M.cultures[t],e.language=e.settings.language||e.locale.language,e.setCurrentCalendar()})),this},setViewChangerValue:function(e){this.settings.viewChangerValue=e,this.viewChanger.val(e).trigger("updated")},handleEvents:function(){var e=this,t=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",(function(){var e=$(this).data("datepicker");t.setInternalDate(e.currentDate),t.element.trigger("change-date",{selectedDate:e.currentDate,isToday:!1})})),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",(function(t){e.element.trigger("change-date",{selectedDate:e.currentDate,isToday:!0}),t.preventDefault()})),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){e.element.trigger("change-prev",{selectedDate:e.currentDate,isToday:!1})})),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){e.element.trigger("change-next",{selectedDate:e.currentDate,isToday:!1})})),this.settings.onChangeView&&this.element.find("#calendar-view-changer").off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",(function(t){e.settings.onChangeView({viewName:t.currentTarget.value,elem:t.currentTarget,api:e})})),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,wi)),this.teardown().init()},teardown:function(){return this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.unbind(),$.removeData(this.element[0],"calendartoolbar")}};var Ci={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,headerStyle:"full",firstDayOfWeek:null,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],hideDays:!1,showMonthYearPicker:!0,yearsAhead:5,yearsBack:4,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,onChangeView:null,isMonthPicker:!1};function ki(e,t){this.settings=C.mergeSettings(e,t,Ci),this.element=$(e),this.init()}ki.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=M.getLocale(this.settings.language),i=M.getLocale(this.settings.locale);$.when(i,t).done((function(t,i){e.locale=M.cultures[t]||M.currentLocale,e.language=i||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents()}))},build:function(){var e=this;return"false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(M.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(M.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(M.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(this.settings.showMonthYearPicker?'<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n      <div class="expandable-pane">\n        <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n      </div>\n    </div>'):""),this.settings.hideDays&&(this.table=""),this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(M.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,this.table),this.settings.isPopup||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new xi(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:"full"!==this.settings.headerStyle&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView}),this.handleEvents(),this},setCurrentCalendar:function(){this.currentCalendar=M.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},showMonth:function(e,t){var i=this,n=this,s=this.settings,a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);var o=s.activeDate&&s.activeDate.getDate()?s.activeDate:a;if(this.setCurrentCalendar(),this.isIslamic)if(s.activeDateIslamic)o=s.activeDateIslamic;else{var r=new Date;this.todayDateIslamic=M.gregorianToUmalqura(r),s.activeDateIslamic=[],s.activeDateIslamic[0]=this.todayDateIslamic[0],s.activeDateIslamic[1]=this.todayDateIslamic[1],s.activeDateIslamic[2]=this.todayDateIslamic[2],t=s.activeDateIslamic[0],e=s.activeDateIslamic[1],o=M.gregorianToUmalqura(a)}t.toString().length<4&&(t=(new Date).getFullYear()),12===e&&(t++,e=0,this.currentMonth=e,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),e<0&&(t--,e=11,this.currentMonth=e,this.currentYear=t,this.currentDate.setFullYear(t),this.currentDate.setMonth(e)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=M.calendar(this.locale.name,this.language,this.settings.calendarName));var l=this.currentCalendar.days.narrow;l=l||this.currentCalendar.days.abbreviated,s.isPopup||(l=this.currentCalendar.days.abbreviated);var c=this.currentCalendar.months.wide[e];this.currentMonth=e,this.currentYear=t;var d=this.currentCalendar.firstDayofWeek||0;if(s.firstDayOfWeek&&(d=s.firstDayOfWeek),this.dayNames.find("th").each((function(e){$(this).text(l[(e+d)%7])})),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",e).text("".concat(h.stripTags(c)," ")),this.header.find(".year").text(" ".concat(t)),this.yearFirst&&!this.isIslamic&&!this.isRTL){o.setFullYear(t);var u=M.formatDate(o,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(u," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===s.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(new Date(t,e,1)),this.appendMonthYearPicker(e,t);var p,g,f,m=(this.firstDayOfMonth(t,e)-d+7)%7,v=this.daysInMonth(t,e+(this.isIslamic?1:0)),b=this.daysInMonth(t,e+(this.isIslamic?0:1)),y=1,w=1,x=!1,C=function(e,t){x=t,e.addClass("is-selected".concat(s.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each((function(i){var s=$(this).removeClass("alternate prev-month next-month is-selected range is-today");if(s.removeAttr("aria-selected"),s.removeAttr("tabindex"),i<m&&(f=v-m+1+i,g=0===e?11:e-1,p=0===e?t-1:t,n.setDisabled(s,p,g,f),n.setLegendColor(s,p,g,f),n.dayMap.push({key:D.padDate(p,g,f),elem:s}),s.addClass("alternate prev-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(h.stripTags(f),"</span></span>")),s.attr("data-key",D.padDate(p,g,f))),i>=m&&w<=b){if(n.dayMap.push({key:D.padDate(t,e,w),elem:s}),s.html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(h.stripTags(w),"</span></span>")),s.attr("data-key",D.padDate(t,e,w)),n.isIslamic)t===o[0]&&e===o[1]&&w===o[2]&&C(s,!0);else{var a=o.getHours(),r=o.getMinutes(),l=n.isSeconds?o.getSeconds():0,c=function(e){return e?e.setHours(a,r,l,0):0},d=c(new Date(t,e,w));d!==c(o)&&d!==c(n.currentDate)||C(s,!0)}w===n.todayDay&&n.currentMonth===n.todayMonth&&n.currentYear===n.todayYear&&s.addClass("is-today"),s.attr("aria-label",M.formatDate(new Date(n.currentYear,n.currentMonth,w),{date:"full",locale:n.locale.name}));var u=D.padDate(n.currentYear,n.currentMonth,w);return s.attr("data-key",u),n.setDisabled(s,t,e,w),n.setLegendColor(s,t,e,w),s.attr("role","link"),void w++}w>=b+1&&(f=y,g=11===e?0:e+1,p=11===e?t+1:t,n.dayMap.push({key:D.padDate(p,g,f),elem:s}),n.setDisabled(s,p,g,f),n.setLegendColor(s,p,g,f),s.addClass("alternate next-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(y,"</span></span>")),s.attr("data-key",D.padDate(p,g,f)),y++)})),!x&&!s.range.useRange){var k=n.dayMap.filter((function(n){return n.key===D.padDate(t,e,i.settings.day)}));k.length&&C(k[0].elem,!1)}var T=this.days.find("tr").eq(5);7===T.find("td.alternate").length?T.hide():T.show(),this.currentDate||(this.isIslamic?(this.currentIslamicDate=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=M.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay)),this.setRangeSelection(),this.validatePrevNext(),s.range.useRange||0!==this.element.find("td.is-selected").length||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.element.trigger("monthrendered",{year:t,month:e,elem:this.element,api:this})},setRangeSelection:function(){if(this.settings.range.useRange){var e={};e.date=new Date(this.currentYear,this.currentMonth,1),e.date.setDate(e.date.getDate()-(this.days.find(".prev-month:visible").length+1)),e.formatedDate=M.formatDate(e.date,{date:"full",locale:this.locale.name}),e.cell=this.days.find('[aria-label="'.concat(e.formatedDate,'"]')),this.setRangeOnCell(!this.settings.range.second&&e.cell)}},appendMonthYearPicker:function(e,t){if(this.settings.showMonthYearPicker){var i='<ul class="picklist is-month">';this.currentCalendar.months.wide.map((function(t,n){i+='<li class="picklist-item'.concat(n===e?" is-selected ":"",'"><a href="#" ').concat(n===e?'tabindex="0" ':'tabindex="-1" ','data-month="').concat(n,'">').concat(t,"</a></li>")})),i+="</ul>",this.monthYearPane.find(".picklist-section.is-month").empty().append(i);var n=[],s='<ul class="picklist is-year">';s+='<li class="picklist-item up"><a href="#" tabindex="0"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>';for(var a=this.settings.yearsBack;a>=1;a--)n.push(parseInt(t,10)-a);n.push(t);for(var o=1;o<=this.settings.yearsAhead;o++)n.push(parseInt(t,10)+o);n.map((function(e){s+='<li class="picklist-item'.concat(t===e?" is-selected ":"",'"><a href="#" ').concat(t===e?'tabindex="0" ':'tabindex="-1" ','data-year="').concat(e,'">').concat(e,"</a></li>")})),s+='<li class="picklist-item down"><a tabindex="0"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-down"></use></svg></a></li>',s+="</ul>",this.monthYearPane.find(".picklist-section.is-year").empty().append(s),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst")}},firstDayOfMonth:function(e,t){if(this.isIslamic){var i=M.umalquraToGregorian(e,t,1);return null===i?1:i.getDay()}return new Date(e,t,1).getDay()},daysInMonth:function(e,t){if(this.isIslamic){for(var i=this.conversions.yearInfo[this.islamicYearIndex(e)][0],n=0;n<=t;n++){if(n===t)return 29+(1&i);i>>=1}return 0}return new Date(e,t,0).getDate()},islamicYearIndex:function(e){var t=e-1318;return t<0||t>=this.conversions.yearInfo.length?0:t},setDisabled:function(e,t,i,n){var s=this.settings;function a(){e.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")}if(e.removeClass("is-disabled").removeAttr("aria-disabled"),"function"==typeof s.disable.callback)$.when(this.isDateDisabled(t,i,n)).then((function(e){e&&a()}));else{var o=this.isDateDisabled(t,i,n);(o&&!s.disable.isEnable||!o&&s.disable.isEnable)&&a()}},isDateDisabled:function(e,t,n){var s=this.settings;if("function"==typeof s.disable.callback){var a=$.Deferred();return $.when(s.disable.callback(e,t,n)).then((function(e){a.resolve(e)})),a.promise()}var o=new Date(s.disable.minDate).setHours(0,0,0,0),r=new Date(s.disable.maxDate).setHours(0,0,0,0),l=this.isIslamic?M.umalquraToGregorian(e,t,n):new Date(e,t,n);if(!l)return!1;if(-1!==s.disable.dayOfWeek.indexOf(l.getDay()))return!0;var c=l.getFullYear();if((l=l.setHours(0,0,0,0))<=o||l>=r)return!0;/string|number/.test(i(s.disable.years))&&(s.disable.years=[s.disable.years]);for(var d=0,h=s.disable.years.length;d<h;d++)if(c===Number(s.disable.years[d]))return!0;s.disable.dates.length&&"string"==typeof s.disable.dates&&(s.disable.dates=[s.disable.dates]);for(var u=0,p=s.disable.dates.length;u<p;u++){if(l===new Date(s.disable.dates[u]).setHours(0,0,0,0))return!0}return!1},getDateRange:function(e,t,i){var n=[],s=new Date(e);for(i=void 0!==i?i:this.settings.range.includeDisabled;t.getTime()>=s.getTime();)(i||!i&&!this.isDateDisabled(s.getFullYear(),s.getMonth(),s.getDate()))&&n.push(new Date(s)),s.setDate(s.getDate()+1);return n},setLegendColor:function(e,t,i,n){if(this.settings.showLegend&&e[0]){var s=this.getLegendColor(t,i,n);if(e[0].style.backgroundColor="",e.off("mouseenter.legend mouseleave.legend"),s){if(-1===s.indexOf("#")){var a=s.replace(/[0-9]/g,""),o=10*s.substr(s.length-2,2);s=J.themeColors().palette[a][o].value}e.addClass("is-colored"),e[0].style.backgroundColor=Q.hexToRgba(s,.3);var r=Q.hexToRgba(s,.3),l=Q.hexToRgba(s,.7);e.on("mouseenter.legend",(function(){var e=$(this);e[0].style.backgroundColor=l,e.find("span")[0].style.backgroundColor="transparent",e.find(".day-text")[0].style.backgroundColor="transparent"})).on("mouseleave.legend",(function(){var e=$(this);e[0].style.backgroundColor=r,e.find("span")[0].style.backgroundColor="",e.find(".day-text")[0].style.backgroundColor=""}))}}},getLegendColor:function(e,t,i){var n=this.settings;if(n.showLegend){for(var s=new Date(e,t,i),a=s.setHours(0,0,0,0),o=0;o<n.legend.length;o++){var r=n.legend[o];if(r.dayOfWeek&&-1!==r.dayOfWeek.indexOf(s.getDay()))return r.color;if(r.dates)for(var l=0;l<r.dates.length;l++){if(a===new Date(r.dates[l]).setHours(0,0,0,0))return r.color}}return""}},handleEvents:function(){var e=this,t=this,i=this.settings;return this.element.off("updated.".concat("monthview")).on("updated.".concat("monthview"),(function(){e.updated()})),this.header.off("click.monthview").on("click.monthview",".btn-icon",(function(){var e=$(this).is(".next"),n={},s={month:t.currentMonth,year:t.currentYear};i.range.useRange?(e?n.date=new Date(s.year,s.month+1,t.element.find(".next-month:visible").length+1):(n.date=new Date(s.year,s.month,1),n.date.setDate(n.date.getDate()-(t.days.find(".prev-month:visible").length+1))),s.month+=e?1:-1):(t.currentMonth+=e?1:-1,t.currentDate.setMonth(t.currentMonth),t.currentYear=parseInt(t.element[0].querySelector("span.year").innerText,10),t.currentDate.setFullYear(t.currentYear),s.month=t.currentMonth,s.year=t.currentYear),t.showMonth(s.month,s.year),i.range.useRange&&(n.formatedDate=M.formatDate(n.date,{date:"full",locale:t.locale.name}),n.cell=t.days.find('[aria-label="'.concat(n.formatedDate,'"]')),t.setRangeOnCell(!i.range.second&&n.cell))})),i.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",(function(){i.range.extra&&t.setRangeOnCell($(this).is(".next")?i.range.extra.maxCell:i.range.extra.minCell)})).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",(function(){i.range.extra&&t.setRangeOnCell($(this).is(".next")?i.range.extra.maxCell:i.range.extra.minCell)})),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",(function(){t.setRangeOnCell(this)}))),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",(function(t,i){i.isToday&&e.settings.isPopup||(i.isToday?e.setToday():e.selectDay(i.selectedDate,!1,!0))})),i.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",(function(t){var i=t.currentTarget.getAttribute("data-key");e.lastClickedKey=i,t.currentTarget.classList.contains("is-disabled")||e.selectDay(i,!1,!0)})),this.handleMonthYearPane().handleKeys(),this},handleMonthYearPane:function(){var e=this,t=this.settings,i=function(t){var i=e.monthYearPane[0].querySelector(".picklist.is-year"),n=i.children,s=n["up"===t?1:n.length-2].querySelector("a").getAttribute("data-year"),a=parseInt(s,10)+("up"===t?-1:1);u.remove(n["up"===t?n.length-2:1]);var o=document.createElement("a");o.setAttribute("href","#"),o.setAttribute("tabindex","-1"),o.setAttribute("data-year",a),o.innerHTML=a;var r=document.createElement("li");u.addClass(r,"picklist-item"),r.appendChild(o),i.insertBefore(r,n["up"===t?1:n.length-1]),e.monthYearPane[0].querySelector(".picklist.is-year li.is-selected")||(u.addClass(r,"is-selected"),o.setAttribute("tabindex","0"))},n=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",(function(e){return n=setInterval((function(){return e.currentTarget.classList.contains("up")&&i("up"),e.currentTarget.classList.contains("down")&&i("down"),e.stopImmediatePropagation(),e.stopPropagation(),!1}),200),!0})).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",(function(){return clearInterval(n),!0}));var s=function(i,n){var s=function(t){return e.monthYearPane[0].querySelector(".is-".concat(t," .is-selected a"))},a="is-month"===n?{month:parseInt(i.getAttribute("data-month"),10),year:parseInt(s("year").getAttribute("data-year"),10)}:{month:parseInt(s("month").getAttribute("data-month"),10),year:parseInt(i.getAttribute("data-year"),10)};t.range.useRange||(e.currentMonth=a.month,e.currentDate.setMonth(e.currentMonth),e.currentYear=a.year,e.currentDate.setFullYear(e.currentYear),a.month=e.currentMonth,a.year=e.currentYear),function(t,i){var n=e.monthYearPane[0].querySelector(".picklist.".concat(i," .is-selected"));u.removeClass(n,"is-selected"),n.querySelector("a").setAttribute("tabindex","-1"),u.addClass(t.parentNode,"is-selected"),t.setAttribute("tabindex","0")}(i,n),e.element.hasClass("".concat(n,"only"))&&e.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",(function(e){s(e.target,"is-month"),e.preventDefault()})),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",(function(e){e.preventDefault()})),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",(function(e){e.currentTarget.classList.contains("up")?i("up"):e.currentTarget.classList.contains("down")?i("down"):(s(e.target,"is-year"),e.preventDefault())})),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",(function(e){e.preventDefault()})),this.monthYearPane.on("expand.monthviewpane",(function(){t.hideDays||(e.element.find(".btn-icon, td.is-selected").attr("disabled","true"),e.element.find("td.is-selected").removeAttr("tabindex"),e.monthYearPane.find(".content").css("height",e.header.parent().height()-e.header.height()-55),e.element.find(".hyperlink.today").hide(),e.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),e.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(M.translate("Cancel",{locale:e.locale.name,language:e.language}))),setTimeout((function(){e.monthYearPane.find(".is-month .is-selected a").focus(),e.monthYearPane.parent().hasClass("is-yearonly")&&e.monthYearPane.find(".is-year .is-selected a").focus()}))})).on("collapse.monthviewpane",(function(){t.hideDays||(e.element.find(".btn-icon").removeAttr("disabled"),e.element.find("td.is-selected").attr("tabindex","0"),e.element.find(".hyperlink.today").show(),e.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),e.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(M.translate("Clear",{locale:e.locale.name,language:e.language})))}));var a=function(e,t){var i=e.currentTarget,n=e.currentTarget.parentNode,s="prev"===t?n.previousSibling:n.nextSibling;s||(s=n.parentNode.children["prev"===t?n.parentNode.children.length-1:0]);var a=s.querySelector("a");i.setAttribute("tabindex","-1"),n.parentNode.querySelector(".is-selected").classList.remove("is-selected"),u.addClass(s,"is-selected"),a.setAttribute("tabindex","0"),a.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",(function(e){var t=e.currentTarget.parentNode.classList.contains("up"),n=e.currentTarget.parentNode.classList.contains("down"),o=e.currentTarget.parentNode.parentNode.classList.contains("is-year"),r=e.currentTarget.parentNode.parentNode.classList.contains("is-month"),l=!1;"ArrowUp"===e.key&&(o||r)?(a(e,"prev"),l=!0):"ArrowDown"===e.key&&(o||r)?(a(e,"next"),l=!0):"Enter"===e.key&&(t||n?(i(t?"up":"down"),l=!0):(o||r)&&(s(e.target,o?"is-year":"is-month"),l=!0)),l&&e.preventDefault()})),this},selectDay:function(e,t,i){this.isIslamic&&"string"!=typeof e&&(this.currentIslamicDate=M.gregorianToUmalqura(e),e=D.padDate(this.currentIslamicDate[0],this.currentIslamicDate[1],this.currentIslamicDate[2])),this.isIslamic||"string"==typeof e||(e=D.padDate(e.getFullYear(),e.getMonth(),e.getDate()));var n=this.dayMap.filter((function(t){return t.key===e})),s=parseInt(e.substr(0,4),10),a=parseInt(e.substr(4,2),10)-1,o=parseInt(e.substr(6,2),10);if(this.isIslamic?(this.currentIslamicDate=e,this.currentDate=M.umalquraToGregorian(s,a,o)):this.currentDate=new Date(s,a,o),this.currentYear=s,this.currentMonth=a,this.currentDay=o,(0===n.length||n[0].elem.hasClass("alternate"))&&(this.showMonth(a,s),n=this.dayMap.filter((function(t){return t.key===e}))),0!==!n.length){var r=n[0].elem[0],l={node:r,key:e,day:o,month:a,year:s,close:t};delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected").removeAttr("tabindex"),$(r).addClass("is-selected").attr("tabindex","0").focus(),(i="full"===this.settings.headerStyle||i)&&this.settings.onSelected&&this.settings.onSelected(r,l),i&&this.element.trigger("selected",l)}},setToday:function(){this.selectDay(new Date,!1,!0)},handleKeys:function(){var e=this,t=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",(function(i){var n=i.keyCode||i.charCode||0,s=$(i.target),a=e.days.find("td:visible"),o=a.length,r=null,l=null,c=!1,d=new Date(t.disable.minDate),h=new Date(t.disable.maxDate),u=function(){e.datepickerApi&&t.range.useRange&&t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date&&e.datepickerApi.resetRange({isData:!0})};if(e.settings.onKeyDown&&!1===e.settings.onKeyDown({e:i,key:n,cell:s,node:e.element}))return i.stopPropagation(),i.preventDefault(),!1;if(40===n&&(c=!0,t.range.useRange?(r=a.index(i.target)+7,l=a.eq(r),r<o&&(u(),e.setRangeOnCell(l.is(".is-selected")?null:l),e.setRangeSelBeforeFirstSel(l),e.activeTabindex(l,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()<h.getMonth()||h.getDate()-1>=e.currentDate.getDate()+7)&&e.currentDate.setDate(e.currentDate.getDate()+7),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()+7),e.selectDay(e.currentDate,!1,!1))),38===n&&(c=!0,t.range.useRange?(r=a.index(i.target)-7,l=a.eq(r),r>-1&&(u(),e.setRangeOnCell(l.is(".is-selected")?null:l),e.setRangeSelBeforeFirstSel(l),e.activeTabindex(l,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()>d.getMonth()||d.getDate()+1<=e.currentDate.getDate()-7)&&e.currentDate.setDate(e.currentDate.getDate()-7),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()-7),e.selectDay(e.currentDate,!1,!1))),37===n&&(c=!0,t.range.useRange?(r=a.index(i.target)-1,l=a.eq(r),r>-1&&(u(),e.setRangeOnCell(l.is(".is-selected")?null:l),e.setRangeSelBeforeFirstSel(l),e.activeTabindex(l,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()>d.getMonth()||d.getDate()+1!==e.currentDate.getDate())&&e.currentDate.setDate(e.currentDate.getDate()-1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()-1),e.selectDay(e.currentDate,!1,!1))),39===n&&(c=!0,t.range.useRange?(r=a.index(i.target)+1,l=a.eq(r),r<o&&(u(),e.setRangeOnCell(l.is(".is-selected")?null:l),e.setRangeSelBeforeFirstSel(l),e.activeTabindex(l,!0))):t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?((e.currentDate.getMonth()<h.getMonth()||h.getDate()-1!==e.currentDate.getDate())&&e.currentDate.setDate(e.currentDate.getDate()+1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setDate(e.currentDate.getDate()+1),e.selectDay(e.currentDate,!1,!1))),33!==n||i.altKey||(c=!0,u(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?d.getMonth()!==e.currentDate.getMonth()&&(e.currentDate.setMonth(e.currentDate.getMonth()-1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setMonth(e.currentDate.getMonth()-1),e.selectDay(e.currentDate,!1,!1))),34!==n||i.altKey||(c=!0,u(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.currentDate.getMonth()!==h.getMonth()&&(e.currentDate.setMonth(e.currentDate.getMonth()+1),e.selectDay(e.currentDate,!1,!1)):(e.currentDate.setMonth(e.currentDate.getMonth()+1),e.selectDay(e.currentDate,!1,!1))),33===n&&i.ctrlKey&&(c=!0,u(),e.currentDate.setFullYear(e.currentDate.getFullYear()-1),e.selectDay(e.currentDate,!1,!1)),34===n&&i.ctrlKey&&(c=!0,u(),e.currentDate.setFullYear(e.currentDate.getFullYear()+1),e.selectDay(e.currentDate,!1,!1)),36===n){c=!0;var p,g=e.currentDate;u(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?d.getMonth()!==e.currentDate.getMonth()?p=new Date(g.getFullYear(),g.getMonth(),1):(p=new Date(d.getFullYear(),d.getMonth(),d.getDate())).setDate(p.getDate()+1):p=new Date(g.getFullYear(),g.getMonth(),1),e.currentDate=p,e.isIslamic&&(e.currentIslamicDate=M.gregorianToUmalqura(e.currentDate)),e.selectDay(e.currentDate,!1,!1)}if(35===n){c=!0;var f,m=e.currentDate;u(),t.disable.restrictMonths&&t.disable.minDate&&t.disable.maxDate?e.currentDate.getMonth()!==h.getMonth()?f=new Date(m.getFullYear(),m.getMonth()+1,0):(f=new Date(h.getFullYear(),h.getMonth(),h.getDate())).setDate(f.getDate()-1):f=new Date(m.getFullYear(),m.getMonth()+1,0),e.currentDate=f,e.isIslamic&&(e.currentIslamicDate=M.gregorianToUmalqura(e.currentDate)),e.selectDay(e.currentDate,!1,!1)}if(84===n){if(t.range.useRange&&e.datepickerApi){u();var v=!(t.range.first&&t.range.first.date&&(!t.range.second||t.range.second&&!t.range.second.date));e.datepickerApi.setToday(v),!v&&e.datepickerApi&&"function"==typeof e.datepickerApi.closeCalendar&&e.datepickerApi.closeCalendar()}else e.setToday();c=!0}if(32===n||13===n){if(c=!0,t.range.useRange)return(!t.range.first||t.range.first&&!t.range.first.date)&&a.removeClass("is-selected"),s.focus().trigger("click"),!1;var b=e.getCellDate(s);e.isIslamic?(e.currentIslamicDate=[b.year,b.month,b.day],e.currentDate=M.umalquraToGregorian(e.currentIslamicDate[0],e.currentIslamicDate[1],e.currentIslamicDate[2])):e.currentDate=new Date(b.year,b.month,b.day),e.selectDay(e.currentDate,!0,!0)}return!c||(i.stopPropagation(),i.preventDefault(),!1)}))},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var e=new Date(this.settings.disable.minDate),t=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),e.getFullYear()>this.currentYear||this.currentYear>t.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<e.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>t.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var e=this.settings;if(e.showLegend){this.legend&&this.legend.length&&this.legend.remove(),this.legend=$('<div class="monthview-legend"></div>');for(var t=0;t<e.legend.length;t++){var i=e.legend[t],n=i.color;if(-1===n.indexOf("#")){var s=n.replace(/[0-9]/g,""),a=10*n.substr(n.length-2,2);n=J.themeColors().palette[s][a].value}var o=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch" style="background-color: '.concat(Q.hexToRgba(n,.3),'"></span>\n          <span class="monthview-legend-text">').concat(i.name,"</span>\n        </div>");this.legend.append(o)}this.table.after(this.legend)}},setRangeOnCell:function(e){var t=this.settings;if(t.range.useRange&&t.range.first&&!t.range.second){var i=t.range.first,n=t.range.extra,s=n.cellLength-1,a=i.rowIdx+i.cellIdx+s*i.rowIdx;if((e=$(e)).length&&!e.is(".is-disabled, .is-selected")){var o=e.closest("tr"),r=e.index(),l=o.index(),c=l+r+s*l,d=this.getCellDate(e),h=new Date(d.year,d.month,d.day),u=this.getDifferenceToDate(t.range.first.date,t.range.maxDays);this.days.find("td:visible").each((function(e){var i=$(this);h>t.range.first.date&&!t.range.selectBackward&&(!t.range.maxDays||t.range.maxDays>0&&h.getTime()<=u.aftertime)&&(e>a&&e<=c||h>n.max&&e<=c)?i.addClass("range-next"):h<t.range.first.date&&!t.range.selectForward&&(!t.range.maxDays||t.range.maxDays>0&&h.getTime()>=u.beforetime)&&(e<a&&e>=c||h<n.min&&e>=c)?i.addClass("range-prev"):i.removeClass("range-next range-prev")}))}else e.length||this.days.find("td").removeClass("range-next range-prev")}!e&&t.range.second&&this.setRangeSelected()},getDifferenceToDate:function(e,t,i){var n=this,s={},a=function(e,t,a){for(e=new Date(e);t>0;)e.setDate(e.getDate()+(a?1:-1)),(i||!i&&!n.isDateDisabled(e.getFullYear(),e.getMonth(),e.getDate()))&&(t--,s[a?"after":"before"]=new Date(e));a&&s.after?s.aftertime=s.after.getTime():s.before&&(s.beforetime=s.before.getTime())};return i=void 0!==i?i:this.settings.range.includeDisabled,a(e,t),a(e,t,!0),s},setRangeSelected:function(){var e=this,t=this.settings;t.range.useRange&&t.range.second&&t.range.second.date&&this.days&&this.days.length&&(this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each((function(){var i,n=$(this),s=n.is(".is-disabled")&&!t.range.includeDisabled,a=n.is(".is-disabled")&&t.range.includeDisabled?" include-disabled":"",o=function(e){return(e=new Date(e)).setHours(0,0,0),e.getTime()},r=o((i=e.getCellDate(n),new Date(i.year,i.month,i.day))),l=o(t.range.first.date),c=o(t.range.second.date);r!==l&&r!==c||s?r>l&&r<c&&!s&&n.addClass("range-selection".concat(a)):n.addClass("is-selected".concat(a).concat(l!==c?" range-selection".concat(r===c?" end-date":""):""))})))},setRangeSelByClick:function(){var e=0,t=this.settings;if(t.range.useRange)if(t.range.first&&t.range.first.date&&t.range.second&&t.range.second.date){if(t.showTime&&this.datepickerApi){var i=function(e){return new Date(e).getTime()},n={time1:i(t.range.first.date),time2:i(t.range.second.date),first:this.datepickerApi.setTime(t.range.first.date),second:this.datepickerApi.setTime(t.range.second.date)};n.time1!==i(n.first)&&(this.datepickerApi.setRangeToElem(n.first,!0),this.datepickerApi.setRangeToElem(n.second,!1),e=2)}e=0===e?1:e}else{var s;if(!t.range.first||t.range.first&&!t.range.first.date)(s=this.dayMap.filter((function(e){return e.elem.is(".is-selected")})))&&s.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),s[0].elem.focus().trigger("click"),e=3);else if(!t.range.second||t.range.second&&!t.range.second.date){if((s=this.days.find("td.range-prev:visible").first()).length||(s=this.days.find("td.range-next:visible").last()),s.length||(s=this.dayMap.filter((function(e){return e.elem.is(".is-selected")}))),s&&s.length)(s[0].elem||s).focus().trigger("click"),e=3}}return e},getCellDate:function(e){var t=parseInt(e.text(),10),i=parseInt(this.header.find(".month").attr("data-month"),10),n=parseInt(this.header.find(".year").text(),10);return e.hasClass("prev-month")?0===i?(i=11,n--):i--:e.hasClass("next-month")&&(11===i?(i=0,n++):i++),{year:n,month:i,day:t}},setRangeSelBeforeFirstSel:function(e){var t=this.settings;t.range.useRange&&$("#monthview-popup:visible")&&(t.range.first||($("td",this.element).removeClass("is-selected"),e.addClass("is-selected")))},activeTabindex:function(e,t){return $("td",this.element).removeAttr("tabindex"),e.attr("tabindex",0),t&&e.focus(),e},updated:function(){return this.teardown().init()},teardown:function(){return this.header.off(),this.days.off(),this.element.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){return this.teardown(),this.element&&(this.element.empty(),$.removeData(this.element[0],"monthview")),this}};var Ti={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,showToday:!0,showViewChanger:!0,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function Si(e,t){this.settings=C.mergeSettings(e,t,Ti),this.element=$(e),this.init()}Si.prototype={init:function(){return this.settings.startDate||(this.settings.startDate=Gt.firstDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.settings.endDate||(this.settings.endDate=Gt.lastDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var e=this,t=M.getLocale(this.settings.language),i=M.getLocale(this.settings.locale);return $.when(i,t).done((function(t,i){e.locale=M.cultures[t]||M.currentLocale,e.language=i||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build()})),this},setCurrentCalendar:function(){return this.currentCalendar=M.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function(){return this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),this},renderAllEvents:function(e){if(!this.settings.onRenderWeek||e){var t=this.settings.events.slice(0);t.sort((function(e,t){return e.starts<t.starts?-1:e.starts>t.starts?1:0})),this.removeAllEvents();for(var i=0;i<t.length;i++){var n=t[i];this.settings.filteredTypes.indexOf(n.type)>-1||this.renderEvent(n)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var e=this;this.settings.onRenderWeek(this.element,(function(t,i){i&&i.length>0&&(e.settings.eventTypes=i),t&&t.length>0&&(e.settings.events=t,e.renderAllEvents(!0))}),{api:e,settings:this.settings})},removeAllEvents:function(){for(var e=this.element[0].querySelectorAll(".calendar-event"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var i=0;i<this.dayMap.length;i++)this.dayMap[i].events=[]},renderEvent:function(e){var t=new Date(e.starts),i=D.padDate(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(e.ends),s=D.padDate(n.getFullYear(),n.getMonth(),n.getDate()),a=this.dayMap.filter((function(e){return e.key>=i&&e.key<=s}));if(e.endKey=s,e.startKey=i,e=Ut.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),1!==a.length||e.isAllDay||this.appendEventToHours(a[0].elem,e),1===a.length&&e.isAllDay&&this.appendEventToAllDay(a[0].elem,e),a.length>1)for(var o=0;o<a.length;o++){var r=0===o?"calendar-event-start":"calendar-event-continue";o===a.length-1&&(r="calendar-event-ends"),this.appendEventToAllDay(a[o].elem,e,r)}},appendEventToAllDay:function(e,t,i){var n=e.querySelector(".week-view-all-day-wrapper");if(n){var s=document.createElement("a");u.addClass(s,"calendar-event",t.color,i),s.setAttribute("data-id",t.id),s.setAttribute("data-key",t.startKey),s.setAttribute("href","#"),"calendar-event-continue"!==i&&"calendar-event-ends"!==i||s.setAttribute("tabindex","-1"),s.innerHTML='<div class="calendar-event-content">\n      '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(t.shortSubject||t.subject,"</span>\n    </div>");var a=n.querySelectorAll(".calendar-event").length;if(a>=1&&(s.style.top="".concat(22*a,"px")),a>2)for(var o=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),r=0;r<o.length;r++)o[r].style.height="".concat(44+23*(a-1),"px");n.appendChild(s),this.attachTooltip(s,t)}},appendEventToHours:function(e,t){for(var i=this.element[0].querySelectorAll("td:nth-child(".concat(e.cellIndex+1,")")),n=0;n<i.length;n++){var s=i[n],a=parseFloat(s.parentNode.getAttribute("data-hour"),10),o=Math.round(t.startsHour);if(o>t.startsHour?a===o-.5:a===o){var r=t.endsHour-t.startsHour,l="",c=document.createElement("a");if(u.addClass(c,"calendar-event",t.color),c.setAttribute("data-id",t.id),c.setAttribute("data-key",t.startKey),c.setAttribute("href","#"),r<.5&&u.addClass(c,"reduced-padding",t.color),r<1.5&&u.addClass(c,"is-ellipsis"),r>2&&(l=" ".concat(M.formatHourRange(t.startsHour,t.endsHour,{locale:this.locale}))),t.startsHour+r>this.settings.endHour&&(u.addClass(c,"is-cutoff",t.color),r=this.settings.endHour+1-t.startsHour),r<.25&&(r=.25),t.startsHour>a){var d=t.startsHour-a,h=s.parentNode.offsetHeight;c.style.top="".concat(d/.016666666666666784*(h/30),"px")}c.style.height="".concat(2*r*25+1.5*r,"px"),c.innerHTML='<div class="calendar-event-content">\n          '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n          <span class="calendar-event-title">').concat(t.shortSubject||t.subject).concat(l,"</span>\n        </div>");var p=s.querySelector(".week-view-cell-wrapper"),g=s.querySelectorAll(".calendar-event"),f=g.length;if(f>0){var m=100/(f+1),v=0;for(v=0;v<f;v++)g[v].style.width="".concat(m,"%"),v>0&&this.isRTL&&(g[v].style.right="".concat(m*v,"%")),v>0&&!this.isRTL&&(g[v].style.left="".concat(m*v,"%"));c.style.width="".concat(m,"%"),this.isRTL?c.style.right="".concat(m*v,"%"):c.style.left="".concat(m*v,"%")}p.appendChild(c),this.attachTooltip(c,t)}}},attachTooltip:function(e,t){var i=this;if("overflow"!==this.settings.iconTooltip){var n=e.querySelector(".calendar-event-icon");n&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:t}):t[this.settings.iconTooltip]&&(n.setAttribute("title",t[this.settings.iconTooltip]),$(n).tooltip({content:n.innerText})))}"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:t}):t[this.settings.eventTooltip]&&(e.setAttribute("title",t[this.settings.eventTooltip]),$(e).tooltip({content:e.innerText}))),t.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(e.setAttribute("title",t.subject),$(e).tooltip({beforeShow:function(e,t){var n=t[0].querySelector(".calendar-event-title"),s=t[0].querySelector(".calendar-event-icon"),a=s?s.querySelector(".icon").getAttribute("data-status"):"";n.offsetWidth>t[0].scrollWidth-(s?s.offsetWidth:0)?e("".concat(n.innerText).concat(a?" (".concat(M.translate(a,{locale:i.locale.name},!1),")"):"")):e(!1)}}))},showWeek:function(e,t){var i=this;this.numberOfDays=Math.round((t-e)/864e5),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view"),0!==this.numberOfDays&&1!==this.numberOfDays||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.weekHeader='<thead class="week-view-table-header"><tr><th><div class="week-view-header-wrapper"><span class="audible">'.concat(M.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(M.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var n=new Date(e.getTime());n<=t;n.setDate(n.getDate()+1)){var s=M.formatDate(n,{pattern:"d",locale:this.locale.name}),a=M.formatDate(n,{pattern:"EEE",locale:this.locale.name}),o=this.currentCalendar.dateFormat.dayOfWeek,r=o?"EEE"===o.split(" ")[0]:"d EEE";this.weekHeader+='<th data-key="'.concat(D.padDate(n.getFullYear(),n.getMonth(),n.getDate()),'"><div class="week-view-header-wrapper').concat(Gt.isToday(n)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(r?"":" is-emphasis",'">').concat(r?a:s,'</span><span class="week-view-header-day-of-week').concat(r?" is-emphasis":"",'">').concat(r?s:a,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var l=this.settings.startHour;l<=this.settings.endHour;l++){for(var c='<tr class="week-view-hour-row" data-hour="'.concat(l,'"><td><div class="week-view-cell-wrapper">').concat(M.formatHour(l,{locale:this.locale}),"</div></td>"),d='<tr class="week-view-half-hour-row" data-hour="'.concat(l,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),h=new Date(e.getTime());h<=t;h.setDate(h.getDate()+1))c+='<td><div class="week-view-cell-wrapper"></div></td>',d+='<td><div class="week-view-cell-wrapper"></div></td>';c+="</tr>",d+="</tr>",this.weekBody+=c+d}this.weekBody+="</tbody>",this.weekContainer='<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>"),this.element.find(".week-view-container").remove();var u={isDayView:this.isDayView,startDate:e,endDate:t,elem:this.element,api:this};this.element.append(this.weekContainer).trigger("weekrendered",u),this.settings.onChangeWeek&&this.settings.onChangeWeek(u),this.element.find("th").each((function(e,t){var n=t.getAttribute("data-key");n&&i.dayMap.push({key:n,elem:t})})),this.addTimeLine(),this.showToolbarMonth(e,t),this.renderAllEvents(),this.settings.startDate=e,this.settings.endDate=t},showToolbarMonth:function(e,t){var i=M.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),n=M.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),s=M.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),a=M.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),o=M.formatDate(t,{date:"year",locale:this.locale.name});n!==i&&(o="".concat(M.formatDate(e,{pattern:"MMM",locale:this.locale.name})," - ").concat(M.formatDate(t,{pattern:"MMMM yyyy",locale:this.locale.name}))),a!==s&&(o="".concat(M.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name})," - ").concat(M.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name}))),this.monthField.text(o)},addTimeLine:function(){var e=this;if(this.settings.showTimeLine){var t=function(){var t=new Date,i=t.getHours(),n=t.getMinutes(),s=i-e.settings.startHour+n/60;e.markers.css("top",52*s)};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),t(),this.timer=setInterval((function(){t()}),3e4))}},addToolbar:function(){var e=this;this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new xi(this.calendarToolbarEl[0],{onOpenCalendar:function(){return e.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,viewChangerValue:this.isDayView?"day":"week"}),this.monthField=this.header.find("#monthview-datepicker-field")},handleEvents:function(){var e=this;this.element.off("updated.".concat("weekview")).on("updated.".concat("weekview"),(function(){e.updated()})),this.element.off("change-date.".concat("weekview")).on("change-date.".concat("weekview"),(function(t,i){var n=i.isToday?new Date:i.selectedDate;e.isDayView?(e.settings.startDate=n,e.settings.endDate=n):(e.settings.startDate=e.hasIrregularDays?n:Gt.firstDayOfWeek(n,e.settings.firstDayOfWeek),e.settings.startDate.setHours(0,0,0,0),e.settings.endDate=new Date(e.settings.startDate),e.settings.endDate.setDate(e.settings.endDate.getDate()+e.numberOfDays-1),e.settings.endDate.setHours(23,59,59,59)),e.showWeek(e.settings.startDate,e.settings.endDate)})),this.element.off("change-next.".concat("weekview")).on("change-next.".concat("weekview"),(function(){e.advanceDays(!0)})),this.element.off("change-prev.".concat("weekview")).on("change-prev.".concat("weekview"),(function(){e.advanceDays(!1)}));var t=function(t,i){var n=t.getAttribute("data-id"),s=e.settings.events.filter((function(e){return e.id===n}));s&&0!==s.length&&e.element.trigger(i,{settings:e.settings,event:s[0]})};return this.element.off("click.".concat("weekview")).on("click.".concat("weekview"),".calendar-event",(function(e){t(e.currentTarget,"eventclick"),e.preventDefault()})),this.element.off("dblclick.".concat("weekview")).on("dblclick.".concat("weekview"),".calendar-event",(function(e){t(e.currentTarget,"eventdblclick")})),this},advanceDays:function(e){var t=this.isDayView?1:this.numberOfDays;e||(t=-t),this.settings.startDate.setDate(this.settings.startDate.getDate()+t),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+t),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(e){e.startsLocale||(e=Ut.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes)),Ut.cleanEventData(e,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e)},selectHeader:function(e){var t=e instanceof Date?D.padDate(e.getFullYear(),e.getMonth(),e.getDate()):e,i={all:".week-view-table-header th"};i.current="".concat(i.all,'[data-key="').concat(t,'"]'),[].slice.call(this.element[0].querySelectorAll(i.all)).forEach((function(e){e.classList.remove("is-selected")}));var n=this.element[0].querySelector(i.current);n&&n.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&(this.settings.events[i]=C.extend(!0,this.settings.events[i],e),Ut.cleanEventData(this.settings.events[i],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&this.settings.events.splice(i,1);this.renderAllEvents()},updated:function(e){return e||(e={}),e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),e.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],"weekview"),this}};var $i={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,mobileTemplate:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0}};function Ai(e,t){this.settings=C.mergeSettings(e,t,$i),this.element=$(e),this.init()}Ai.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents().addEventLegend(),this},setLocaleThenBuild:function(){var e=this,t=M.getLocale(this.settings.language),i=M.getLocale(this.settings.locale);return $.when(i,t).done((function(t,i){e.locale=M.cultures[t]||M.currentLocale,e.language=i||e.settings.language||e.locale.language,e.settings.language=e.language,e.setCurrentCalendar(),e.build().handleEvents()})),this},setCurrentCalendar:function(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},addEventLegend:function(){var e=this.settings;this.eventLegend=$('<div class="calendar-event-legend"></div>'),this.monthviewTable=$(".monthview-table");for(var t=0;t<e.eventTypes.length;t++){var i=e.eventTypes[t],n=i.color,s=""+'<div class="calendar-event-legend-item">\n          <span class="calendar-event-legend-swatch '.concat(n,'"></span>\n          <span class="calendar-event-legend-text">').concat(i.label,"</span>\n        </div>");this.eventLegend.append(s)}this.monthviewTable.after(this.eventLegend)},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;for(var e="",t=0;t<this.settings.eventTypes.length;t++){var i=this.settings.eventTypes[t];e+='<input type="checkbox" class="checkbox '.concat(i.color,'07" name="').concat(i.id,'" id="').concat(i.id,'" ').concat(i.checked?'checked="true"':""," ").concat(i.disabled?'disabled="true"':"",' />\n        <label for="').concat(i.id,'" class="checkbox-label">').concat(i.translationKey?M.translate(i.translationKey,{locale:this.locale.name,language:this.language}):i.label,"</label><br/>")}return this.eventTypeContainer.innerHTML=e,this},renderMonthView:function(){var e=this;return this.monthViewContainer=document.querySelector(".calendar .calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(t){e.settings.onChangeView?e.settings.onChangeView(t):e.changeView(t.viewName)},this.monthView=new ki(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),this},renderWeekView:function(){var e=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(t){e.settings.onChangeView?e.settings.onChangeView(t):e.changeView(t.viewName)};var t=Gt.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),i=Gt.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return t.setHours(0,0,0,0),i.setHours(23,59,59,999),this.weekView=new Si(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:t,endDate:i,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(t){e.monthView.selectDay(t.startDate,!1,!0)},this.weekView.renderAllEvents(),this},changeView:function(e){if(e!==this.activeView&&this.weekViewContainer){var t=this.currentDate(),i=new Date(t),n=new Date(t);switch(i.setHours(0,0,0,0),n.setHours(23,59,59,999),e){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(i,n),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",i=Gt.firstDayOfWeek(i,this.settings.firstDayOfWeek),n=Gt.lastDayOfWeek(i,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(i,n),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(t,!1,!0),this.weekView.selectHeader(t);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(t,!1,!0)}}},appendUpcomingEvent:function(e){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(e.daysUntil>0)){var t=Math.abs(e.daysUntil);if(!(t<0||t>this.settings.upcomingEventDays)){var i=document.createElement("a");i.setAttribute("href","#"),i.setAttribute("data-key",e.startKey),u.addClass(i,"calendar-upcoming-event");var n="",s=M.formatDate(e.starts,{pattern:"d",locale:this.locale.name}),a=M.formatDate(e.ends,{pattern:"d",locale:this.locale.name}),o="".concat(M.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(s===a?s:"".concat(s,"-").concat(a),", ").concat(M.formatDate(e.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(a,10)<parseInt(s,10)){var r=new Date(e.starts);r.setDate(1),r.setMonth(r.getMonth()+1);var l=r.getFullYear();o="".concat(M.formatDate(e.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(s," - ").concat(M.formatDate(r,{pattern:"MMMM",locale:this.locale.name})," ").concat(a,", ").concat(l)}n+='\n      <span class="calendar-upcoming-date">'.concat(o,'</span>\n      <span class="calendar-upcoming-event-color ').concat(e.color||"",'">').concat(e.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(e.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(e.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(e.isDays?e.duration:e.durationHours," ").concat(e.durationUnits||"","</span>"),i.innerHTML=n,this.upcomingEventsContainer.appendChild(i)}}},renderEventDetails:function(e,t){if(this.settings.events&&"month"===this.activeView){var i=this.settings.events.filter((function(t){return t.id===e}));if(i&&0!==i.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var n=$.extend(!0,{},i[0]);n.durationHours&&!n.isDays&&Ut.formateTimeString(n,this.locale,this.language),this.renderTmpl(n,this.settings.template,this.eventDetailsContainer,t>1),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsMobileContainer&&this.renderTmpl(n,this.settings.mobileTemplate,this.eventDetailsMobileContainer,t>1);var s=$(this.eventDetailsContainer).data("accordion");s&&s.destroy(),$(".calendar .list-detail").css("display","block"),$(this.eventDetailsContainer).accordion(),this.eventDetailsMobileContainer&&$(this.eventDetailsMobileContainer).addClass("listview").listview({selectable:!1,hoverable:!1}),u.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click")}}},renderSelectedEventDetails:function(){var e=this.getDayEvents();if(this.clearEventDetails(),e.events&&0!==e.events.length)for(var t=0;t<e.events.length;t++)this.renderEventDetails(e.events[t].id,e.events.length)},renderDay:function(e){this.monthView.selectDay(e);var t=new Date(this.currentDate()),i=new Date(this.currentDate());t.setHours(0,0,0,0),i.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(t,i),"week"===this.activeView&&(t=Gt.firstDayOfWeek(t,this.settings.firstDayOfWeek),i=Gt.lastDayOfWeek(t,this.settings.firstDayOfWeek),this.weekView.showWeek(t,i))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var e=[];if(!this.eventTypeContainer)return e;for(var t=this.eventTypeContainer.querySelectorAll(".checkbox"),i=0;i<t.length;i++){var n=t[i];n.checked||e.push(n.getAttribute("id"))}return e},renderAllEvents:function(e){if(this.settings.onRenderMonth&&!e)return this.callOnRenderMonth(),this;var t=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var i=this.settings.events.slice(0);i.sort((function(e,t){return e.starts<t.starts?-1:e.starts>t.starts?1:0}));for(var n=0;n<i.length;n++){var s=i[n];t.indexOf(s.type)>-1||this.renderEvent(s)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=t,this.weekView.renderAllEvents()),this},renderEvent:function(e){var t=M.newDateObj(e.starts),i=D.padDate(t.getFullYear(),t.getMonth(),t.getDate()),n=M.newDateObj(e.ends),s=D.padDate(n.getFullYear(),n.getMonth(),n.getDate()),a=this.monthView.dayMap.filter((function(e){return e.key>=i&&e.key<=s}));e.endKey=s,e.startKey=i,e=Ut.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes);for(var o=-1,r=0;r<this.monthView.dayMap.length;++r)if(this.monthView.dayMap[r].key>=i&&this.monthView.dayMap[r].key<=s){o=r;break}if(1===a.length&&this.appendEvent(a[0].elem[0],e,"event-day-start-end",o),a.length>1)for(var l=0;l<a.length;l++){var c=0===l?"event-day-start":"event-day-span";a.length-1===l&&(c="event-day-end"),this.appendEvent(a[l].elem[0],e,c,o+l)}this.appendUpcomingEvent(e,a,o)},removeAllEvents:function(){for(var e=this.monthViewContainer.querySelectorAll(".calendar-event-more"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);for(var i=this.monthViewContainer.querySelectorAll(".calendar-event"),n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n]);for(var s=0;s<this.monthView.dayMap.length;s++)this.monthView.dayMap[s].events=[]},appendEvent:function(e,t,i,n){var s,a=this,o=e.querySelectorAll(".calendar-event").length;if(n>-1&&(this.monthView.dayMap[n].events||(this.monthView.dayMap[n].events=[]),this.monthView.dayMap[n].events.push(t)),o>=2){var r=e.querySelector(".calendar-event-more"),l=function(e,t){e.setAttribute("data-count",t),e.innerHTML="<span>+ ".concat(t," ").concat(M.translate("More",{locale:a.locale.name,language:a.language}).replace("...",""),"</span>")};return r?l(r,parseInt(r.getAttribute("data-count"),10)+1):(s=document.createElement("span"),u.addClass(s,"calendar-event-more"),l(s,1),e.querySelector(".day-container").appendChild(s),$(e).off("click.".concat("calendar")).on("click.".concat("calendar"),".calendar-event-more span",(function(){var e=a.monthView.dayMap[n].key;a.monthView.selectDay(e,!1,!0),a.changeView("day")}))),this}if(s=document.createElement("a"),u.addClass(s,"calendar-event",t.color,i),s.setAttribute("data-id",t.id),s.setAttribute("data-key",t.startKey),s.innerHTML='<div class="calendar-event-content">\n      '.concat(t.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(t.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(t.status,'"><use href="#').concat(t.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(t.shortSubject||t.subject,"</span>\n    </div>"),e.querySelector(".day-container").appendChild(s),"overflow"!==this.settings.iconTooltip){var c=s.querySelector(".calendar-event-icon");c&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.iconTooltip]&&(c.setAttribute("title",t[this.settings.iconTooltip]),$(c).tooltip({content:c.innerText})))}return"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:t}):t[this.settings.eventTooltip]&&(s.setAttribute("title",t[this.settings.eventTooltip]),$(s).tooltip({content:s.innerText}))),t.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(s.setAttribute("title",t.subject),$(s).tooltip({beforeShow:function(e,t){var i=t[0].querySelector(".calendar-event-title"),n=t[0].querySelector(".calendar-event-icon"),s=n?n.querySelector(".icon").getAttribute("data-status"):"";i.offsetWidth>t[0].scrollWidth-(n?n.offsetWidth:0)?e("".concat(i.innerText).concat(s?" (".concat(M.translate(s,{locale:a.locale.name,language:a.language},!1),")"):"")):e(!1)}})),this},getEventTypeLabel:function(e){var t="";if(!e)return t;var i=this.settings.eventTypes.filter((function(t){return t.id===e}));return 1===i.length&&(t=i[0].label),t},handleEvents:function(){var e=this,t=this;this.element.off("updated.".concat("calendar")).on("updated.".concat("calendar"),(function(){e.updated()})),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat("calendar")).on("monthrendered.".concat("calendar"),(function(t,i){e.isSwitchingMonth=!0,e.modalVisible()&&e.removeModal(),e.settings.year=i.year,e.settings.month=i.month,e.renderAllEvents(),setTimeout((function(){e.isSwitchingMonth=!1}),500)})),this.element.off("change.".concat("calendar")).on("change.".concat("calendar"),".checkbox",(function(){e.renderAllEvents(!0)})),$(this.monthViewContainer).off("selected.".concat("calendar")).on("selected.".concat("calendar"),(function(){e.renderSelectedEventDetails()})),this.element.off("click.".concat("calendar","-upcoming")).on("click.".concat("calendar","-upcoming"),".calendar-upcoming-event",(function(t){var i=t.currentTarget.getAttribute("data-key");e.renderDay(i)})),this.element.off("contextmenu.".concat("calendar")).on("contextmenu.".concat("calendar"),".calendar-event",(function(i){i.stopPropagation();var n=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0},s=i.currentTarget.getAttribute("data-id"),a=e.settings.events.filter((function(e){return e.id===s}));if(e.element.triggerHandler("contextmenu",{originalEvent:i,month:e.settings.month,year:e.settings.year,event:a[0]}),!C.isSubscribedTo(t.element[0],i,"contextmenu","calendar")&&!n())return!0;if(i.preventDefault(),t.closePrevPopupmenu(),!n())return!0;var o=$(i.currentTarget);return o.popupmenu({attachToBody:!0,menuId:e.settings.menuId,eventObj:i,trigger:"immediate",offset:{y:5}}),o.off("selected.calendar").on("selected.calendar",(function(e,i){if(t.settings.menuSelected&&t.settings.menuSelected(e,i,s),"delete-event"===i.attr("data-action")&&t.deleteEvent({id:s}),"show-event"===i.attr("data-action")){var n=this.getAttribute("data-key");t.monthView.selectDay(n)}})),!1}));var i=0,n=!1;return this.element.off("click.".concat("calendar","-event")).on("click.".concat("calendar","-event"),".calendar-event",(function(s){i=setTimeout((function(){if(!n){var i=s.currentTarget.getAttribute("data-id"),a=e.settings.events.filter((function(e){return e.id===i}));if(!a||0===a.length)return;var o=$(s.currentTarget),r=o.find(".calendar-event-title");(s.currentTarget.classList.contains("event-day-span")||s.currentTarget.classList.contains("event-day-end"))&&(r=t.element.find('.event-day-start[data-id="'.concat(o.attr("data-id"),'"] .calendar-event-title'))),e.showModalWithCallback(a[0],!1,r),e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:a[0]})}n=!1}),100)})),this.element.off("dblclick.".concat("calendar","-event")).on("dblclick.".concat("calendar","-event"),".calendar-event",(function(t){clearTimeout(i),n=!0;var s=t.currentTarget.getAttribute("data-id"),a=e.settings.events.filter((function(e){return e.id===s}));a&&0!==a.length&&e.element.trigger("eventdblclick",{month:e.settings.month,year:e.settings.year,event:a[0]})})),this.element.off("dblclick.".concat("calendar")).on("dblclick.".concat("calendar"),"td",(function(t){var i=t.currentTarget.getAttribute("data-key");if(i&&!e.isSwitchingMonth){var n=new Date(i.substr(0,4),i.substr(4,2)-1,i.substr(6,2)),s=C.extend({},e.settings.newEventDefaults);s.startKey=i,s.endKey=i,s.starts=n,s.ends=n,t.stopPropagation(),Ut.cleanEventData(s,!1,e.currentDate(),e.locale,e.language,e.settings.events,e.settings.eventTypes),e.showModalWithCallback(s,!0),e.element.triggerHandler("dblclick",{eventData:s,api:e})}})),this.element.find(".listview").off("click.".concat("calendar","-mobile")).on("click.".concat("calendar","-mobile"),(function(t){var i=$(t.target).closest("li"),n=i.attr("data-id"),s=e.settings.events.filter((function(e){return e.id===n}));s&&0!==s.length&&(e.showModalWithCallback(s[0],!1,i),e.element.triggerHandler("eventclick",{month:e.settings.month,year:e.settings.year,event:s[0]}))})),this},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(e){var t=$(e);t.data("popupmenu")&&t.trigger("close")}))},callOnRenderMonth:function(){var e=this;this.settings.onRenderMonth(this.element,(function(t,i){i&&i.length>0&&(e.settings.eventTypes=i,e.weekView&&(e.weekView.settings.eventTypes=i),e.renderEventTypes()),t&&t.length>0&&(e.settings.events=t,e.renderAllEvents(!0),e.weekView&&(e.weekView.settings.events=t,e.weekView.renderAllEvents(!0)))}),{api:e,month:this.settings.month,year:this.settings.year})},currentDate:function(){var e=this.isIslamic?this.monthView.currentIslamicDate:this.monthView.currentDate;return M.isValidDate(e)?e:new Date},getDayEvents:function(e){e||(e=this.currentDate()),"string"==typeof e||this.isRTL||(e=D.padDate(e.getFullYear(),e.getMonth(),e.getDate())),this.isRTL&&(e=D.padDate(e[0],e[1],e[2]));var t=this.monthView.dayMap.filter((function(t){return t.key===e}));"month"!==this.activeView&&(t=this.weekView.dayMap.filter((function(t){return t.key===e})));var i={date:this.monthView.currentDate,events:[]};return 0===t.length?[]:(i.events=t[0].events,i.elem=t[0].elem,i)},renderTmpl:function(e,t,n,s){if("object"===i(gt)&&t){t instanceof $?t="".concat(t.html()):"string"==typeof t&&(D.containsHTML(t)||(t=$("#".concat(t)).html())),e.color=Ut.getEventTypeColor(e.type,this.settings.eventTypes),e.startsLong=M.formatDate(e.starts,{date:"long",locale:this.locale.name}),e.endsLong=M.formatDate(e.ends,{date:"long",locale:this.locale.name}),e.startsHoursLong="".concat(M.formatDate(e.starts,{date:"long",locale:this.locale.name})," ").concat(M.formatDate(e.starts,{date:"hour",locale:this.locale.name})),e.endsHoursLong="".concat(M.formatDate(e.ends,{date:"long",locale:this.locale.name})," ").concat(M.formatDate(e.ends,{date:"hour",locale:this.locale.name})),e.typeLabel=this.getEventTypeLabel(e.type);var a=gt.compile(t,{event:e});n.classList.remove("has-only-one"),s?u.append(n,a,"*"):(n.innerHTML=a,n.classList.add("has-only-one"))}},addEvent:function(e){Ut.cleanEventData(e,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(e),this.renderEvent(e),this.renderSelectedEventDetails(),this.weekView&&this.weekView.addEvent(e)},updateEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&(this.settings.events[i]=C.extend(!0,this.settings.events[i],e),Ut.cleanEventData(this.settings.events[i],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(e)},deleteEvent:function(e){for(var t=e.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===t&&this.settings.events.splice(i,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(e)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},showEventModal:function(e,t,i){var n=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),u.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),e=Ut.addCalculatedFields(e,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(e||{},this.settings.modalTemplate,this.modalContents);var s=this.getDayEvents(),a=!0;s.elem=$(s.elem);var o=6===s.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";i||"day"!==this.activeView||(i=$(".week-view-header-wrapper"),o=this.isRTL?"left":"right"),i||(i=s.elem);var r=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:i,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:o},title:e.title||e.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:e.color,initializeContent:!1};i.off("hide.calendar").on("hide.calendar",(function(){a?n.removeModal():(t(n.modalContents,e),n.element.trigger("hidemodal",{elem:n.modalContents,event:e}),n.removeModal(),a=!0)})).popover(r).off("show.calendar").on("show.calendar",(function(t,s){n.element.trigger("showmodal",{elem:n.modalContents,event:e}),s.find("#isAllDay").off().on("click.calendar",(function(e){$(e.currentTarget).prop("checked")?(s.find("#durationHours").prop("disabled",!0),s.find("#endsHourLocale").prop("disabled",!0),s.find("#startsHourLocale").prop("disabled",!0)):(s.find("#durationHours").prop("disabled",!1),s.find("#endsHourLocale").prop("disabled",!1),s.find("#startsHourLocale").prop("disabled",!1))})),s.find("#type").val(e.type).dropdown(),s.find("#comments").val(e.comments),s.find("#subject").focus(),s.find("button").on("click",(function(e){var t=i.data("tooltip"),n=e.currentTarget.getAttribute("data-action");a="submit"!==n,t&&t.hide(!0)})),s.find(".datepicker").datepicker({locale:n.settings.locale,language:n.settings.language}),s.find(".timepicker").timepicker({locale:n.settings.locale,language:n.settings.language}),s.find('[data-translate="text"]').each((function(e,t){var i=$(t);i.text(M.translate(i.attr("data-translate-key")||i.text(),{showAsUndefined:!1,showBrackets:!1,language:n.settings.language,locale:n.settings.locale}))}))})),$("#calendar-popup").one("tooltipafterplace.calendar",(function(e,t){var i=t.element.find(".arrow"),n=parseInt(i.css("margin-top"),10);if(s.elem.parent().index()>=3){var a=parseInt(t.element.offset().top,10),o=a+t.element.height(),r=$("html").height()+10;if(o>r){var l=a-(o-r)-25;t.element.css("top","".concat(l,"px")),i.css("margin-top","".concat(n+(a-l)-18,"px"))}}else t.element.height()>580&&i.css("margin-top","".concat(n-18,"px"))})),this.activeElem=i}},showModalWithCallback:function(e,t,i){var n=this;this.showEventModal(e,(function(e,i){for(var s=e.querySelectorAll("input, textarea, select"),a=0;a<s.length;a++)i[s[a].id]="checkbox"===s[a].getAttribute("type")?s[a].checked:s[a].value;t?n.addEvent(i):n.updateEvent(i)}),i)},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("tooltip")&&this.activeElem.data("tooltip").destroy()),u.remove(document.getElementById("calendar-popup")),u.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||(e={}),e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),e.locale||e.template||e.upcomingEventDays||e.mobileTemplate?(this.destroy().init(),this):(this.weekView&&e.events&&(this.weekView.settings.events=e.events),this.weekView&&e.eventTypes&&(this.weekView.settings.events=e.events),this.weekView&&e.weekViewSettings&&(this.weekView.settings=C.mergeSettings(this.element[0],e.weekViewSettings,this.weekViews.settings)),this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&e.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],"calendar"),this}},$.fn.calendar=function(e){return this.each((function(){var t=$.data(this,"calendar");t?t.updated(e):t=$.data(this,"calendar",new Ai(this,e))}))};var Di={slidesToShow:1,startingSlide:null,loop:!1};function Ei(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Di),this.init()}Ei.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView())},setElements:function(){var e=this.settings;this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=e.slidesToShow,this.slides=[],this.isVisible=!0;for(var t=0,i=this.slidesJQ.length;t<i;t++)this.slides.push({node:$(this.slidesJQ[t])});this.activeIndex=null!==e.startingSlide&&e.startingSlide>-1&&e.startingSlide<this.slides.length?e.startingSlide:0},createControls:function(){for(var e,t,i,n,s,a,o,r,l,c=this.slides.length,d='<div class="controls">',h="",u=0,p=0,g=c;p<g;p+=this.slidesToShow){t="",u++,r=1===this.slidesToShow||c-p==1,n=M.translate(r?"SlideOf":"SlidesOf"),i=r?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var f=0;f<this.slidesToShow&&p+f<c;f++)t+="".concat(p+f+1,", ");n=n.replace(r?"{1}":"{2}",c),i=i.replace(r?"{1}":"{2}",c),o=(t=t.slice(0,-2)).lastIndexOf(","),a=t.substr(o+2),r?(l="",(e=this.slides[p].node).is(".is-disabled, [disabled]")&&!e.is('[disabled="false"]')&&(l=' disabled tabindex="-1"',this.slides[p].isDisabled=!0),e.is(".active")&&null===this.settings.startingSlide&&""===l&&(this.activeIndex=p),n=(s=e.attr("data-button-text"))&&s.length?s:n.replace("{0}",t),i=i.replace("{0}",t)):(t=t.substr(0,o),n=n.replace("{1}",a).replace("{0}",t),i=i.replace("{1}",a).replace("{0}",t)),i=i.toLowerCase().replace(/[\s,--]+/g,"-"),h+='<a href="'.concat(i,'" class="control-button hyperlink hide-focus"').concat(l,'><span class="audible">').concat(n,"</span></a>")}d+="".concat(h,"</div>"),this.isBulletsNav=this.element.width()>29*u;var m=$(".btn-previous",this.element),v=$(".btn-next",this.element);this.isBulletsNav?m.add(v).remove():(m.length||(d+=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(M.translate("Previous"),"</span>\n          </button>")),v.length||(d+=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(M.translate("Next"),"</span>\n          </button>"))),this.activeIndex>0&&this.activeIndex>u-1&&(this.activeIndex=u-1),u>1&&this.element.append(d)},isVisibleInContainer:function(e){if(e&&e[0]){var t=e[0].getBoundingClientRect(),i=this.element[0].getBoundingClientRect();return t.left>i.left&&t.left<i.left+i.width&&t.top>i.top&&t.top<i.top+i.height}return-1},updateSlidesToShow:function(e){if(this.isActive)return this.settings.slidesToShow=e||1,this.updated(),this},responsiveSlidesToShow:function(e){var t=this;this.isActive&&(this.slidesToShow=e||this.settings.slidesToShow,this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout((function(){t.createControls(),t.handleEvents(),t.initActiveSlide(),t.showCollapsedView()}),0))},show:function(e){if(this.isActive){e=void 0!==e?e:this.activeIndex,this.activeIndex=e;var t=e>0?"".concat((M.isRTL()?"":"-")+100*e,"%"):0;this.controlButtons.removeClass("is-active").eq(e).addClass("is-active"),this.container[0].style.left=t,this.isBulletsNav?(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")):(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(e).find("span").removeClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(e).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var e,t=this;if(e=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[e].isDisabled)return setTimeout((function(){t.prev()}),0),this.activeIndex=e,!1;this.show(e)},next:function(){var e,t=this;if(e=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[e].isDisabled)return setTimeout((function(){t.next()}),0),this.activeIndex=e,!1;this.show(e)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var e=0,t=this.slidesJQ.length;e<t;e++)this.slidesJQ[e].style.width="".concat(100/this.slidesToShow/this.slides.length,"%");this.show()}},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show(),this.slidesJQ.addClass("is-visible")},unbind:function(){return $("body").off("resize.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons&&this.controlButtons.off("click.circlepager keydown.circlepager"),$(".btn-previous, .btn-next",this.element).off("click.circlepager"),$(".controls",this.element).remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Di)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"circlepager")},handleEvents:function(){var e=this,t=this;$(".btn-previous",this.element).on("click.circlepager",(function(t){e.prev(),t.stopImmediatePropagation()})),$(".btn-next",this.element).on("click.circlepager",(function(t){e.next(),t.stopImmediatePropagation()})),this.controlButtons=$(".control-button",this.element);for(var i=function(t,i){var n=$(e.controlButtons[t]);n.hideFocus(),n.on("click.circlepager",(function(i){i.preventDefault(),e.slides[t].isDisabled||e.show(t)}))},n=0,s=this.controlButtons.length;n<s;n++)i(n);this.element.on("focus.circlepager","*",(function(e){var i=!1;if(!t.isVisibleInContainer($(this)))for(var n=t.element.find(":focusable"),s=0,a=n.length;s<a;s++)if(t.isVisibleInContainer(n.eq(s))){n.eq(s).focus(),i=!0;break}if(e.stopPropagation(),i)return!1})),this.element.on("keydown.circlepager","*",(function(e){var i=!1,n=e.which||e.keyCode||e.charCode||0,s=$(":focusable"),a=s.index(this);if(9===n)if(e.shiftKey){for(var o=a-1;o>=0;o--)if(t.element.has(s.eq(o)).length<1||t.isVisibleInContainer(s.eq(o))){s.eq(o).focus(),i=!0;break}}else t.isVisibleInContainer(s.eq(a+1))||(t.controlButtons.first().focus(),i=!0);if(e.stopPropagation(),i)return!1})),this.controlButtons.on("keydown.circlepager",(function(e){var i=!1,n=e.which||e.keyCode||e.charCode||0,s=M.isRTL();if(-1!==[37,39].indexOf(n)&&(t.isFocus=!0,e.altKey?37===n&&!s||39===n&&s?t.first():t.last():(!s&&37===n||s&&39===n?t.prev():t.next(),i=!0)),i)return e.preventDefault(),e.stopPropagation(),!1})),$("body").on("resize.circlepager",(function(){t.responsiveSlidesToShow()})),t.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",(function(){t.responsiveSlidesToShow()}))}},$.fn.circlepager=function(e){return this.each((function(){var t=$.data(this,"circlepager");t?t.updated(e):t=$.data(this,"circlepager",new Ei(this,e))}))},$.fn.calendartoolbar=function(e){return this.each((function(){var t=$.data(this,"calendartoolbar");t?t.updated(e):t=$.data(this,"calendartoolbar",new xi(this,e))}))};var Ii={breakpoint:"phone-to-tablet",trigger:null,expandedText:M.translate("ShowLess"),collapsedText:M.translate("ShowMore")};function Li(e,t){this.settings=C.mergeSettings(e,t,Ii),this.element=$(e),this.init(),R("CompositeForm")}Li.prototype={init:function(){return this.build().handleEvents()},build:function(){var e=this.element[0].classList;e.contains("composite-form")||e.add("composite-form");var t=this.element.find(".expandable-area");return t.length?(this.hasSummary=!0,this.expandableArea=t,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var e=this;function t(){var t=e.expandableAreaAPI.isExpanded();e.setExpanderText(e.settings[t?"expandedText":"collapsedText"])}return $("body").off("resize.".concat("compositeform")).on("resize.".concat("compositeform"),(function(t){e.checkResponsive(t)})),this.element.on("updated.".concat("compositeform"),(function(){e.updated()})),this.hasSummary&&this.expandableArea.on("expand.".concat("compositeform"),t).on("collapse.".concat("compositeform"),t),this},checkResponsive:function(){var e=this.element[0].classList;p.isBelow(this.settings.breakpoint)?e.add("is-in-responsive-mode"):(e.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(e){if(this.hasSummary&&e instanceof String&&e.length){var t=this.expander.find("span");t||(t=this.expander),t.text(e)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat("compositeform")),this.element.off("updated.".concat("compositeform")),this.hasSummary&&this.expandableArea.off("expand.".concat("compositeform"," collapse.").concat("compositeform")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"compositeform")}},$.fn.compositeform=function(e){return this.each((function(){var t=$.data(this,"compositeform");t?t.updated(e):t=$.data(this,"compositeform",new Li(this,e))}))};var Pi={content:null,initializeContent:!0,title:"Contextual Action Panel",modalSettings:{buttons:null,centerTitle:!1,id:null,showCloseBtn:!1,trigger:"click",useFlexToolbar:!1}},Mi=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function Bi(e){var t={showCloseButton:"showCloseBtn"};return Mi.forEach((function(i){if(-1===[null,void 0].indexOf(e[i])){var n=i;e.modalSettings||(e.modalSettings={}),t[i]?(n=t[i],e.modalSettings[n]=e[i]):e.modalSettings[i]=e[i],delete e[i],O("settings.modalSettings.".concat(n),"settings.".concat(i))}})),e}function Oi(e,t){this.settings=C.mergeSettings(e,t,Pi),this.settings=Bi(this.settings),this.element=$(e),this.init()}Oi.prototype={get modalAPI(){var e;return this.panel&&this.panel.length&&(e=this.panel.data("modal")),e},init:function(){this.setup().build().handleEvents()},setup:function(){var e,t=this.element.next(".contextual-action-panel"),i=this.id;return"string"==typeof dataModal&&(e=$("#".concat(i))).length&&(t=e),1===this.element.closest(".popupmenu").length&&(t=this.element.closest(".popupmenu").next(".contextual-action-panel")),t[0]&&(t[0].style.display="none",t.addClass("is-animating"),this.panel=t),this},build:function(){var e,t,i,n,s=this,a=this.settings.content;if(this.id=(null===(e=this.settings)||void 0===e||null===(t=null==e?void 0:e.modalSettings)||void 0===t||null==t?void 0:t.id)||(null==a||null==a?void 0:a.attr("id"))||C.uniqueId(this.element,"contextual-action-modal"),(null===(i=this.settings)||void 0===i||null===(n=null==i?void 0:i.modalSettings)||void 0===n||null==n?void 0:n.id)||(this.settings.modalSettings.id=this.id),!this.panel||!this.panel.length)if(a instanceof jQuery){if(a.is(".contextual-action-panel")?this.panel=a:(a.wrap('<div class="contextual-action-panel"></div>'),this.panel=a.parent()),this.panel.addClass("modal").appendTo("body"),a.is("iframe"))return a.ready((function(){s.completeBuild(),a.show()})),s;a.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(a,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.completeBuild(),this},completeBuild:function(){var e,t,i=!1,n=!1,s=!0;this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((e=this.panel.children()).is("iframe")&&(t=e.contents(),this.toolbar=t.find(".toolbar, .flex-toolbar"),i=!0),i||(e.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body"></div>'),this.panel.addClass("modal")));var a=this.panel.find(".modal-header");0===a.length&&(a=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=a;var o=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset");if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar")),!this.toolbar.length)if(s=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach((function(e){"input"===e.type&&(n=!0)})),this.settings.title&&this.settings.modalSettings.centerTitle){var r=n?'<div class="toolbar-section search"></div>':"",l='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.settings.title,"</h2>\n          </div>\n          ").concat(r,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(l)}else if(!o.length){var c=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",d=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.settings.title,"</h2></div>"):"",h=this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",u='<div class="'.concat(h,'"></div>'),p=this.settings.modalSettings.useFlexToolbar&&n?'<div class="toolbar-section search"></div>':"",g='<div class="'.concat(c,'">\n          ').concat(d,"\n          ").concat(p,"\n          ").concat(u,"\n        </div>"),f=$(g);f.appendTo(this.panel.find(".modal-header")),this.toolbar=f,o=f.children(".buttonset")}if(this.toolbar.appendTo(this.header),!s){o&&(o.length||this.settings.modalSettings.centerTitle)||(o=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var m=this.toolbar.find(".title");if(!m.length){var v=this.settings.modalSettings.centerTitle?" center-text":"";m=$('\n          <div class="toolbar-section title'.concat(v,'">\n            <h2>').concat(this.settings.title,"</h2>\n          </div>\n        ")),o?m.insertBefore(o):this.toolbar.prepend(m)}m.length||(m=$('\n          <div class="title">\n            '.concat(this.settings.title,"\n          </div>\n        ")),this.toolbar.prepend(m))}if(i||this.panel.detach().appendTo("body"),this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var b=M.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(b,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(b,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var y=$('<div class="toolbar-section static"></div>').append(this.closeButton),w=this.toolbar.find(".toolbar-section.more");y.insertAfter(w.length?w:o)}else o.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),C.fixSVGIcons(this.element),this},handleEvents:function(){var e=this;function t(t){e.element.triggerHandler(t.type)}return this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",(function(i){t(i),e.panel.removeClass("is-animating")})).off("close.contextualactionpanel").on("close.contextualactionpanel",(function(e){t(e)})).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",(function(i){e.settings.initializeContent&&$(this).initialize(),t(i)})).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",(function(){if(e.toolbar&&e.toolbar.trigger("recalculate-buttons"),e.toolbar.length){var t=e.toolbar.find(".buttonset > .is-selected");if(t.length||(t=e.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(t=t.children(".searchfield")),!t.length&&e.toolbar.is(".flex-toolbar"))return void(t=e.toolbar.find("button").first()).focus();var i=e.toolbar.data("toolbar");i&&i.setActiveButton(t,!0)}e.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),C.fixSVGIcons(e.panel)})),e.closeButton&&e.closeButton.length&&e.closeButton.on("click.contextualactionpanel",(function(){e.handleToolbarSelected()})),this},handleToolbarSelected:function(){this.close()},teardown:function(){var e=this.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),e.children("*:not(.searchfield)").off("click.contextualactionpanel"),e.children(".btn-menu").each((function(){var e=$(this).data("popupmenu");e&&e.destroy()})),this.header&&this.header.remove(),this.panel.find(".modal-body").children().first().unwrap().unwrap(),this.element.removeAttr("data-modal"),this.closeButton&&this.closeButton.length&&(this.closeButton.off("click.contextualactionpanel"),delete this.closeButton),this.element.trigger("afterteardown")},close:function(){var e;"immediate"===this.settings.modalSettings.trigger&&(e=!0),this.modalAPI&&this.modalAPI.close(e)},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this.settings=Bi(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],"contextualactionpanel"),this.toolbar&&this.toolbar.data("toolbar")&&this.toolbar.data("toolbar").destroy(),this.toolbar&&this.toolbar.data("toolbarFlex")&&this.toolbar.data("toolbarFlex").destroy()},destroyAll:function(){X.destroyAll(!0)}},$.fn.contextualactionpanel=function(e){return this.each((function(){var t,i,n=null==e||null===(t=null==e?void 0:e.modalSettings)||void 0===t||null==t?void 0:t.id;!n&&(null==e||null==e?void 0:e.content)&&(null==e||null==e?void 0:e.content)instanceof jQuery&&(n=null==e||null===(i=null==e?void 0:e.content)||void 0===i||null==i?void 0:i.attr("id"));var s=X.findById(n);s?s.updated(e):$.data(this,"contextualactionpanel",new Oi(this,e))}))};var Ri=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function Fi(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0;if(!e||"string"!=typeof e||!t.length)throw new Error('"id" property must be defined and unique.');if(this.id=e,!t||"string"!=typeof t||!t.length)throw new Error('"displayName" property must be defined.');return this.displayName=t,i=i.toLowerCase(),-1===Ri.indexOf(i)&&(i="p"),this.tagName=i,"string"==typeof n&&n.length&&(this.className=n),s instanceof CSSStyleDeclaration&&(this.styleProps=s),this}Fi.prototype={render:function(e){return e=h.stripHTML(e),"<".concat(this.tagName,">").concat(e,"</").concat(this.tagName,">")}};function Ni(){return{popupmenuSettings:{offset:{y:10}},styles:[new Fi("default",M.translate("FontPickerNormal")),new Fi("header1",M.translate("FontPickerHeader").replace("{0}","1"),"h3"),new Fi("header2",M.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function zi(e,t){if(!(e instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=C.mergeSettings(e,t,Ni()),t&&Array.isArray(t.styles)&&(this.settings.styles=t.styles),this.element=e,this.init()}zi.prototype={get menuAPI(){var e=$(this.element).data("popupmenu");if(e)return e},get selected(){var e;return this.settings.styles.forEach((function(t){t.selected&&(e=t)})),e||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(e){var t;if(this.settings.styles.forEach((function(i){i.id===e&&(t=i)})),!t)throw new Error('No FontPickerStyle available with id "'.concat(e,'"'));return t},getStyleByTagName:function(e){var t;if(this.settings.styles.forEach((function(i){i.tagName===e&&(t=i)})),!t)throw new Error('No FontPickerStyle available with tagName "'.concat(e,'"'));return t},get disabled(){return this.trueDisabled},set disabled(e){this.trueDisabled=e,this.element.disabled=!0===e},get supportedTagNames(){var e=[];return this.settings.styles.forEach((function(t){e.push(t.tagName)})),e},init:function(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=Ni().styles),this.build().handleEvents()},build:function(){var e=$(this.element),t=this.element.querySelector("svg.icon.icon-dropdown");t||(t=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",t)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),e.button();var i=e.next(".popupmenu");i&&i.length||(i=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),i.html(this.buildMenuHTML());var n=C.extend({},this.settings.popupmenuSettings,{menu:i,stretchToWidestMenuItem:!0});return e.popupmenu(n),this.render(),this},render:function(){var e=this.selected,t=this.element.querySelector("span");$(t).html(e.displayName)},buildMenuHTML:function(){var e="";return this.settings.styles.forEach((function(t){var i=t.render(t.displayName);e+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(t.id,'">').concat(i,"</a>\n      </li>")})),"".concat(e)},handleEvents:function(){var e=this,t=this;return $(this.element).on("selected.".concat("fontpicker"),(function(t,i){var n=i.attr("data-val");e.select(n)})).on("updated.".concat("fontpicker"),(function(e,i){t.updated(i)})),this},select:function(e,t){if(!e||"string"!=typeof e&&!(e instanceof Fi))throw new Error('"id" property must be defined in order to select.');var i;i=e instanceof Fi?e:this.getStyleById(e),this.settings.styles.forEach((function(e){e.selected=!1})),i.selected=!0,this.render(i),t||$(this.element).triggerHandler("font-selected",[i])},updated:function(e){var t;void 0!==e&&(Array.isArray(e.styles)&&(t=e.styles),this.settings=C.mergeSettings(this.element,e,this.settings),t&&(this.settings.styles=t));return this.teardown().init()},teardown:function(){var e=this.element.querySelector("svg.icon.icon-dropdown");e.parentNode.removeChild(e);var t=this.menuAPI;t&&"function"==typeof t.destroy&&t.destroy();var i=$(this.element).data("button");return i&&"function"==typeof i.destroy&&i.destroy(),$(this.element).off(["selected.".concat("fontpicker"),"updated.".concat("fontpicker")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,"fontpicker")}},$.fn.fontpicker=function(e){return this.each((function(){var t=$.data(this,"fontpicker");t?t.updated(e):t=$.data(this,"fontpicker",new zi(this,e))}))};var Hi={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1};function qi(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Hi),this.init()}qi.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=Hi.maxVisibleButtons),this},build:function(){var e=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.title=this.element.children(".title"),this.title.length?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",(function(){return e.cutoffTitle})).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var t=this.element.find(".more");t.length||(t=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(M.translate("MoreActions"),"</span>")).attr("title",M.translate("More")).appendTo(t)}(this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each((function(){$(this).data("button")||$(this).button(),!$(this).data("tooltip")&&$(this).attr("title")&&$(this).tooltip()})),this.settings.noSearchfieldReinvoke)||this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper").each((function(e,t){var i=$(t);if(i.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(i=i.children(".searchfield")),!i.data("searchfield")){var n=$.extend({},C.parseSettings(i[0]));i.searchfield(n)}}));var i=this.more.data("popupmenu"),n=this.more.attr("aria-controls");i?this.moreMenu=i.menu:(this.moreMenu=$("#".concat(n)),this.moreMenu.length||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var s=[];this.items.not(this.more).not(".ignore-in-menu").filter((function(){return $(this).parent(".buttonset, .inline").length})).each((function(){s.push(e.buildMoreActionsMenuItem($(this)))})),s.reverse(),$.each(s,(function(t,i){""!==i.text()&&i.prependTo(e.moreMenu)})),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0;var a=C.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});i?this.more.on("beforeopen.toolbar",(function(){e.refreshMoreActionsMenu(e.moreMenu)})).triggerHandler("updated",[a]):this.more.popupmenu(a).on("beforeopen.toolbar",(function(){e.refreshMoreActionsMenu(e.moreMenu)})),function(){e.items.attr("tabindex","-1");var t=e.items.filter(".is-selected");if(t.length)return e.activeButton=t.first().attr("tabindex","0"),void e.items.not(e.activeButton).removeClass("is-selected");t=e.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),e.activeButton=t,e.element.is(":hidden, .is-hidden")?e.activeButton=e.items.filter(":not(:disabled)").first().attr("tabindex","0"):e.isItemOverflowed(t)&&(t.attr("tabindex","-1"),e.activeButton=e.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var o=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");return o.length&&o.trigger("reanimate"),this},buildMoreActionsMenuItem:function(e){var t;if(!0===e.data("skipit"))return e.data("skipit",void 0),t;var i=e.data("action-button-link");i&&i.length?t=i.parent():(t=$("<li></li>"),i=$('<a href="#"></a>').appendTo(t),e.data("action-button-link",i),i.data("original-button",e)),e.hasClass("hidden")&&t.addClass("hidden"),e.is(":disabled")?(t.addClass("is-disabled"),i.prop("disabled",!0)):(t.removeClass("is-disabled"),i.prop("disabled",!1)),i.text(this.getItemText(e));var n=$.getBaseURL("#icon-dropdown"),s=e.children(".icon").filter((function(){var e=$(this).getIconName();return e&&e!==n&&-1===e.indexOf("dropdown")}));s&&s.length&&(i.html("<span>".concat(i.text(),"</span>")),s.clone().detach().prependTo(i));var a=t.find("b");if(a.length&&(this.moreMenu.addClass("has-icons"),a.detach().prependTo(t)),e.is(".btn-menu")){e.data("popupmenu")?i.children(".icon.arrow").length||i.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):e.popupmenu();var o=e.data("popupmenu").menu,r=o.clone();!function e(i,n,s){var a,o=i.children("li"),r=n.attr("id");n.children("li").each((function(t,i){var n=$(i),s=o.eq(t),a=n.children("a"),r=s.children("a"),l=n.attr("id"),c=a.attr("id");l&&n.removeAttr("id").attr("data-original-menu-item",l),c&&a.removeAttr("id").attr("data-original-menu-anchor",c),r.data("action-button-link",a),a.data("original-button",r);var d=s.children(".wrapper").children(".popupmenu"),h=n.children(".wrapper").children(".popupmenu");d.length&&h.length&&e(d,h,n)})),n.removeAttr("id").attr("data-original-menu",r),s.addClass("submenu"),s.is(t)&&((a=s.children(".wrapper"))&&a.length||(a=$('<div class="wrapper"></div>')),a.html(n),s.append(a))}(o,r,t)}return e.is("[data-popdown]")&&e.popdown(),t},refreshMoreActionsMenu:function(e){var t=this;$("li > a",e).each((function(){var e,i=$(this),n=i.parent(),s=i.data("originalButton"),a=t.getItemText(s);s&&(i.find("span").length?i.find("span").text(a.trim()):i.text(a.trim()),s.isHiddenAtBreakpoint()||s.parent().isHiddenAtBreakpoint()?n.addClass("hidden"):n.removeClass("hidden"),s.parent().is(".is-disabled")||s.is(":disabled")?(n.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(n.removeClass("is-disabled"),i.prop("disabled",!1)),s.is("a")&&(s.parent("li").is(".is-checked")?n.addClass("is-checked"):n.removeClass("is-checked")),s.is(".btn-menu")&&(e=i.parent().find(".popupmenu").first(),t.refreshMoreActionsMenu(e)))}))},getItemText:function(e){if(!e)return"";var t,i=e.find("span").first(),n=e.attr("title"),s=e.data("tooltip"),a=s&&"string"==typeof s.content?s.content:void 0;return t=""!==n&&void 0!==n?n:a||(i.length?i.text():e.text()),h.stripHTML(t)},handleEvents:function(){var e=this;return this.items.on("keydown.toolbar",(function(t){e.handleKeys(t)})).on("click.toolbar",(function(t){e.handleClick(t)})),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",(function(){var t,i=$(this);i.is(".is-overflowed")?(t=e.getLastVisibleButton())&&t.length&&t[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(i&&i.focus(),e.buttonset.scrollTop(0))})),this.items.not(this.more).on("selected.toolbar",(function(t,i){t.stopPropagation(),e.handleSelected(t,i)})),this.more.on("keydown.toolbar",(function(t){e.handleKeys(t)})).on("beforeopen.toolbar",(function(){e.adjustMenuItemVisibility()})).on("selected.toolbar",(function(t,i){t.stopPropagation(),e.handleSelected(t,i)})),this.more.on("show-submenu.toolbar",(function(t,i){e.handleTransferToMenuButtonItem(t,i)})),this.element.on("updated.toolbar",(function(t,i){t.stopPropagation(),e.updated(i)})).on("recalculate-buttons.toolbar",(function(t,i){e.handleResize(i)})).on("scrollup.toolbar",(function(){var t=e.element.parents(".tab-container.module-tabs");t.length&&t.scrollTop(0)})),$("body").on("resize.toolbar-".concat(this.id),(function(){e.handleResize()})),this.handleResize(),this},handleTransferToMenuButtonItem:function(e,t){var i=t.children("a").data("original-button");if(i){var n=i.data("popupmenu");n&&"function"==typeof n.settings.beforeOpen&&(n.callSource(e),this.buildMoreActionsMenuItem(i))}},handleSelected:function(e,t){var i,n,s,a,o=t.data("original-button");if(t.parent().is(".hidden, .is-disabled")||t.is("[readonly], [disabled]"))e.preventDefault();else{if(o&&o.length>0){if(i=o.listEvents(),n=this.element.listEvents(),this.setActiveButton(o),o.is("[data-popdown]")&&(a=o.data("popdown"),this.isItemOverflowed(o)&&(a.settings.trigger=this.more,a.updated())),o.attr("ng-click")||o.attr("data-ng-click"))return void o.trigger("click");for(var r=["click","touchend","touchcancel"],l=0;l<r.length;l++){var c=r[l];if(n&&n[c]&&n[c].delegateCount>0){var d=this.element,h=$.Event(c);return h.target=d.find(o)[0],void d.trigger(h)}if(i&&i[c]||o[0]["on".concat(c)])return void o.trigger(c)}return a=(s=o.parents(".popupmenu")).data("trigger"),s.length&&a instanceof $&&a.length?void a.triggerHandler("selected",[o]):void this.triggerSelect(o)}this.triggerSelect(t)}},handleClick:function(e){return this.setActiveButton($(e.currentTarget)),this.triggerSelect($(e.currentTarget)),!1},handleKeys:function(e){var t=e.which,i=$(e.target),n=i.is(".btn-actions"),s=M.isRTL();(37===t&&i.is(":not(input)")||38===t&&i.is(":not(input.is-open)"))&&(e.preventDefault(),n?this.setActiveButton(s?this.getFirstVisibleButton():this.getLastVisibleButton()):this.navigate(s?1:-1)),(39===t&&i.is(":not(input)")||40===t&&i.is(":not(input.is-open)"))&&(e.preventDefault(),n?this.setActiveButton(s?this.getLastVisibleButton():this.getFirstVisibleButton()):this.navigate(s?-1:1))},handleResize:function(e){if(this.settings.resizeContainers){var t=e?e.title:void 0,i=e?e.buttonset:void 0;this.sizeContainers(t,i)}for(var n=this.getButtonsetButtons(),s=0;s<n.length;s++)n[s].removeClass("is-overflowed");this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(e,t){var i=this.element[0],n=this.title[0],s=this.buttonset[0],a=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return s.style.width="",n.style.width="",void i.classList.remove("do-resize");s.style.width="",n.style.width="",i.classList.contains("do-resize")||i.classList.add("do-resize");var o=$(i).getHiddenSize(),r=$(s).getHiddenSize(),l=$(n).getHiddenSize(),c=$(a).getHiddenSize(),d=parseInt(o.padding.left,10)+parseInt(o.padding.right,10);isNaN(c.width)&&(c.width=50),(isNaN(r.width)||r.width<0)&&(r.width=0);var h,u=this,p=void 0!==e&&!isNaN(e),g=void 0!==t&&!isNaN(t);this.cutoffTitle=!1;var f=p?parseInt(e,10):!0===u.settings.favorButtonset?o.width-(d+(g?parseInt(t,10):r.width)+c.width):l.scrollWidth,m=g?parseInt(t,10):!0===u.settings.favorButtonset?r.width:o.width-(d+(p?parseInt(e,10):l.scrollWidth)+c.width);if(this.settings.favorButtonset)return f<74&&(this.cutoffTitle=!0,h=Math.abs(f-74),f=74,m-=h),s.style.width=v(m+2),n.style.width=v(f-2),n.textContent&&f<D.textWidth(n.textContent.trim())&&(this.cutoffTitle=!0),void(f>D.textWidth($(n).find("h1").text().trim())&&(this.cutoffTitle=!1));m<0&&(this.cutoffTitle=!0,h=Math.abs(m-0),m=0,f-=h),n.style.width=v(f+2),s.style.width=v(m-2)}function v(e){return"".concat(e,"px")}},navigate:function(e){var t,i=this.items.filter(":visible:not(:disabled)"),n=i.index(this.activeButton)+e;n>=0&&n<i.length&&(t=i.eq(n)),n>=i.length&&(t=i.first()),-1===n&&(t=i.last()),this.isItemOverflowed(t)&&(t=this.more),this.setActiveButton(t)},getLastVisibleButton:function(){for(var e,t,i=$(this.items.get().reverse()).not(this.more),n=0;!e&&n<i.length;){if(t=$(i[n]),!this.isItemOverflowed(t)){e=t;break}n++}for(e&&0!==e.length||(e=i.first());e.length&&e.is(".separator, *:disabled, *:hidden");)e=e.prev();return e},getFirstVisibleButton:function(){for(var e=0,t=this.items,i=t.eq(e);i.is(".separator, *:disabled, *:hidden");)e++,i=t.eq(e);return i},setActiveButton:function(e,t){if(e[0]!==this.activeButton[0]){var i=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function(){if(e.is("a"))return n();var t=i.more.data("tooltip");return e[0]===i.more[0]?(t&&t.tooltip.is(":not(.hidden)")&&t.hide(),n()):i.isItemOverflowed(e)&&!e.is(".searchfield")?n():e}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!t&&this.activeButton[0]&&(this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function n(){return i.moreButtonIsDisabled()||!i.element.hasClass("has-more-button")?i.getLastVisibleButton():i.more}},triggerSelect:function(e){var t=$(e);t.is(this.more)||t.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[t])},getButtonsetButtons:function(){for(var e,t=[],i=this.buttonsetItems,n=0;n<i.length;n++)void 0!==(e=i.eq(n)).data("action-button-link")&&e.is(":not(.searchfield)")&&t.push(e);return t},getVisibleButtons:function(e){var t,i=this,n=[],s=[];e&&Array.isArray(e)||(e=this.getButtonsetButtons());for(var a=0;a<e.length;a++)e[a][0].classList.remove("is-overflowed");for(var o=0;o<e.length;o++)t=e[o],i.isItemOverflowed(t)?n.push(t):s.push(t);return{visible:s,hidden:n}},adjustMenuItemVisibility:function(e){var t="removeClass";function i(e,i){var n=e[0],s=e.data("action-button-link").parent()[0],a=e.isHiddenAtBreakpoint();if(i)return s.classList.add("hidden"),void n.classList.remove("is-overflowed");a||s.classList.remove("hidden"),n.classList.add("is-overflowed"),e.find(".icon").length&&(t="addClass")}e||(e=this.getVisibleButtons());for(var n=0;n<e.visible.length;n++)i(e.visible[n],!0);for(n=0;n<e.hidden.length;n++)i(e.hidden[n],!1);var s=0;this.moreMenu.find(".icon").each((function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||s++})),s>0&&(t="addClass"),this.moreMenu[t]("has-icons")},isItemOverflowed:function(e){if(this.moreButtonIsDisabled())return!1;if(!e||0===e.length)return!0;var t=this.buttonsetItems.filter(":not(.hidden)").index(e),i=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(i-=1),this.title.length&&t>=i)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),e instanceof $&&e.length&&(e=e[0]);var n=e.classList,s=window.getComputedStyle(e);if(n.contains("btn-actions"))return!0;if(n.contains("searchfield"))return!1;if("none"===s.display)return!0;var a=M.isRTL(),o=e.getBoundingClientRect(),r=this.buttonset[0].getBoundingClientRect(),l=a?o.left<=r.left:o.right>=r.right;return!0===o.bottom>=r.bottom||!0===l},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return F(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){if(!this.moreButtonIsDisabled()){var e="removeClass";this.moreMenu.children("li:not(.separator)").not(".hidden").length>0&&(e="addClass"),this.element[e]("has-more-button");var t=this.more.data("popupmenu");if("removeClass"===e){if(!t)return;t.close();var i=t.menu.find("li:not(.separator)").children("a"),n=!1;if(i.add(this.more).each((function(){document.activeElement===this&&(n=!0)})),n){var s=this.getLastVisibleButton()[0];s&&s.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var e=1===this.element.closest(".header").length,t=this.element.attr("id")||"",i=this.element.children(".title"),n=this.element.prev("label"),s=this.element.prev(".label"),a=e?$("header.header").find("h1").text():i.length?i.filter("div").text():n.length?n.text():s.length?s.text():"".concat(t," ").concat(M.translate("Toolbar"));this.element.attr("aria-label",a.replace(/\s+/g," ").trim())}},updated:function(e){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var e=this;$("body").off("resize.toolbar-".concat(this.id));var t=void 0===this.moreMenu?[]:this.moreMenu.children("li");if(t.each((function(){e.teardownMoreActionsMenuItem($(this),!0)})),t.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each((function(e,t){var i=$(t).data("tooltip");i&&"function"==typeof i.destroy&&i.destroy();var n=$(t).data("button");n&&"function"==typeof n.destroy&&n.destroy(),t.classList.remove("is-overflowed"),t.removeAttribute("tabindex")})),this.items.off(["keydown.".concat("toolbar"),"click.".concat("toolbar"),"focus.".concat("toolbar"),"blur.".concat("toolbar"),"close.".concat("toolbar"),"selected.".concat("toolbar")].join(" ")),delete this.items,this.title&&this.title.length){var i=this.title.off("beforeshow.toolbar").data("tooltip");i&&"function"==typeof i.destroy&&i.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var n=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),s=n.data("searchfield");s&&"function"==typeof s.destroy&&n.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat("toolbar"),"beforeopen.".concat("toolbar"),"selected.".concat("toolbar"),"show-submenu.".concat("toolbar")].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat("toolbar"),"recalculate-buttons.".concat("toolbar"),"scrollup.".concat("toolbar")].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(e,t){var i=this,n=$(e),s=n.children("a"),a=s.data("original-button");s.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var o,r=n.find(".icon");r.length&&r.remove(),n.is(".submenu")&&(o=n.children(".wrapper").children(".popupmenu")).children("li").each((function(){i.teardownMoreActionsMenuItem($(this),!0)})),a&&a.length&&($.removeData(s[0],"original-button"),$.removeData(a[0],"action-button-link"),s.remove(),o&&o.off().parent(".wrapper").off().remove(),t&&n.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],"toolbar")}},$.fn.toolbar=function(e){return this.each((function(){var t=$.data(this,"toolbar");t?t.updated(e):t=$.data(this,"toolbar",new qi(this,e))}))};var Vi=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],Wi={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","visual"]},excludeButtons:{editor:["backColor"],source:["backColor"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!1,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}}};function ji(e,t){this.settings=C.mergeSettings(e,t,Wi),this.element=$(e),this.init()}ji.prototype={get toolbarAPI(){var e;return this.toolbar&&this.toolbar.length&&(e=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),e},init:function(){var e=this;if(this.id="".concat(C.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var t=this.settings;if(t.anchor=$.extend({},Wi.anchor,t.anchor),t.image=$.extend({},Wi.image,t.image),t.anchor.defaultUrl=t.anchor.url,t.anchor.defaultClass=t.anchor.class,t.anchor.defaultTargetText=t.anchor.target,t.anchor.defaultIsClickable=t.anchor.isClickable,t.anchor.targets=t.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,(function(t,i){e.settings.anchor.defaultTargetText.toLowerCase()===t.toLowerCase()&&(e.settings.anchor.target=i,e.settings.anchor.defaultTarget=i)})),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new Fi("legacyDefault","Default")),this.settings.firstHeader&&(O("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Fi("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(O("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new Fi("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),t.buttons&&t.buttons.editor){for(var i=!1,n=[new Fi("default","Default","p")],s=t.buttons.editor.filter((function(e){return"header"===e.substr(0,6)})),a=0;a<s.length;a++){var o=s[a].substr(6,1);i=!0,n.push(new Fi("header".concat(o),"Header ".concat(o),"h".concat(o)))}i&&(t.buttons.editor=t.buttons.editor.filter((function(e){return"header"!==e.substr(0,6)})),t.fontpickerSettings={styles:n}),"seperator"===t.buttons.editor[0]&&t.buttons.editor.splice(0,1),i&&(t.buttons.editor=["fontPicker"].concat(t.buttons.editor))}return t.anchor.defaultTarget||(t.anchor.target&&$.trim(t.anchor.target).length?t.anchor.defaultTarget=t.anchor.target:(t.anchor.defaultTargetText=M.translate("SameWindow"),t.anchor.defaultTarget=t.anchor.targets[t.anchor.defaultTargetText])),this.setup(),"string"==typeof t.paragraphSeparator&&/^(p|br|div)$/.test(t.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,t.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindParagraphCreation:function(){var e=this;return this.getCurrentElement().on("keyup.editor",(function(t){var i,n=e.getSelectionStart();n&&n.getAttribute("data-editor")&&0===n.children.length&&document.execCommand("formatBlock",!1,"p"),13===t.which&&("li"===(i=(n=e.getSelectionStart()).tagName.toLowerCase())||e.isListItemChild(n)||(t.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===i&&document.execCommand("unlink",!1,null)))})),this},bindTab:function(){var e=this;return this.getCurrentElement().on("keydown.editor",(function(t){if(9===t.which){var i=e.getSelectionStart().tagName.toLowerCase();"pre"===i&&(t.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===i&&(t.preventDefault(),document.execCommand(t.shiftKey?"outdent":"indent",t))}if(8===t.which){var n=e.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===n&&e.element.html("")}})),this},setExcludedButtons:function(){var e,t,i,n=this,s=function(e,t){var i=-1,n=0;return e.filter((function(e,s){var a=!0;return t.indexOf(e)>-1&&"separator"!==e?(n++,a=!1):"separator"===e&&s-n-1===i&&(n=0,a=!1),"separator"===e&&(i=s),a}))};return e=n.settings,t=e.buttons,i=e.excludeButtons,n.sourceViewActive()?i&&i.source&&i.source.length?s(t.source,i.source):t.source:i&&i.editor&&i.editor.length?s(t.editor,i.editor):t.editor},createToolbar:function(){if(this.toolbar)return this;var e=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),t="",i="";this.settings.useFlexToolbar&&(t="toolbar-section ",i='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var n=this.setExcludedButtons(),s="",a=0,o=n.length;a<o;a+=1){var r=this.buttonTemplate(n[a]);r&&this.element.hasClass("source-view-active")&&"visual"!==n[a]&&(r=r.replace('type="button"','type="button" disabled')),r&&(s+=r)}var l='<div class="'.concat(e,'" id="editor-toolbar-').concat(this.id,'">\n      <div class="').concat(t,'buttonset">\n        ').concat(s,"\n      </div>\n      ").concat(i,"\n    </div>");this.element.parent().find(".icon-dirty").length?this.toolbar=$(l).insertBefore(this.element.parent().find(".icon-dirty")):this.toolbar=$(l).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var c=this.toolbar.find('[data-action="fontStyle"]').first();c&&c.length&&(c.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=c);var d=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return d.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",d).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),this},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var e=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(h.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",f((function(t){e.textarea.text(h.sanitizeHTML(e.element.html().toString())),e.resetEmptyEditor(t),e.element.trigger("change")}),300)),$("html").on("themechanged.".concat("editor"),(function(){e.setRowsHeight(),e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()})),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var e,t,i,n,s,a,o,r,l=J.currentTheme.id&&J.currentTheme.id.indexOf("uplift")>-1;(null===(e=this.settings)||void 0===e||null===(t=null==e?void 0:e.rows)||void 0===t||null==t?void 0:t.editor)&&this.element.height((null===(s=this.settings)||void 0===s||null===(a=null==s?void 0:s.rows)||void 0===a||null==a?void 0:a.editor)*(l?26:22.2));(null===(i=this.settings)||void 0===i||null===(n=null==i?void 0:i.rows)||void 0===n||null==n?void 0:n.source)&&this.element.parent().find(".editor-source").height(26*(null===(o=this.settings)||void 0===o||null===(r=null==o?void 0:o.rows)||void 0===r||null==r?void 0:r.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var e="p"===this.settings.paragraphSeparator?"p":"div",t=this.element.html().toString().trim();"<br>"!==(t=this.element.html().toString().trim())&&t!=="<".concat(e,"><br></").concat(e,">")||this.element.html(""),this.element.contents().filter((function(){return 3===this.nodeType&&""!==this.textContent.trim()})).wrap("<".concat(e,"></").concat(e,">")),t=this.element.html().toString().trim(),this.textarea.html(h.sanitizeHTML(t)),this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var e=this.element.html().toString().trim();((e||"").match(/>\s+</g)||[]).length>0&&this.element.html(e.replace(/>\s+</g,"><"))},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var e=$('<div class="text-container"></div>').appendTo(this.sourceView),t="source-textarea-".concat($('[id^="source-textarea-"]').length+1),i="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(t,'">').concat(i,"</label>")).appendTo(e),$('<textarea id="'.concat(t,'" class="editable"></textarea>')).appendTo(e)},triggerClick:function(e,t){$('button[data-action="'.concat(t,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var e=this,t=this.getCurrentElement(),i={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192};return t.on("keydown.editor",(function(n){switch((n=n||window.event).which?i.charCode=n.which:n.keyCode?i.charCode=n.keyCode:i.charCode=!1,n.ctrlKey&&i.charCode){case i.h3:e.triggerClick(n,"append-".concat(e.settings.firstHeader));break;case i.h4:e.triggerClick(n,"append-".concat(e.settings.secondHeader));break;case i.b:e.triggerClick(n,"bold"),n.preventDefault();break;case i.e:e.triggerClick(n,"justifyCenter");break;case i.h:e.triggerClick(n,"anchor"),n.preventDefault();break;case i.i:e.triggerClick(n,n.shiftKey?"image":"italic"),n.shiftKey||n.preventDefault();break;case i.bl:n.shiftKey&&e.triggerClick(n,"insertunorderedlist"),n.preventDefault();break;case i.l:n.shiftKey||e.triggerClick(n,"justifyLeft"),n.preventDefault();break;case i.n:n.shiftKey&&e.triggerClick(n,"insertorderedlist");break;case i.q:e.triggerClick(n,"append-blockquote");break;case i.r:e.triggerClick(n,"justifyRight");break;case i.u:e.triggerClick(n,"underline"),n.preventDefault();break;case i.space:e.triggerClick(n,"clearFormatting");break;case i.sv:e.triggerClick(n,t===e.element?"source":"visual")}})),this.element.on("mousedown.editor","a",(function(e){var t=$(this).attr("href");"firefox"!==m.browser.name&&"Mac OS X"===m.os.name&&(e.metaKey||e.ctrlKey)&&(window.open(t,"_blank"),e.preventDefault())})),this.element.on("updated.editor",(function(){e.updated()})),this},setupTextareaEvents:function(){var e=this;return this.textarea.off(".editor").on("input.editor keyup.editor",(function(){e.sourceView.hasClass("hidden")||e.adjustSourceLineNumbers()})).on("focus.editor",(function(){e.sourceView.addClass("is-focused")})).on("blur.editor",(function(t){e.sourceView.removeClass("is-focused"),e.element.empty().html(h.sanitizeHTML(e.textarea.val())),e.element.data("validate")&&e.element.data("validate").validate(e.element,!0,t)})),this},adjustSourceLineNumbers:function(){var e=this.textarea.parent(),t=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),i=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var n=this.textarea[0].scrollHeight,s=Math.floor((n-i)/t),a=this.sourceView.find(".line-numbers"),o=a.find("li").length,r="",l=0;if(!this.lineNumbers||s!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<s){for(;l<s-this.lineNumbers;)r+='<li role="presentation"><span>'.concat(o+l+1,"</span></li>"),l++;a.append(r)}else this.lineNumbers>s&&(l=this.lineNumbers-s,a.find("li").slice(-l).remove());else{for(this.lineNumbers=s;l<this.lineNumbers;)r+='<li role="presentation"><span>'.concat(l+1,"</span></li>"),l++;a.append(r)}this.lineNumbers=s}e[0].style.width="calc(100% - ".concat(a.outerWidth()+2,"px)"),n===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(a[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(e,t,i){var n,s;switch(i){case"bold":n=["<b>","</b>"];break;case"italic":n=["<i>","</i>"];break;case"underline":n=["<u>","</u>"];break;case"strikethrough":n=["<strike>","</strike>"];break;case"append-blockquote":n=["<blockquote>","</blockquote>"];break;default:n=["",""]}if("anchor"===i){var a=$('<a href="'.concat(e,'">').concat(t,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&a.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&a.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?a.attr("contenteditable",!1):a.removeAttr("contenteditable"),s=a[0].outerHTML}else s=n[0]+e+t+n[1];return s},insertTextAreaContent:function(e,t){var i,n,s,a,o=this.textarea[0],r=o.value;e=e||"",document.selection&&"TEXTAREA"===o.tagName?($(o).focus(),(i=document.selection.createRange()).text=this.wrapTextInTags(e,i.text,t),$(o).focus()):o.selectionStart||"0"===o.selectionStart?(n=o.selectionStart,s=o.selectionEnd,a=o.scrollTop,i=this.wrapTextInTags(e,r.substring(n,s),t),o.value=r.substring(0,n)+i+r.substring(s,r.length),$(o).focus(),o.selectionStart=n+i.length,o.selectionEnd=n+i.length,o.scrollTop=a):(o.value+=this.wrapTextInTags(e,o.value,t),$(o).focus(),o.value=o.value)},buttonTemplate:function(e){var t=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(t.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(t.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(M.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(t.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(t.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(M.translate("TextColor"),'" data-action="foreColor" data-element="foreColor">').concat(t.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(M.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(t.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(t.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(t.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("InsertAnchor"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(t.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(t.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(t.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(t.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(t.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(t.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(t.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" data-action="fontStyle"><span>'.concat("FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(t.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(t.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("JustifyRight"),'" data-action="justifyRight" >').concat(t.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(t.clearFormatting,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ViewSource"),'" data-action="source" >').concat(t.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(M.translate("ViewVisual"),'" data-action="visual" >').concat(t.visual,"</button>")}[e]||!1},getIcon:function(e,t,i){return'<span class="audible">'.concat(M.translate(e),"</span>").concat($.createIcon({classes:i||"",icon:t}))},getButtonLabels:function(e){var t,n={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertAnchor","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewSource","visual","visual-icon")};if("object"===i(e)&&(t=e),"object"===i(t))for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);return n},activateButton:function(e){this.toolbar.find('[data-element="'.concat(e,'"]')).addClass("is-active")},bindButtons:function(){var e=this,t=this;function i(e,i){var n=i instanceof vi?$(i.element):$(e.target);if(!n.is(".btn-actions")){var s=n.attr("data-action"),a=t.getCurrentElement();return e.preventDefault(),a.focus(),void 0===t.selection&&t.checkSelection(),t.sourceViewActive()||n.toggleClass("is-active"),s&&t.execAction(s,e),("ie"===m.browser.name||m.browser.isEdge())&&a.trigger("change"),!n[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",i),this.toolbar.on("click.editor",".colorpicker-editor-button",i)):this.toolbar.on("click.editor","button",i),this.fontPickerElem&&this.fontPickerElem.on("font-selected",(function(t,i){e.execFormatBlock(i.tagName)})),this},bindModals:function(){var e=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!0}).on("beforeopen",(function(){e.savedSelection=e.saveSelection(),$(this).attr("id")!=="modal-url-".concat(e.id)||e.selectionRange})).off("open").on("open",(function(){var t=m.features.touch,i=$(this).attr("id"),n=$("input:first",this),s=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(e.id,'"]')).val(e.settings.anchor.url),$('[name="em-class-'.concat(e.id,'"]')).val(e.settings.anchor.class),$('[name="em-target-'.concat(e.id,'"]')).val(e.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",e.settings.anchor.isClickable),setTimeout((function(){t&&i==="modal-image-".concat(e.id)?s.focus():n.focus().select()}),10)})).off("close").on("close",(function(t,i){if(e.restoreSelection(e.savedSelection),!i)if($(this).attr("id")==="modal-url-".concat(e.id)){var n=$(e.findElementInSelection("a",e.element[0]));n.length?e.updateCurrentLink(n):e.createLink($('[name="em-url-'.concat(e.id,'"]'),this))}else e.insertImage($("#image-".concat(e.id)).val())})),this},createURLModal:function(){var e=this,t=this.settings,i=$("#modal-url-".concat(this.id));if(i.length>0)return i;var n="",s=!0;return $.each(t.anchor.targets,(function(t,i){n+='<option value="'.concat(i,'">').concat(M.translate(t),"</option>"),e.settings.anchor.defaultTargetText.toLowerCase()===t.toLowerCase()&&(s=!1)})),s&&(n+='<option value="'.concat(t.anchor.target,'">').concat(t.anchor.target,"</option>")),$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(M.translate("InsertAnchor"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(M.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(t.anchor.url,'">\n          </div>\n          ').concat(t.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(t.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(M.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(M.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(t.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(M.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown">\n              ').concat(n,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(M.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(M.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>")).appendTo("body")},createImageModal:function(){var e=$("#modal-image-".concat(this.id));return e.length>0?e:$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(M.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(M.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(M.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(M.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>")).appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(e){var t=h.stripTags($('[name="em-url-'.concat(this.id,'"]')).val()),i=h.stripTags($('[name="em-class-'.concat(this.id,'"]')).val()),n=h.stripTags($('[name="em-target-'.concat(this.id,'"]')).val()),s=this.settings.anchor.showIsClickable?$('[name="em-isclickable-'.concat(this.id,'"]')).is(":checked"):this.settings.anchor.isClickable;e&&(e[0].setAttribute("href",this.fixLinkFormat(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl)),e[0].setAttribute("class",i&&$.trim(i).length?i:this.settings.anchor.defaultClass),e[0].setAttribute("data-url",(t&&$.trim(t).length?t:this.settings.anchor.defaultUrl).replace("http://",""))),s?e.attr("contenteditable",!1):e.removeAttr("contenteditable"),n&&$.trim(n).length?e.attr("target",n):e.removeAttr("target")},createLink:function(e){var t=this;this.restoreSelection(this.savedSelection);var i=h.stripTags(this.fixLinkFormat(e[0].value));e.val(i),this.settings.anchor.url=e.val(),this.settings.anchor.class=$('[name="em-class-'.concat(this.id,'"]')).val(),this.settings.anchor.target=$('[name="em-target-'.concat(this.id,'"]')).val(),this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?$('[name="em-isclickable-'.concat(this.id,'"]')).is(":checked"):this.settings.anchor.isClickable;var n=$('<a data-url="'.concat(i,'" href="').concat(i,'">').concat(i,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&n.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&n.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?n.attr("contenteditable",!1):n.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(e.val(),"anchor");else{var s,a,o,r,l;if(!this.selection.isCollapsed||m.browser.isIE11()){if(window.getSelection&&(s=window.getSelection()).getRangeAt&&s.rangeCount){a=s.getRangeAt(0),""!==(r="".concat(a)).trim()&&n.html(r);for(var c=(o=a.commonAncestorContainer.children)?o.length:0,d=0;d<c;d++){var u=o[d];u instanceof HTMLImageElement&&(l=u)}l&&n.html(l.outerHTML),a.deleteContents();var p=document.createElement("div");p.innerHTML=n[0].outerHTML;for(var g,f,v=document.createDocumentFragment();g=p.firstChild;)f=v.appendChild(g);a.insertNode(v),f&&((a=a.cloneRange()).setStartAfter(f),a.collapse(!0),s.removeAllRanges(),s.addRange(a))}}else document.execCommand("insertHtml",null,n[0].outerHTML),setTimeout((function(){t.getCurrentElement().focus()}),1);this.bindAnchorPreview()}},fixLinkFormat:function(e){return e.match(/^https?:\/\//)?e:"http://".concat(e)},bindSelect:function(){var e=this,t="";return this.selectionHandler=function(){clearTimeout(t),t=setTimeout((function(){e.checkSelection()}),e.settings.delay)},this.getCurrentElement().off("mouseup.editor keyup.editor").on("mouseup.editor keyup.editor",this.selectionHandler),this},checkSelection:function(){var e;if(void 0===this.selection&&this.sourceViewActive())return e=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();e=window.getSelection();var t=this.getSelectionElement();return t?this.checkSelectionElement(e,t):this.hideToolbarActions(),this},getSelectionElement:function(){var e,t,i,n=window.getSelection(),s=function(e){var t=e;try{for(;!t.getAttribute("data-editor");)t=t.parentNode}catch(e){return!1}return t};try{t=(e=n.getRangeAt(0).commonAncestorContainer).parentNode,i=e.getAttribute("data-editor")?e:s(t)}catch(e){i=s(t)}return i},checkSelectionElement:function(e,t){var i=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=e,this.selectionRange=this.selection.getRangeAt(0),i!==t?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var e=this.getSelectedParentElement();void 0!==e.tagName&&-1===Vi.indexOf(e.tagName.toLowerCase)&&(this.activateButton(e.tagName.toLowerCase()),!this.element.is(e));)e=e.parentNode},checkButtonState:function(e){if(document.queryCommandState)if(this.fontPickerElem&&"fontStyle"===e){for(var t,i,n=this.fontPickerElem.data("fontpicker"),s=n.supportedTagNames,a=this.getSelectionParentElement(),o=$(a).add($(a).parentsUntil(this.element)),r=0;r<o.length&&void 0===i;r++)if(t=o[r].tagName.toLowerCase(),s.indexOf(t)>-1){i=n.getStyleByTagName(t),n.select(i,!0);break}}else document.queryCommandState(e)?this.toolbar.find('[data-action="'.concat(e,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(e,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(){var e=this.selectionRange;return this.rangeSelectsSingleNode(e)?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},hideToolbarActions:function(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function(){var e=this,t=e.getCurrentElement();return this.pasteWrapper=function(t){var i,n,s;i=t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData?t.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var a="";if(e.sourceViewActive())return this;if(i&&!t.defaultPrevented){for(t.preventDefault(),s=i.split(/[\r\n]/g),n=0;n<s.length;n+=1)""!==s[n]&&(navigator.userAgent.match(/firefox/i)&&0===n?a+="<p>".concat(e.htmlEntities(s[n]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(s[n])?a+='<img src="'.concat(e.htmlEntities(s[n]),'" />'):a+="<p>".concat(e.htmlEntities(s[n]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,a),!1;e.pasteHtmlAtCaret(a)}},this.pasteWrapperHtml=function(t){if(e.sourceViewActive())return this;var n,s,a,o,r;if((t.clipboardData||t.originalEvent)&&(t.clipboardData&&t.clipboardData.types?s=t.clipboardData:t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(s=t.originalEvent.clipboardData)),s&&s.types)((n=s.types)instanceof DOMStringList&&n.contains("text/html")||n.indexOf&&-1!==n.indexOf("text/html")||m.browser.isEdge())&&(a=t.originalEvent.clipboardData.getData("text/html")),n instanceof DOMStringList&&n.contains("text/plain")&&(a=t.originalEvent.clipboardData.getData("text/plain")),"object"===i(n)&&n[0]&&"text/plain"===n[0]&&!n[1]&&(a=t.originalEvent.clipboardData.getData("text/plain"));else for(r=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),a="",o=0;o<r.length;o+=1)""!==r[o]&&(navigator.userAgent.match(/firefox/i)&&0===o?a+="<p>".concat(e.htmlEntities(r[o]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(r[o])?a+='<img src="'.concat(e.htmlEntities(r[o]),'" />'):a+="<p>".concat(e.htmlEntities(r[o]),"</p>"));return e.pastedData=m.browser.isIE11()?a:e.getCleanedHtml(a),$.when(e.element.triggerHandler("beforepaste",[{pastedData:e.pastedData}])).done((function(){if(e.pastedData&&!t.defaultPrevented){if(m.browser.isIE11()||m.browser.isEdge()||t.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,e.pastedData),!1;e.pasteHtmlAtCaret(e.pastedData)}e.element.triggerHandler("afterpaste",[{pastedData:e.pastedData}]),e.pastedData=null})),!!m.browser.isIE11()&&void 0},t.on("paste.editor",e.settings.pasteAsPlainText?e.pasteWrapper:e.pasteWrapperHtml),this},pasteHtmlAtCaret:function(e){var t,i,n=this,s="x-text-content-templ-x";if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(i=t.getRangeAt(0)).deleteContents(),m.browser.isIE11()&&(e=s);var a=document.createElement("div");a.innerHTML=e;for(var o,r,l=document.createDocumentFragment();o=a.firstChild;)r=l.appendChild(o);if(i.insertNode(l),r&&((i=i.cloneRange()).setStartAfter(r),i.collapse(!0),t.removeAllRanges(),t.addRange(i)),m.browser.isIE11()){for(var c=50,d=$.Deferred(),h=document.createDocumentFragment();n.element[0].childNodes.length>0;)h.appendChild(n.element[0].childNodes[0]);!function t(i,n){--c<0?d.reject():i.childNodes&&i.childNodes.length>0?(e=i.innerHTML,i.innerHTML="",i.appendChild(n),d.resolve()):setTimeout((function(){t(i,n)}),5)}(n.element[0],h),$.when(d).done((function(){var t="",i=n.element.find(":contains(+ ".concat(s,")")).filter((function(){return this.textContent===s}));i.length||(i=n.element.find(":contains(+ ".concat(s,")")).filter((function(){return this.textContent.indexOf(s)>-1&&"UL"!==this.tagName}))),e=n.getCleanedHtml(e);var a="";/(^(\s+?)?<li)/gi.test(e)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)?(i.is("li")||(e="<ul>".concat(e,"</ul>")),a=e):a=i.is("li")?"".concat(e,"</li>"):(t=e.match(/<\/ul|<\/ol/gi)||[]).length?e:"".concat(e,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(e)&&(i.is("li")?a="<li>".concat(e):((t=e.match(/<ul|<ol/gi)||[]).length?e+=t[t.length-1].replace(/<(ul|ol)/gi,"<$1>"):e="<ul>".concat(e,"</ul>"),a=e)),a&&u.html(i,a,"*"),(t=n.element[0].innerHTML).indexOf(s)>-1&&(t=t.replace(s,e)),n.element[0].innerHTML=n.getCleanedHtml(t)}))}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)},getCleanedHtml:function(e){var t,i=e||"",n=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(i)&&(i=this.cleanWordHtml(i));for(var s=0,a=n.length;s<a;s++)t=new RegExp(" ".concat(n[s],'="(.*?)"'),"gi"),i=this.stripAttribute(i,n[s],t),t=new RegExp(" ".concat(n[s],"='(.*?)'"),"gi"),i=this.stripAttribute(i,n[s],t);return(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul|ol)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<[^/>]+>[\s]*<\/[^>]+>/gi,"")).indexOf("·")>-1&&(i=[(i=[(i=(i=(i=i.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span>·<\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,i.indexOf("<li>")),"<ul>",i.slice(i.indexOf("<li>"))].join("")).slice(0,i.lastIndexOf("</li>")),"</ul>",i.slice(i.lastIndexOf("</li>"))].join("")),i},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var e=this,t=this.container,i=this.getCurrentElement(),n=this;return this.element.on("DOMNodeInserted",(function(e){var t=$(e.target),i=$("<b>helper</b>");"IMG"===e.target.tagName?t.removeAttr("id style srcset"):"SPAN"===e.target.tagName&&(t.before(i),i.after(t.contents()),i.add(t).remove())})),this.container.on("focusin.".concat("editor"),".editor, .editor-source",(function(){var e=$(this);t.addClass("is-active"),setTimeout((function(){e.hasClass("error")&&(t.parent().find(".editor-toolbar").addClass("error"),t.parent().find(".editor-source").addClass("error"))}),100)})).on("focusout.".concat("editor"),".editor, .editor-source",(function(){t.removeClass("is-active"),t.parent().find(".editor-toolbar").removeClass("error"),t.parent().find(".editor-source").removeClass("error")})),this.container.on("mouseenter.".concat("editor"),(function(){e.element.hasClass("error")||e.container.addClass("is-hover")})).on("mouseleave.".concat("editor"),(function(){e.container.removeClass("is-hover")})),n.settings.onLinkClick&&t.on("click.editorlinks","a",(function(t){n.settings.onLinkClick(t,{elem:e,url:t.currentTarget.getAttribute("data-url")}),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()})),this.label.on("click.editor",(function(){i.focus()})),i.attr("aria-label",this.label.text()),this},restoreSelection:function(e){var t=window.getSelection();if(e||(e=this.savedSelection),e){t.removeAllRanges();for(var i=0,n=e.length;i<n;i+=1)t.addRange(e[i])}},saveSelection:function(){var e,t=window.getSelection();if(t.getRangeAt&&t.rangeCount){e=[];for(var i=0,n=t.rangeCount;i<n;i+=1)e.push(t.getRangeAt(i));return e}return null},getSelectionStart:function(){var e=document.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(e,t){var i,n,s,a=this.getrange();if(a){for(i=s=a.commonAncestorContainer||a.parentElement();i!==t;i=i.parentNode)if(i&&i.tagName&&i.tagName.toLowerCase()===e)return i;if(!a.collapsed&&(void 0===a.text||a.text)&&s.getElementsByTagName){i=s.getElementsByTagName(e),n=document.createRange?document.createRange():document.body.createTextRange();for(var o=0,r=i.length;o<r;o++)if(document.createRange){if(n.selectNodeContents(i[o]),a.compareBoundaryPoints(Range.END_TO_START,n)<0&&a.compareBoundaryPoints(Range.START_TO_END,n)>0)return i[o]}else if(n.moveToElementText(i[o]),a.compareEndPoints("StartToEnd",n)<0&&a.compareEndPoints("EndToStart",n)>0)return i[o]}}},restoreLinkSelection:function(){var e=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,e.length){this.settings.anchor.url=e.attr("href"),this.settings.anchor.class=e.attr("class"),this.settings.anchor.target=e.attr("target");var t=e.attr("contenteditable");!1!==t&&"false"!==t||(this.settings.anchor.isClickable=!0)}},execAction:function(e){if(this.getCurrentElement()===this.element)e.indexOf("append-")>-1?this.execFormatBlock(e.replace("append-","")):"anchor"===e?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===e?this.modals.image.data("modal").open():"foreColor"===e||"backColor"===e?this.execColorActions(e):"clearFormatting"===e?this.clearFormatting():"source"===e||"visual"===e?this.toggleSource():document.execCommand(e,!1,null);else switch(e){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,e)}this.checkSelection()},insertImage:function(e){document.execCommand("insertImage",!1,e)},toggleSource:function(e){var t=this,i=function(e){return"string"==typeof e&&"false"===e.toLowerCase()||"boolean"==typeof e&&!1===e||"number"==typeof e&&0===e};if(this.sourceViewActive()&&!e){var n=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",n)).done((function(e){i(e)||function(e){var i=e||t.textarea.val();i=h.sanitizeHTML(i),i=t.getCleanedHtml(i),t.element.empty().removeClass("source-view-active hidden"),t.sourceView.addClass("hidden").removeClass("is-focused"),t.element.trigger("focus.editor"),t.switchToolbars(),t.textarea.off("input.editor-firechange"),setTimeout((function(){t.element.html(i),i=t.element.html(),t.element.triggerHandler("afterpreviewmode",i),t.element.focus()}),0)}(e)}))}else{var s=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",s)).done((function(e){i(e)||function(e){var i=e||t.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");t.settings.useSourceFormatter&&(i=t.formatHtml(i)),t.element.addClass("source-view-active"),t.switchToolbars(),t.textarea.val(i).focus(),t.sourceView.removeClass("hidden"),t.element.addClass("hidden"),t.adjustSourceLineNumbers(),t.textarea.focus(),i=t.textarea.val(),t.textarea.off("input.editor-firechange").on("input.editor-firechange",(function(){t.element.trigger("change")})),t.element.triggerHandler("aftersourcemode",i)}(e)}))}},clearFormatting:function(){var e,t=this,i=this.getSelectionParentElement(),n=i.tagName,s={};i&&n&&(n=n.toLowerCase(),s=function(){for(var e=function(e){return e&&e.style&&""!==e.style.textAlign},n=i,s=e(n),a=9999;!s&&a>0;)a--,s=(n=n?n.parentNode:null)&&n===t.element[0]||e(n);var o={found:n&&n!==i&&n!==t.element[0]};return o.found&&(o.elem=n,o.textAlign=n.style.textAlign),o}(),function(){var e=function(e){var t=[].slice.call(e.querySelectorAll("li"));if(t.length>0){var i=document.createDocumentFragment();t.forEach((function(e){var t=document.createTextNode(e.textContent);i.appendChild(t),i.appendChild(document.createElement("br"))}));var n=t[0].parentNode;n.parentNode.insertBefore(i,n.nextSibling),n.parentNode.removeChild(n)}};if("li"===n)e(i.parentNode);else if(/ul|ol/.test(n))e(i);else{var t=i.classList.contains("editor")?i:$(i).closest(".editor").length?i.parentNode:null;if(t)[].slice.call(t.querySelectorAll("ul, ol")).forEach((function(t){return e(t)}))}}(),function(){var e=function(e){var t=e.parentNode,i=document.createElement("p");i.innerHTML=e.innerHTML,t.replaceChild(i,e)};Vi.indexOf(n)>-1?"p"!==n&&(document.execCommand("removeFormat",!1,null),e(i)):Vi.forEach((function(t){"p"!==t&&[].slice.call(i.querySelectorAll(t)).forEach((function(t){return e(t)}))}));for(var s=[].slice.call(t.element[0].querySelectorAll("blockquote, pre")),a=function(t,n){var a=!1;!function e(t){for(var n=0,s=t.length;n<s;n++){var o=t[n],r=[].slice.call(o.children);o===i&&(a=!0),r.length&&!a&&e(r)}}([].slice.call(s[t].children)),a&&(document.execCommand("removeFormat",!1,null),e(s[t]))},o=0,r=s.length;o<r;o++)a(o)}(),e=function(e){var t=e.parentNode,i=e.firstChild;t.insertBefore(i,e),t.removeChild(e),t.normalize()},"a"===n?e(i):[].slice.call(i.querySelectorAll("a")).forEach((function(t){(function(e){var t=window.getSelection(),i=!1;if(m.browser.isIE11()){var n=t.getRangeAt(0),s=document.createRange();s.selectNode(e);var a=n.compareBoundaryPoints(Range.START_TO_END,s),o=n.compareBoundaryPoints(Range.START_TO_START,s),r=n.compareBoundaryPoints(Range.END_TO_START,s),l=n.compareBoundaryPoints(Range.END_TO_END,s);i=a!==o||r!==l||a!==l}else i=t.containsNode(e,!0);return i})(t)&&e(t)})));var a=i.parentNode;a&&a!==this.element[0]&&[].slice.call(a.querySelectorAll("[align]")).forEach((function(e){return e.removeAttribute("align")}));document.execCommand("removeFormat",!1,null),s.found&&(s.elem.style.textAlign=s.textAlign)},getSelectionParentElement:function(){var e,t=null;return window.getSelection?(e=window.getSelection()).rangeCount&&1!==(t=e.getRangeAt(0).commonAncestorContainer).nodeType&&(t=t.parentNode):(e=document.selection)&&"Control"!==e.type&&(t=e.createRange().parentElement()),t},checkColorButtonState:function(e){var t=$('[data-action="'.concat(e,'"]'),this.toolbar),i=t.data("colorpicker"),n=document.queryCommandValue(e);return i&&"rgb(0, 0, 0)"!==n&&("firefox"===m.browser.name&&"backColor"===e&&(n=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof n&&(n=i.decimal2rgb(n)),n=n?i.rgb2hex(n):"",t.attr("data-value",n).find(".icon").css("color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(n.toLowerCase())>-1?"":n)),{cpBtn:t,cpApi:i,color:n}},execColorActions:function(e){var t=this,i=this.checkColorButtonState(e),n=i.cpBtn,s=i.cpApi;n.one("selected.editor",(function(i,s){var a=s;void 0===a||a instanceof $||!a.element||(a=$(s.element));var o="".concat(a.data("value")).toLowerCase();if(-1===(o="#"!==o?o:"").indexOf("#")&&(o="#".concat(o)),"#"===o&&(o=""),n.attr("data-value",o).find(".icon").css("color",o),"ie"===m.browser.name||"foreColor"===e)o?document.execCommand(e,!1,o):document.execCommand("removeFormat",!1,e);else{document.execCommand("fontSize",!1,"2");for(var r=t.getSelectionParentElement().parentNode.getElementsByTagName("font"),l=0,c=r.length;l<c;l++)r[l].hasAttribute("style")&&(r[l].style.backgroundColor="");setTimeout((function(){for(var e=0,t=r.length;e<t;e++)r[e].hasAttribute("size")&&(r[e].style.backgroundColor=o,r[e].removeAttribute("size"))}),0)}setTimeout((function(){t.getCurrentElement().focus()}),0)})),s.toggleList()},execFormatBlock:function(e){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var t=this.getSelectionData(this.selection.anchorNode);if("blockquote"===e&&t.el&&"blockquote"===t.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(t.tagName===e&&(e="p"),"ie"===m.browser.name){if("blockquote"===e)return document.execCommand("indent",!1,e);e="<".concat(e,">")}return document.queryCommandState("bold")&&document.execCommand("bold",!1,e),document.queryCommandState("italic")&&document.execCommand("italic",!1,e),document.queryCommandState("underline")&&document.execCommand("underline",!1,e),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,e),t.el&&t.el.innerHTML&&t.el.innerHTML.indexOf("<font")>-1&&(document.execCommand("removeFormat",!1,"foreColor"),document.execCommand("removeFormat",!1,"backColor")),t.el&&t.el.innerHTML&&"<ul>"===t.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),t.el&&t.el.innerHTML&&"<ol>"===t.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,e),document.execCommand("removeFormat",!1,e)),this.checkActiveButtons(),document.execCommand("formatBlock",!1,e)}},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===Vi.indexOf(t);)(e=e.parentNode)&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},isListItemChild:function(e){for(var t=e.parentNode,i=t.tagName.toLowerCase();-1===Vi.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(!(t=t.parentNode)||!t.tagName)return!1;i=t.tagName.toLowerCase()}return!1},destroyToolbar:function(){var e=function(e){return e||$()};this.toolbar=e(this.toolbar),this.element=e(this.element),this.textarea=e(this.textarea);var t=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");t&&t.destroy();for(var i=this.toolbar.find("button"),n=0,s=i.length;n<s;n++){var a=$(i[n]).data("tooltip");a&&"function"==typeof a.destroy&&a.destroy();var o=$(i[n]).data("button");o&&"function"==typeof o.destroy&&o.destroy()}for(var r=$('[data-action="foreColor"], [data-action="backColor"]',this.element),l=0,c=r.length;l<c;l++){var d=$(r[l]).data("colorpicker");d&&"function"==typeof d.destroy&&d.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat("editor"));var h=this.fontPickerElem.data("fontpicker");h&&h.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat("editor"),"selected.".concat("editor")].join(" ")),this.toolbar.remove(),delete this.toolbar;var u=["blur","DOMNodeInserted","focus","input.".concat("editor"),"keydown.".concat("editor"),"keypress.".concat("editor"),"keyup.".concat("editor"),"mouseup.".concat("editor"),"mousedown.".concat("editor"),"paste.".concat("editor")].join(" ");this.element.off(u),this.textarea.off(u),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var p=this.checkColorButtonState("foreColor"),g=p.cpBtn;if(g.off("selected.editor"),(g=(p=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var f=Object.keys(this.modals),m=0,v=f.length;m<v;m++){var b=$("#modal-".concat(f[m],"-").concat(this.id)),y=b.data("modal");b.off("beforeclose.editor close.editor open.editor beforeopen.editor"),y&&"function"==typeof y.destroy&&y.destroy(),b.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var e=this.container[0].classList,t=this.element[0].classList;if(!e.contains("is-preview")){if(!this.isEditable()){var i=["is-disabled","is-readonly","is-preview"];e.remove.apply(e,i),t.remove.apply(t,i)}this.sourceViewActive()&&this.toggleSource(),e.add("is-preview"),t.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(e){var t=$(e).data("tooltip");t&&"function"==typeof t.destroy&&t.destroy()}))}},destroyPreviewMode:function(){if(this.container[0]){var e=this.container[0].classList;e.contains("is-preview")&&(e.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var e=this,t=!0,i=function(e,t){return e.classList.contains(t)};return["is-disabled","is-readonly","is-preview"].forEach((function(n){(i(e.container[0],n)||i(e.element[0],n))&&(t=!1)})),t},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Wi)),this.teardown().init()},teardown:function(){return this.destroyToolbar(),this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,this.container.off(["focusin.".concat("editor"),"focusout.".concat("editor"),"mouseneter.".concat("editor"),"mouseleave.".concat("editor"),"input.".concat("editor"),"keyup.".concat("editor")].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat("editor")),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat("editor"),"updated.".concat("editor")].join(" ")),$("html").off("themechanged.".concat("editor")),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"editor")},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){"firefox"!==m.browser.name&&document.addEventListener&&document.addEventListener("paste",(function(e){if(void 0!==e.clipboardData){var t=e.clipboardData.items[0];if(0===t.type.indexOf("image")){var i=t.getAsFile(),n=new FileReader;n.onload=function(e){var t=e.target.result;document.execCommand("insertImage",!1,t)},n.readAsDataURL(i)}}}),!1)},isWordFormat:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},cleanWordHtml:function(e){var t=e;t=(t=(t=(t=(t=(t=t.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi," ")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,(function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}))).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var i=["style","script","applet","embed","noframes","noscript"],n=0,s=i.length;n<s;n++){var a=new RegExp("<".concat(i[n],".*?").concat(i[n],"(.*?)>"),"gi");t=t.replace(a,"")}return t},stripAttribute:function(e,t,i){return"style"===t?this.stripStyles(e,i):e.replace(i,"")},stripStyles:function(e,t){var i=["color","background","font-weight","font-style","text-decoration","text-align"];return e.replace(t,(function(e){for(var t=(e=e.replace(/( style=|("|\'))/gi,"")).split(";"),n="",s=0;s<t.length;s++){var a=t[s].split(":");n+=i.indexOf(a[0])>-1?"".concat(a[0],":").concat(a[1],";"):""}return""!==n?' style="'.concat(n,'"'):""}))},formatHtml:function(e){e=e.trim();var t=this.settings,i=e.split(/</),n=0,s="";function a(e){var i="",n=e*("number"==typeof t.formatterTabsize?t.formatterTabsize:4);if(e>-1)for(;n--;)i+=" ";return i}for(var o=0,r=i.length;o<r;o++){var l=i[o].split(/>/);2===l.length?("/"===i[o][0]&&n--,s+=a(n),"/"!==i[o][0]&&n++,o>0&&(s+="<"),s+="".concat(l[0].trim(),">\n"),""!==l[1].trim()&&(s+="".concat(a(n)+l[1].trim().replace(/\s+/g," "),"\n")),l[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&n--):s+="".concat(a(n)+l[0],"\n")}return s.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(e){return this.each((function(){var t=$.data(this,"editor");t?t.updated(e):t=$.data(this,"editor",new ji(this,e))}))};var Gi={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ui(e,t){this.settings=C.mergeSettings(e,t,Gi),this.element=$(e),this.init()}Ui.prototype={init:function(){var e=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",e.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==e.dataset&&0!==e.dataset.length&&Array.isArray(e.dataset)){if(e.dataset[0]&&e.dataset[0].children&&e.dataset[0].children.length>0||this.isStackedLayout()?this.render(e.dataset[0]):e.dataset&&e.dataset.children.length>0&&this.render(e.dataset),null!==e.leafHeight&&null!==e.leafWidth){var t="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(e.leafWidth,"px;  height: ").concat(e.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(t,"</style>")).appendTo("body")}e.layout&&this.setLayout(e.layout)}else this.element.emptymessage(e.emptyMessage)},setLayout:function(e){switch(this.isPagingLayout()&&(e="paging"),this.isMobileOnly()&&(e="mobile-only"),e){case"horizontal":this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only");break;default:this.element.addClass("layout-is-horizontal")}},handleEvents:function(){var e=this,t=this,i=this.settings;t.element.off("click.hierarchy").on("click.hierarchy",".btn",(function(e){if(!t.isStackedLayout()){i.newData.length>0&&(i.newData=[]);var n=$(this).closest(".leaf").attr("id"),s=$("#".concat(n)).data(),a={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};s.isExpanded?t.collapse(e,s,a):t.expand(e,s,a)}})),this.element.on("keypress",".leaf",(function(e){var i=$(this).attr("id"),n=$("#".concat(i));13===e.which&&(n.isExpanded?t.collapse(e,n):t.expand(e,n))})),t.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",(function(t){var i=t.currentTarget.id,n={event:t,data:$("#".concat(i)).data()};t.stopImmediatePropagation(),e.element.trigger("dblclick",n)})),t.element.on("mouseup",".leaf, .back button",(function(e){var t=$(this),i=$(e.target),n=t.closest(".hierarchy").data("hierarchy"),s=t.data(),a=$(this).attr("id"),o={target:e.target,pageX:e.pageX,pageY:e.pageY},r=i.is("button"),l=!i.hasClass("btn-back"),c=i.is(".btn-back"),d=i.find("use").prop("href"),h=!!d&&"#icon-caret-up"===d.baseVal,u=!!d&&"#icon-caret-down"===d.baseVal,p=!!d&&"#icon-caret-right"===d.baseVal,g=i.hasClass("btn-actions"),f=i.is("a")&&i.parent().parent().is("ul.popupmenu"),m=t.hasClass("ancestor"),v="selected";if(e.stopImmediatePropagation(),(!f||!$(i).parent().data("disabled"))&&($(".is-selected").removeClass("is-selected"),$("#".concat(a)).addClass("is-selected"),r&&h&&l&&(v=m?"back":"collapse"),r&&u&&l&&(v="expand"),c&&(v="back"),g&&(v="actions",n.buildActionsMenu(s,t)),f&&(v="action"),r&&p&&l&&(v="forward"),3===e.which&&(v="rightClick"),n)){var b={id:a,data:s,actionReference:f?i.data("actionReference"):null,targetInfo:o,eventType:v,isForwardEvent:n.isForwardEvent(v),isBackEvent:n.isBackEvent(v),isAddEvent:n.isAddEvent(v),isExpandEvent:n.isExpandEvent(v),isCollapseEvent:n.isCollapseEvent(v),isSelectedEvent:n.isSelectedEvent(v),isActionsEvent:n.isActionsEvent(v),isActionEvent:n.isActionEvent(v),allowLazyLoad:n.allowLazyLoad(s,v)};t.trigger("selected",b)}}))},selectLeaf:function(e){var t=$("#".concat(e));$(".is-selected").removeClass("is-selected"),t.addClass("is-selected");var i={data:t.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};t.trigger("selected",i)},updateActions:function(e,t){var i=$(e.targetInfo.target).closest(".leaf"),n=e.data,s=$(i).find(".popupmenu"),a=s.data("trigger").data().popupmenu,o=s.find("li").not(":eq(0)");$(o).each((function(e,t){$(t).remove()})),n.menu.actions=t,s.append(this.getActionMenuItems(n)),a.keydownThenClick=!0,a.open(),a.handleAfterPlace(null,{element:s.parent(),parent:$(i).find(".btn-actions"),placement:"bottom"})},buildActionsMenu:function(e,t){var i=$(t).find(".popupmenu"),n=[];void 0!==e.menu&&(i.empty(),e.menu.details&&(i.addClass("has-detail-fields"),n.push('<li><div class="detail-fields">'.concat(e.menu.details.map((function(e){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(e.key,'</div><div class="dt-fields-cell">').concat(e.value,"</div></div>")})).join(""),"</div></li>"))),e.menu.actions&&n.push(this.getActionMenuItems(e)),n.forEach((function(e){i.append(e)})))},getActionMenuItems:function(e){return e.menu.actions.map((function(e){return void 0===e.disabled&&(e.disabled=!1),e})).map((function(e){return e.hasOwnProperty("data")&&"separator"===e.data.type?'<li class="separator"></li>':"\n        <li data-disabled='".concat(e.disabled,"' class='").concat(e.menu?"submenu":"","'>\n          <a href='").concat(e.url,"' data-action-reference='")+JSON.stringify(e.data)+"'>\n            ".concat(e.value,"\n            ").concat(e.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n          </a>\n          ").concat(e.menu?'<div class="wrapper" role="application" aria-hidden="true">\n            <ul class="popupmenu">\n              '.concat(e.menu.map((function(t){return"\n              <li data-disabled='".concat(e.disabled,"'>\n                <a href='").concat(e.url,"' data-action-reference='")+JSON.stringify(e.data)+"'>".concat(t.value,"</a>\n              </li>")})).join(""),"\n            </ul>\n          </div>"):"","\n        </li>")})).join("")},isBackEvent:function(e){return"back"===e},isForwardEvent:function(e){return"forward"===e},isAddEvent:function(e){return"add"===e},isExpandEvent:function(e){return"expand"===e},isCollapseEvent:function(e){return"collapse"===e},isSelectedEvent:function(e){return"selected"===e},isActionsEvent:function(e){return"actions"===e},isActionEvent:function(e){return"action"===e},allowLazyLoad:function(e,t){return void 0!==e&&void 0!==t&&(!e.isLoaded&&!e.isLeaf&&"expand"===t)},data:function(e,t,i,n){void 0===n&&(n={});var s=this.settings,a=t.isRootNode?t:t[0],o=[];function r(t,s,a){Object.keys(s).forEach((function(t){"id"===t&&e===s.id&&(s.isLoaded||s.isRootNode||function(e,t){t.insert&&(delete e.isLeaf,e.isExpanded=!0),0!==i.length&&t.insert?e.children=[i]:e.children=i}(s,n),o.push(s))})),s.children&&l(t,s.children)}function l(e,t,i){if(void 0===t.length)r(e,t);else for(var n=0,s=t.length;n<s;n++)r(e,t[n])}return s.newData.length>0&&(s.newData=[]),void 0!==i&&l(this,a),0!==o.length&&$("#".concat(o[0].id)).data(o[0]),o[0]},add:function(e,t,i){var n=this.settings,s=void 0!==t.id?t.id:e,a=$("#".concat(s)),o=a.parent().hasClass("leaf-container")?a.parent().parent():a.parent(),r={},l="sub-level"!==o.parent().attr("class"),c=1===o.children(".sublist").length;if(l?c?r.element=o.children(".sublist"):(r.el=o.append("<ul class='sublist'></ul>"),r.element=$(r.el).find(".sublist")):(r.el=o.children("ul"),r.element=$(r.el)),0===r.element.length&&(r.el=o.append("<ul></ul>"),r.element=$(r.el).find("ul")),!t.isRootNode){for(var d=0,h=i.length;d<h;d++)n.newData.push(i[d]);this.createLeaf(i,r.element)}this.updateState(a,!1,null,"add")},closePopupMenu:function(e){var t=e.find(".btn-actions");0!==t.length&&t.data("popupmenu").close()},expand:function(e,t,i){var n=this.settings,s=i.leaf,a=s.next();this.closePopupMenu(s),a.animateOpen(),this.element.trigger("expanded",[t,n.dataset]),s.hasClass("root")&&(a=a.next("ul")).animateOpen(),s.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(s,!1,null,"expand")},collapse:function(e,t,i){var n=this,s=this.settings,a=i.leaf,o=a.next();this.closePopupMenu(a),o.animateClosed().on("animateclosedcomplete",(function(){n.element.trigger("collapsed",[t,s.dataset])})),a.hasClass("root")&&(o=o.next("ul")).animateClosed(),a.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(a,!1,null,"collapse")},render:function(e){var t=this,i=this.settings,n=i.legend,s=e.children,a=[],o={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(o.chart);var r=$("#".concat(this.settings.rootId," .chart"));if(0!==n.length){$("#".concat(this.settings.rootId)).prepend(o.legend);var l=$("#".concat(this.settings.rootId," legend"));this.createLegend(l)}if(this.isSingleChildWithChildren()&&$(r).addClass("has-single-child"),this.setColor(e),this.isPagingLayout()&&e.parentDataSet){var c=$('<div class="back"><button type="button" class="btn-icon hide-focus btn-back"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg><span>Back</span></button></div>').appendTo(r);setTimeout((function(){return c.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')})),c.children("button").data(e),$(r).addClass("has-back")}if(e.isMultiRoot){var d='<div class="leaf multiRoot"><div><h2>'.concat(e.multiRootText,"</h2></div></div>");d=h.sanitizeHTML(d),a.push(d),$(a[0]).addClass("root").appendTo(r)}else if(null!==e.ancestorPath&&void 0!==e.ancestorPath){e.ancestorPath.push(e.centeredNode);var u="".concat(e.ancestorPath.map((function(e){return" ".concat(t.getTemplate(e)," ")})).join(""));u=h.sanitizeHTML(u),a.push(u),$(a[0]).addClass("root ancestor").appendTo(r);var p=this.element.find(".leaf.root");p.each((function(i,n){t.updateState(n,!1,e.ancestorPath[i],"add"),i===p.length-1&&$(n).addClass("is-selected")}))}else{var g,f=e.centeredNode;this.isStackedLayout()&&null!==f?g=this.getTemplate(f):this.isStackedLayout()||(g=this.getTemplate(e)),g&&(g=h.sanitizeHTML(g),a.push(g),$(a[0]).addClass("root is-selected").appendTo(r)),f&&null!==f?this.updateState(this.element.find(".leaf.root"),!0,f,void 0):this.updateState(this.element.find(".leaf.root"),!0,e,void 0)}function m(e,t,i){if(null!=t)for(var n=0,s=t.length;n<s;n++){w(e,t[n])}}if(s&&s.length>0)for(var v=0,b=s.length;v<b;v++){var y=e.children[v].children;if(this.isLeaf(s[v])&&!this.isPagingLayout()&&i.renderSubLevel||this.isPagingLayout()?this.createLeaf(e.children[v],$(o.toplevel)):this.createLeaf(e.children[v],$(o.sublevel)),null!=y){m(this,e.children[v].children)}}function w(e,t,i){Object.keys(t).forEach((function(i){if("children"===i){var n=t.id,s=t,a=t.children;return null!=a&&a.length>0&&e.add(n,s,a),m(e,a)}return!0}))}var x=(this.element.find(".container").outerWidth()-$(window).width())/2;this.element.scrollLeft(x);var C=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===C.length&&C.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var e=this.settings;if(e.dataset&&e.dataset[0]&&e.dataset[0].children){for(var t=e.dataset[0].children.length,i=0;t--;)e.dataset[0].children[t].isLeaf||i++;return 1===i}return!1},getTemplate:function(e){var t=gt.compile("{{#dataset}}".concat($("#".concat(h.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:e});return setTimeout((function(){var t=$("#btn-".concat(h.stripTags(e.id)));0!==t.length&&t.hideFocus().popupmenu({attachToBody:!1})}),1),$(t).prop("outerHTML")},createLegend:function(e){for(var t=this.settings,i=0,n=0,s=t.legend.length;n<s;n++){var a=t.legend[n].label,o=t.colorClass[n];n-1+1==4&&(e.append("<ul></ul>"),i++),e.children("ul").eq(i).append(""+'<li>\n          <span class="key '.concat(o,'"></span>\n          <span>').concat(a,"</span>\n        </li>"))}},createLeaf:function(e,t){var i=this,n=$("#".concat(i.settings.rootId," .chart"),i.container),s=t.attr("class"),a=void 0!==s?$("#".concat(i.settings.rootId," .").concat(s)):t;function o(e){i.setColor(e);var n=i.getTemplate(e),s=i.settings.rootId,o=1===a.length?a:t,r=e.isExpanded||void 0===e.isExpanded?"branch-expanded":"branch-collapsed";if(e.isLeaf&&(r=""),1!==$("#".concat(s," #").concat(e.id)).length&&(o.append("<li class=".concat(r,">").concat($(n)[0].outerHTML,"</li>")),e.children)){for(var l="",c=0,d=e.children.length;c<d;c++){i.setColor(e.children[c]);var u=i.getTemplate(e.children[c]);e.children.length,l+="<li>".concat($(u)[0].outerHTML,"</li>")}(o=$("#".concat(s," #").concat(h.stripTags(e.id))).parent()).append("<ul>".concat(l,"</ul>"));for(var p=e.children.length;p--;){var g=$("#".concat(s," #").concat(h.stripTags(e.children[p].id)));i.updateState(g,!1,e.children[p],void 0)}}}if(a.length<1&&("top-level"===s?t.insertAfter(".root"):t.appendTo(n)),e.length)for(var r=0,l=e.length;r<l;r++){e.length;o(e[r]),i.updateState($("#".concat(i.settings.rootId," #").concat(h.stripTags(e[r].id))),!1,e[r],void 0)}else o(e),i.updateState($("#".concat(i.settings.rootId," #").concat(h.stripTags(e.id))),!1,e,void 0)},setColor:function(e){var t=this,i=this.settings;if(this.setRootColor(e),this.isStackedLayout()&&(e.ancestorPath&&null!==e.ancestorPath&&e.ancestorPath.forEach((function(e){t.setRootColor(e)})),e.centeredNode&&null!==e.centeredNode&&this.setRootColor(e.centeredNode)),e.children&&!e.isRootNode)for(var n=0,s=e.children.length;n<s;n++)for(var a=0,o=i.legend.length;a<o;a++)e.children[n][i.legendKey]===i.legend[a].value&&(e.children[n].colorClass=i.colorClass[a])},setRootColor:function(e){for(var t=this.settings,i=0,n=t.legend.length;i<n;i++){if(e[t.legendKey]===t.legend[i].value){e.colorClass=t.colorClass[i];break}""===e[t.legendKey]&&(e.colorClass="default-color")}},isLeaf:function(e){var t=this.settings;return e.isLeaf||t.beforeExpand?e.isLeaf:!(e.children&&e.children.length>0)},updateState:function(e,t,i,n){if($.isEmptyObject($(e).data())&&i){var s=void 0===i?{}:i;$(e).data(s)}var a=this.settings,o=$(e).find(".btn"),r=this.isPagingLayout()?"caret-right":"caret-up",l=$(e).data();void 0===l&&void 0!==i&&(l=i),(l.children&&0!==l.children.length||"add"===n)&&(l.isExpanded=!0,l.isLoaded=!0),t&&(l.isRootNode=!0,l.isLoaded=!0),(void 0===l.isExpanded&&l.children||"expand"===n)&&(l.isExpanded=!0),void 0!==l.isExpanded&&"collapse"!==n||(l.isExpanded=!1),l.isExpanded?(o.find("svg.icon").changeIcon(r),o.addClass("btn-expand").removeClass("btn-collapse")):(o.find("svg.icon").changeIcon("caret-down"),o.addClass("btn-collapse").removeClass("btn-expand")),(l.isLeaf||l.isRootNode)&&o.addClass("btn-hidden"),l.isLeaf&&(l.isLoaded=!1,l.isExpanded=!1),this.isPagingLayout()&&(l.parentDataSet=a.dataset),$(e).data(l)},reload:function(e){this.destroy(),this.element.hierarchy(e)},unbind:function(){this.element.empty()},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Gi)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData("hierarchy")}},$.fn.hierarchy=function(e){return this.each((function(){var t=$.data(this,"hierarchy");t?t.updated(e):t=$.data(this,"hierarchy",new Ui(this,e))}))};var _i={dataset:[],dropdownOpts:{},template:""+"<label>".concat(M.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function Yi(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,_i),this.init()}Yi.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(e){var t=this.settings;if(e=e||t.dataset,"object"===i(gt)&&e&&t.template){t.template instanceof $?t.template="".concat(t.template.html()):"string"==typeof t.template&&(D.containsHTML(t.template)||(t.template=$("#".concat(t.template)).html()));var n=gt.compile(t.template,{dataset:t.dropdownOpts.source?[]:e}),s=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(M.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');e.length>0?this.element.before(n):0===e.length&&this.element.before(n||s);var a=this.element.attr("id")||this.element.attr("name");void 0===a&&(a=C.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",a));var o="".concat(a,"-ff");this.field=this.element.closest(".field, .field-short");var r=M.isRTL();t.dropdownOpts=t.dropdownOpts||{},r&&"object"===i(t.dropdownOpts)&&(t.dropdownOpts.placementOpts?t.dropdownOpts.placementOpts.x=this.element.outerWidth():t.dropdownOpts.placementOpts={x:this.element.outerWidth()}),t.dropdownOpts.cssClass=t.dropdownOpts.cssClass?"".concat(t.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",t.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(t.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",o),this.ffdropdown[0].setAttribute("name",o),this.ffdropdown.prev("label")[0].setAttribute("for",o);var l=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(l),this.field.find("div.dropdown span").addClass("audible"),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon")}},setFiltered:function(){if(this.ddApi){var e=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(e)}return this},getTriggerData:function(e){var t=this.settings,i=t.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:t.dataset;return{idx:e.index(),item:e,data:i[e.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(e){if(this.ddApi){var t=-1,i=this.settings,n=i.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:i.dataset;if("number"==typeof e&&e>-1&&e<n.length)t=e;else if("string"==typeof e){var s=this.ffdropdown.find('option[value="'.concat(e,'"]'));s.length||(s=this.ffdropdown.find("option").filter((function(){return $(this).text()===e}))),s.length&&(t=s.index())}-1!==t&&t!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=t,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var e=this;return this.ffdropdown.on("listopened.".concat("fieldfilter"),(function(){var t=e.field.is(".field-short")?42:52;$("#dropdown-list ul").width(e.element.outerWidth()+t)})).on("selected.".concat("fieldfilter"),(function(t,i){var n=e.getTriggerData(i);e.element.triggerHandler("filtered",[n])})),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat("fieldfilter")),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element[0],e,_i)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldfilter")}},$.fn.fieldfilter=function(e){return this.each((function(){var t=$.data(this,"fieldfilter");t?t.updated(e):t=$.data(this,"fieldfilter",new Yi(this,e))}))};var Ki={};function Xi(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Ki),this.init(),R("FieldOptions")}Xi.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var e=this;this.isFirefox="firefox"===m.browser.name,this.isSafari=m.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var t=this.field.find("label");return t&&(this.label=t),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat("fieldoptions"),(function(e){9!==(e.which||e.keyCode||e.charCode||0)&&(e.preventDefault(),e.stopPropagation())}))),setTimeout((function(){e.popupmenuApi=e.trigger.data("popupmenu"),e.popupmenuApi&&(e.popupmenuApi.settings.returnFocus=!1,e.popupmenuApi.settings.offset.y=10)}),100),this},handleEvents:function(){var e=this,t=this,i=this.element.data("datepicker"),n=this.element.data("timepicker"),s=this.element.data("dropdown"),a=this.element.data("lookup")||this.element.hasClass("lookup"),o=this.element.is(".checkbox"),r=this.element.is(".fileupload"),l=this.element.is(".searchfield"),c=this.element.is(".colorpicker"),d=this.element.closest(".radio-group").length>0,h=this.element.is(".data")&&this.element.closest(".summary-form").length>0,u=function(e){return $(":focus").is(e)},p=function(t){(t||e.element).addClass("is-focused")},g=function(t){(t||e.element).removeClass("is-focused")},f=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).addClass("is-active")},v=function(){t.element.add(t.trigger).add(t.field).add(t.fieldParent).removeClass("is-active")},b=function(t){var o=!u(e.element);return o=!e.trigger.is(t.relatedTarget)&&o,o=!e.trigger.is(".is-open")&&o,o=(!i||!i.isOpen())&&o,o=(!n||!n.isOpen())&&o,o=!$(t.relatedTarget).prev().is(e.element)&&o,o=(!s||!s.isOpen())&&o,o=!(a&&a.modal&&a.modal.isOpen())&&o,o=(!c||!e.element.is(".is-open"))&&o},y=function(t){t.trigger&&t.trigger.off("show.".concat("fieldoptions")).on("show.".concat("fieldoptions"),(function(){f()})).off("hide.".concat("fieldoptions")).on("hide.".concat("fieldoptions"),(function(t){b(t)&&(v(),e.element.removeClass("is-open"))}))},w=function(){var t,i=e.element.height();if(h){var n=parseInt(e.element.css("line-height"),10);i>n?(e.element.css({"margin-bottom":"","padding-bottom":""}),t=(i-n)/2*-1):(e.element.css({"margin-bottom":"8px","padding-bottom":"12px"}),t=6)}else d&&(t=(i-e.trigger.height())/2*-1);return t},x=function(){e.trigger.css({top:"".concat(w()-1,"px")})};return m.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat("fieldoptions"),(function(t){var a;(a=u(e.element),a=(!i||!i.isOpen())&&a,a=(!n||!n.isOpen())&&a,a=(!s||!s.isOpen())&&a)&&f()})).on("close.".concat("fieldoptions"),(function(e){b(e)&&v()}))):(this.field.removeClass("visible"),this.field.on("mouseover.".concat("fieldoptions"),(function(){t.element.prop("disabled")||t.element.closest("is-disabled").length||t.field[0].className.indexOf("visible")<0&&t.field[0].classList.add("visible")})).on("mouseout.".concat("fieldoptions"),(function(){t.field[0].className.indexOf("visible")>-1&&t.field[0].classList.remove("visible")}))),s&&setTimeout((function(){var t=e.trigger.data("popupmenu");t&&t.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})}),0),(i||n)&&y(i||n),n&&(n.settings.returnFocus=!1),(a||c)&&(this.field.on("click.".concat("fieldoptions"),".lookup-wrapper .trigger, .colorpicker-container .trigger",(function(){f()})),c&&this.element.on("beforeopen.".concat("fieldoptions"),(function(){f()}))),o&&(this.trigger.addClass("is-checkbox"),!m.features.touch&&this.isSafari&&this.field.on("click.".concat("fieldoptions"),".checkbox-label",(function(){f()})).on("mouseout.".concat("fieldoptions"),".checkbox-label",(function(){v()}))),r&&(this.element.on("change.".concat("fieldoptions"),(function(){e.targetElem.focus()})),this.field.on("click.".concat("fieldoptions"),".trigger, .trigger-close",(function(){f()}))),l&&setTimeout((function(){e.trigger.add(e.trigger.next(".popupmenu")).appendTo(e.element.closest(".searchfield-wrapper"))}),0),h&&(x(),this.targetElem.add(this.trigger).on("keydown.".concat("fieldoptions"),(function(e){13===(e.which||e.keyCode||e.charCode||0)&&setTimeout((function(){f()}),0)})),this.targetElem.attr("tabindex",0).on("click.".concat("fieldoptions"),(function(){f()})),$(document).on("click.".concat("fieldoptions"),(function(t){$(t.target).is(e.element)||v()})),$("body").on("resize.".concat("fieldoptions"),(function(){x()}))),d&&(x(),this.element.on("focusin.".concat("fieldoptions"),".radio",(function(){var t=e.isSafari?200:0;p(),setTimeout((function(){f()}),t)})).on("focusout.".concat("fieldoptions"),".radio",(function(){g()})),$("body").on("resize.".concat("fieldoptions"),(function(){x()}))),this.targetElem.on("focusin.".concat("fieldoptions"),(function(){f(),d&&e.isSafari&&p()})).on("focusout.".concat("fieldoptions"),(function(t){var i=e.isSafari?200:0;d&&e.isSafari&&g(),setTimeout((function(){b(t)&&v()}),i)})),this.trigger.on("focusin.".concat("fieldoptions"," click.").concat("fieldoptions"),(function(){f()})).on("focusout.".concat("fieldoptions"),(function(e){b(e)&&v()})).on("selected.".concat("fieldoptions"),(function(){e.popupmenuApi.settings.returnFocus=!0})).on("close.".concat("fieldoptions"),(function(e){b(e)&&v()})),(this.isSafari||r)&&(d&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat("fieldoptions"),(function(t){9!==(t.which||t.keyCode||t.charCode||0)||t.shiftKey||(d?(e.targetElem.find(":checked, .radio:first").not(":disabled").focus(),e.targetElem.find(".radio").off("keydown.".concat("fieldoptions")).on("keydown.".concat("fieldoptions"),(function(i){9!==(i.which||i.keyCode||i.charCode||0)||t.shiftKey||setTimeout((function(){e.trigger.focus()}),0)}))):e.trigger.focus(),f(),t.preventDefault(),t.stopPropagation())}))),this.element.on("listopened.".concat("fieldoptions"),(function(){f()})).on("listclosed.".concat("fieldoptions"),(function(){v()})),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat("fieldoptions"),"mouseover.".concat("fieldoptions"),"mouseout.".concat("fieldoptions")].join(" ")),this.element.off(["beforeopen.".concat("fieldoptions"),"change.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"listclosed.".concat("fieldoptions"),"listopened.".concat("fieldoptions")].join(" ")),this.trigger.off(["beforeopen.".concat("fieldoptions"),"click.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"selected.".concat("fieldoptions"),"close.".concat("fieldoptions")].join(" ")),this.targetElem.off(["click.".concat("fieldoptions"),"keydown.".concat("fieldoptions")].join(" ")),$("body").off(["resize.".concat("fieldoptions")].join(" ")),$(document).off(["click.".concat("fieldoptions")].join(" ")),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Ki)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldoptions")}},$.fn.fieldoptions=function(e){return this.each((function(){var t=$.data(this,"fieldoptions");t?t.updated(e):t=$.data(this,"fieldoptions",new Xi(this,e))}))};var Qi={};function Ji(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Qi),this.init()}Ji.prototype={init:function(){this.build()},build:function(){var e=this,t=this,i=this.element,n=!i.is("input.fileupload");this.fileInput=n?i.find("input"):i,i.closest(".field, .field-short").addClass("field-fileupload");var s=i.find("input").attr("name");n||(s=i.attr("id")||i.attr("name"));var a=n?i.find("input").attr("class"):i.attr("class");a=a?" ".concat(a):"";var o=M.translate("FileUpload"),r=$('<label for="'.concat(s,'-filename">').concat(i.text(),' <span class="audible">').concat(o,"</span></label>")),l=$('<input readonly id="'.concat(s,'-filename" class="fileupload-background-transparent').concat(a,'" type="text">')),c='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),d='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!n){var h=i.prev("label");0===h.length&&(h=i.parent().prev("label")),r.html("".concat(h.text(),' <span class="audible">').concat(o,"</span>")),h.addClass("audible").add(this.fileInput).attr("tabindex","-1").attr("aria-hidden","true")}i.before(r,l),this.fileInput.after(c,d);var u=this.fileInput.attr("value");u&&u.length>0&&(l.val(u),this.fileInput.attr("value","")),this.textInput=l,this.svg=i.parent().find(".trigger"),this.svgClose=i.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",(function(t){var n=!1;13===t.which||32===t.which?(i.parent().find('[type="file"]').trigger("click"),n=!0):8===t.which&&(m.browser.isIE11()&&t.preventDefault(),e.clearUploadFile(),n=!0),n&&t.stopPropagation()})),this.svg.on("click.fileupload",(function(t){e.fileInput.trigger("click"),n&&e.fileInput.data("handleEvent".concat([t.type||""]),t.handleObj)})),this.svgClose.on("click.fileupload",(function(t){e.clearUploadFile(),n&&e.fileInput.data("handleEvent +".concat([t.type||""]),t.handleObj)})),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),i.hasClass("required")&&(r.addClass("required"),i.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate()),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",(function(){this.files.length>0?(t.textInput.val(this.files[0].name).trigger("change"),t.svgClose.show().addClass("is-visible")):t.clearing||t.clearUploadFile()})),this.fileInput.on("click.fileupload",(function(t){var i=e.fileInput.data("handleEvent".concat([t.type||""]));i&&i.type===t.type&&"fileupload"===t.handleObj.namespace&&(e.fileInput.data("handleEvent".concat([t.type||""]),null),t.preventDefault())})),t.fileInput.css({position:"static",left:0}),setTimeout((function(){t.fileInput.css({position:"fixed",left:"-10000px"})}),0)},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.hide().removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.textInput.off("keydown.fileupload"),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Qi)),this},destroy:function(){this.unbind(),$.removeData(this.element[0],"fileupload")},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(e){return this.each((function(){var t=$.data(this,"fileupload");t?t.updated(e):t=$.data(this,"fileupload",new Ji(this,e))}))};var Zi={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFiles:99999,maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFiles:null,errorMaxFilesInProcess:null};function en(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Zi),this.init()}en.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var e,t=this.settings,i=t.isStandalone?t.standaloneClass:"";if(t.textDropArea=t.textDropArea||M.translate("TextDropArea"),t.textDropAreaWithBrowse=t.textDropAreaWithBrowse||M.translate("TextDropAreaWithBrowse"),t.textBtnCancel=t.textBtnCancel||M.translate("TextBtnCancel"),t.textBtnCloseError=t.textBtnCloseError||M.translate("TextBtnCloseError"),t.textBtnRemove=t.textBtnRemove||M.translate("TextBtnRemove"),t.errorAllowedTypes=t.errorAllowedTypes||"<em>".concat(M.translate("Error"),"</em>: ").concat(M.translate("ErrorAllowedTypes")),t.errorMaxFileSize=t.errorMaxFileSize||"<em>".concat(M.translate("Error"),"</em>: ").concat(M.translate("ErrorMaxFileSize")),t.errorMaxFiles=t.errorMaxFiles||"<em>".concat(M.translate("Error"),"</em>: ").concat(M.translate("ErrorMaxFiles")),t.errorMaxFiles=t.errorMaxFiles.replace("{n}",t.maxFiles),t.errorMaxFilesInProcess=t.errorMaxFilesInProcess||"<em>".concat(M.translate("Error"),"</em>: ").concat(M.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(t.isDisabled=!0),t.isDisabled&&(i+=" is-disabled"),t.showBrowseButton){var n="",s=C.uniqueId(this.element,"fileupload-adv-"),a=t.allowedTypes.split(/[\s|]+/g),o=t.maxFilesInProcess>1?" multiple":"";if(o+=t.isDisabled?" disabled":"",1===a.length)"*"!==a[0]&&(n=".".concat(a[0]));else for(var r=0,l=a.length;r<l;r++)n+=".".concat(a[r]+(r!==l-1?",":""));e=""+'<div class="fileupload-wrapper '.concat(i,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(t.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(s,'" accept="').concat(n,'"').concat(o," />\n            </label>\n          </div>\n        </div>")}else e=""+'<div class="fileupload-wrapper '.concat(i,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(t.textDropArea,"</p>\n          </div>\n        </div>");u.append(this.element,e,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element)},handleEvents:function(){var e=this,t=this,i=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",(function(e){t.element.triggerHandler("filesdragenter"),e.stopPropagation(),e.preventDefault(),i.isDisabled||$(this).addClass("hover")})).on("dragover.fileuploadadvanced",(function(e){e.stopPropagation(),e.preventDefault()})).on("drop.fileuploadadvanced",(function(e){var n=e.originalEvent.dataTransfer.files;e.preventDefault(),i.isDisabled||(t.element.triggerHandler("filesdroped",[n]),$(this).removeClass("hover is-focus"),t.handleFileUpload(n))})),i.showBrowseButton&&!i.isDisabled){var n=this.dropArea.find(".fileupload-adv-browse-lbl"),s=n.find('input[type="file"]');n.click((function(e){$(e.target).is('.hyperlink, input[type="file"]')||e.preventDefault()})),s.hideFocus(),s.on("hidefocusremove.fileuploadadvanced",(function(t){t.stopPropagation(),e.dropArea.addClass("is-focus")})).on("hidefocusadd.fileuploadadvanced",(function(t){t.stopPropagation(),e.dropArea.removeClass("is-focus")})).on("change.fileuploadadvanced",(function(e){e.stopPropagation(),t.handleFileUpload(this.files)}))}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",(function(e){e.stopPropagation(),e.preventDefault(),"dragover"===e.type&&t.dropArea.removeClass("hover")}))},handleFileUpload:function(e){var t=this.settings;$("span.msg",this.element).closest(".error").remove(),this.totalCompleted=this.totalCompleted||0;var i=this.totalCompleted+e.length+$(".progress",this.element).length;if(i>t.maxFiles)this.showError(t.errorMaxFiles);else if(i>t.maxFilesInProcess)this.showError(t.errorMaxFilesInProcess);else{for(var n=t.fileName.replace("[]",""),s=0,a=e.length;s<a;s++)if(this.isFileTypeAllowed(e[s].name))if(-1!==t.maxFileSize&&e[s].size>t.maxFileSize)this.showError(t.errorMaxFileSize,e[s]);else{this.element.triggerHandler("beforecreatestatus",[e[s]]);var o=new FormData;o.append("".concat(n,"[]"),e[s]);var r=this.createStatus(e[s]);r.container.find(".status-icon .action").focus(),this.element.triggerHandler("aftercreatestatus",[e[s]]),"function"==typeof t.send?t.send(o,r):this.sendFileToServer(o,r)}else this.showError(t.errorAllowedTypes,e[s]);t.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")}},createStatus:function(e){var t=this,i=this,n=this.settings,s=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(n.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(e.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(e.size),'</span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),a=$(".action",s).button(),o=$(".l-pull-right",s),r=$(".progress-bar",s).progress({animationLength:10});this.dropArea.after(s);return{file:e,container:s,setProgress:function(i){t.element.triggerHandler("fileprogress",[{file:e,progress:i}]),r.attr("data-value",i).triggerHandler("updated")},setAbort:function(i){a.on("click.fileuploadadvanced",(function(){t.element.triggerHandler("fileaborted",[e]),i.abort(),a.off("click.fileuploadadvanced"),s.remove()}))},setCompleted:function(t){s.addClass("completed"),a.after($.createIcon("check")),o.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(n.textBtnRemove,"</span>\n        </button>")),$(".action",o).button().on("click.fileuploadadvanced",(function(){$(this).off("click.fileuploadadvanced"),s.remove(),t.remove(),i.element.triggerHandler("fileremoved",[e])})),r.destroy(),a.off("click.fileuploadadvanced"),a.add(r.closest(".progress-row")).remove(),i.totalCompleted++,i.element.triggerHandler("filecompleteuploading",[e])}}},sendFileToServer:function(e,t){var i={remove:function(){}},n=0,s=parseFloat(t.file.size),a=new $.fn.timer((function(){t.setCompleted(i)}),s);$(a.event).on("update",(function(e,i){n=Math.ceil(i.counter/s*100),t.setProgress(n)})),t.setAbort({abort:function(){}})},showError:function(e,t){var i,n=this.settings;i=e===n.errorMaxFiles||e===n.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(n.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="msg">').concat(e,"</span>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(n.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="description">').concat(t.name,'</span>\n            <div class="l-pull-right">\n              <span class="size">').concat(this.formatFileSize(t.size),'</span>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(e,"</p>\n          </div>\n        </div>")),$(".action",i).button().on("click.fileuploadadvanced",(function(){i.remove()})),this.dropArea.after(i)},isFileTypeAllowed:function(e){var t=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),i=e.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(i,t)<0)},formatFileSize:function(e){var t=1e9,i=1e6,n=1e3;return"number"!=typeof e?"":e>=t?"".concat((e/t).toFixed(2)," GB"):e>=i?"".concat((e/i).toFixed(2)," MB"):"".concat((e/n).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.unbind(),this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled"),this.handleEvents()},disable:function(){this.settings.isDisabled=!0,this.unbind(),this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled"),this.handleEvents()},unbind:function(){return this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced"),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Zi)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],"fileuploadadvanced")}},$.fn.fileuploadadvanced=function(e){return this.each((function(){var t=$.data(this,"fileuploadadvanced");t?t.updated(e):t=$.data(this,"fileuploadadvanced",new en(this,e))}))};var tn={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:20,widgetWidth:360,widgetHeight:370,timeout:100};function nn(e,t){this.settings=C.mergeSettings(e,t,tn),this.element=$(e),this.init()}nn.prototype={get state(){var e=this.rowsAndCols.length,t=e?this.rowsAndCols[0].length:0,i=this.settings;return-1===this.rowsAndCols[e-1].indexOf(!1)&&(e-=1),void 0===this.editing&&(this.editing=i.editing),{rows:e,cols:t,containerHeight:i.gutterSize+(i.gutterSize+i.widgetHeight)*e,matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){this.isTransitionsSupports=this.supportsTransitions(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.resize(this,!1)},initColumns:function(e){e=e||0,this.rowsAndCols[e]=[];for(var t=0,i=this.settings.columns;t<i;t++)this.rowsAndCols[e][t]=!0},initHeroWidget:function(){var e=$(".hero-widget");e.length>1&&(e=e.not(":first").remove()),this.heroWidget=e},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var e=this,t=this,i=t.element.find(".card, .widget");t.editing?(i.attr("draggable",!0),i.css("cursor","move"),t.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),i.each((function(i,n){var s=$(n),a=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!s.hasClass("no-remove")){var o=s.children(".widget-header");a.insertBefore(o).on("click.card-remove",(function(){if(e.settings&&"function"==typeof e.settings.onBeforeRemoveCard){var i=e.settings.onBeforeRemoveCard(s);i&&i.then&&"function"==typeof i.then?i.then((function(){s.remove(),t.refresh(!1),t.element.triggerHandler("removecard",[s,t.state])})):i&&(s.remove(),t.refresh(!1),t.element.triggerHandler("removecard",[s,t.state]))}else s.remove(),t.refresh(!1),t.element.triggerHandler("removecard",[s,t.state])}))}})),i.on("mouseenter.card",(function(){var e=$(this),i=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",(function(n){n.preventDefault(),e.addClass("ui-resize-passive"),e.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(n){var s=n.clientX-e.offset().left;s<t.settings.widgetWidth/2?i.css({left:t.settings.widgetWidth/2}):e.width(s)})).on("mouseup.handle",(function(){e.removeClass("ui-resize-passive"),e.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),e.removeClass("double-width triple-width quad-width");var i=e.width()/t.settings.widgetWidth;i>3.5?e.addClass("quad-width"):i>2.5?e.addClass("triple-width"):i>1.5&&e.addClass("double-width"),$(".ui-resizable-handle").remove(),e.css({opacity:1,width:""}),t.refresh(!1),t.element.triggerHandler("resizecard",[e,t.state])}))})),n=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",(function(i){i.preventDefault(),e.addClass("ui-resize-passive"),e.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(i){var s=i.clientY-e.offset().top;s<t.settings.widgetHeight?n.css({top:t.settings.widgetHeight}):e.height(s)})).on("mouseup.handle",(function(){e.removeClass("ui-resize-passive"),e.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),e.removeClass("double-height"),e.height()/t.settings.widgetHeight>1.5&&e.addClass("double-height"),$(".ui-resizable-handle").remove(),e.css({opacity:1,height:""}),t.refresh(!1),t.element.triggerHandler("resizecard",[e,t.state])}))}));0===e.has(".ui-resizable-handle").length&&e.append(i,n),e.css({border:"1px solid #078cd9"})})).on("mouseleave.card",(function(){var e=$(this);e.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),e.css({border:"1px solid #bdbdbd"})})).on("dragstart.card",(function(){$(this).addClass("is-dragging")})).on("dragover.card",(function(e){e.preventDefault()})).on("dragenter.card",(function(e){e.preventDefault();var i=$(this),n=$(".is-dragging");i.is(n)&&0===$(".drop-indicator").length||(n.index()<i.index()?(t.guide.css("right","-14px"),t.guide.css("left","")):(t.guide.css("left","-14px"),t.guide.css("right","")),i.append(t.guide),t.refresh(!1))})).on("dragend.card",(function(){var e=$(this),n=$(i).has(".drop-indicator");e.index()<n.index()?e.insertAfter(n):e.insertBefore(n),e.removeClass("is-dragging"),t.guide.remove(),t.refresh(!1),t.element.triggerHandler("reordercard",[e,t.state])}))):(i.attr("draggable",!1),i.css("cursor","auto"),i.children(".card-remove").remove(),i.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"))},setEdit:function(e){void 0!==e&&(this.editing=e,this.initEdit(),this.refresh(!1))},getAvailability:function(e){for(var t=!1,i={},n=this.rowsAndCols.length,s=0,a=n;s<a&&!t;s++)for(var o=0,r=!0,l=this.rowsAndCols[s].length;o<l&&!t;o++)if(this.rowsAndCols[s][o]&&e.w+o<=l){if(e.w>1&&l>o+1)for(var c=0;c<e.w;c++)if(!this.rowsAndCols[s][o+c]){r=!1;break}if(e.h>1&&n>s+1)for(var d=0;d<e.h;d++)if(!this.rowsAndCols[s+d][o]){r=!1;break}r&&(i.row=s,i.col=o,t=!0)}return Object.getOwnPropertyNames(i).length||(this.initColumns(n),i.row=n,i.col=0),i},fitBlock:function(e,t,i){var n=!0;if(i.x=t,i.y=e,1===i.w&&1===i.h)this.rowsAndCols[e][t]=!1;else if(1!==i.w)for(var s=e,a=i.h+e;s<a;s++)for(var o=t,r=i.w+t;o<r;o++)this.rowsAndCols[s]||this.initColumns(s),this.rowsAndCols[s][o]=!1;else for(var l=e,c=i.h+e;l<c;l++)for(var d=t,h=i.h+t;d<h;d++)this.rowsAndCols[l]||this.initColumns(l),this.rowsAndCols[l][t]=!1;for(var u=0,p=this.rowsAndCols[e].length;u<p;u++)this.rowsAndCols[e][u]&&(n=!1);n&&(this.rowsAndCols[e+1]||this.initColumns(e+1))},setBlocks:function(){var e=this.element.find(".card, .widget");this.blocks=[];for(var t=0,i=e.length;t<i;t++){var n=$(e[t]),s=n.hasClass("double-height")?2:1,a=void 0;a=n.hasClass("quad-width")?4:n.hasClass("triple-width")?3:n.hasClass("double-width")?2:1,this.blocks.push({w:a,h:s,elem:n,text:n.text()})}if(this.settings.columns>1)for(var o=0,r=0,l=0,c=this.blocks.length;o<c;o++)this.blocks[o].w>=this.settings.columns&&o&&l&&l<=this.settings.columns/2&&this.arrayIndexMove(this.blocks,o,r),(l+=this.blocks[o].w)>=this.settings.columns&&(l=0,r=this.blocks[r].w>=this.settings.columns?r+1:o)},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},resize:function(e,t){var i=4*e.settings.widgetWidth+3*e.settings.gutterSize,n=3*e.settings.widgetWidth+2*e.settings.gutterSize,s=2*e.settings.widgetWidth+e.settings.gutterSize,a=e.settings.widgetWidth,o=i,r=e.element.outerWidth(),l=r>=i,c=r>=n&&r<=i,d=r>=s&&r<=n,h=r<=s,u=this.element.attr("data-columns"),p=e.element.find("> .content");this.settings.columns=parseInt(u||this.settings.columns,10),l&&4===e.settings.columns&&(e.settings.columns=4,o=i),(c||l&&3===e.settings.columns)&&(e.settings.columns=3,o=n),d&&(e.settings.columns=2,o=s),h&&(e.settings.columns=1,o=a),p.length&&(p[0].style.marginLeft="-".concat(o/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var g=0,f=e.blocks.length;g<f;g++){var m=e.blocks[g];m.elem.removeClass("to-single to-double to-triple"),m.w>e.settings.columns&&(m.w=e.settings.columns,1===e.settings.columns?m.elem.addClass("to-single"):2===e.settings.columns?m.elem.addClass("to-double"):3===e.settings.columns&&m.elem.addClass("to-triple"));var v=e.getAvailability(m),b=e.settings.widgetWidth+e.settings.gutterSize,y=b*e.settings.columns,w={left:M.isRTL()?y-(b*m.w+b*v.col):b*v.col,top:(e.settings.widgetHeight+e.settings.gutterSize)*v.row};if(t&&!this.editing){var x=e.settings.easing;"blockslide"===x?e.isTransitionsSupports?(e.applyCubicBezier(m.elem,[.09,.11,.24,.91]),m.elem[0].style.left="".concat(w.left,"px"),m.elem[0].style.top="".concat(w.top,"px")):m.elem.animate(w,e.settings.timeout):m.elem.animate(w,e.settings.timeout,x)}else e.isTransitionsSupports&&e.applyCubicBezier(m.elem,null),m.elem[0].style.left="".concat(w.left,"px"),m.elem[0].style.top="".concat(w.top,"px");e.fitBlock(v.row,v.col,m)}e.element.triggerHandler("resize",[e.settings.columns,e.state])},applyCubicBezier:function(e,t){var i=t?"all .3s cubic-bezier(".concat(t,")"):"none";e[0].style["-webkit-transition"]=i,e[0].style["-moz-transition"]=i,e[0].style["-ms-transition"]=i,e[0].style["-o-transition"]=i,e[0].style.transition=i},supportsTransitions:function(){var e=document.createElement("p").style,t="transition";if("string"==typeof e[t])return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0,s=i.length;n<s;n++)if("string"==typeof e[i[n]+t])return!0;return!1},refresh:function(e){e=void 0!==e?e:this.settings.animate,this.resize(this,e)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,tn)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],"homepage")},handleEvents:function(){var e=this;$("body").on("resize.homepage",(function(){e.resize(e,e.settings.animate)})),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",(function(){e.resize(e,e.settings.animate)}))}},$.fn.homepage=function(e){return this.each((function(){var t=$.data(this,"homepage");t?t.updated(e):t=$.data(this,"homepage",new nn(this,e))}))};var sn=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),an={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1}};function on(e,t){this.settings=C.mergeSettings(e,t,an),this.settings.dataset=t.dataset,this.element=$(e),this.init()}on.prototype={get state(){var e,t,i,n=0,s=1,a=this.settings.indeterminate,o=this.settings.pagesize,r=this.previousOperation,l=this.previousTrigger,c=this.settings.dataset;if(isNaN(this.serverDatasetTotal)){if(c&&c.length){if(n=c.length,this.isFilteredClientside)n=c.filter((function(e){return!e._isFilteredOut})).length}}else n=this.serverDatasetTotal;return this.grandTotal&&(i=this.grandTotal),s=a?999999999:n<1?1:Math.ceil(n/o),isNaN(this.filteredTotal)||(t=this.filteredTotal,a?s=999999999:e=t<1?1:Math.ceil(t/o)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:i,pagesize:o,pages:s,trigger:l,total:n,type:r,filteredActivePage:this.filteredActivePage,filteredTotal:t,filteredPages:e}},get pagingInfo(){return O("state","pagingInfo"),this.state},get focusableElements(){return C.getArrayFromList(this.pagerBar[0].querySelectorAll(sn))},get numberButtons(){if(!this.isTable){var e=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return C.getArrayFromList(e)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function(){this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var e=Number(this.element.attr("data-pagesize"));isNaN(e)||(this.settings.pagesize=e),this.element.removeAttr("data-pagesize")}if(-1===this.settings.pagesizes.indexOf(this.settings.pagesize)){this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort((function(e,t){return e-t}))}this.handleDeprecatedSettings();var t=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),t.length&&t[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this.element.attr({role:"region","aria-label":M.translate("Pagination")}),this},createPagerBar:function(){if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length)){var e=this;["widget","card"].forEach((function(t){var i=e.element.closest(".".concat(t,"-content"));if(i.length){var n=i.next(".".concat(t,"-footer"));n.length||(n=$('<div class="'.concat(t,'-footer"></div>')).insertAfter(i)),e.pagerBar.appendTo(n)}}))}},handleDeprecatedSettings:function(){void 0!==this.settings.attachPageSizeMenuToBody&&(O("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var e=this;this.pagerBar.on("click.pager",".btn-icon",(function(t){var i=t.currentTarget,n=i.parentNode;if(t.preventDefault(),$(this).attr("disabled"))return!1;var s=e.state,a=s.activePage;if(s.filteredTotal&&(a=s.filteredActivePage),u.hasClass(n,"pager-prev"))return e.setActivePage(a-1,!1,"prev"),e.triggerPagingEvents(a),!1;if(u.hasClass(n,"pager-next"))return e.setActivePage((-1===a?1:a)+1,!1,"next"),e.triggerPagingEvents(a),!1;if(u.hasClass(n,"pager-first"))return e.setActivePage(1,!1,"first"),e.triggerPagingEvents(a),!1;if(u.hasClass(n,"pager-last"))return e.setActivePage(e.pageCount(),!1,"last"),e.triggerPagingEvents(a),!1;var o=Number(i.getAttribute("data-page"));return(isNaN(o)||o<1)&&(o=1),e.setActivePage(o,!1,"page"),e.triggerPagingEvents(a),!1})),e.pagerBar.on("keydown.pager",$(e.focusableElements),(function(e){var t=(e=e||window.event).which||e.keyCode||e.charCode||!1,i=37===t||40===t,n=39===t||38===t,s=e.target;if("INPUT"===s.nodeName&&(i=40===t,n=38===t),!i&&!n)return!0;var a="INPUT"===s.nodeName?s.parentNode.parentNode:s.parentNode,o=a.nextSibling,r=a.previousSibling,l=null===r,c=null===o;if(e.preventDefault(),i&&!l){var d=r.querySelector("button, input");return d.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),d.focus(),!1}if(i&&l){var h=a.parentNode.lastChild.querySelector("button, input");return h.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),h.focus(),!1}if(n&&!c){var u=o.querySelector("button, input");return u.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),u.focus(),!1}if(n&&c){var p=a.parentNode.firstChild.querySelector("button, input");p.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),p.focus()}return!1}))},reset:function(e,t){this.activePage=this.settings.activePage,this.previousOperation=e,this.previousTrigger=t,this.teardown(),this.init()},showPageSizeSelector:function(e){e="true"==="".concat(e).toLowerCase(),this.settings.showPageSizeSelector=e,e&&(this.isShowPageSizeSelectorCall=e)},showButton:function(e,t){if(-1!==["first","last","next","previous"].indexOf(e)){var i=".pager-".concat(e," .btn-icon");"previous"===e&&(i=".pager-prev .btn-icon");var n=this.pagerBar[0].querySelector(i);t="true"==="".concat(t).toLowerCase(),this.settings["show".concat(D.capitalize(e),"Button")]=t,n&&(t?n.parentNode.classList.remove("hidden"):n.parentNode.classList.add("hidden"))}},enableButton:function(e,t){if(-1!==["first","last","next","previous"].indexOf(e)){var i=".pager-".concat(e," .btn-icon");"previous"===e&&(i=".pager-prev .btn-icon");var n=this.pagerBar[0].querySelector(i);t="true"==="".concat(t).toLowerCase(),this.settings["enable".concat(D.capitalize(e),"Button")]=t,n&&(t?(n.disabled=!1,n.parentNode.classList.remove("is-disabled"),$(n).removeAttr("disabled")):(n.disabled=!0,n.parentNode.classList.add("is-disabled"),$(n).attr("disabled","disabled")))}},setActivePage:function(e,t,n){var s="number"==typeof e.searchActivePage||"number"==typeof e.filteredActivePage||"number"==typeof this.filteredActivePage,a=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===i(e)?a=s?e.filteredActivePage||e.searchActivePage:e.activePage?e.activePage:1:isNaN(e)||(a=e),s?this.filteredActivePage=a:this.activePage=a,this.previousOperation=n,this.render(),void 0===a||0===a||isNaN(a)||a===this.activePage&&!t?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),a)},adjustPageCount:function(e){var t=this.state,i="number"==typeof t.filteredActivePage||"number"==typeof this.filteredActivePage,n=t.pages;return i&&t.filteredPages&&(n=t.filteredPages),(e<1||e>n)&&(e=this.filteredActivePage||this.activePage),e},pageCount:function(e){var t=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===e&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==e||this.settings.source||t?(void 0!==e&&(this._pageCount=e),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},renderButtons:function(){var e=this.activePage,t=this.state.pages,i="",n=!1,s=!1,a=!1,o=!1,r=!this.settings.enableFirstButton,l=!this.settings.enablePreviousButton,c=!this.settings.enableNextButton,d=!this.settings.enableLastButton,h=this.settings.indeterminate&&!0===this.firstPage,u=this.settings.indeterminate&&!0===this.lastPage,p=this.settings.dataset&&this.settings.dataset.length;this.state.filteredPages&&(e=this.state.filteredActivePage,t=this.state.filteredPages),this.settings.showFirstButton&&((h||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(r=!0),n=!0),this.settings.showPreviousButton&&((h||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(l=!0),s=!0),this.settings.showNextButton&&((u||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===t)&&(c=!0),a=!0),this.settings.showLastButton&&((u||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===t)&&(d=!0),o=!0);var g=[],f=this.settings.showPageSizeSelector?190:0,m=(this.pagerBar.width()-f)/40,v=Math.floor(m);if((s||a)&&(v-=1),(o||n)&&(v-=1),!this.isTable&&"standalone"!==this.settings.type&&p&&v>=t&&(r=!0,d=!0),!this.settings.indeterminate){for(var b=Math.floor(v/2),y=e-b,w=e+b;y<1;)++y,w<t&&++w;for(;w>t;)y>1&&--y,--w;for(var x=y;x<w+1;x++)g.push(x)}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],r=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="",c="",d="",h="",u="";n&&(u=' data-page="'.concat(n,'"')),i&&(h=' title="'.concat(i,'"')),r&&(s+=" hidden"),a&&(s+=" selected",l=' aria-disabled="true"'),o&&(c=" disabled",l=' aria-disabled="true"',d='<div class="disabled-tooltip"'.concat(h,"></div>"),n||(h=""));var p='<li class="'.concat(s,'">\n        <button type="button" class="btn-icon"').concat(h).concat(u).concat(l).concat(c,">\n          ").concat(d,"<span>").concat(t,"</span>\n          ").concat(e,"\n        </button>\n      </li>");return p}if($(this.numberButtons).remove(),n&&(i+=C($.createIcon({icon:"first-page"}),M.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,r,!1)),s&&(i+=C($.createIcon({icon:"previous-page"}),M.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,l,!1)),!this.isTable&&p){var k="";g.forEach((function(t){k+=t===(e||1)?C(t,M.translate("PageOn"),null,t,"pager-no",!0,!1,!1):C(t,M.translate("Page"),null,t,"pager-no",!1,!1,!1)})),i+=k}a&&(i+=C($.createIcon({icon:"next-page"}),M.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,c,!1)),o&&(i+=C($.createIcon({icon:"last-page"}),M.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,d,!1)),this.pagerBar[0].innerHTML=i,o||n||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate){var e=this.activePage,t=this.state.pages||1;if(this.state.filteredPages&&(e=this.state.filteredActivePage,t=this.state.filteredPages),this.pageSelectorInput)t>1&&this.pagerBar.find(".pager-total-pages").text(t),this.pagerBar.find(".pager-count input").val(e);else{var i=M.translate("PageOf");i=(i=i.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(e,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(t,"</span>")),$('<li class="pager-count"><label>'.concat(i," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var n=null,s="".concat(t).replace(/\d/g,"#"),a=this,o={pattern:s,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(o).on("focus",(function(){n=parseInt($(this).val(),10)})).on("blur",(function(){r($(this)),n=null})).on("keydown",(function(e){return 13!==e.which||(r($(this)),e.stopPropagation(),e.preventDefault(),!1)}))}function r(e){var t=a.adjustPageCount(parseInt(e.val(),10));if(n!==t){var i=a.activePage;a.state.filteredPages&&(i=a.state.filteredActivePage),e.val(a.setActivePage(t,!1,"page")),a.triggerPagingEvents(i)}else e.val(n)}},renderPageSizeSelectorButton:function(){var e=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var t=$('<li class="pager-pagesize"></li>'),i=$.createIcon({icon:"dropdown"}),n=M.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),s="",a="<span>".concat(n,"</span>");this.showSmallPageSizeSelector&&(s=' class="audible"',n=M.translate(this.settings.pageSizeSelectorText).replace("{0}",""),a='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(s,">").concat(n,"</span>"));var o=$('<button type="button" class="btn-menu">\n        '.concat(a,"\n        ").concat(i,"\n      </button>")).appendTo(t);t.appendTo(this.pagerBar);var r="";this.showSmallPageSizeSelector&&(r='<li class="heading">'.concat(n,"</li>"));for(var l=0;l<this.settings.pagesizes.length;l++){var c=this.settings.pagesizes[l];r+='<li class="'.concat(c===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(c,"</a></li>")}var d=$('<ul class="popupmenu is-selectable">'.concat(r,"</ul>"));o.after(d)}var h=$(this.pageSizeSelectorButton),u=C.extend({},{placementOpts:{parent:h,parentXAlignment:M.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);h.popupmenu(u),h.on("selected.pager",(function(t,i){e.changePageSize(i)}))}},render:function(){var e=this.state,t=e.pages;e.filteredPages&&(t=e.filteredPages),this.pageCount(t),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar()},renderBar:function(e){var t=(e=e?C.extend({},this.state,e):this.state).activePage;e.filteredActivePage&&(t=e.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==e.firstPage&&(!1===e.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),!0!==e.firstPage&&1!==t||(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==e.lastPage&&(!1===e.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),!0!==e.lastPage&&t!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var i=this.pagerBar[0]?this.pagerBar[0].classList:null;this.hidePagerBar(e)&&i?i.add("hidden"):this.settings.hideOnOnePage&&i&&i.contains("hidden")&&i.remove("hidden"),this.initTabIndexes()},initTabIndexes:function(){var e=$(this.focusableElements);e.attr("tabindex","-1"),e.filter(":not([disabled])").first().removeAttr("tabindex")},triggerPagingEvents:function(e){var t=this.state;e||(e=this.state.activePage),"first"===t.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,t),this.element.trigger("firstpage",t)),"prev"===t.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,t),this.element.trigger("previouspage",t)),"next"===t.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,t),this.element.trigger("nextpage",t)),"last"===t.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,t),this.element.trigger("lastpage",t)),"pageinfo"!==t.type&&this.element.trigger("page",t)},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),Array.isArray(e.pagesizes)&&e.pagesizes.length&&(this.settings.pagesizes=e.pagesizes);var t={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(t),this},changePageSize:function(e){var t=e;t.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),t.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(t.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:e,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:e,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(e,t){if(e){if(e.pagesize&&(this.settings.pagesize=e.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=e.pagesize)),e.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==e.firstPage&&(this.firstPage=e.firstPage,this.settings.enableFirstButton=!e.firstPage,this.settings.enablePreviousButton=!e.firstPage),void 0!==e.lastPage&&(this.lastPage=e.lastPage,this.settings.enableNextButton=!e.lastPage,this.settings.enableLastButton=!e.lastPage),isNaN(e.grandTotal)||(this.grandTotal=e.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=e.total),isNaN(e.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=e.filteredTotal,this.filteredActivePage=e.searchActivePage||e.filteredActivePage||1),e.type||(e.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(e,!1,e.type),void("initial"===e.type||t||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(e){return!!(this.settings.hideOnOnePage&&e.total<=e.pagesize)||!(!e||!0!==e.firstPage||!0!==e.lastPage||!e.hideDisabledPagers)},teardown:function(){this.numberButtons&&this.numberButtons.forEach((function(e){var t=e.querySelector(".btn-icon"),i=$(t).data("button"),n=$(t).data("tooltip");i&&i.destroy(),n&&n.destroy()})),this.pagerBar.off(["click.".concat("pager"),"keydown.".concat("pager")].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat("pager"),"blur.".concat("pager"),"keydown.".concat("pager")].join(" ")),$(this.pageSelectorInput).data("mask").destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat("pager")),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var e=$(this.pageSizeSelectorButton).data("popupmenu");if(e&&e.menu){var t=e.menu;e.destroy(),t.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],"pager")}},$.fn.pager=function(e){return this.each((function(){var t=$.data(this,"pager");t?t.updated(e):t=$.data(this,"pager",new on(this,e))}))};var rn={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1};function ln(e,t){return this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,rn),this.init(),this}ln.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var e={};this.settings.pagerSettings&&(e=this.settings.pagerSettings),e.dataset=this.settings.dataset,e.source=this.settings.source,e.type="list";for(var t=["pagesize","showPageSizeSelector"],i=0;i<t.length;i++)void 0===this.settings[t[i]]||e[t[i]]||(e[t[i]]=this.settings[t[i]]);return e},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var e=this,t=this.element.closest(".card, .widget"),n=this.element.attr("data-selectable"),s=this.element.attr("data-select-onfocus");if(this.element.attr("data-pagesize")){var a=Number(this.element.attr("data-pagesize"));isNaN(a)||(this.settings.pagesize=a),this.element.removeAttr("data-pagesize")}if(!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var o=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),o.each((function(t,i){e.settings.dataset.push({text:$(i).text()})})),o.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var r=window[this.settings.dataset];r&&r.length&&(this.settings.dataset=r)}n&&n.length&&(this.settings.selectable=n),s&&s.length&&(this.settings.selectOnFocus=JSON.parse(s)),this.actionButton=t.find(".btn-actions"),this.actionButton.length>0&&(this.actionButton.data("popupmenu")||this.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var l=this.element.parent(".card-content, .widget-content");if(l[0]&&(l[0].style.overflow="hidden"),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete"),this.searchfield.length;var c={filterMode:"contains"};"object"===i(this.settings.listFilterSettings)&&(c=C.extend({},c,this.settings.listFilterSettings)),this.listfilter=new pt(c)}this.settings.emptyMessage&&(this.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(e){var t,i={count:e.length};if(e[0]){for(t in e[0])i[t]=0;for(var n=0;n<e.length;n++)for(t in e[n])i[t]+=parseFloat(e[n][t]);return i}},render:function(e,t){var n=this,s="function"==typeof this.settings.source,a={},o=e,r=0,l=o?o.length:0,c=this.settings.pagesize,d=e.length;if((t&&(c=t.pagesize||c,d=t.filteredTotal||d),!s&&this.pagerAPI&&(this.renderPager(t,!0),t=this.pagerAPI.state),d>c)&&(this.filteredDataset?t.filteredPages:t.pages)>1){var h=t.activePage>0?t.activePage-1:0;this.filteredDataset&&(h=t.filteredActivePage-1),r=t.pagesize*h,l=t.pagesize*(h+1),o=e.slice(r,l)}if("object"===i(gt)&&o&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(D.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(a=this.getTotals(e));var p=gt.compile(this.settings.template,{dataset:o,totals:a});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),o.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(p):n.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),u.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):n.emptyMessageContainer?(this.element.empty(),u.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===o.length&&this.element.html(p||"<ul></ul>")}var g=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||g.find(".card-title, .widget-title").text()||"List"});var f=this.element.find("li, tbody > tr").first(),m=this.element.find("li, tr"),v="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=f.attr("tabindex",0),this.settings.selectable||1!==f.find("a").length||f.removeAttr("tabindex");var b=m.length>o.length;m.each((function(e){var t=$(this);if(t.attr("role","option"),v){n.element.addClass("is-multiselect");var i=n.element.prevAll(".toolbar");i.length&&i.data("toolbar")&&i.data("toolbar").toggleMoreMenu(),n.settings.showCheckboxes&&0===t.children(".listview-selection-checkbox").length&&t.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(M.translate("Checkbox")," ").concat(M.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}if(b){var s=r+e;if(s<n.settings.dataset.length){var a=n.settings.dataset[s];t.css("display",void 0===a._isFilteredOut||a._isFilteredOut?"":"none")}}else t.css("display","");t.attr({"aria-posinset":r+e+1,"aria-setsize":d}),t.hasClass("is-disabled")&&t.attr("aria-disabled","true"),n.settings.highlight&&n.searchTerm&&t.highlight(n.searchTerm)})),n.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[o]),this.element.off("updated.listview").on("updated.listview",(function(e,t){n.updated(t)}))},renderPager:function(e,t){this.pagerAPI&&this.pagerAPI.updatePagingInfo(e,t)},getPageableElements:function(){var e=this.element.children();return e.is("ul")&&(e=e.children()),e},refresh:function(e,t){this.loadData(e,t),this.list&&this.render(this.list.data)},loadData:function(e,t,n){var s=!1,a=this;if(e=e||this.settings.dataset,this.filteredDataset&&(e=this.filteredDataset),t||(this.pagerAPI?(e.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:e}),t=this.pagerAPI.state):t={activePage:1}),this.filteredDataset?t.filteredTotal=e.length:t.total=e.length,Array.isArray(e)){var o=this.settings.source;if("string"!=typeof e||0!==e.indexOf("http")&&0!==e.indexOf("/")||(o=e,s=!0),!o&&!s||this.filteredDataset||n)this.render(e,t);else switch(i(o)){case"function":o(t,r);break;case"string":return void(0!==o.indexOf("http")&&0!==o.indexOf("/")||$.getJSON(o,r));default:this.settings.dataset=o,e=o,this.render(o,t)}}function r(t,i){a.settings.dataset=t,e=t;var n=a.pagerAPI?a.pagerAPI.activePage:1;"string"==typeof i&&(i={activePage:n,pagesize:a.settings.pagesize,total:e.length,type:i}),a.pagerAPI&&(a.renderPager(i,!0),i=a.pagerAPI.state),a.render(e,i)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(e){this.clearSelection(),e.sort((function(e,t){return e-t}));for(var t=e[0];t<=e[1];t++){var i=$("li, tbody tr",this.element).eq(t);i.is(".is-disabled, .is-selected")||this.select(i)}},deselectItemsBetweenIndexes:function(e){e.sort((function(e,t){return e-t}));for(var t=e[0];t<=e[1];t++){var i=$("li, tbody tr",this.element).eq(t);!i.is(".is-disabled")&&i.is(".is-selected")&&this.select(i)}},clearSelection:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},handleResize:function(){var e=$("li .listview-heading, tr .listview-heading",this.element),t=e.eq(1),i=t.width();t.length&&i&&(e[0].style.width="".concat(i,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(e,t){this.filter(t)},filter:function(e){if(e){var t=(e=$(e)).val().trim(),i={searchActivePage:1};if(t){if(t.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==t){this.searchTerm=t,this.element.unhighlight(),this.settings.dataset.forEach((function(e){e._isFilteredOut=!1}));var n=this.listfilter.filter(this.settings.dataset,this.searchTerm);n.length||(n=[]),i.filteredTotal=n.length,i.searchActivePage=1,n.forEach((function(e){e._isFilteredOut=!0})),this.filteredDataset=n,this.loadData(null,i),this.element.trigger("filtered",{elem:this.element,filteredResults:n,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function(){this.element.unhighlight(),this.settings.dataset.forEach((function(e){delete e._isFilteredOut})),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var e={activePage:1,filteredTotal:void 0,searchActivePage:void 0};this.refresh(null,e)},focus:function(e){e.is(":hidden")||e.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=e.attr("tabindex",0).focus(),this.settings.selectable||1!==e.find("a").length||(e.find("a").focus(),e.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(e))},remove:function(e){"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e,!0),e.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var e=this;$.each(this.selectedItems,(function(t,i){e.remove(i)}))},clearAllSelected:function(){var e=this;$.each(this.selectedItems,(function(t,i){e.select(i)}))},sortInit:function(e,t,i){i&&""!==$.trim(i)&&$("[".concat(i,"]")).each((function(){var n=$(this),s=$.fn.parseOptions(n,i);n.on(t,(function(t){$(s.list).data(e).setSortColumn(s),t.preventDefault()}))}))},setSortColumn:function(e){var t=e.orderBy||this.list.sort.field,i=e.order;if(this.list.data||t){i=i?"desc"===i:!(this.list.sort&&this.list.sort[t]&&this.list.sort[t].reverse),(e.reloadApi||e.reloadApiNoSort)&&this.loadData(),e.reloadApiNoSort&&(t=this.list.sort.field,i=this.list.sort[t].reverse);var n=this.sortFunction(t,i);this.list.data.sort(n),this.render(this.list.data),this.list.sort={field:t},this.list.sort[t]={reverse:i},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(e,t,i){i||(i=function(e){return"string"==typeof(e=null==e?"":e)&&(e=e.toUpperCase(),isNaN(parseFloat(e))||(e=parseFloat(e))),e});var n=i?function(t){return i(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,i){return e=n(e),i=n(i),t*((e>i)-(i>e))}},deselect:function(e){"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),e.is(".is-selected")&&this.select(e)},unselect:function(e){return F(this.deselect,this.unselect).apply(this,[e])},select:function(e,t){var i,n=this,s="mixed"===n.settings.selectable;if(n.selectedItems=[],"number"==typeof e&&(e=$(this.element.children()[0]).children().eq(e)),i=e.hasClass("is-selected"),e.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),e.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&(e.parent().children().removeAttr("aria-selected"),e.parent().find(".is-selected").removeClass("is-selected"),n.selectedItems[0]=$(this)),i?(n.selectedItems=[],e.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(e.addClass("is-selected".concat(s?" hide-selected-color":"")),n.lastSelectedItem=e.index()),e.parent().find(".is-selected").each((function(e){n.selectedItems[e]=$(this)})),e.find(".listview-selection-checkbox input").prop("checked",!i),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var a=i?"NotSelected":"Selected";e.attr("aria-selected",!i),e.find(".label-text .audible").text("".concat(M.translate("Checkbox")," ").concat(a,"."))}if(!t){for(var o=i?"unselected":"selected",r=[],l=0;l<this.selectedItems.length;l++){var c=this.selectedItems[l][0].getAttribute("aria-posinset");r.push(this.settings.dataset[c-1])}this.element.triggerHandler(o,{selectedItems:this.selectedItems,elem:e,selectedData:r}),"unselected"===o&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:e,selectedData:r})}var d=this.element.closest(".card, .widget");d.length||(d=this.element.parent());var h=d.find(".listview-toolbar, .contextual-toolbar"),u=h.data("toolbar");if(n.selectedItems.length>0){u&&u.toggleMoreMenu(),h.one("animateopencomplete",(function(){n.element.addClass("is-toolbar-open"),h.trigger("recalculate-buttons").removeClass("is-hidden")})),h[0]&&(h[0].style.display="block"),h.animateOpen({distance:40});var p=h.find(".title, .selection-count");p&&p.length||(p=$('<div class="title selection-count"></div>'),h.prepend(p)),p.text("".concat(n.selectedItems.length," ").concat(M?M.translate("Selected"):"Selected"))}else h.addClass("is-hidden").one("animateclosedcomplete",(function(e){e.stopPropagation(),this.style.display="none",n.element.removeClass("is-toolbar-open")})).animateClosed()}},toggleItemActivation:function(e){e.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(e):this.activateItem(e)},activateItem:function(e){var t="number"==typeof e?e:e.index(),i=this.element.find("li.is-activated");"number"==typeof e&&(e=this.element.find("ul").children().eq(e)),this.deactivateItem(i),!1!==this.element.triggerHandler("beforeactivate",[{index:t,elem:e,data:this.settings.dataset[t]}])&&(e.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:t,elem:e,data:this.settings.dataset[t]}]))},activatedItem:function(){var e=this.element.find("li.is-activated"),t=e.index();return{index:t,elem:e,data:this.settings.dataset[t]}},deactivateItem:function(e){"number"==typeof e&&(e=this.element.find("ul").children().eq(e)),void 0===e&&(e=this.element.find("li.is-activated")),e.removeClass("is-activated");var t=e.index();t<0||this.element.triggerHandler("itemdeactivated",[{index:t,elem:e,data:this.settings.dataset[t]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var e=this.searchfield.data("searchfield");e&&e.xButton&&e.xButton.trigger("click")}},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset)),this.updateSearch(),this.refresh(e&&e.dataset?e.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData("listview")},handleEvents:function(){var e=this,t=!1,i=!1,n="multiple"===e.settings.selectable||"mixed"===e.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",(function(n){var s=$(this);if(!(n.originalEvent&&n.originalEvent.target&&$(n.originalEvent.target).is(".icon-favorite"))){if(s.is(":first-child")&&s.hasClass("is-disabled")){var a=$.Event("keydown.listview");a.keyCode=40,t=!0,s.trigger(a)}t||s.hasClass("is-disabled")||!e.settings.selectOnFocus||"multiple"===e.settings.selectable||"mixed"===e.settings.selectable||(e.select(s),t=!0,i=!0)}})),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",(function(t){var i=$(this),s=i.is("a")?i.closest("li"):$(this),a=s.is("a")?s.closest("ul"):s.parent(),o=t.keyCode||t.charCode||0,r=t.metaKey;if(0===s.index()&&38===t.keyCode)return!1;if((40===o||38===o)&&!r){var l=40===t.keyCode?s.nextAll(":not(.is-disabled):visible:first"):s.prevAll(":not(.is-disabled):visible:first");l.length&&($(t.target).is(s)||t.shiftKey||i.is("a"))&&e.focus(l),t.preventDefault(),t.stopPropagation()}if(35===o||40===o&&r){var c=a.children().last();return e.focus(c),t.stopPropagation(),!1}if(36===o||38===o&&r){var d=a.children().first();return e.focus(d),t.stopPropagation(),!1}return 32===o&&$(t.target).is(s)&&(n&&t.shiftKey?e.selectItemsBetweenIndexes([e.lastSelectedItem,s.index()]):e.select(s),t.preventDefault()),n&&(t.ctrlKey||t.metaKey)&&65===o&&(e.toggleAll(),e.focus(s),t.preventDefault()),!0})),this.settings.selectable){this.element.addClass("is-selectable");var s=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",(function(a){var o=$(this),r=$(a.target).closest(".listview-selection-checkbox").length>0,l="mixed"===e.settings.selectable,c=$(a.target);c.hasClass("icon-favorite")||c.hasClass("hyperlink")||(i||o.hasClass("is-disabled")||l&&!r||(t=!0,n&&a.shiftKey?(e.selectItemsBetweenIndexes([e.lastSelectedItem,o.index()]),a.preventDefault()):e.select(o),o.focus()),o.hasClass("is-disabled")||!l||r||(o.focus(),e.toggleItemActivation(o)),s.length>0&&$(window).outerWidth()<767&&!o.hasClass("is-disabled")&&!r&&e.element.trigger("drilldown",[o]),i=!1,a.preventDefault(),a.stopPropagation(),e.element.trigger("click",[{elem:o,data:e.settings.dataset[o.attr("aria-posinset")-1],index:o.index(),originalEvent:a}]))})),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",(function(t){var i=$(this);return t.preventDefault(),t.stopPropagation(),e.element.trigger("dblclick",[{elem:$(this),data:e.settings.dataset[i.attr("aria-posinset")-1],index:i.index(),originalEvent:t}]),!1})),this.element.off("contextmenu.listview","li, tr").on("contextmenu.listview","li, tr",(function(t){var i=$(this);return t.preventDefault(),t.stopPropagation(),e.element.trigger("contextmenu",[{elem:$(this),data:e.settings.dataset[i.attr("aria-posinset")-1],index:i.index(),originalEvent:t}]),!1}))}this.settings.hoverable&&"false"!==this.settings.hoverable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&"false"!==this.settings.selectable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",(function(e){$(this).parent().trigger("click"),e.stopPropagation()})),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",(function(t){e.handleSearch(t,$(this))})).off("cleared.searchable-listview").on("cleared.searchable-listview",(function(){e.resetSearch(),e.element.trigger("filtered",{elem:e.element,filteredResults:[],term:""})})),this.pagerAPI&&this.element.off("page.listview").on("page.listview",(function(t,i){e.handlePageChange(i)})).off("pagesizechange.listview").on("pagesizechange.listview",(function(t,i){e.handlePageSizeChange(i)})),$("body").off("resize.listview").on("resize.listview",(function(t){e.handleResize(t)})),e.element.prev(".listview-header").off("click.listview").on("click.listview",(function(){var t=$(this).find(".plus-minus");t.hasClass("active")?(t.removeClass("active"),e.element.animateClosed()):(t.addClass("active"),e.element.animateOpen())}))},handlePageSizeChange:function(e){e.activePage=1,this.loadData(void 0,e)},handlePageChange:function(e){this.loadData(void 0,e)}},$.fn.listview=function(e){var t=$(this),i=t.attr("data-dataset"),n=t.attr("data-tmpl"),s=C.parseOptions(this)||{};s.dataset=s.dataset||i,s.template=s.template||n,window[s.dataset]&&(s.dataset=window[s.dataset]),s.template&&s.template.length&&(s.template=$("#".concat(s.template)).html());var a=C.extend({},e,s);return this.each((function(){var e=$.data(this,"listview");e?e.updated(a):e=$.data(this,"listview",new ln(this,a))}))};var cn={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function dn(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,cn),t&&t.dataset&&(this.settings.dataset=t.dataset),this.init()}dn.prototype={init:function(){var e=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout((function(){e.setSelected()}),0)},loadListview:function(){var e=this.settings,t=$(".listview",this.element);return!e.dataset.length&&t.length&&$("li",t).length?this.listApi=t.listview({selectable:"single"}).data("listview"):t.length&&(this.listApi=t.listview({dataset:e.dataset,template:e.template,selectable:"single"}).data("listview")),this},initDataset:function(){var e=this.settings,t=$(".listview li",this.element);this.dataset=[];for(var i=0,n=t.length;i<n;i++){var s=void 0,a=$(t[i]);e.dataset?(s=JSON.parse(JSON.stringify(e.dataset[i]))).node=a:s=this.extractNodeData(a),this.dataset.push(s)}return this},extractNodeData:function(e){var t={node:e,text:$.trim($(".item-content",e).text())},i=e.attr("data-value");return void 0!==i&&(t.value=i),t},setElements:function(){var e=this,t=this.settings,i=function(t){return e.isjQuery(t)?t:"string"==typeof t?$('[data-action="'.concat(t,'"]'),e.element):null};return t.btnAdd=i(t.btnAdd),t.btnGoUp=i(t.btnGoUp),t.btnGoDown=i(t.btnGoDown),t.btnEdit=i(t.btnEdit),t.btnDelete=i(t.btnDelete),this.topButtons=t.btnAdd.add(t.btnGoUp).add(t.btnGoDown).add(t.btnEdit).add(t.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:t.handle,placeholder:t.templateNewItem}).data("arrange"),this},handleEvents:function(){var e,t=this,i=this,n=i.settings,s=function(e,t){e.off("click.listbuilder").on("click.listbuilder",(function(){i[t]()}))};return s(n.btnAdd,"addItem"),s(n.btnGoUp,"moveItemUp"),s(n.btnGoDown,"moveItemDown"),s(n.btnEdit,"editItem"),s(n.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",(function(e,i){var s=t.getDataByNode(i.start),a=n.templateItemContent.replace(/{{text}}/g,s.data.text);t.arrangeApi.placeholders.attr("data-value",s.data.text).find(".item-content").html(a)})).on("arrangeupdate.listbuilder",(function(i,n){t.updateAttributes(),t.arrayIndexMove(t.dataset,n.startIndex,n.endIndex),(e=t.getDataByNode(n.end)).indexBeforeMove=n.startIndex,t.element.triggerHandler("arrangeupdate",[e])})),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",(function(){var e=$(this);e.is(".is-selected")||e.trigger("click")})),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",(function(i,n){e=t.getDataByNode(n.elem[0]),t.element.triggerHandler("selected",[e])})),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,(function(e,i){t.element.triggerHandler("updated",[i])})),this},addItem:function(){var e=this,t=this.settings;$.when(this.element.triggerHandler("beforeadd")).done((function(){var i,n,s=0,a=e.listApi.selectedItems[0],o=t.templateNewItem.replace(/{{text}}/g,M.translate("NewItem"));a&&a.length>0?(s=(n=e.getDataByNode(a)).index+1,$(o).insertAfter(a),i=$("li",e.ul).eq(s)):(e.ul.prepend(o),i=$("li:first-child",e.ul)),e.dataset.push(e.extractNodeData(i)),e.arrayIndexMove(e.dataset,e.dataset.length-1,s),e.updateAttributes(),i.trigger("click"),e.arrangeApi.updated(),e.editItem(!0),n={index:s,data:e.dataset[s]},e.element.triggerHandler("afteradd",[n])}))},moveItemUp:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var i=e.getDataByNode(t);void 0!==i.index&&i.index>0&&$.when(e.element.triggerHandler("beforegoup",[i])).done((function(){var n=t.prev();t.insertBefore(n),e.updateAttributes(),e.arrayIndexMove(e.dataset,i.index,i.index-1),i.indexBeforeMove=i.index,i.index--,e.element.triggerHandler("aftergoup",[i])}))}},moveItemDown:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var i=e.getDataByNode(t);void 0!==i.index&&i.index<e.dataset.length-1&&$.when(e.element.triggerHandler("beforegodown",[i])).done((function(){var n=t.next();t.insertAfter(n),e.updateAttributes(),e.arrayIndexMove(e.dataset,i.index,i.index+1),i.indexBeforeMove=i.index,i.index++,e.element.triggerHandler("aftergodown",[i])}))}},editItem:function(e){var t=this.listApi.selectedItems[0];t&&t.length>0&&(t.is(".is-editing")?this.commitEdit(t,e):this.makeEditable(t,e))},makeEditable:function(e,t){var i=this,n=i.getDataByNode(e),s=$(".item-content",e);void 0!==n.index&&n.index<i.dataset.length&&$.when(i.element.triggerHandler("beforeedit",[n])).done((function(){var a=h.escapeHTML((s.text().trim()||"").toString()),o=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(a,'" />'));e.addClass("is-editing"),s.html(o),setTimeout((function(){o.focus().select()}),0),o.on("click.listbuilder",(function(){return!1})).on("blur.listbuilder",(function(){return i.commitEdit(e,t)})).on("keypress.listbuilder",(function(n){13===(n.keyCode||n.charCode||0)&&(i.commitEdit(e,t),e.focus())})),i.element.triggerHandler("entereditmode",[n])}))},commitEdit:function(e,t){var i=this.settings,n=this.getDataByNode(e),s=$(".item-content",e),a=$(".edit-input",s);a.val(h.escapeHTML((a.val()||"").toString())),t&&(n.data.value=a.val()),n.data.text=a.val(),a.off("click.listbuilder blur.listbuilder keypress.listbuilder"),s.html(i.templateItemContent.replace(/{{text}}/g,a.val())),e.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[n])},deleteItem:function(){var e=this,t=e.listApi.selectedItems[0];if(t&&t.length>0){var i=e.getDataByNode(t);void 0!==i.index&&$.when(e.element.triggerHandler("beforedelete",[i])).done((function(){e.listApi.removeAllSelected(),e.updateAttributes(),e.dataset.splice(i.index,1),e.element.triggerHandler("afterdelete",[i])}))}},getDataByNode:function(e){for(var t={},i=0,n=this.dataset.length;i<n;i++){var s=this.dataset[i];if($(s.node).is(e)){t={index:i,data:s};break}}return t},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},moveCursorToEnd:function(e){setTimeout((function(){if("number"==typeof e.selectionStart)e.selectionEnd=e.value.length,e.selectionStart=e.value.length;else if(void 0!==e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}}),100)},updateAttributes:function(){for(var e=$("li",this.ul),t=0,i=e.length;t<i;t++)$(e[t]).attr({"aria-posinset":t+1,"aria-setsize":i})},updateDataset:function(e){var t=this,i=$("li",this.ul),n=$(".listview",this.element).data("listview");n.deselectItemsBetweenIndexes([0,i.length-1]),this.settings.dataset=e,n.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout((function(){t.setSelected()}),0)},setSelected:function(){for(var e=$("li[selected]",this.ul),t=0,i=e.length;t<i;t++){var n=$(e[t]);n.removeAttr("selected"),n.is(".is-selected")||n.trigger("click")}return this},select:function(e){var t=this.getListItem(e);t&&!t.is(".is-selected")&&t.trigger("click")},unselect:function(e){var t=this.getListItem(e);t&&t.is(".is-selected")&&t.trigger("click")},getListItem:function(e){var t=$();if(this.isElement(e)&&$.contains(this.ul,e))t=this.isjQuery(e)?e:$(e);else{var i=parseInt(e,10),n=$("li",this.ul);!isNaN(i)&&i>-1&&i<n.length?t=n.eq(i):"first"==="".concat(e).toLowerCase()?t=n.first():"last"==="".concat(e).toLowerCase()&&(t=n.last())}return t.length<1?null:t.length>1?t.eq(0):t},isElement:function(e){return this.isjQuery(e)&&e.get(0)instanceof Element||e instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").addClass("is-disabled").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var e=0,t=this.topButtons.length;e<t;e++){var i=$(this.topButtons[e]).data("tooltip");i&&"function"==typeof i.destroy&&i.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,cn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"listbuilder")}},$.fn.listbuilder=function(e){return this.each((function(){var t=$.data(this,"listbuilder");t?t.updated(e):t=$.data(this,"listbuilder",new dn(this,e))}))};var hn=["click","immediate"],un=[!1,"responsive","always"],pn={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:46,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,maxWidth:null,fullsize:un[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null};function gn(e){return e.trigger&&-1===hn.indexOf(e.trigger)&&(e.trigger=pn.trigger),e.fullsize&&-1===un.indexOf(e.fullsize)&&(e.fullsize=pn.fullsize),e.breakpoint&&-1===p.available.indexOf(e.breakpoint)&&(e.breakpoint=pn.breakpoint),e}function fn(e,t){this.settings=C.mergeSettings(e,t,pn),this.settings=gn(this.settings),this.originalElement=$(e),this.element=$(e),this.init(),this.reStructure()}fn.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var e;return this.trigger&&this.trigger.length?e=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(e=this.mainContent.data("contextualactionpanel")),e},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},set visible(e){this.element[0].classList[!0===e?"add":"remove"]("is-visible")},set active(e){this.element[0].classList[!0===e?"add":"remove"]("is-active")},get active(){return this.element[0].classList.contains("is-active")},get isOnTop(){var e=0,t=this.element;return $(".modal.is-visible").each((function(){e<this.style.zIndex&&(e=this.style.zIndex)})),e===t[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&p.isBelow(this.settings.breakpoint)},get closeBtn(){var e=this.capAPI;return e&&e.element instanceof $?e.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var e=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat("modal","-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"!==this.settings.trigger||this.isAttachedToBody||this.trigger.on("click.".concat(e.namespace),(function(t){$(t.currentTarget).is(e.trigger)&&e.open()})),"immediate"===this.settings.trigger){var t=new W({duration:1,timeoutCallback:function(){e.open()}});G.register(t)}if(e.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var i=new W({duration:1,timeoutCallback:function(){e.open()}});G.register(i)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.registerModal(),this.element.appendTo("body"),this.element[0].style.display="none"}},appendContent:function(){var e=this,t=!1,i=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"";if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(i,'>\n          <div class="modal-header"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper">\n            <div class="modal-body"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var n=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(M.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(M.translate("Close"),"</span>\n        </button>\n      "));this.element.find(".modal-content").append(n),n.on("click.".concat(this.namespace),(function(){return e.close()})).tooltip()}this.settings.id&&this.element.attr("id",this.settings.id),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),t=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(t=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),t||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=h.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),t||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),this.registerModal(),C.fixSVGIcons(this.element)},registerModal:function(){this.originalElement.is(this.element)||(this.originalElement.data("modalElementLink",this.element[0]),this.element.data("modal",this)),X.register(this)},reStructure:function(){var e=$(".modal-body",this.element),t=$("hr:first-child",e),i=$(".modal-buttonset",this.element);e&&e.length&&!e.parent().hasClass("modal-body-wrapper")&&e.wrap('<div class="modal-body-wrapper"></div>'),t&&t.length&&!t.parent().hasClass("modal-content")&&t.insertAfter(this.element.find(".modal-header")),i&&i.length&&!i.parent().hasClass("modal-content")&&i.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var e=this.element,t=e.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),i=e.find("select.dropdown[data-validate]"),n=e.find("[data-validate]:visible");if(i.each((function(){$(this).next(".dropdown-wrapper").is(":visible")&&(n=n.add(this))})),n.length>0){t.removeAttr("disabled");var s=!0;n.each((function(){var e=$(this);if(!(e.closest(".datagrid-filter-wrapper").length>0)){var i=e.is(".dropdown")&&e.next(".dropdown-wrapper").is(":visible")||null!==e[0].offsetParent;e.is(".required")?i&&!e.val()&&(s=!1):(e.validateField(),i&&!e.isValid()&&(s=!1)),i&&e.is(".error")&&(s=!1),s&&t.removeAttr("disabled")}})),s||t.is(":disabled")||t.attr("disabled","true")}},renderButtonset:function(){var e=this.settings.buttons,t={style:"modal"},i=this;if(!this.buttonsetElem){var n=this.element.find(".modal-buttonset");if(n&&n.length)t.detectHTMLButtons=!0;else{if(!Array.isArray(e)||!e.length)return;var s=this.element.find(".modal-body").parent(),a=this.settings.useFlexToolbar?"toolbar-section ":"",o='<div class="'.concat(a,'modal-buttonset"></div>');(n=$(o)).insertAfter(s),t.buttons=e}this.buttonsetElem=n,n.buttonset(t),this.buttonsetAPI=n.data("buttonset"),e=this.buttonsetAPI.toData().buttons}var r=this.buttonsetAPI.buttons,l=$(),c=100/r.length;r.forEach((function(t,n){var s=Array.isArray(e)&&e.length?e[n]:void 0,a=!1;s&&(t.element[0].setAttribute("id",e[n].id||C.uniqueId(t.element,"button","modal")),$(t.element).on("click.".concat(i.namespace),(function(e){var t=s.click;t&&(t.apply(i.element[0],[e,i]),a=!0)})),$(t.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(i.namespace),(function(e){a||($(e.target).is(".btn-cancel")&&(i.isCancelled=!0),i.close())})),s.validate&&t.element[0].classList.add("no-validation"));t.element[0].style.width="".concat(c,"%"),l.add(t)}))},addButtons:function(e){var t,i=this,n=this.element.find(".modal-body").parent(),s=this.element.find(".flex-toolbar"),a=100,o=!1;if(this.modalButtons=e,!e){var r=this.element.find(".modal-buttonset button");a=100/r.length;for(var l=0,c=r.length;l<c;l++)r[l].style.width="".concat(a,"%");return r.button(),void r.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(i.namespace),(function(e){$(e.target).is(".btn-cancel")&&(i.isCancelled=!0),i.close()}))}this.isCAP?(o=!0,t=this.element.find(".buttonset")):(t=this.element.find(".modal-buttonset")).length||(t=$('<div class="modal-buttonset"></div>').insertAfter(n)),a=100/e.length,e&&t.empty();for(var d=function(n,r){var l=$('<button type="button">\n        <span></span>\n      </button>'),c=l.find("span");c.text(n.text),l.attr("type",n.type||"button"),"separator"===n.cssClass&&(l=$('<div class="separator"></div>')),n.cssClass?l.attr("class",n.cssClass):n.isDefault?l.addClass("btn-modal-primary"):l.addClass("btn-modal"),n.disabled&&(l[0].disabled=!0===n.disabled),n.audible&&c.addClass("audible"),void 0===n.validate||n.validate||l.addClass("no-validation");for(var d={},h=["id","name","text"],u=0;u<h.length;u++)n[h[u]]&&(d[h[u]]=n[h[u]]);if("input"===n.type){var p=$('<label class="audible" for="filter">'.concat(n.text,"</label>")),g=$('<input class="searchfield">').attr(d);return s.length?s.find(".toolbar-section.search").append(p,g):t.append(p,g),void g.searchfield(n.searchfieldSettings)}n.icon&&"#"===n.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===n.icon?"icon-close":""],icon:n.icon.substr("#icon-".length)}).prependTo(l),l[0].setAttribute("id",n.id||C.uniqueId(i.element,"button","modal"));var f=e[r].click;l.on("click.".concat(i.namespace),(function(e){f?f.apply(i.element[0],[e,i]):i.close()})),o||(l[0].style.width="".concat(a,"%")),l.button(),(i.settings.useFlexToolbar||i.settings.centerTitle)&&n.align?("left"===n.align&&s.find(".toolbar-section").eq(0).append(l),"center"===n.align&&s.find(".toolbar-section").eq(1).find("h2").append(l),"right"===n.align&&s.find(".toolbar-section").eq(2).append(l)):t.append(l)},h=0;h<e.length;h++)d(e[h],h)},sizeInner:function(){var e=this.element.find(".detailed-message"),t=$(window).height()-e.offset().top-150;e[0].style.maxHeight="".concat(t,"px"),e[0].style.overflow="auto",e[0].style.width="".concat(e.width(),"px")},callSource:function(){if("function"==typeof this.settings.beforeShow){var e=this;this.settings.beforeShow((function(t){return!1!==t&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===t?(e.busyIndicator&&(e.busyIndicator.remove(),delete e.busyIndicator),!0):(t instanceof jQuery||(t=$(t)),e.open(!0),e.element.find(".modal-body").empty(),e.element.find(".modal-body").append(t),t.show(),!0))}),{})}},open:function(e){var t,i=this;$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&0!==this.trigger.length&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.overlay||(this.overlay=$(X.overlayElem)),this.root||(this.root=$(X.rootElem));var n=this.element.parent();if(n.is(".modal-wrapper")||(this.element.wrap('<div class="modal-wrapper"></div>'),n=this.element.parent()),n.parent().is(this.root)||n.insertAfter(this.overlay),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),(function(){i.sizeInner()})),this.sizeInner()),t=this.element.triggerHandler("beforeopen",[this]),$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1!==t&&(e||(this.callSource(),!this.settings.beforeShow))){if(X.currentlyActive=this,this.settings.isAlert)this.element.attr("aria-labelledby","message-title"),this.element.attr("aria-describedby","message-text");else{var s=this.element.find("h1:first"),a=s.attr("id");a||(a="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),s.attr("id",a));var o=this.element.find(".modal-body"),r="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",a),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",r),this.element.attr("aria-describedby",r)):(o.attr("id",r),this.element.attr("aria-describedby",r))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),(function(){i.resize()})),this.element[0].style.display="";var l=this,c=new W({duration:1,timeoutCallback:function(){l.resize(),l.element.attr("role",l.settings.isAlert?"alertdialog":"dialog"),l.element.attr("aria-modal","true")}}),d=new W({duration:X.modalFadeDuration,timeoutCallback:function(){l.visible=!0}});G.register(c),G.register(d),$(this.element).on("keypress.".concat(this.namespace),(function(e){var t=$(e.target);t.is(".editor, .searchfield, textarea, :button")||t.closest(".tab-list").length||$("#dropdown-list").length||13===e.which&&i.isOnTop&&!t.closest("form").find(":submit").length&&i.element.find(".btn-modal-primary:enabled").length&&(e.stopPropagation(),e.preventDefault(),(!t.hasClass("fileupload")&&!$(t).is(":input")||t.hasClass("colorpicker"))&&i.element.find(".btn-modal-primary:enabled").trigger("click"))})),$(".skip-link").on("focus.".concat(this.namespace),(function(e){e.preventDefault(),i.element.find(":focusable").first().focus()})),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),(function(){i.resize()}));var h=new W({duration:5,timeoutCallback:function(){l.disableSubmit()}});G.register(h),this.element.find("[data-validate]").removeClass("disable-validation");var u=new W({duration:20,timeoutCallback:function(){var e;e=l,l.element.trigger("open",[e]),function(e){if(l.settings.autoFocus){l.changeObserver=new MutationObserver((function(){l.setFocusableElems()})),l.changeObserver.observe(l.element[0],{childList:!0,subtree:!0}),l.setFocusableElems();var t,i,n=$(l.focusableElems).not(".modal-header .searchfield").first();if(0===n.length&&(n=e.element.find(".btn-modal-primary")),1===n.length&&n.is(".btn-modal")&&(n=e.element.find(".btn-modal-primary")),n.is(".tab:not(.is-selected) a")&&(t=(i=n.closest(".tab-container")).find(".is-selected")).length)return n=t,void i.data("tabs").select(t.children("a").attr("href"));n.focus()}}(l)}});G.register(u);var p=new W({duration:30,timeoutCallback:function(){l.element.trigger("afteropen")}});G.register(p)}},resize:function(){var e,t,i=this.currentlyNeedsFullsize;i?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),e=.9*$(window).height()-this.settings.frameHeight,t=1*$(window).width()-this.settings.frameWidth);var n=this.element.find(".modal-body-wrapper");if(n.length&&(i?(n[0].style.maxHeight="",n[0].style.maxWidth=""):(n[0].style.maxHeight="".concat(e,"px"),n[0].style.maxWidth="".concat(t,"px"))),this.element.hasClass("lookup-modal")){var s=this.element.find(".datagrid-wrapper"),a=this.element.find(".pager-toolbar"),o=s.closest(".datagrid-container");e=e-(o.prev().is(".toolbar")?130:67)-(o.next().is(".pager-toolbar")?35:0)+(a.length?-15:0),i?(s[0].style.maxHeight="",s[0].style.maxWidth=""):(s[0].style.maxHeight="".concat(e,"px"),s[0].style.maxWidth="".concat(t,"px"))}this.element.hasClass("datagrid-columns-dialog")&&(n[0].style.overflow="hidden",e>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(e,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(e-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0));var r=this.element.find(".toolbar");r.length&&r.triggerHandler("recalculate-buttons")},isOpen:function(){return O("visible","isOpen"),this.visible},get openSubComponents(){var e=Ke(this.element.find("*"),["isOpen","visible"],["datepicker","dropdown","popupmenu","timepicker","tooltip"]),t=[];return e.forEach((function(e){var i=e.control;("function"==typeof i.isOpen&&i.isOpen()||"boolean"==typeof i.isOpen&&!0===i.isOpen||"boolean"==typeof i.visible&&!0===i.visible)&&t.push(i)})),t},get isFocused(){var e=!1,t=document.activeElement;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach((function(i){if(!e){var n,s,a,o,r=$(i);if((r.is($(t))||"function"==typeof i.contains&&i.contains(t))&&(e=!0),r.is("div.dropdown, div.multiselect"))e=null===(n=r.parent().prev("select").data("dropdown"))||void 0===n||null==n?void 0:n.isFocused;if(r.is(".lookup"))e=null===(s=r.data("lookup"))||void 0===s||null==s?void 0:s.isFocused;if(r.is(".btn-menu, .btn-actions"))e=null===(a=r.data("popupmenu"))||void 0===a||null==a?void 0:a.isFocused;if(r.is(".searchfield"))e=null===(o=r.data("searchfield"))||void 0===o||null==o?void 0:o.isFocused}}));var i=$(t).parents(".tooltip, .popover");return i.length&&i.each((function(t,i){var n=$(i).data("tooltip");n&&n.isFocused&&(e=!0)})),e},setFocusableElems:function(){var e=u.focusableElems(this.element[0],["div.dropdown","div.multiselect"],["select","option"]);this.focusableElems=e,this.focusableElems.first=e[0],this.focusableElems.last=e[e.length-1]},setFocus:function(e){if(-1!==["last","first"].indexOf(e)){var t;switch(this.focusableElems||this.setFocusableElems(),e){case"last":t=this.focusableElems.last;break;case"first":t=this.focusableElems.first}t&&(t.focus(),t.classList.remove("hide-focus"))}},close:function(e,t){if(!this.visible||this.openSubComponents.length)return!0;if(!1===this.element.triggerHandler("beforeclose"))return!1;var i=this;this.element.find("[data-validate]").addClass("disable-validation"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(i.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.visible=!1,this.active=!1,delete this.dontCheckFocus,i.element.trigger("close",i.isCancelled),!this.settings.noRefocus&&this.isFocused&&document.activeElement.blur(),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var n=$(this.closeBtn).data("tooltip");n&&(n.hide(),n.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var s=new W({duration:X.modalFadeDuration,timeoutCallback:function(){i.element.trigger("afterclose"),n&&delete n.reopenDelay,("immediate"===i.settings.trigger||e)&&(!i.isCAP||i.isCAP&&!i.capAPI)&&i.destroy(),t||X.refresh(),i.settings.noRefocus||(!i.oldActive&&i.settings.triggerButton&&(i.oldActive=i.useJqEl(i.settings.triggerButton)),i.oldActive&&$(i.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?i.oldActive.focus():i.trigger.parents(".toolbar, .formatter-toolbar").length<1&&i.trigger.focus())}});return G.register(s),!1},useJqEl:function(e){return e instanceof jQuery?e:$(e)},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element,e,this.settings),this.settings=gn(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function(){var e=this;function t(){e.trigger.off("click.".concat(e.namespace)),e.element.off("keypress.".concat(e.namespace," keydown.").concat(e.namespace," beforeclose.").concat(e.namespace," afterclose.").concat(e.namespace)),e.element.find("button, .btn-close").off("click.".concat(e.namespace)),e.element.find(".paginated").off("afterpaging.".concat(e.namespace)),$(".skip-link").off("focus.".concat(e.namespace)),$("body").off("resize.".concat(e.namespace)),$(e.element).off("keydown.".concat(e.namespace)),1===e.element.find(".detailed-message").length&&$("body").off("resize.".concat(e.namespace)),e.isCAP&&e.capAPI&&e.capAPI.destroy(),e.buttonsetAPI&&(e.buttonsetAPI.buttons.forEach((function(t){$(t.element).off("click.".concat(e.namespace))})),e.buttonsetAPI.destroy(),e.buttonsetElem.remove(),delete e.buttonsetAPI,delete e.buttonsetElem),delete e.focusableElems,e.trigger.off("click.".concat(e.namespace)),e.element[0].removeAttribute("data-modal");var t=e.element.parent(".modal-wrapper");t.length&&t.remove();var i=new W({duration:21,timeoutCallback:function(){var t=null,i=e.element?e.element.data("modal"):null;i?t=e.element[0]:(i=e.trigger?e.trigger.data("modal"):null)&&(t=e.trigger[0]),t&&i&&i.overlay&&$.removeData(t,"modal")}});G.register(i),X.unregister(e),e.originalElement instanceof $&&$.removeData(e.originalElement[0],"modalElementLink"),$.removeData(e.element[0],"modal")}this.element.trigger("beforedestroy")&&(this.visible?(this.element.one("afterclose.".concat(e.namespace),(function(){t()})),this.close(!0)):t())}};var mn={title:"Message Title",status:"",message:"Message Summary",width:"auto",buttons:null,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7};function vn(e,t){this.element=$(e),this.settings=C.mergeSettings(e,t,mn),this.init()}vn.prototype={init:function(){var e,t=this,i=this.settings.allowedTags,n=!0;this.settings.allowedTags.length>0||(n=!1),this.message=$('<div class="modal message"></div>'),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(n?h.stripTags(this.settings.title,i):h.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><p class="message" id="message-text">'.concat(n?h.stripTags(this.settings.message,i):h.stripHTML(this.settings.message),"</p></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(M.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(e=this.element,this.content.empty().append(e.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,isAlert:!0,overlayOpacity:this.settings.overlayOpacity}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.message.on("beforeclose.message",(function(){return t.element.triggerHandler("beforeclose")})).on("beforeopen.message",(function(){return t.element.triggerHandler("beforeopen")})).on("open.message",(function(){t.element.trigger("open")})).on("afterclose.message",(function(){t.destroy(),t.settings.returnFocus&&t.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")})),$(document).on("keypress.message keydown.message",(function(e){27===(e.which||e.keyCode)&&setTimeout((function(){var e=t.message.data("modal");void 0!==e&&e.close()}),0)})),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):this.title.removeClass("has-status is-error is-alert is-success").find("svg").remove()},destroy:function(){var e=this.message.data("modal");void 0!==e&&e.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(e){return this.each((function(){return new vn(this,e)}))},$.fn.modal=function(e){return this.each((function(){var t=$.data(this,"modal"),i=$(this);if(i.is(".modal")||(t=i.closest(".modal").data("modal")),t&&e)return t.updated(e),void("function"==typeof t[e]&&t[e]());t&&!e||(t=$.data(this,"modal",new fn(this,e)))}))},$.fn.monthview=function(e){return this.each((function(){var t=$.data(this,"monthview");t?t.updated(e):t=$.data(this,"monthview",new ki(this,e))}))};var bn={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0};function yn(e,t){this.settings=C.mergeSettings(e,t,bn),this.element=$(e),this.init()}yn.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],"multiselect")}},$.fn.multiselect=function(e){return this.each((function(){var t=$.data(this,"multiselect");t?t.updated(e):t=$.data(this,"multiselect",new yn(this,e))}))};var wn={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view."};function xn(e,t){this.settings=C.mergeSettings(e,t,wn),this.element=$(e),this.init()}xn.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var e='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),t='<p class="notification-text">'.concat(this.settings.message);this.settings.linkText&&(t+='<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>")),t+="</p>";var i='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(M.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=e.concat(t,i);var n=document.querySelector(this.settings.parent);return n.parentNode.insertBefore(this.notificationEl,n.nextSibling),$(this.notificationEl).animateOpen(),this},handleEvents:function(){var e=this;return this.element.off("updated.".concat("notification")).on("updated.".concat("notification"),(function(){e.updated()})),$(this.notificationEl).off("click.".concat("notification")).on("click.".concat("notification"),".notification-close",(function(){e.destroy()})),this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,wn)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("notification")),this.element.off("click.".concat("notification"),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),this.teardown(),$.removeData(this.element[0],"notification")}},$.fn.notification=function(e){return this.each((function(){$.data(this,"notification",new xn(this,e))}))};var Cn={value:0};function kn(e,t){this.settings=C.mergeSettings(e,t,Cn),this.element=$(e),this.init()}kn.prototype={init:function(){var e=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",(function(t){t.stopPropagation(),e.update()})),this},updateAria:function(e){var t=this;this.element.attr({role:"progressbar","aria-valuenow":e,"aria-valuemax":"100"});var i=this.element.parent();this.tooltipApi=this.tooltipApi||i.data("tooltip"),this.tooltipApi?(this.tooltipApi.content="".concat(e,"%"),this.tooltipApi.visible&&e<=100&&this.tooltipApi.tooltip.hasClass("process".concat(this.tooltipId))&&this.tooltipApi.tooltip.find(".tooltip-content").text(this.tooltipApi.content)):(i[0].setAttribute("title","".concat(e,"%")),i.tooltip(),this.tooltipApi=i.data("tooltip"),this.tooltipId=this.tooltipApi.uniqueId,i.on("aftershow.progress",(function(){t.tooltipApi.tooltip.addClass("process".concat(t.tooltipId))})).on("hide.progress mouseout.progress",(function(){t.tooltipApi.tooltip.removeClass("process".concat(t.tooltipId))})))},unbind:function(){var e=this.element.parent();return e.off("aftershow.progress hide.progress mouseout.progress"),this.tooltipApi=this.tooltipApi||e.data("tooltip"),this.tooltipApi&&(this.tooltipApi.destroy(),delete this.tooltipApi),this.tooltipId&&delete this.tooltipId,this.element.off("updated.progress"),this},update:function(e){var t=this.element[0].getAttribute("data-value")||0;/number|string/.test(i(e))&&(this.element[0].setAttribute("data-value",e),t=e),this.element[0].style.width="".concat(t,"%"),this.updateAria(t)},updated:function(e){return void 0!==e&&e.value&&(this.settings.value=e.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"progress")}},$.fn.progress=function(e){return this.each((function(){var t=$.data(this,"progress");t?t.updated(e):t=$.data(this,"progress",new kn(this,e))}))};var Tn={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function Sn(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Tn),this.init(),O("Popover","Popdown")}Sn.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var e=this;function t(t){return!!t&&("string"==typeof t&&(t.match("#")&&0===t.indexOf("#")||(t="#".concat(t)),t=$(t)),!!t.length&&(e.popdown=t,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||u.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),t(this.trigger.attr("data-popdown"))||t(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var e=this.trigger.attr("aria-expanded");return e&&void 0!==e||this.trigger.attr("aria-expanded",""),"true"===e&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var e=this,t=this;return this.trigger.on("click.popdown",(function(){t.toggle()})).on("updated.popdown",(function(){t.updated()})),this.setFirstLastTab(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",(function(){e.toggle()})),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||u.isElement(this.settings.trigger)},hasFocus:function(e){var t=e||document.activeElement;if(this.trigger.is(t))return!0;if(this.popdown[0].contains(t))return!0;var i=this.popdown[0].querySelectorAll(".dropdown, .multiselect"),n=!1;return i.forEach((function(e){var i=$(e).data("dropdown");i&&i.list&&i.list.length&&i.list[0].contains(t)&&(n=!0)})),n},setFirstLastTab:function(){var e=this,t=this.settings;if(t.firstLastTab&&/function|boolean|object/.test(i(t.firstLastTab))){var n=null,s=null,a=null;if("object"===i(t.firstLastTab)?(t.firstLastTab.first&&((n=t.firstLastTab.first instanceof jQuery?t.firstLastTab.first:$(t.firstLastTab.first)).first(),this.popdown[0].contains(n[0])||(n=null)),t.firstLastTab.last&&((s=t.firstLastTab.last instanceof jQuery?t.firstLastTab.last:$(t.firstLastTab.last)).first(),this.popdown[0].contains(s[0])||(s=null)),"function"==typeof t.firstLastTab.callback&&(a=t.firstLastTab.callback)):"function"==typeof t.firstLastTab?a=t.firstLastTab:("boolean"==typeof t.firstLastTab||t.firstLastTab)&&(a=this.closeAndContinue),a){if(!n||!s||n&&!n.length||s&&!s.length){var o=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!n||n&&!n.length)&&(n=o.first()),(!s||s&&!s.length)&&(s=o.last())}this.focusableElem={first:n,last:s},n.on("keydown.popdown",(function(t){9===t.keyCode&&t.shiftKey&&(t.preventDefault(),a({e:t,self:e,first:n}))})),s.on("keydown.popdown",(function(t){9!==t.keyCode||t.shiftKey||(t.preventDefault(),a({e:t,self:e,last:s}))}))}}},closeAndContinue:function(e){var t=$(document).find(":focusable"),i=t.index(e.self.trigger);-1!==(i=e.e.shiftKey?i-1<0?-1:i-1:i+1>=t.length?-1:i+1)&&t.eq(i).focus(),e.self.close()},isOpen:function(){return"true"===this.trigger.attr("aria-expanded")},open:function(){if(!this.isAnimating){var e=this;if(this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus)(this.focusableElem?this.focusableElem.first:this.popdown.find(":focusable").first()).focus();setTimeout((function(){$("body").on("resize.popdown",(function(){e.hasFocus()||e.close()})),e.settings.keepOpen||$(document).on("click.popdown",t).on("focusin.popdown",t),e.isAnimating=!1}),400)}function t(t){e.hasFocus(t.target)||e.close()}},close:function(){if(!this.isAnimating){var e=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusin.popdown"),setTimeout((function(){e.popdown[0].style.display="none",e.isAnimating=!1}),400)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var e={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},t=window.innerHeight+$(document).scrollTop(),i=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(e.offset=this.scrollparent.offset(),e.scrollDistance.top=this.scrollparent.scrollTop(),e.scrollDistance.left=this.scrollparent.scrollLeft(),t-=e.offset.top+e.scrollDistance.top,i-=e.offset.left+e.scrollDistance.left);var n,s=!1,a=!1,o=this.trigger,r=o.offset(),l=0,c=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(r.left,"px"),this.popdown[0].style.top="".concat(r.top+o.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(o.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(n=this.popdown.offset()).left<0&&(s=!0,l=0-n.left);var d=n.left+this.popdown.outerWidth(!0);if(d>i&&(s=!0,l=d-i+(M.isRTL()?20:0)),s){this.popdown[0].style.left="".concat(n.left+-1*l,"px");var h=this.popdown[0].getBoundingClientRect(),u=o[0].getBoundingClientRect(),p=h.right-u.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(p,"px"),n=this.popdown.offset()}n.top<0&&(a=!0,c=0-n.top);var g=n.top+this.popdown.outerHeight(!0);g>t&&(a=!0,c=g-t),a&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(n.top+-1*c,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*c,"px"),n=this.popdown.offset()),(n.top<0||n.top+this.popdown.outerHeight(!0)>t)&&(this.popdown[0].style.top=0,g=(n=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(g-t),"px"))},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger.off("updated.popdown click.popdown focus.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.focusableElem&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"popdown")}},$.fn.popdown=function(e){return this.each((function(){var t=$.data(this,"popdown");t?t.updated(e):t=$.data(this,"popdown",new Sn(this,e))}))};var $n={};function An(e,t){this.settings=C.mergeSettings(e,t,$n),this.element=$(e),this.init()}An.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.readonly()},handleEvents:function(){for(var e=this,t=$("input",this.element),i=function(i,n){$(t[i]).on("change.".concat("rating"),(function(){e.element.hasClass("is-readonly")||e.val(i+1)}))},n=0,s=t.length;n<s;n++)i(n)},fillStar:function(e,t){$(e).addClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-filled")},emptyStar:function(e,t){$(e).removeClass("is-filled").removeClass("is-half").next(t).find("svg").changeIcon("star-outlined")},halfStar:function(e,t){$(e).addClass("is-half").removeClass("is-filled").next(t).find("svg").changeIcon("star-half")},val:function(e){if(0===arguments.length||""===e||isNaN(e)||-1===S.sign(e))return this.currentValue;this.currentValue=parseFloat(e,10);for(var t=Math.floor(this.currentValue),i=0,n=this.allInputs.length;i<n;i++){var s=$(this.allInputs[i]),a=s.parent().is(".inline")?"svg":"label",o=e%1!=0&&t===i;o?this.halfStar(s,a):i<e?this.fillStar(s,a):this.emptyStar(s,a),i+1===t&&s.prop("checked",!0)}return t<=0&&e>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var e=$(this.element);e.hasClass("is-readonly")&&e.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("change.".concat("rating")),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,$n)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"rating")}},$.fn.rating=function(e){return this.each((function(){var t=$.data(this,"rating");t?t.updated(e):t=$.data(this,"rating",new An(this,e))}))};var Dn={};function En(e,t){this.settings=C.mergeSettings(e,t,Dn),this.element=$(e),this.init()}En.prototype={init:function(){this.handleKeys()},isCapslock:function(e){var t=!1,i=!1;return(e=e||window.event).which?t=e.which:e.keyCode&&(t=e.keyCode),e.shiftKey?i=e.shiftKey:e.modifiers&&(i=!!(4&e.modifiers)),!!(t>=97&&t<=122&&i)||t>=65&&t<=90&&!i},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Dn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"signin")},handleKeys:function(){var e=this,t=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',(function(i){var n=$(this),s=n.parent(".field"),a=$(".icon-capslock",s);e.isCapslock(i)&&!n.hasClass("error")?a.length||(s.append(t),$("body").toast({audibleOnly:!0,message:M.translate("CapsLockOn")})):a.remove()})).on("blur.signin change.signin",'[type="password"]',(function(){var e=$(this),i=e.closest(".field"),n=$(".icon-capslock",i);setTimeout((function(){n&&n.length&&(e.hasClass("error")?n.remove():i.append(t))}),150)}))}},$.fn.signin=function(e){return this.each((function(){var t=$.data(this,"signin");t?t.updated(e):t=$.data(this,"signin",new En(this,e))}))};var In={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,persistTooltip:!1};function Ln(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,In),this.init()}function Pn(e){return e%1==0}function Mn(e,t){return t&&!isNaN(t)&&0!==t||(t=1),Math.round(e/t)*t}function Bn(e,t){var i=e[0],n=e[1],s=t[0],a=t[1];return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-n,2))}Ln.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var e,t=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),void 0!==this.element.attr("data-ticks")){try{e=JSON.parse(t.element.attr("data-ticks"))}catch(t){e=[]}$.isArray(e)&&(this.settings.ticks=e)}var i="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?i:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{t.settings.tooltip=JSON.parse(t.element.attr("data-tooltip-content"))}catch(e){t.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var n=this.settings.tooltip.split(",");this.settings.tooltip=[n[0]],this.settings.tooltip.push(n[1]?n[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var s={value:this.settings.min,description:t.getModifiedTextValue(this.settings.min)},a={value:this.settings.max,description:t.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var o=t.settings.ticks||[];if($.isArray(o)&&o.length>0){var r=o.filter((function(e){return e.value===t.settings.min})),l=o.filter((function(e){return e.value===t.settings.max}));r.length>0&&(s.description=r[0].description,s.color=r[0].color,o=$.grep(o,(function(e){return e!==r[0]}))),l.length>0&&(a.description=l[0].description,a.color=l[0].color,o=$.grep(o,(function(e){return e!==l[0]})))}t.ticks.push(s);for(var c=0;c<o.length;c++){var d={};void 0!==o[c].value&&(d.value=o[c].value,d.description=void 0!==o[c].description?o[c].description:"",d.color=o[c].color,t.ticks.push(d))}t.ticks.push(a)}else this.ticks.push(s,a);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var h=this.settings.value.split(",");h[0]=isNaN(h[0])?this.settings.min:parseInt(h[0],10),h[1]=isNaN(h[1])?this.settings.max:parseInt(h[1],10),this.settings.value=h}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var e=this,t=!1;if("INPUT"!==e.element[0].tagName)throw new Error('Element with ID "'.concat(e.element.id,"\" cannot invoke a slider;  it's not an Input element."));e.originalElement={type:e.element.attr("type")},e.element.attr("type","hidden"),e.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(e.element.attr("id"),"-slider")).insertAfter(e.element),e.hitarea=$('<div class="slider-hit-area"></div>').appendTo(e.wrapper),e.range=$('<div class="slider-range"></div>').appendTo(e.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),t=!0),this.isRtlHorizontal=M.isRTL()&&!t,this.isRtlVertical=M.isRTL()&&t;var i=this.element.attr("style");i&&(i.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,i=i.replace("min-height","")),i.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),i.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,i=i.replace("min-width","")),i.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),e.handles=[];var n=e.element.prev("label").text(),s=$('<div class="slider-handle'.concat(e.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(e.settings.range?M.translate("SliderMinimumHandle"):M.translate("SliderHandle")," ").concat(n));if(e.handles.push(s),e.settings.range){var a=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(M.translate("SliderMaximumHandle")," ").concat(n));e.handles.push(a)}return $.each(e.handles,(function(i,n){n.attr({role:"slider","aria-orientation":t?"vertical":"horizontal","aria-valuemin":e.settings.min,"aria-valuemax":e.settings.max}).hideFocus(),n.appendTo(e.wrapper)})),e.ticks.forEach((function(i){!function(i){var n=e.isRtlHorizontal?100-e.convertValueToPercentage(i.value):e.convertValueToPercentage(i.value),s="calc(".concat(n,"% - 4px)");i.element=$('<div class="tick" data-value="'.concat(i.value,'"></div>')),i.label=$('<span class="label">'.concat(i.description,"</span>")),i.element[0].style[t?"bottom":"left"]=s,i.element.append(i.label),e.wrapper.append(i.element),t||(i.label[0].style.left="".concat(-(i.label.outerWidth()/2-i.element.width()/2),"px"))}(i)})),e.value(e.settings.value),e.updateRange(),$.each(e.handles,(function(i,n){e.settings.tooltip&&(n.tooltip({content:function(){return"".concat(e.getModifiedTextValue(Math.floor(e.value()[i])))},placement:t?"right":"bottom",trigger:"focus",keepOpen:e.settings.persistTooltip}),n.removeAttr("aria-describedby"))})),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),e},handleRangeClick:function(e){if(e.preventDefault(),!this.isDisabled()){var t=this,i=this.wrapper.hasClass("vertical"),n="click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageX:e.pageX,s="click"!==e.originalEvent.type?e.originalEvent.changedTouches[0].pageY:e.pageY,a=n-t.wrapper.offset().left-$(document).scrollLeft(),o=s-t.wrapper.offset().top-$(document).scrollTop(),r=[a,o],l=[t.handles[0].offset().left+t.handles[0].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[0].offset().top+t.handles[0].height()/2-t.wrapper.offset().top-$(document).scrollTop()],c=t.value(),d=Bn(r,l),h=c[0],u=t.handles[0];u.addClass("hide-focus");var p=function(){if(i){var e=t.wrapper.height();return(e-o)/e*100}return a/t.wrapper.width()*100}(),g=t.convertPercentageToValue(p);t.handles[1]&&d>Bn(r,[t.handles[1].offset().left+t.handles[1].width()/2-t.wrapper.offset().left-$(document).scrollLeft(),t.handles[1].offset().top+t.handles[1].height()/2-t.wrapper.offset().top-$(document).scrollTop()])?(t.value([void 0,g]),u=t.handles[1],h=c[1]):t.value([g]),t.checkHandleDifference(u,h,g);var f=t.settings.step?t.settings.step:0;g<h?t.decreaseValue(e,u,g,f):t.increaseValue(e,u,g,f),t.settings.tooltip||u.focus()}},activateHandle:function(e){e.addClass("is-active")},deactivateHandle:function(e){e.removeClass("is-active")},enableHandleDrag:function(e){if(!this.isDisabled()){var t=this,i={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};e.drag(i).on("drag.slider",(function(e,i){!function(e,i,n){if(!t.isDisabled()){var s=function(){if(t.isVertical()){var e=t.wrapper.height()-i.outerHeight();return(e-n.top)/e*100}return n.left/(t.wrapper.width()-i.outerWidth())*100}(),a=t.convertPercentageToValue(s);if(t.settings.range){var o=t.value();i.hasClass("higher")&&a<=o[0]&&(a=o[0]),i.hasClass("lower")&&a>=o[1]&&(a=o[1])}t.settings.step&&(a=Math.round(a/t.settings.step)*t.settings.step),e.defaultPrevented||(t.value(i.hasClass("higher")?[void 0,a]:[a]),t.updateRange(),t.updateTooltip(i),t.element.trigger("sliding",i,a))}}(e,$(e.currentTarget),i)})).on("dragstart",(function(){$(this).addClass("is-dragging"),t.range.addClass("is-dragging"),t.element.trigger("slidestart",e)})).on("dragend",(function(){$(this).removeClass("is-dragging"),t.range.removeClass("is-dragging"),t.element.trigger("slidestop",e)}))}},disableHandleDrag:function(e){e.off("drag.slider dragstart dragend"),this.range.removeClass("is-dragging"),e.removeClass("is-dragging");var t=e.data("drag");t&&t.destroy()},convertValueToPercentage:function(e){return(e-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(e){var t=e/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-t+this.settings.min:t},getIncrement:function(){var e=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&e<=this.settings.step&&(e=this.settings.step),e},handleKeys:function(e,t){if(!t.isDisabled()){var i=e.which,n=$(e.currentTarget);switch(n.removeClass("hide-focus"),i){case 33:t.increaseValue(e,n,void 0,this.getIncrement());break;case 34:t.decreaseValue(e,n,void 0,this.getIncrement());break;case 35:t.increaseValue(e,n,this.settings.max);break;case 36:t.decreaseValue(e,n,this.settings.min);break;case 38:case 39:t.isRtlHorizontal&&39===i?t.decreaseValue(e,n):t.increaseValue(e,n);break;case 37:case 40:t.isRtlHorizontal&&37===i?t.increaseValue(e,n):t.decreaseValue(e,n)}}},increaseValue:function(e,t,i,n){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var s,a,o,r=this.value().slice(0),l=void 0!==n?n:void 0!==this.settings.step?this.settings.step:1;if(t.hasClass("higher"))o=(a=(s=void 0!==i?i:r[1])+(l=Pn(s)?l:isNaN(s%l)?0:s%l)<this.settings.max?s+l:this.settings.max)%l?a:Mn(a,l),this.value([void 0,o]);else{s=void 0!==i?i:r[0];var c=void 0===r[1]?this.settings.max:r[1];o=(a=s+(l=Pn(s)?l:isNaN(s%l)?0:l-s%l)<c?s+l:c)%l?a:Mn(a,l),this.value([o])}this.checkHandleDifference(t,s,o),this.updateRange(),this.updateTooltip(t)},decreaseValue:function(e,t,i,n){e.preventDefault(),clearTimeout(t.data("animationTimeout"));var s,a,o,r=this.value(),l=void 0!==n?n:void 0!==this.settings.step?this.settings.step:1;if(t.hasClass("higher")){s=void 0!==i?i:r[1];var c=void 0===r[0]?this.settings.min:r[0];o=(a=s-(l=Pn(s)?l:isNaN(s%l)?0:l-s%l)>c?s-l:c)%l?a:Mn(a,l),this.value([void 0,o])}else o=(a=(s=void 0!==i?i:r[0])-(l=Pn(s)?l:isNaN(s%l)?0:s%l)>this.settings.min?s-l:this.settings.min)%l?a:Mn(a,l),this.value([o]);this.checkHandleDifference(t,s,o),this.updateRange(),this.updateTooltip(t)},updateRange:function(){for(var e=this,t=this.value(),i=[],n=this.getColorClosestToValue(),s=e.wrapper.hasClass("vertical"),a=0;a<this.ticks.length;a++){(this.settings.range?t[0]<this.ticks[a].value&&this.ticks[a].value<=t[1]:this.ticks[a].value<=t[0])?(this.ticks[a].element.addClass("complete"),n&&(this.ticks[a].element[0].style.backgroundColor=n,this.ticks[a].element.addClass("inherit"))):(this.ticks[a].element.removeClass("complete"),n&&(this.ticks[a].element[0].style.backgroundColor="",this.ticks[a].element.removeClass("inherit")))}n&&(this.range[0].style.backgroundColor=n,$.each(this.handles,(function(e,t){t[0].style.backgroundColor=n,t[0].style.borderColor=n}))),$.each(e.ticks,(function(t){e.ticks[t].label[0].style.color=""})),i[0]=this.convertValueToPercentage(t[0]),void 0!==t[1]&&(i[1]=this.convertValueToPercentage(t[1]));var o=s?["bottom","top"]:e.isRtlHorizontal?["right","left"]:["left","right"],r={};function l(e,t){var i=s?o[1]:o[0],n=s?100-t:t;e.css(i,"calc(".concat(n,"% - ").concat(e.outerWidth()/2,"px)"))}this.handles[1]?(r[o[0]]="".concat(i[0],"%"),r[o[1]]="".concat(100-i[1],"%")):(r[o[0]]="0%",r[o[1]]="".concat(100-i[0],"%")),this.range.css(r),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout((function(){e.handles[0].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")}),201)),l(this.handles[0],i[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout((function(){e.handles[1].removeClass("is-animated").trigger("slide-animation-end"),e.range.removeClass("is-animated")}),201)),l(this.handles[1],i[1]),this.handles[0].attr("aria-valuemax",t[1]),this.handles[1].attr("aria-valuemin",t[0]))},checkHandleDifference:function(e,t,i){if(!$("html").hasClass("ie9")){var n=this.convertValueToPercentage(t),s=this.convertValueToPercentage(i);Math.abs(n-s)>3&&(e.addClass("is-animated"),this.range.addClass("is-animated"))}},updateTooltip:function(e){if(this.settings.tooltip){if(!e){var t,i=this.handles[0].data("tooltip");return this.handles[1]&&(t=this.handles[1].data("tooltip")),i.hide(),void(t&&t.hide())}var n=e.data("tooltip");e.hasClass("is-animated")?(n.hide(),e.one("slide-animation-end",(function(){s()}))):s()}function s(){n.position(),e.focus()}},getColorClosestToValue:function(){for(var e,t,i={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[J.currentTheme.id.split("-")[2]],n=this.value()[0],s=0;s<this.ticks.length;s++)(t=this.ticks[s].color)&&n>=this.ticks[s].value&&(e=t,e=t.indexOf("#")>-1?t:i[t]||i.default);return e},value:function(e,t){var i=this;return void 0===e&&void 0===t||(e&&$.isArray(e)&&(void 0!==e[1]&&(t=e[1]),e=e[0]),void 0===e&&$.isArray(i._value)&&void 0!==i._value[0]&&(e=i._value[0]),void 0===t&&$.isArray(i._value)&&void 0!==i._value[1]&&(t=i._value[1]),i._value=[e,t],i.element.val(void 0!==t?i._value:i._value[0]),$.each(i.handles,(function(e,t){var n=i._value[e],s=i.getModifiedTextValue(n);$.each(i.ticks,(function(e,t){t.value===n&&(s=t.description)})),t.attr({"aria-valuenow":i._value[e],"aria-valuetext":s})})),i.element.trigger("change")),i._value},getModifiedTextValue:function(e){return this.settings.tooltip?this.settings.tooltip[0]+e+this.settings.tooltip[1]:e},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var e=this;return $.each(this.handles,(function(t,i){e.enableHandleDrag(i)})),this},disable:function(){this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.addClass("is-disabled");var e=this;return $.each(this.handles,(function(t,i){e.disableHandleDrag(i)})),this},readonly:function(){var e=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,(function(t,i){e.disableHandleDrag(i)})),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(e,t){var i=this.value();this.checkHandleDifference(this.handles[0],i[0],e),this.handles[1]&&this.checkHandleDifference(this.handles[1],i[1],t);var n=this.value(e,t);return this.updateRange(),this.updateTooltip(),n},refresh:function(e,t){return F(this.setValue,this.refresh).apply(this,[e,t])},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var e=this;return $.each(e.handles,(function(t,i){e.disableHandleDrag(i),i.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")})),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",h.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"slider")},bindEvents:function(){var e=this;return $.each(e.handles,(function(t,i){i.on("mousedown.slider",(function(){e.isDisabled()||$(this).focus()})).on("click.slider",(function(e){e.preventDefault()})).on("keydown.slider",(function(t){e.activateHandle(i),e.handleKeys(t,e)})).on("keyup.slider blur.slider",(function(){e.deactivateHandle(i)})),e.enableHandleDrag(i)})),e.wrapper.on("click.slider touchend.slider touchcancel.slider",(function(t){e.handleRangeClick(t)})),e.element.on("updated.slider",(function(){e.updated()})),e}},$.fn.slider=function(e){return this.each((function(){var t=$.data(this,"slider");t?t.updated(e):t=$.data(this,"slider",new Ln(this,e))}))};var On={autocorrectOnBlur:!1,min:-2147483647,max:2147483647,step:null,validateOnInput:!0};function Rn(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,On),this.init()}Rn.prototype={get isTouch(){return m.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var e=this.element[0].style;return e.width&&(this.element.parent()[0].style.width="".concat(parseInt(e.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var e=this.checkForNumeric(this.element.val());return this.element.val(e),this.element.attr("data-trackdirty")&&this.element.data("original",e),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.max=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.max=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var e=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped){if(this.element.is(".field-options")){var t=this.element.closest(".field").find(".btn-actions");this.element.add(t).add(t.next(".popupmenu")).wrapAll('<span class="spinbox-wrapper"></span>')}else this.element.wrap('<span class="spinbox-wrapper"></span>')}this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var n=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach((function(t){if(n.indexOf(t)>-1){var i=t.replace("input","spinbox");e.isWrapped?e.element.parent(".spinbox-wrapper").addClass(i):e.isInlineLabel&&e.inlineLabel.addClass(i)}}));var s=this.element.attr("min"),a=this.element.attr("max"),o=this.element.attr("data-mask"),r="",l={role:"spinbutton"},c=0;if(s||a||o||(a="9999999"),(s||a)&&!o){var d="",h=s||"",u=a||"",p=h.length>u.length?h:u;for(c=0;c<=p.length;)d+="#",c++;-1===h.indexOf("-")&&-1===u.indexOf("-")||(d="-".concat(d.substring(0,d.length-1))),l["data-mask"]=d,o=d}var g=o.length;for(c=0;c<=g;)r+="9",c++;return-1===o.indexOf("-")?(l.min=s||0,l.max=a||r):(l.min=s||r,l.max=a||r.substring(0,r.length-1)),this.element.attr("data-mask-mode")&&"number"===this.element.attr("data-mask-mode")||(l["data-mask-mode"]="number"),this.element.data("mask")&&"object"===i(this.element.data("mask"))&&this.element.data("mask").destroy(),l["aria-valuemin"]=s||0,l["aria-valuemax"]=a||0,this.element.attr(l),this.updateAria(this.element.val()),this.element.mask(),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),this},enableLongPress:function(e,t){t.addButtonStyle(e),t.longPressInterval=setInterval((function(){$(e.currentTarget).is(":hover")&&t.handleClick(e)}),250)},disableLongPress:function(e,t){t.removeButtonStyle(e),clearInterval(t.longPressInterval),t.longPressInterval=null},handleClick:function(e){(e.preventDefault(),this.isDisabled()||1!==e.which||this.isReadonly())||($(e.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(e,t){var i=e.which;if(-1!==$.inArray(i,[35,36,37,38,39,40])&&!this.isReadonly())switch(i){case 35:t.element.attr("min")&&t.element.val(t.element.attr("min"));break;case 36:t.element.attr("max")&&t.element.val(t.element.attr("max"));break;case 38:t.addButtonStyle(t.buttons.up),t.increaseValue();break;case 40:t.addButtonStyle(t.buttons.down),t.decreaseValue()}},handleKeyPress:function(e,t){var i=e.which;if(!(i<48||i>57&&i<96||i>105))return this.handleInput(e,t)},handleInput:function(e,t){if(!t.isDisabled()&&!this.isReadonly()&&!this.settings.autocorrectOnBlur)return this.correctValue(e)},handleKeyup:function(e,t){if(!t.isDisabled()&&!this.isReadonly()){var i=e.which;switch(i){case 38:case 39:M.isRTL()&&39===i?t.removeButtonStyle(t.buttons.down):t.removeButtonStyle(t.buttons.up);break;case 37:case 40:M.isRTL()&&39===i?t.removeButtonStyle(t.buttons.up):t.removeButtonStyle(t.buttons.down)}t.updateAria(t.element.val())}},handleAfterPaste:function(e){var t=Number(e.element.attr("min")),i=Number(e.element.attr("max")),n=Number(e.element.val());n<t&&(n=t),n>i&&(n=i),e.updateVal(n)},correctValue:function(e){var t=Number(this.element.val()),i=this.element.attr("min"),n=this.element.attr("max");return t<i?(e&&e.preventDefault(),this.updateVal(i)):t>n?(e&&e.preventDefault(),this.updateVal(n)):void 0},increaseValue:function(){var e=this.element.attr("max"),t=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return e&&t>e?this.updateVal(e):this.updateVal(t)},decreaseValue:function(){var e=this.element.attr("min"),t=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return e&&t<e?this.updateVal(e):this.updateVal(t)},updateVal:function(e){this.element.val(e).trigger("change"),this.updateAria(e)},checkForNumeric:function(e){return""===e?e:$.isNumeric(e)?Number(e):(e=parseInt(e,10),$.isNumeric(e)?Number(e):0)},updateAria:function(e){var t=this.element.attr("min"),i=this.element.attr("max");e=this.checkForNumeric(e),this.element[0].setAttribute("aria-valuenow",e||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==e&&i&&e>=i?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==e&&t&&e<=t?"disable":"enable")},addButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.addClass("is-active")}},removeButtonStyle:function(e){if(!this.isDisabled()&&!this.isReadonly()){var t=e;e.currentTarget&&(t=$(e.currentTarget)),t.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){this.element.prop("disabled",!0),this.element.parent(".spinbox-wrapper").addClass("is-disabled")},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(e,t){e[(t=void 0===t||!(!t||"enable"===t))?"addClass":"removeClass"]("is-disabled")},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this},destroy:function(){var e=this.element.data("mask");for(var t in e&&"function"==typeof e.destroy&&e.destroy(),this.buttons){var i=$(t).data("button");i&&i.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],"spinbox")},bindEvents:function(){var e=this,t=!1;return this.element.on("focus.spinbox",(function(){e.element.parent(".spinbox-wrapper").addClass("is-focused")})).on("blur.spinbox",(function(){e.element.parent(".spinbox-wrapper").removeClass("is-focused"),e.settings.autocorrectOnBlur&&e.correctValue()})).on("keydown.spinbox",(function(t){e.handleKeyDown(t,e)})).on("input.spinbox",(function(t){e.handleInput(t,e)})).on("keyup.spinbox",(function(t){e.handleKeyup(t,e)})).on("afterpaste.mask",(function(){e.handleAfterPaste(e)})),this.buttons.up.add(this.buttons.down[0]).on("touchstart.spinbox mousedown.spinbox",(function(i){if(1===i.which){if(t||e.handleClick(i),e.isTouch)return;t=!0,e.enableLongPress(i,e),$(document).one("mouseup",(function(){e.disableLongPress(i,e),t=!1,e.element.focus()}))}})),this}},$.fn.spinbox=function(e){return this.each((function(){var t=$.data(this,"spinbox");t?t.updated(e):t=$.data(this,"spinbox",new Rn(this,e))}))};var Fn={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"}};function Nn(e,t){this.settings=C.mergeSettings(e,t,Fn),this.element=$(e),this.init()}Nn.prototype={init:function(){return this.build().handleEvents()},build:function(){var e,t=this,i=this.settings,n=this.element,s=n.parent(),a="x"===i.axis?"left":"top",o=s.is(".content")?s.parent():s,r=s.width();if(setTimeout((function(){e=s.height()}),0),this.docBody=$("body"),this.isSplitterRightSide=n.is(".splitter-right")||"x"===i.axis&&"right"===i.side,this.isSplitterHorizontal=n.is(".splitter-horizontal")||"y"===i.axis,i.uniqueId=C.uniqueId(this.element,"splitter"),this.isSplitterRightSide){var l=o.prev();if(l.is(".main")?(this.leftSide=l,r=o.parent().outerWidth()-r):(this.leftSide=o,n.addClass("splitter-right")),o.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),i.collapseButton){var c=0;this.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>'),this.splitterCollapseButton.appendTo(n),n[0].offsetLeft>10&&this.splitterCollapseButton.addClass("rotate"),this.splitterCollapseButton.click((function(){c<=0?n[0].offsetLeft<=10?(t.splitTo(299,e),$(this).addClass("rotate")):(c=n[0].offsetLeft,t.splitTo(0,e),$(this).removeClass("rotate")):n[0].offsetLeft>10?(c=n[0].offsetLeft,t.splitTo(0,e),$(this).removeClass("rotate")):(t.splitTo(c,e),$(this).addClass("rotate"),c=0)}))}}else this.isSplitterHorizontal?(this.topPanel=n.prev(),r=this.topPanel.height(),s.addClass("splitter-container is-horizontal"),n.next().addClass("flex-grow-shrink"),n.addClass("splitter-horizontal")):(this.rightSide=o,this.leftSide=o.prev().parent(),o.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"));return localStorage&&i.save&&!isNaN(parseInt(localStorage[i.uniqueId],10))&&(r=localStorage[i.uniqueId]),r=parseInt(r,10),this.isSplitterHorizontal?n[0].style.top="".concat(r,"px"):n[0].style.top=0,this.splitTo(r,e),r<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:i.axis,containment:i.containment||"x"===i.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",(function(){var e=$("iframe");if(t.documentWidth=$(document).width(),e.length>0)for(var i=0,n=e.length;i<n;i++){var s=$(e[i]),a="".concat(parseInt(getComputedStyle(s.parent()[0]).width,10)-40,"px"),o=$('<div class="overlay splitter-overlay"></div>');o.css("width",a),s.before(o)}})).on("dragend.splitter",(function(n,s){$(".splitter-overlay").remove(),i.collapseButton&&(s[a]<=10?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===i.resize&&t.splitTo(s[a],e)})).on("drag.splitter",(function(n,s){return!(s.left<=0)&&("immediate"===i.resize&&t.splitTo(s[a],e),!0)})),"y"===i.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),this},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(e,t,i){(t>i||t<0)&&(t=parseInt(i,10)/2),this.topPanel[0].style.height="".concat(t,"px")},resizeLeft:function(e,t){var i=this.leftSide.outerWidth()-t;this.rightSide[0].style.width="".concat(i,"px"),e[0].style.left=""},resizeRight:function(e,t){this.leftSide[0].style.width="".concat(t,"px"),e[0].style.left="".concat(t-1,"px")},splitTo:function(e,t){var i=this.settings,n=this.element;this.isSplitterRightSide?(e>i.maxWidth.right&&(e=i.maxWidth.right),this.resizeRight(n,e)):this.isSplitterHorizontal?this.resizeTop(n,e,t):(e>i.maxWidth.left&&(e=i.maxWidth.left),this.resizeLeft(n,e)),this.element.trigger("split",[e]),this.docBody.triggerHandler("resize",[this]),localStorage&&(localStorage[this.settings.uniqueId]=e),this.split=e,this.parentHeight=t},unbind:function(){return this.element.off("updated.".concat("splitter")),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Fn)),this.destroy().init()},destroy:function(){this.unbind(),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),$.removeData(this.element[0],"splitter")},handleEvents:function(){var e=this;return this.element.on("updated.".concat("splitter"),(function(){e.updated()})).on("keydown.".concat("splitter"),(function(t){32===t.which&&(e.toggleSelection(),t.preventDefault()),37===t.which&&e.splitTo(e.split-15,e.parentHeight),39===t.which&&e.splitTo(e.split+15,e.parentHeight)})),this}},$.fn.splitter=function(e){return this.each((function(){var t=$.data(this,"splitter");t?t.updated(e):t=$.data(this,"splitter",new Nn(this,e))}))};var zn={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function Hn(e,t){this.settings=C.mergeSettings(e,t,zn),this.element=$(e),this.init()}Hn.prototype={init:function(){var e=this,t=this.settings;t.draggable=$.extend(!0,zn.draggable,t.draggable),this.isTouch=m.features.touch,this.isAdditional=$("".concat(t.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout((function(){e.makeDraggable(),e.handleEvents(),e.initSelected(t.availableClass),e.initSelected(t.additionalClass)}),0)},loadListview:function(){for(var e=this.settings,t=[{dataset:e.available,class:e.availableClass,draggable:e.draggable.available},{dataset:e.selected,class:e.selectedClass,draggable:e.draggable.selected},{dataset:e.additional,class:e.additionalClass,draggable:e.draggable.additional}],n=0,s=t.length;n<s;n++){var a=t[n],o=$("".concat(a.class," .listview"),this.element),r=o.data("listview"),l={dataset:a.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===e.searchable||"true"===e.searchable)&&$("".concat(a.class," .searchfield"),this.element).length>0&&(l.searchable=!0),!a.dataset&&o.length&&$("li",o).length?o.listview(l):o.length&&(r&&r.destroy(),-1===e.template.indexOf('data-id="{{id}}"')&&(e.template=e.template.replace("<li",'<li data-id="{{id}}"')),l.template=e.template,l.dataset=a.dataset||[],l.dataset.forEach((function(e){/string|number/.test(i(e.id))&&""!==e.id||(e.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))})),0===l.dataset.length&&(l.forceToRenderOnEmptyDs=!0),o.listview(l)),a.draggable||$("ul",o).addClass("is-not-droppable")}},setElements:function(){var e=this.settings,t="";this.offset=null,this.containers=$("".concat(e.availableClass,",").concat(e.selectedClass,",").concat(e.additionalClass),this.element),this.actionButtons=$("".concat(e.availableBtn,",").concat(e.additionalBtn,",").concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),this.element),this.selectedButtons=$("".concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),this.element),this.tabButtonsStr="".concat(e.availableBtn,", ").concat(e.additionalBtn,", ").concat(this.selectedButtons.length>1?e.selectedBtnRight:e.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},e.numOfSelectionsClass="num-of-selections",e.itemContentClass="swaplist-item-content",e.itemContentTempl=$('<div><p><span class="'.concat(e.numOfSelectionsClass,'">###</span> ').concat(M?M.translate("ItemsSelected"):" Items Selected ","</p><div/>")),e.draggable.available||(t="".concat(e.availableClass," ").concat(e.availableBtn,",").concat(e.selectedBtnLeft),$(t,this.element).prop("disabled",!0)),e.draggable.selected||(t="".concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),e.draggable.available||(t+=",".concat(e.additionalClass," ").concat(e.additionalBtn)),this.isAdditional&&e.draggable.additional||(t+=",".concat(e.availableClass," ").concat(e.availableBtn)),$(t,this.element).prop("disabled",!0),$("".concat(e.additionalClass," ").concat(e.additionalBtn),this.element).addClass("is-rotate")),e.draggable.additional||$("".concat(e.additionalClass," ").concat(e.additionalBtn,",").concat(e.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var e=this.settings,t=[e.availableClass,e.selectedClass,e.additionalClass],i=0,n=t.length;i<n;i++){var s=$("".concat(t[i]," .listview"),this.element);$("li",s).length||s.addClass("is-multiselect")}},initSelected:function(e){if((e=this.isjQuery(e)?e:$(e,this.element)).length){for(var t=$(".listview",e).data("listview"),i=$("li[selected]",e),n=0,s=i.length;n<s;n++){var a=$(i[n]);a.removeAttr("selected"),t.select(a)}this.moveElements(e,this.settings.selectedClass)}},moveElements:function(e,t){if(null!==t){e="string"!=typeof e?e:$(e,this.element),t="string"!=typeof t?t:$(t,this.element);var i=$(".listview",e).data("listview");if(this.clearSelections(),this.selections.owner=e,this.selections.droptarget=t,this.isTouch){if(i.selectedItems)for(var n=0,s=i.selectedItems.length;n<s;n++)this.selections.items[n]=i.selectedItems[n].closest("li")}else this.selections.items=i.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(i),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var a=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof a&&!a||"string"==typeof a&&"false"===a.toLowerCase())return;var o=$("ul",t),r=$("li",o).length,l=this.selections.items.length+r;if(this.selections.items)for(var c=0,d=this.selections.items.length;c<d;c++){var h=$(this.selections.items[c]);h.attr({"aria-posinset":r+c+1,"aria-setsize":l}).find("mark.highlight").contents().unwrap(),o.append(h)}this.afterUpdate($(".listview",t).data("listview"))}}},getContainer:function(e){var t=this.settings;if("object"===i(e[0])&&e[0].node){var n=e[0].node.closest(".card"),s="";return n.is(t.availableClass)?s=t.availableClass:n.is(t.selectedClass)?s=t.selectedClass:n.is(t.additionalClass)&&(s=t.additionalClass),{container:n,class:s}}return null},unselectElements:function(e){if(e.selectedItems)for(var t=0,i=e.selectedItems.length;t<i;t++)e.select($(e.selectedItems[t]));e&&e.element&&e.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},isMatchMediaSupports:function(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia},viewport:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e["".concat(t,"Width")],height:e["".concat(t,"Height")]}},isMaxWidth:function(e){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(e,"px)")).matches||this.viewport().width<=e},makeDraggable:function(){var e=this,t=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=t.first().attr("data-swap-handle"),this.handle=$(this.handle,t).length>0?this.handle:null,$(this.handle,t).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",(function(){e.selections.isHandle=!0})).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",(function(){e.selections.isHandle=!1})),this.targets=t.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",(function(){return this.dragDrop&&this.dragDrop(),!1})).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(e,t,i){for(var n=!1,s=$(e),a=0,o=s.length;a<o;a++){var r=$(s[a]),l=r.offset();t<=l.left||t>=l.left+r.outerWidth()||i<=l.top||i>=l.top+r.outerHeight()||(n=r)}return n},draggTouchElement:function(e,t){var i=e.originalEvent.changedTouches[0];t[0].style.top="".concat(i.pageY-this.offset.y,"px"),t[0].style.left="".concat(i.pageX-this.offset.x,"px")},hasModifier:function(e){return e.ctrlKey||e.metaKey||e.shiftKey},addDropeffects:function(){if(this.targets)for(var e=0,t=this.targets.length;e<t;e++)$(this.targets[e]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var i=0,n=this.selections.items.length;i<n;i++)$(this.selections.items[i]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var e=0,t=this.selections.items.length;e<t;e++){var i=$(this.selections.items[e]);i.removeAttr("aria-grabbed".concat(i.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(e){e=this.isjQuery(e)?e:$(e,this.element);var t=$(".listview li",e),i=e.find(".listview").data("listview"),n=this.getDataList(e),s=!1;i&&i.filteredDataset&&(n=c(i.filteredDataset),s=!0);for(var a=0,o=t.length;a<o;a++){var r=$(t[a]),l=n[a];s&&(l.node=r,delete l._isFilteredOut),r.is(".is-selected")&&this.selections.itemsData.push(l)}},initDataset:function(){var e=this.settings,t=[{type:"available",dataset:e.available,class:e.availableClass},{type:"selected",dataset:e.selected,class:e.selectedClass},{type:"additional",dataset:e.additional,class:e.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var i=0,n=t.length;i<n;i++)for(var s=t[i],a=$("".concat(s.class," .listview li"),this.element),o=0,r=a.length;o<r;o++){var l=void 0,c=void 0,d=$(a[o]);s.dataset?delete(l=JSON.parse(JSON.stringify(s.dataset[o]))).selected:(l={text:$.trim($(".swaplist-item-content",d).text())},(c=d.attr("data-value"))&&(l.value=c)),this.dataset[s.type]&&(l.node=d,this.dataset[s.type].push(l))}},getDataList:function(e){var t=this.settings,i=this.dataset;return(e=this.isjQuery(e)?e:$(e,this.element)).is(t.additionalClass)?i.additional:e.is(t.selectedClass)?i.selected:e.is(t.availableClass)?i.available:[]},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},syncDataset:function(e,t){for(var i=$(".listview li",t),n=e.find(".listview").data("listview"),s=t.find(".listview").data("listview"),a=this.getDataList(e),o=this.getDataList(t),r=function(e,t){if(e&&t){var i={owner:e.getAttribute("data-id"),item:t.getAttribute("data-id")};return void 0!==i.owner&&void 0!==i.item&&i.owner===i.item}return!1},l=0,c=this.selections.items.length;l<c;l++)for(var d=this.selections.items[l],h=0,u=i.length;h<u;h++)if($(i[h]).is(d))for(var p=0,g=a.length;p<g;p++){var f=a[p];if(r(f.node[0],d[0])){o.push(f),a.splice(p,1),this.arrayIndexMove(o,o.length-1,h);break}}n.updated({dataset:a}),s.updated({dataset:o}),this.makeDraggable()},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},updateAttributes:function(e){for(var t=$("li",e),i=0,n=t.length;i<n;i++)$(t[i]).attr({"aria-posinset":i+1,"aria-setsize":n})},afterUpdate:function(e){var t=this.selections.droptarget.find("li:focus").index(),i=".card.".concat(this.selections.droptarget[0].classList[1]," li");e&&(this.selections.placeholder&&(e.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(e),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach((function(e){e.show()})),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),t>=0&&this.element.find(i).eq(t).focus()},getItems:function(e){return e=this.isjQuery(e)?e:$(e,this.element),this.getDataList(e)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(e,t){var i=!1;if(!this.selections.isInSelection){if(e.selectedItems)for(var n=0,s=e.selectedItems.length;n<s;n++)if(t.is(e.selectedItems[n]))return i=!0,!1;i||(e.select(t),this.selections.isInSelection=!0)}return!0},updateDataset:function(e){for(var t=this.settings,i=[{type:"available",dataset:e.available,class:t.availableClass},{type:"selected",dataset:e.selected,class:t.selectedClass},{type:"additional",dataset:e.additional,class:t.additionalClass}],n=0,s=i.length;n<s;n++){var a=i[n],o=$("".concat(a.class," .listview"),this.element),r=o.data("listview");r&&(r.deselectItemsBetweenIndexes([0,$("li",o).length-1]),t[a.type]=a.dataset||[],r.loadData(t[a.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(t.availableClass),this.initSelected(t.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,zn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"swaplist")},handleEvents:function(){var e=this,t=e.settings,i=e.selections;e.actionButtons.off("click.swaplist").on("click.swaplist",(function(){var i=$(this),n=i.closest(".card"),s=null;n.is(t.availableClass)?(s=t.draggable.selected?t.selectedClass:e.isAdditional&&t.draggable.additional?t.additionalClass:null,e.moveElements(t.availableClass,s)):n.is(t.additionalClass)?(s=t.draggable.selected?t.selectedClass:t.draggable.available?t.availableClass:null,e.moveElements(t.additionalClass,s)):n.is(t.selectedClass)&&(i.is(t.selectedBtnLeft)?e.moveElements(t.selectedClass,t.availableClass):i.is(t.selectedBtnRight)&&e.moveElements(t.selectedClass,t.additionalClass))})),e.containers.on("keydown.swaplist",".listview",(function(i){var n=$(this).closest(e.containers);77===(i=i||window.event).keyCode&&e.hasModifier(i)&&(!n.is(t.selectedClass)||n.is(t.selectedClass)&&1===e.selectedButtons.length?n.find(e.actionButtons).trigger("click.swaplist"):e.selectedButtons.first().focus(),i.preventDefault())})),e.selectedButtons.on("keydown.swaplist",(function(t){var i,n,s=$(this);13!==(t=t||window.event).keyCode&&32!==t.keyCode||(s.trigger("click.swaplist"),t.preventDefault()),(37===t.keyCode||39===t.keyCode)&&e.selectedButtons.length>1&&(i=e.selectedButtons.index(this),n=37===t.keyCode?i>0?i-1:e.selectedButtons.length-1:i<e.selectedButtons.length-1?i+1:0,e.selectedButtons[n].focus())})),e.element.on("keydown.swaplist",e.tabButtonsStr,(function(e){var t=$(this);if(9===(e.keyCode||e.which)&&!e.shiftKey){var i=t.closest(".card")[0],n=[].slice.call(i.querySelectorAll("li[tabindex]")),s=n.length,a=!1;if(s&&n.forEach((function(e){-1!==parseInt(e.getAttribute("tabindex"),10)&&(a=!0)})),!a){var o=i.querySelector("li");o&&o.setAttribute("tabindex",0)}}})),e.containers.on("filtered.swaplist",".listview",(function(){e.makeDraggable()})),e.element.on("mousedown.swaplist",e.dragElements,(function(t){e.handle&&$(t.target).closest("li").attr({draggable:$(t.target).is(".draggable")});t.stopPropagation()})).on(e.dragStart,e.dragElements,(function(n){if(n.stopImmediatePropagation(),!e.handle||i.isHandle){var s,a,o=$(n.target).closest("li"),r=$(".listview",o.closest(".card")).data("listview");if(r){e.isTouch||e.draggedMakeSelected(r,o),e.clearSelections(),i.owner=o.closest(".card"),i.dragged=o,i.draggedIndex=o.index(),i.placeholder=o.clone(!0),i.placeholder.attr("id","sl-placeholder"),e.setSelectionsItems(i.owner),i.items=r.selectedItems,e.selections.move={items:e.selections.itemsData,from:e.getContainer(e.selections.itemsData)};var l=e.element.triggerHandler("beforeswap",[e.selections.move]);if("boolean"==typeof l&&!l||"string"==typeof l&&"false"===l.toLowerCase())i.dragged=null;else{if($(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(i.items.length),e.addDropeffects(),e.isTouch){s=o[0].getBoundingClientRect(),a=n.originalEvent.changedTouches[0],e.offset={x:a.pageX-s.left,y:a.pageY-s.top};for(var c=0,d=e.containers.length;c<d;c++)e.containers[c].style.zIndex="1";i.placeholderTouch=i.dragged.clone(!0),i.items.length>1&&!$("#sl-placeholder-touch2").length&&i.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(i.dragged).hide(),i.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(e.element.is(".one-third")&&e.isMaxWidth(766)?e.element.parent():e.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(i.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(i.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(i.owner.width(),"px"),e.draggTouchElement(n,i.placeholderTouch)}else i.dragged.addClass("is-dragging"),n.originalEvent.dataTransfer.setData("text",""),i.items.length>1&&$(".".concat(t.itemContentClass),i.dragged).html(t.itemContentTempl.html());n.stopPropagation()}}}else n.stopPropagation()})).on(e.dragEnterWhileDragging,e.dragElements,(function(t){i.dragged&&(e.element.triggerHandler("draggingswap",[i.move]),i.related=t.target,$("ul, li",e.element).removeClass("over"),$(t.target).closest("ul, li").addClass("over"),i.droptarget=$(i.related).closest(".card"),$('[aria-grabbed="true"]',e.element).not(i.dragged).slideUp(),t.stopPropagation())})).on(e.dragOverWhileDragging,e.dragElements,(function(n){if(i.dragged){var s,a=$(this),o=$(".listview",i.dragged.closest(".card")).data("listview");if(e.isTouch){if(e.handle&&!i.isHandle)return;i.isInSelection||(e.draggedMakeSelected(o,i.dragged),i.items=o.selectedItems,$(".".concat(t.numOfSelectionsClass),t.itemContentTempl).html(i.items.length)),s=n.originalEvent.touches[0],a=e.getElementByTouchInList($("ul, li",e.element),s.pageX,s.pageY)||a,i.dragged.addClass("is-dragging"),i.placeholderTouch.addClass("is-dragging is-dragging-touch"),i.placeholderTouch.show(),$('[aria-grabbed="true"]',e.element).not(i.dragged).not(i.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),i.items.length>1&&($(".".concat(t.itemContentClass),i.placeholderTouch.add("#sl-placeholder-touch2")).html(t.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),i.dragged.hide()),e.draggTouchElement(n,i.placeholderTouch),e.element.triggerHandler("draggingswap",[i.move]),i.related=a,$("ul, li",this.element).removeClass("over"),a.closest("ul, li").addClass("over"),i.droptarget=i.related.closest(".card")}n.preventDefault(),n.stopPropagation()}})).on(e.dragEnd,e.dragElements,(function(n){if(i.dragged){var s=$(i.related).closest("li"),a=$("ul",i.droptarget),o=$("li",a).length,r=i.items.length+o;if(e.unselectElements($(".listview",i.owner).data("listview")),$.each(i.items,(function(e,t){if((t=$(t)).find("mark.highlight").contents().unwrap(),o&&!$(i.related).is("ul")){var n=s.index()<i.draggedIndex,l=n?t:$(i.items[i.items.length-1-e]),c=s.index()+(n?e+1:e+2);t.attr({"aria-posinset":c,"aria-setsize":r}),s[n?"before":"after"](l)}else t.attr({"aria-posinset":o+e+1,"aria-setsize":r}),a.append(t);t.focus()})),i.items.length>1&&($(".".concat(t.itemContentClass),i.dragged).html($(".".concat(t.itemContentClass),i.placeholder).html()),e.isTouch&&i.dragged.show()),e.isTouch)for(var l=0,c=e.containers.length;l<c;l++)e.containers[l].style.zIndex="";e.makeDraggable(),i.isHandle=null,$('[aria-grabbed="true"]',e.element).show(),e.afterUpdate($(".listview",i.droptarget).data("listview")),n.preventDefault(),n.stopPropagation()}}))}},$.fn.swaplist=function(e){return this.each((function(){var t=$.data(this,"swaplist");t?t.updated(e):t=$.data(this,"swaplist",new Hn(this,e))}))};var qn={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function Vn(e,t){this.settings=C.mergeSettings(e,t,qn),this.element=$(e),this.init()}Vn.prototype={init:function(){this.handleEvents()},unbind:function(){var e=this.settings;return this.element.off("scroll.scrollaction"),e&&$(e.scrollActionTarget).removeClass(e.classToAdd),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,qn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"scrollaction")},handleEvents:function(){var e=this,t=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",(function(){var i=e.element.scrollTop();i>e.lastScrollTop?$(t.scrollActionTarget).addClass(t.classToAdd):$(t.scrollActionTarget).removeClass(t.classToAdd),e.lastScrollTop=i}))}},$.fn.scrollaction=function(e){return this.each((function(){var t=$.data(this,"scrollaction");t?t.updated(e):t=$.data(this,"scrollaction",new Vn(this,e))}))};var Wn={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null};function jn(e,t){return this.init(e,t)}jn.prototype={init:function(e,t){if(!this.element&&e instanceof HTMLElement&&(this.element=$(e)),"object"===i(t)||void 0===this.settings){var n=this.settings||Wn;this.settings=C.mergeSettings(this.element[0],t,n)}return this.render()},render:function(){var e=$('<div class="step-chart-steps"></div>'),t='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',i=null===this.settings.completed&&null===this.settings.steps;if(i&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=C.parseSettings(this.element)),this.element.children().length>0)return this;for(var n=0;n<this.settings.steps;n++){var s=$('<div class="step-chart-step"></div>');n<this.settings.completed&&(s.addClass("is-complete"),this.settings.completedColor&&s.css("background-color",this.settings.completedColor)),n===this.settings.inProgress-1&&(s.addClass("is-inprogress"),this.settings.inProgressColor&&s.css("background-color",this.settings.inProgressColor)),e.append(s)}var a=this.settings.completedText||M.translate("StepsCompleted");a=(a=a.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),i&&(a=M?M.translate("NoData"):"No Data Available");var o=$('<span class="step-chart-label">'.concat(a,"</span>"));if(this.settings.steps===this.settings.completed&&(e.addClass("is-complete"),o.append(t.replace("{icon-name}","icon-success"))),this.settings.iconType&&o.append(t.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var r=this.settings.extraText;r=(r=(r="{1} Days Overdue"===(r="{0} Days Remaining"===r?M.translate("DaysRemaining"):r)?M.translate("DaysOverdue"):r).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),o.append('<span class="step-chart-label-small">'.concat(r,"</span>"))}return this.element.append(o,e),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(e.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),o.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),this},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this.element.empty(),this.render()},destroy:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],"stepchart"),this}},$.fn.stepchart=function(e){return this.each((function(){var t=$.data(this,"stepchart");t?t.updated(e):(t=$.data(this,"stepchart",new jn(this,e))).destroy=function(){this.teardown(),$.removeData(this,"stepchart")}}))};var Gn=["horizontal","vertical","module-tabs","header-tabs"],Un={addTabButton:!1,addTabButtonCallback:null,appMenuTrigger:!1,appMenuTriggerText:void 0,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,moduleTabsTooltips:!1,multiTabsTooltips:!1,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1};function _n(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Un),this.init()}_n.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var e,t=this,i=this,n=!1;(e=this.element.next(".tab-panel-container")).length||(e=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(n=!0));var s=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&s.length&&(e=s),this.element.next(".application-menu").length&&(e=this.element.next().next(".page-container"),n=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(e=$(this.settings.containerElement),n=!1),e&&e.length||(e=$('<div class="tab-panel-container"></div>'),n=!0),e[0].classList.contains("tab-panel-container")||e[0].classList.add("tab-panel-container"),n&&e.insertAfter(this.element),this.container=e;var a=this.element.children(".tab-list-container");!a.length&&this.isScrollableTabs()&&(a=$('<div class="tab-list-container"></div>').prependTo(this.element)),a.length&&(this.tablistContainer=a);var o=!0,r=this.element.closest(".header");Gn.forEach((function(e,i){t.element.hasClass(Gn[i])&&(o=!1)})),o&&(r.length?i.element.addClass("header-tabs"):i.element.addClass("horizontal")),i.settings.tabCounts&&i.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablistContainer?this.tablist.appendTo(this.tablistContainer):this.tablist.appendTo(this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",(function(e){e.deltaY&&(this.scrollLeft+=e.deltaY)}))),i.tablist.attr({class:"tab-list",role:"tablist","aria-multiselectable":"false"}),this.checkResponsive(!1),this.renderHelperMarkup(),i.anchors=i.tablist.children("li:not(.separator)").children("a"),i.anchors.each((function(){var e=$(this);e.attr({role:"tab","aria-expanded":"false","aria-selected":"false",tabindex:"-1"}).parent().attr("role","presentation").addClass("tab"),e.parent().hasClass("dismissible")&&!e.parent().children(".icon").length&&$.createIconElement({icon:"close",classes:"icon close"}).insertAfter(e);var t=e.nextAll("ul").first();t.length>0&&(t.addClass("dropdown-tab"),e.parent().addClass("has-popupmenu").popupmenu({menu:t,trigger:"click",attachToBody:!0}),e.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),e.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(e));i.settings.tabCounts&&0===$(this).find(".count").length&&$(this).prepend('<span class="count">0 </span>'),(i.settings.moduleTabsTooltips||i.settings.multiTabsTooltips)&&e.on("beforeshow.toolbar",(function(){return"yes"===e.data("cutoffTitle")})).tooltip({content:"".concat(e.text().trim())})})),i.panels=$(),i.anchors.each((function(){var e,t=$(this),n=t.parent(),s=n.data("popupmenu"),a=t.attr("href");if("#"===a.substr(0,1)){if("#/"===a.substr(0,2)&&(a=a.replace("#/","#")),void 0!==a&&"#"!==a){if(e=$(a),n.is(":not(.has-popupmenu)")&&!e.length)return;t.data("panel-link",e),e.data("tab-link",t),i.panels=i.panels.add(e)}s&&s.menu.children("li").each((function(){var e=$(this),t=e.children("a"),n=t.attr("href"),s=$(n);if(t.data("panel-link",s),s.data("tab-link",t),i.panels=i.panels.add(s),i.anchors=i.anchors.add(t),e.hasClass("dismissible")){var a=e.children(".icon");a.length||(a=$.createIconElement({icon:"close",classes:"icon close"})),a.detach().appendTo(t)}})).on("click.popupmenu",".icon",(function(e){var t=$(this),n=t.closest("li");n.is(".dismissible")&&t.is(".icon")&&(e.preventDefault(),e.stopPropagation(),i.closeDismissibleTab(n.children("a").attr("href")))}))}})),i.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),i.panels.appendTo(i.container);var l,c,d=":not(.separator):not(.is-disabled):not(.is-hidden)",h=this.tablist.children("li".concat(d)),u=this.tablist.children("li.is-selected".concat(d)),p=u.children("a");return i.nestedTabControls=i.panels.find(".tab-container"),h.length&&(this.settings.changeTabOnHashChange&&(l=window.location.hash)&&l.length&&(c=h.find('a[href="'.concat(l,'"]'))).length&&(p=(u=c.first().parent()).children("a")),u.length||(p=(u=h.not(".add-tab-button, .application-menu-trigger").first()).children("a")),u.length&&this.activate(p.attr("href"),p)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.setOverflow(),this.positionFocusState(p),this.hasAnimatedBar()&&(this.animatedBar.addClass("no-transition"),this.focusBar(void 0,(function(){setTimeout((function(){t.animatedBar.removeClass("no-transition")}),0)}))),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",(function(){t.renderEdgeFading()})),this.renderEdgeFading()),this},renderHelperMarkup:function(){var e=this.tablistContainer||this.tablist;this.isModuleTabs()&&(e=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),this.focusState.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.hasAnimatedBar()?(this.animatedBar=this.element.find(".animated-bar"),this.animatedBar.length||(this.animatedBar=$('<div class="animated-bar" role="presentation"></div>')),this.animatedBar.insertBefore(this.tablist)):this.animatedBar&&this.animatedBar.length&&(this.animatedBar.off().removeData().remove(),this.animatedBar=void 0),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=e.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(M.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),e.after(this.moreButton));var t=this.tablist.find(".application-menu-trigger");return!0===this.settings.appMenuTrigger?this.isModuleTabs()?t.length||(t=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <span class="icon app-header">\n                  <span class="one"></span>\n                  <span class="two"></span>\n                  <span class="three"></span>\n                </span>\n                <span>'.concat(this.settings.appMenuTriggerText||M.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(t)):this.isVerticalTabs()&&t.length&&t.off().removeData().remove():t.length&&(this.isVerticalTabs()?t.off().removeData().remove():this.tablist.prepend(t)),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$('\n          <div class="add-tab-button" tabindex="0" role="button">\n            <span aria-hidden="true" role="presentation">+</span>\n            <span class="audible">'.concat(M.translate("AddNewTab"),"</span>\n          </div>\n        ")),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),this},setupEvents:function(){var e=this,t=this,i=t.element.closest(".modal");return i.length&&i.on("afteropen.tabs",(function(){t.hasAnimatedBar()&&t.focusBar()})),this.tablist.on("mousedown.tabs","> li",(function(e){if(t.handleAddFocusData(e,$(this)),$(e.target).hasClass("close")&&$(e.target).parent().hasClass("has-popupmenu")){var i=$(this).data("popupmenu").menu,n=[];$.each(i[0].children,(function(e,t){n.push(t.children[0].href)})),t.closeDismissibleTabs(n)}return 3!==e.which&&t.handleTabClick(e,$(this))})).on("click.tabs","a",(function(e){var t=$(e.currentTarget);!0!==this.wasTapped?("touchend"===e.type&&(this.wasTapped=!0),"#"===t.attr("href").substr(0,1)&&e.preventDefault()):this.wasTapped=!1})).on("click.tabs",".icon",(function(e){var i=$(this);if(!i.is("[disabled]")&&!i.parent().hasClass("is-disabled")){var n=$(i).parent();n.hasClass("dismissible")&&(e.preventDefault(),e.stopPropagation(),t.closeDismissibleTab(n.children("a").attr("href")))}})).on("focus.tabs","a",(function(e){return t.handleTabFocus(e,$(this))})).on("blur.tabs","a",(function(){$(this).parent().removeClass("is-focused")})).on("keydown.tabs","a",(function(t){return e.handleTabKeyDown(t)})),t.tablist.find("li").filter(".has-popupmenu").each((function(e,i){var n=$(i),s=n.children("a");function a(e){e.altKey&&n.is(".dismissible")&&t.closeDismissibleTab(s.attr("href"))}n.data("popupmenu").menu.on("keydown.popupmenu","a",(function(e){switch(e.which){case 27:n.addClass("is-selected"),s.focus();break;case 8:case 46:a(e)}})),n.on("selected.tabs",(function(e,i){var n=$(this),a=$(i).attr("href");return!!t.activate(a,$(i))&&(t.positionFocusState(s),t.hasAnimatedBar()&&t.focusBar(n),s.focus(),t.scrollTabList(n),n.addClass("is-selected"),!1)}))})),t.tablist.find("li").filter(".dismissible").each((function(e,i){$(i).children("a").on("keydown.tabs",(function(e){t.handleDismissibleTabKeydown(e)}))})),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",(function(e){t.handlePanelKeydown(e)})),this.element.on("focusout.tabs",(function(){var e=!$.contains(t.element[0],document.activeElement),i=0===t.tablist.children(".has-popupmenu.is-open").length;e&&i&&!t.moreButton.is(".is-selected, .popup-is-open")&&t.hideFocusState()})).on("updated.tabs",(function(e,i){t.updated(i)})).on("activated.tabs",(function(e){e.stopPropagation()})).on("add.tabs",(function(e,i,n,s){t.add(i,n,s)})).on("remove.tabs",(function(e,i){t.remove(i)})),$("body").on("resize.tabs".concat(this.tabsIndex),(function(){t.handleResize()})),t.handleResize(!0),$(".tab-panel input").on("error.tabs, valid.tabs",(function(){var e=$(".tab.is-selected");t.focusBar(e)})),this},setupHelperMarkupEvents:function(){var e=this;this.moreButton.on("click.tabs",(function(t){e.handleMoreButtonClick(t)})).on("keydown.tabs",(function(t){e.handleMoreButtonKeydown(t)})).on("focus.tabs",(function(t){e.handleMoreButtonFocus(t)})).on("mousedown.tabs",(function(t){e.handleAddFocusData(t,$(this))})),this.settings.addTabButton&&this.addTabButton.on("click.tabs",(function(){e.handleAddButton()})).on("keydown.tabs",(function(t){e.handleAddButtonKeydown(t)})).on("focus.tabs",(function(t){e.handleAddButtonFocus(t)}))},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(e,t){var i=t;return i.is(".is-disabled")?(e.preventDefault(),!1):(i.is(this.moreButton)||(i=i.children("a")),this.hideFocusState(),i.data("focused-by-click",!0),!0)},handleTabClick:function(e,t){if(this.element.is(".is-disabled")||t&&(t.is(".is-disabled")||t.is(".separator")))return e.stopPropagation(),e.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(e))return!0;var i=t.children("a");if(i.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),t.is(".has-popupmenu"))return this.positionFocusState(i),!0;var n=i.attr("href");return t.is(".add-tab-button")&&(t=(i=this.handleAddButton()).parent(),n=i.attr("href"),this.element.trigger("tab-added",[i])),2===e.which?(t.is(".dismissible")&&$(e.target).is(".close")&&this.closeDismissibleTab(n),e.preventDefault(),!0):!this.activate(n,i)||(this.changeHash(n),this.focusState.removeClass("is-visible"),i.focus(),this.isScrollableTabs()&&this.scrollTabList(t),this.focusBar(t),this.positionFocusState(i),!0!==this.settings.lazyLoad||!this.isURL(n))},handleMoreButtonClick:function(e){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(e.preventDefault(),e.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||e.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},handleTabFocus:function(e,t){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var i=t.parent(),n=t.data("focused-by-click"),s=void 0===n||n&&!1===n;return $.removeData(t[0],"focused-by-click"),this.isTabOverflowed(i)?(this.buildPopupMenu(t.attr("href")),this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(i.addClass("is-focused"),this.positionFocusState(t,s)),!0},handleMoreButtonFocus:function(e){if(this.element.is(".is-disabled"))e.preventDefault();else{var t=this.moreButton.data("focused-by-click"),i=t&&!1===t;$.removeData(this.moreButton[0],"focused-by-click"),this.focusState.removeClass("is-visible"),this.positionFocusState(this.moreButton,i)}},handleTabKeyDown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey&&8!==e.which)return!0;var t=this,i=[8,13,32];function n(){return $.inArray(e.which,i)>-1}if(e.which<32&&!n()||e.which>46)return!0;if(n()&&!this.handleAppMenuTabKeydown(e))return!0;function s(i){e.preventDefault(),setTimeout((function(){t.buildPopupMenu(i)}),0)}var a,o=":not(.separator):not(.is-disabled):not(:hidden)",r=$(e.currentTarget).parent(),l=r.children("a"),c=t.tablist.children("li".concat(o)),d=M.isRTL();function h(){for(var e=c.index(r)-1;e>-1&&!a;){if(c.eq(e).is(o))return c.eq(e);e-=1}if(t.settings.addTabButton)return t.addTabButton;var i=t.tablist.children("li".concat(o)).last();return t.hasMoreButton()&&t.isScrollableTabs()&&s(i.find("a").attr("href")),i}function u(){for(var e=c.index(r)+1;e<c.length&&!a;){if(c.eq(e).is(o))return c.eq(e);e++}var i=t.tablist.children("li".concat(o)).first();return t.hasMoreButton()&&t.isScrollableTabs()?(s(i.find("a").attr("href")),i):t.settings.addTabButton?t.addTabButton:i}function p(){if(r.hasClass("has-popupmenu"))r.data("popupmenu").open();else{var e=l.attr("href");r.is(".add-tab-button")&&(l=t.handleAddButton(),r=l.parent(),e=l.attr("href"),t.element.trigger("tab-added",[l])),t.activate(e)&&(t.changeHash(e),t.focusBar(r),(l.attr("ng-click")||l.attr("data-ng-click"))&&l.click(),l[0].focus(),t.hideFocusState(),t.handleOutboundLink(e))}}switch(e.which){case 8:return e.altKey&&r.is(".dismissible")&&(e.preventDefault(),t.closeDismissibleTab(l.attr("href"))),!0;case 13:case 32:return p(),!1;case 38:a=h(),e.preventDefault();break;case 37:a=d?u():h(),e.preventDefault();break;case 40:a=u(),e.preventDefault();break;case 39:a=d?h():u(),e.preventDefault()}if(a){var g=a.is(".add-tab-button"),f=g?a:a.children("a");if(this.isTabOverflowed(a))return s(a.children("a").attr("href"));g?t.addTabButton.focus():f.focus(),this.isScrollableTabs()&&this.scrollTabList(f),t.positionFocusState(f,!0)}return!0},handleDismissibleTabKeydown:function(e){var t=e.which,i=$(e.target);if(i.is("a")&&(i=i.parent()),e.altKey&&46===t){if(i.children("a").is("[disabled]")||i.hasClass("is-disabled"))return;e.preventDefault(),this.closeDismissibleTab(i.children("a").attr("href"))}},handleAppMenuTabKeydown:function(e){var t=$(e.target);if(!t.parent().is(".application-menu-trigger")&&!t.is(".application-menu-trigger"))return!0;var i=$("#application-menu");return!!i.length&&(e.preventDefault(),this.hideFocusState(),i.hasClass("is-open")?(i.trigger("close-applicationmenu"),!1):(i.trigger("open-applicationmenu"),!1))},handleMoreButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=this,i=M.isRTL();function n(){e.preventDefault(),t.buildPopupMenu(t.tablist.find(".is-selected").children("a").attr("href")),t.positionFocusState(t.moreButton,!0)}function s(){e.preventDefault(),t.findLastVisibleTab()}switch(e.which){case 37:if(i){n();break}s();break;case 38:s();break;case 13:case 32:e.preventDefault();break;case 39:if(i){s();break}n();break;case 40:n()}return!0},handlePanelKeydown:function(e){var t=e.which,i=$(e.target),n=this.anchors.filter("#".concat(i.attr("id")));return this.anchors.filter("#".concat(i.attr("id"))).parent().is(".dismissible")&&e.altKey&&46===t?(e.preventDefault(),this.closeDismissibleTab(n.attr("href"))):e.ctrlKey&&38===t&&$.contains(document.activeElement,i[0])?(e.preventDefault(),this.activate(n.attr("href"),n)):void 0},handleAddButton:function(){var e=this,t=this.settings.addTabButtonCallback;if(t&&"function"==typeof t){var n=t();return this.anchors.filter('[href="#'.concat(n,'"]'))}var s,a=this.tablist.children().index(this.addTabButton),o=(e.idCounter="number"==typeof e.idCounter?e.idCounter:-1,e.idCounter++,"new-tab-".concat(e.idCounter)),r={name:((s=o.toString().split("-")).forEach((function(e,t){s[t]=e.charAt(0).toUpperCase()+e.slice(1)})),s.join(" ")),content:"&nbsp;",isDismissible:!0};a<0&&(a=this.tablist.find("li:not(.separator)").length);var l=this.element.triggerHandler("before-tab-added",[o,r,a]);return l?(l.newId&&l.newId.length&&"string"==typeof l.newId&&(o=l.newId),l.settings&&"object"===i(l.settings)&&(r=l.settings),isNaN(l.newIndex)||(a=l.newIndex),this.add(o,r,a),this.anchors.filter('[href="#'.concat(o,'"]'))):(this.add(o,r,a),this.anchors.filter('[href="#'.concat(o,'"]')))},handleAddButtonKeydown:function(e){if(this.element.is(".is-disabled"))return e.preventDefault(),!1;var t=e.which;if([13,32,37,38,39,40].indexOf(t)<0)return!1;var i,n=this,s=M.isRTL(),a="li:not(.separator):not(.is-disabled):not(:hidden)";function o(){e.preventDefault(),i=n.tablist.find(a).last(),n.isTabOverflowed(i)&&(n.buildPopupMenu(i.children("a").attr("href")),n.positionFocusState(n.moreButton,!0))}function r(){i=n.tablist.find(a).first()}switch(t){case 37:if(s){r();break}o();break;case 38:o();break;case 13:case 32:return e.preventDefault(),this.handleAddButton();case 39:if(s){o();break}r();break;case 40:r()}return i.children("a").focus(),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused"),this.positionFocusState(this.addTabButton,!0)},handleResize:function(e){e||this.checkResponsive(!0),this.setOverflow();var t=this.tablist.find(".is-selected");(!t.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(t))&&(t=this.moreButton),t.length?(this.focusBar(t),this.positionFocusState(t)):(this.defocusBar(),this.hideFocusState()),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(e){var t=this,i=t.element[0].classList;function n(){t.removeHelperMarkupEvents(),t.renderHelperMarkup(),t.setupHelperMarkupEvents()}function s(){i.contains("is-in-responsive-mode")&&(i.add("vertical"),i.remove("is-in-responsive-mode"),i.remove("header-tabs"),i.remove("alternate"),e&&n())}this.isResponsiveVerticalTabs()&&p.isBelow("phone-to-tablet")?i.contains("is-in-responsive-mode")||(i.add("is-in-responsive-mode"),i.add("header-tabs"),i.contains("is-personalizable")||i.add("alternate"),i.remove("vertical"),e&&n()):s()},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var e=window.getComputedStyle(this.element[0]),t=e.getPropertyValue("height")+e.getPropertyValue("margin-top")+e.getPropertyValue("margin-bottom");this.tablist[0].style.height=t}},handleOutboundLink:function(e,t){"#"!==e.charAt(0)&&("/"!==e.charAt(0)||t&&!1!==t||(e=window.location.origin+e),window.location=e)},hasAnimatedBar:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return!0===this.settings.verticalResponsive},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(e){return!(!e||!e.length||1===e.length&&e.indexOf("#")<1)&&this.getPanel(e)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var e=this.element.closest(".module-tabs").length,t=this.element.closest(".header-tabs").length,i=this.element.closest(".tab-panel-container").length;return e>0||t>0||i>0},isTab:function(e){return e instanceof jQuery&&e.length&&e.is("li.tab")},isAnchor:function(e){return e instanceof jQuery&&e.length&&e.is("a")},getAnchor:function(e){return this.isAnchor(e)?e:(-1===e.indexOf("#")&&"/"!==e.charAt(0)&&(e="#".concat(e)),this.anchors.filter('[href="'.concat(e,'"]')))},getPanel:function(e){return this.isTab(e)&&(e=e.children("a")),this.isAnchor(e)&&(e=e.attr("href")),e&&""!==e&&"#"!==e?("#/"===e.substr(0,2)&&(e=e.replace("#/","#")),this.panels.filter('[id="'.concat(e.replace(/#/g,""),'"]'))):$()},getMenuItem:function(e){return this.isAnchor(e)&&(e=e.attr("href")),-1===e.indexOf("#")&&(e="#".concat(e)),this.moreMenu.children().children().filter('[data-href="'.concat(e,'"]')).parent()},getPreviousTab:function(e){for(var t=this.getTab(null,e),i="li:not(.separator):not(:hidden):not(.is-disabled)",n=this.tablist.find(i),s=n.index(t),a=n.eq(0===s?1:s-1);a.length&&!a.is(i);)a=n.eq(n.index(a)-1);if(a.is(".has-popupmenu")){var o=a.data("popupmenu");o&&(a=o.menu.children("li").first())}return a},activateAdjacentTab:function(e,t){var i=this.doGetTab(e,t);"string"==typeof e&&(t=e),i.is(".is-selected")?i.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(i.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):i.nextAll("li.tab").not(".hidden").length>0&&this.select($(i.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(e,t){var i=this.getTab(null,e);if(t&&t instanceof jQuery||(t=this.getPreviousTab(e)),!t.length)return this.hideFocusState(),this.defocusBar(),t;var n=t.children("a");if(i.is(".is-selected")){if(!this.activate(n.attr("href"),n))return t;n.focus()}return this.positionFocusState(n),this.focusBar(t),t},isURL:function(e){return!(!e||0===e.indexOf("#"))},activate:function(e,t){var i=this;if(i.isURL(e))return this.callSource(e,t,!0);for(var n,s,a,o=i.getAnchor(e),r=o.parent(),l=i.getPanel(e),c=l[0],d=i.anchors.parents().filter(".is-selected"),h=0;h<i.panels.length;h++)i.panels[h].classList.contains("is-visible")&&(n=$(i.panels[h]));if(n||(n=i.panels),!i.element.trigger("beforeactivated",[o]))return!1;function u(t){if(l.length<1){if(i.settings.source)return i.callSource(e,o),!0}else{n[0].classList.remove("can-show"),n[0].classList.remove("is-visible"),n.closeChildren(),i.element.trigger("activated",[o]),c.classList.add("can-show"),i.renderVisiblePanel(),c.offsetHeight;var h=new W({duration:S.convertDelayToFPS(150),timeoutCallback:function(){i.element.trigger("afteractivated",[o])}});G.register(h),c.classList.add("is-visible")}i.updateAria(o),d.add(i.moreButton).removeClass("is-selected"),r[0]&&r[0].classList.contains("tab")&&(s=r,a=r);var u,p=r.parents(".popupmenu");p.length&&(u=p.data("trigger")).length&&(s=u,a=u),i.isTabOverflowed(a)&&(a=i.moreButton,s=i.moreButton),i.focusBar(a),s&&s.addClass("is-selected");var g=l.find(".toolbar");return g.length&&g.each((function(){var e=$(this).data("toolbar");e&&"function"==typeof e.handleResize&&e.handleResize()})),C.fixSVGIcons(l[0]),t||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(d,r,u):u(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var e=M.isRTL(),t=this.tablistContainer[0],i=t.scrollLeft,n=t.scrollWidth,s=parseInt(window.getComputedStyle(t).getPropertyValue("width"),10);e?(this.element[0].classList[i>0?"add":"remove"]("scrolled-left"),this.element[0].classList[n-i<=s?"remove":"add"]("scrolled-right")):(this.element[0].classList[i>0?"add":"remove"]("scrolled-right"),this.element[0].classList[n-i<=s?"remove":"add"]("scrolled-left"))}},callSource:function(e,t,n){var s=this;if((null==n||!1===n)&&!this.settings.source)return!1;if(!0!==this.settings.lazyLoad)return!1;var a=i(this.settings.source),o=function(i){if(null!=i){if(i=h.sanitizeHTML(i),n){var a=s.element[0].id||"",o=C.uniqueId(t,"tab",a);e="#".concat(o),t[0].setAttribute("href",e)}s.createTabPanel(e,i,!0),s.activate(e),s.element.triggerHandler("complete"),s.element.trigger("requestend",[e,i])}};function r(e,t){var i=$.extend({dataType:"html"},t,{url:e}),n=$.ajax(i);return n.done(o),n}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),n)return r(e,this.ajaxOptions);if("function"===a)return this.settings.source(o,e,this.settings.sourceArguments);if("string"===a){var l=e.replace(/#/g,""),c=this.settings.source.toString();if(!(c.indexOf(l)>-1)){var d="tab=".concat(l),u=c.indexOf("?"),p=c.indexOf("#"),g=c.length;u<0?(d="?".concat(d),p>-1&&(g=p+1)):(d+="&",g=u+1),c=D.splice(c,g,0,d)}return r(c,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(e){if(this.settings.changeTabOnHashChange){e||(e=""),e.replace(/#/g,"");var t=this.settings.hashChangeCallback;t&&"function"==typeof t?t(e):window.location.hash=e,this.element.triggerHandler("hash-change",[e])}},updateAria:function(e){e&&(this.anchors.attr({"aria-selected":"false","aria-expanded":"false",tabindex:"-1"}),this.moreButton.attr({tabindex:"-1"}),e.length&&this.element.is(":not(.is-disabled)")&&(e.parent().removeClass("is-selected"),this.isTabOverflowed(e.parent())?this.moreButton.attr({tabindex:"0"}):e.attr({"aria-selected":"true","aria-expanded":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each((function(e,t){var i=$(t).data("tabs");i&&i.handleResize&&"function"==typeof i.handleResize&&i.handleResize(!0)}))},add:function(e,t,n){if(!e)return this;t||(t={});var s=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function a(e){switch(i(e)){case"string":if(null!==e.match(/#/g)){var t=$(e);e=t.length?t:e}}return e}e="".concat(e.replace(/#/g,"")),t.name=t.name?t.name.toString():"&nbsp;",t.isDismissible=!!t.isDismissible&&!0===t.isDismissible,t.isDropdown=!!t.isDropdown&&!0===t.isDropdown,t.content&&(t.content=a(t.content)),t.dropdown&&(t.dropdown=a(t.dropdown));var o=$('<li role="presentation" class="tab"></li>'),r=$('<a href="#'.concat(e,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1">').concat(h.escapeHTML(t.name),"</a>")),l=this.createTabPanel(e,t.content);if(o.html(r),t.isDismissible&&(o.addClass("dismissible"),o.append($.createIconElement({icon:"close",classes:"close icon"}))),this.settings.tabCounts&&r.prepend('<span class="count">0 </span>'),t.dropdown,function(e,t){var i,n=e.tablist.children("li"),s=n.not(".application-menu-trigger, .add-tab-button"),a=n.length-1;if(!n.length)return o.appendTo(e.tablist),void l.appendTo(e.container);var r=n.filter(".add-tab-button"),c=n.filter(".application-menu-trigger");(null==t||isNaN(t))&&(t=n.length),n.length>s.length&&(t>n.length-1&&r&&r.length&&(t-=1),function(e){return e<=0}(t)&&c&&c.length&&(t+=1));var d=n.eq(t).length>0;a=d?t:a,i="insertAfter",d&&(i="insertBefore"),o[i](n.eq(a)),l.appendTo(e.container)}(this,n),this.panels=$(this.panels.add(l)),this.anchors=$(this.anchors.add(r)),r.data("panel-link",l),l.data("tab-link",r),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&r.on("beforeshow.toolbar",(function(){return"yes"===r.data("cutoffTitle")})).tooltip({content:"".concat(r.text().trim())}),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),s){if(this.positionFocusState(r),this.focusBar(o),!this.activate(r.attr("href")))return this;r.focus()}return t.doActivate&&this.activate(r.attr("href")),this},remove:function(e,t){var i=this,n=this.doGetTab(null,e);if(!n||!n.length)return!1;var s=n.children("a"),a=this.getPanel(e),o=a&&a.length,r=this.tablist.children("li").index(n),l=".application-menu-trigger, .separator, .is-disabled, :hidden",c=n.prev();if(!t&&!1===this.element.triggerHandler("beforeclose",[n]))return!1;var d=!1;n.hasClass("is-selected")?d=!0:c=$(this.tablist.children("li").not(l).filter(".is-selected")),o&&(this.panels=$(this.panels.not(a))),this.anchors=$(this.anchors.not(s)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&s.off("beforeshow.toolbar").data("tooltip").destroy();var h=n.data("popupmenu");n.hasClass("has-popupmenu")&&h&&(h.menu.children("li").each((function(){i.remove($(this).children("a").attr("href"))})),h.destroy());var u=n.closest(".dropdown-tab"),p=u.data("trigger");n.find(".icon").off().removeData().remove(),n.off(),s.off(),n.removeData().remove(),o&&a.removeData().remove();var g,f=s.data("moremenu-link");f&&(f.parent().off().removeData().remove(),s.removeData()),(g=u).length&&0===g.children("li:not(.separator)").length&&(c=this.getPreviousTab(p),setTimeout((function(){i.remove(p)}),1)),p&&p.length&&p.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[n]);for(var m=r-1;m>-1;)m=-1,c.is(l)&&(c=this.tablist.children("li").not(l)[0],m-=1);if(c.length||(c=this.tablist.children("li").not(l).first()),!c.length)return this.hideFocusState(),this.defocusBar(),this.element.trigger("afterclose",[n]),this;var v=c.children("a"),b=v;return this.positionFocusState(v),d&&(c.is(".has-popupmenu")&&c.data("popupmenu")&&(b=c.data("popupmenu").menu.children().first().children("a")),!this.activate(b.attr("href")))||(this.focusBar(c),v.focus(),this.element.trigger("afterclose",[n])),this},createTabPanel:function(e,t,i){e=e.replace(/#/g,"");var n=$('<div id="'.concat(h.stripTags(e),'" class="tab-panel" role="tabpanel"></div>'));return t instanceof $&&(t=t[0]),u.html(n[0],t||"","*"),!0===i&&this.container.append(n),this.panels=$(this.panels.add(n)),n},checkPopupMenuItems:function(e){function t(e){if(!e||!e.menu)return $();var t=e.menu.children("li");return t.length?t:(e.destroy(),$())}if(e.is(".has-popupmenu"))return t(e.data("popupmenu"));var i=e.closest(".dropdown-tab");return i.length?t(i.data("popupmenu")):$()},getTab:function(e,t){var i,n=this,s=$();return t instanceof $&&t.length>0?t.is("a")?t.parent():t:e?(i=$(e.currentTarget)).is(".tab")?i:i.closest(".tab").length?i.closest(".tab").first():null:t?function(e){if(!e||""===e||"#"===e)return null;-1===e.indexOf("#")&&(e="#".concat(e));var t=n.anchors.filter('[href="'.concat(e,'"]'));return t.length?t.parent():null}(t):s},doGetTab:function(e,t){return(e||t)&&(!e||e instanceof $.Event||"string"==typeof e)?e?"string"!=typeof e?this.getTab(e):this.getTab(null,e):this.getTab(null,t):$()},hide:function(e,t){var i=this.doGetTab(e,t);return this.activateAdjacentTab(e,t),i.addClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},show:function(e,t){return this.doGetTab(e,t).removeClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},disableTab:function(e,t){var i=this.doGetTab(e,t);return this.activateAdjacentTab(e,t),i.addClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},enableTab:function(e,t){return this.doGetTab(e,t).removeClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},rename:function(e,t,i){if(e&&"string"==typeof e&&(i=t,t=e),i){var n,s=this.doGetTab(e,t),a=this.settings.tabCounts,o=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,r=s.children("a");a&&(n=r.find(".count").clone()),r.text(i.toString()),a&&r.prepend(n),o&&r.data("tooltip").setContent(i.trim());var l=this.tablist.children("li").length<2?s:void 0;this.positionFocusState(l),this.focusBar(l)}},updateCount:function(e,t,i){if(e&&"string"==typeof e&&(i=t,t=e),this.settings.tabCounts&&i){var n=this.doGetTab(e,t);n.children("a").find(".count").text("".concat(i.toString()," "));var s=this.tablist.children("li").length<2?n:void 0;this.positionFocusState(s),this.focusBar(s)}},getActiveTab:function(){var e=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(e.first().attr("id"),'"]'))},getVisibleTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function(){var i=$(this);e.isTabOverflowed(i)||(t=t.add(i))})),t},getOverflowTabs:function(){var e=this,t=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function(){var i=$(this);e.isTabOverflowed(i)&&(t=t.add(i))})),t},setOverflow:function(){var e,t,i,n=this,s=this.element[0],a=this.tablist[0],o=this.hasMoreButton(),r=this.isScrollableTabs();function l(){n.isModuleTabs()&&n.adjustModuleTabs()}l(),r?i=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(e=window.getComputedStyle(a,null),t=parseInt(e.getPropertyValue("height"),10)+1,i=a.scrollHeight>t),i?o||(s.classList.add("has-more-button"),l()):o&&(s.classList.remove("has-more-button"),l()),this.adjustSpilloverNumber()},adjustModuleTabs:function(){var e=this,t=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),i=this.tablist.find(".application-menu-trigger"),n=i.length>0,s=this.tablist.outerWidth(),a=120,o=n?i.outerWidth():0;if(t.children("a").removeAttr("style"),t.removeAttr("style").each((function(){var i=$(this);e.isTabOverflowed(i)&&(t=t.not(i))})),!t.length)return a=s-o+101,void(this.moreButton[0].style.width="".concat(a,"px"));var r,l=window.getComputedStyle(t.eq(0).children()[0]),c=parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10);this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(a=(s-o)/t.length-1)<120&&(a=120);for(var d="no",h=1===this.element.closest(".side-by-side").length,u=0;u<t.length;u++){(r=t.eq(u).children("a"))[0].style.width="",(!0===this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&(d="no",parseInt(window.getComputedStyle(t[u]).width,10)>a-c&&(d="yes"),r.data("cutoffTitle",d));var p=0;"ios"===m.os.name&&m.devicespecs.isMobile&&h&&(p=25),t[u].style.width="".concat(a-p,"px"),r[0].style.width="".concat(a-p,"px")}this.adjustSpilloverNumber()},adjustSpilloverNumber:function(){var e=this.moreButton.find(".more-text"),t=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),i=this.getOverflowTabs();t.length<=i.length?e.text("".concat(M.translate("Tabs"))):e.text("".concat(M.translate("More")));var n=this.moreButton.find(".count");n.length||(n=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(n)),n.text("".concat(i.length," "))},select:function(e,t){var i=e.replace(/#/g,""),n=this.getAnchor(i);this.positionFocusState(void 0,!1),this.focusBar(n.parent()),this.activate(n.attr("href"))&&(this.changeHash(i),t||n.focus())},buildPopupMenu:function(e){var t=this;t.popupmenu&&(t.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var i=$("#tab-container-popupmenu"),n="";this.isScrollableTabs()&&(n=" is-selectable"),0===i.length?i=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(n,'">')).appendTo("body"):i.html("");var s=t.tablist.children("li"),a=M.isRTL();function o(e){var n=$(e),s=n.children("a");if(!n.is(":hidden")&&(t.isScrollableTabs()||t.isTabOverflowed(n)))if(n.is(".separator"))n.clone().appendTo(i);else{var a=n.clone(),o=a.children("a");if(a[0].classList.remove("tab"),a[0].classList.contains("is-selected")&&(a[0].classList.remove("is-selected"),t.isScrollableTabs()&&a[0].classList.add("is-checked")),a[0].removeAttribute("style"),a.children(".icon").off().appendTo(o),a.appendTo(i),n.data("moremenu-link",o),o.find(".icon-more").removeData().remove(),o.data("original-tab",s),o.onclick=void 0,n.is(".has-popupmenu")){var r=$("#".concat(e.getAttribute("aria-controls"))),l=r.clone(),c=l.children("li");l[0].classList.remove("has-popupmenu"),c.each((function(e){var t=$(this).children("a"),i=r.children("li").eq(e).children("a");t.data("original-tab",i),i.data("moremenu-link",t)})),l.insertAfter(o)}}}for(var r=0;r<s.length;r++)o(s[r]);t.tablist.children("li:not(.separator)").removeClass("is-focused");var l=1;this.isScrollableTabs()||(l=3),t.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:l}}),t.moreButton.addClass("popup-is-open"),t.popupmenu=t.moreButton.data("popupmenu"),t.positionFocusState(t.moreButton),t.moreButton.on("close.tabs",(function(){$(this).off("close.tabs selected.tabs"),t.moreButton.removeClass("popup-is-open"),t.positionFocusState(void 0),t.focusBar()})).on("selected.tabs",(function(e,i){var n=i.attr("href"),s=n.substr(1,n.length),a=t.doGetTab(s)||$(),o=a?a.children("a"):$(),r=i.data("original-tab").parent();r.is(".add-tab-button")&&(r=(o=t.handleAddButton()).parent(),n=o.attr("href"),t.element.trigger("tab-added",[o])),t.activate(n),a.length&&o.length&&"function"==typeof o[0].onclick&&o[0].onclick.apply(o[0]),t.moreButton.focus(),t.scrollTabList(a)}));var c=t.popupmenu.menu;function d(e){var i=$(this),n=i.closest("li");if(n.is(".dismissible")&&i.is(".close")){if(e.preventDefault(),e.stopPropagation(),n.is(".dismissible")&&n.is(".has-popupmenu")&&n.is(".submenu")){var s=n.find(".wrapper").children().children(),a=[];$.each(s,(function(e,t){a.push(t.children[0].href)})),t.closeDismissibleTabs(a)}else t.closeDismissibleTab(n.children("a").attr("href"));t.popupmenu.close()}}c.on("destroy.popupmenu",(function(){c.off(),t.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()})).on("touchend.popupmenu touchcancel.popupmenu",".icon",d).on("click.popupmenu",".icon",d),e?t.popupmenu.highlight(c.find('a[href="'.concat(e,'"]'))):t.tablist.children(".is-selected").length>0?t.popupmenu.highlight(c.find('a[href="'.concat(t.tablist.children(".is-selected").children("a").attr("href"),'"]'))):t.popupmenu.highlight(c.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",(function(e){var i,n=e.which,s=$(e.target);function o(){return this===document.activeElement}switch(n){case 8:case 46:e.altKey&&s.parent().is(".dismissible")&&t.closeDismissibleTab(s.attr("href"));break;case 37:i=a?40:38,s.is("a")&&(s.parent().is(":not(:first-child)")&&e.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:i}));break;case 38:c.find("li:first-child > a").filter(o).length>0&&(e.preventDefault(),$(document).off(e),t.popupmenu.close(),t.findLastVisibleTab());break;case 39:i=a?38:40,s.is("a")&&!s.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:i});break;case 40:!function(){var i=c.find("li:last-child > a");if(i.filter(o).length>0&&i.parent().is(":not(.submenu)")){if(e.preventDefault(),$(document).off(e),t.popupmenu.close(),t.settings.addTabButton)return void t.addTabButton.focus();t.focusFirstVisibleTab()}}()}}))},isTabOverflowed:function(e){if(this.isVerticalTabs()||this.isScrollableTabs())return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var t=Math.round(e[0].getBoundingClientRect().top),i=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(i+=1),t>i},findLastVisibleTab:function(){var e=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),t=e.first();if(this.isScrollableTabs())return e.last().find("a").focus();for(;!this.isTabOverflowed(t);)t=e.eq(e.index(t)+1);return e.eq(e.index(t)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},focusBar:function(e,t){if(this.hasAnimatedBar()&&e instanceof $&&e.length){var i,n,s,a=this,o=e,r=this.tablistContainer,l=M.isRTL();if(this.animatedBar.removeClass("no-transition"),o&&void 0!==o&&o.length&&a.anchors.length){var c=window.getComputedStyle(o[0],null),d=parseInt(c.getPropertyValue("padding-right"),10)||0,h=parseInt(c.getPropertyValue("width"),10)||0;o.is(".tab")&&(s=window.getComputedStyle(o.children("a")[0]),d+=parseInt(s.getPropertyValue("padding-right"),10)||0);var u,p,g=l?d+o.position().left+o.outerWidth(!0):o.position().left;clearTimeout(a.animationTimeout),this.animatedBar.addClass("visible"),u=t,p=a.animatedBar[0].style,n=r[0].scrollLeft,i=r[0].scrollWidth,l?p.right="".concat(i+d-(g+n),"px"):p.left="".concat(g+n,"px"),p.width="".concat(h,"px"),u&&"function"==typeof u&&u()}else this.animatedBar.removeClass("visible")}},defocusBar:function(){if(this.hasAnimatedBar()){var e=this,t=M.isRTL()?0:e.animatedBar.position().left+e.animatedBar.outerWidth()/2;clearTimeout(e.animationTimeout),this.animatedBar[0].style.left="".concat(t,"px"),this.animatedBar[0].style.width=0,this.animationTimeout=setTimeout((function(){e.animatedBar&&e.animatedBar.length&&e.animatedBar.removeClass("visible").removeAttr("style")}),350)}},scrollTabList:function(e){if(this.tablistContainer&&e&&e instanceof $&&e.length){var t,i=u.getDimensions(e[0]),n=u.getDimensions(this.tablistContainer[0]),s=i.left,a=i.right;s<n.left+40&&(t=-1*Math.round(Math.abs(n.left-s))-40),a>n.right-40&&(t=Math.round(Math.abs(a-n.right))+40),0===t&&(t=void 0),this.tablistContainer.smoothScroll(t,250)}},hideFocusState:function(){this.focusState.removeClass("is-visible")},positionFocusState:function(e,t){if(void 0!==e?e=$(e):this.moreButton.hasClass("is-selected")?e=this.moreButton:this.tablist.children(".is-selected").length>0&&(e=this.tablist.children(".is-selected").children("a")),!e||void 0===e||!e.length||e.is(this.moreButton)&&this.isScrollableTabs())this.focusState.removeClass("is-visible");else{e.is("a")&&(e=e.parent()),e.is(".add-tab-button, .tab-more")?this.focusState.parent().is(this.element)||this.focusState.prependTo(this.element):this.focusState.parent().is(this.tablistContainer)||this.focusState.prependTo(this.tablistContainer);var i=this.focusState[0],n=u.getDimensions(e[0]),s=e[0].classList,a=!this.isHeaderTabs()||this.isHeaderTabs()&&this.element[0].classList.contains("alternate"),o=this.isVerticalTabs(),r=M.isRTL(),l=o?0:this.moreButton.outerWidth(!0),c=this.element,d=this.tablistContainer,h=d&&this.focusState.parent().is(d);n=function(t,i,n){var s,c,d,u,p=i[0].getBoundingClientRect();if(t.top-=p.top,o&&(t.top+=i[0].scrollTop),r?t.right=p.right-t.right:t.left-=p.left,n){if(u=n?n[0].scrollLeft:0,d=n?n[0].scrollWidth:0,r&&!o){var g=t.left;a?(c=parseInt(window.getComputedStyle(e[0]).marginLeft,10),t.left=d-c-t.right+u,t.right=d-c-g+u):(t.left=d-(t.right+u+l+32),t.right=d-(g+u+l+32))}else t.left+=u,t.right+=u;h&&(s=parseInt(window.getComputedStyle(i[0])["padding".concat(r?"Right":"Left")],10),t.left+=r?s:-1*s,t.right+=r?s:-1*s)}return a&&!o&&(t.height-=1),t}(n,c,d);var p="";Object.keys(n).forEach((function(e){p.length&&(p+=" "),p+="".concat(e,": ").concat(n[e],"px;")})),i.style.cssText=p;var g=s.contains("is-selected")?"add":"remove";i.classList[g]("is-selected");var f=!0===t?"add":"remove";i.classList[f]("is-visible")}},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown().init()},disableOtherTabs:function(){return this.disable(!0)},disable:function(e){e||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var t=this,i=this.tablist.children("li:not(.separator)");e&&(i=i.filter(":not(.application-menu-trigger)")),i.each((function(){var i=$(this),n=i.children("a");if(!(e&&t.isActive(n.attr("href"))||((i.is(".is-disabled")||!0===n.prop("disabled"))&&t.disabledElems.push({elem:i,originalTabindex:i.attr("tabindex"),originalDisabled:n.prop("disabled")}),i.addClass("is-disabled"),n.prop("disabled",!0),i.is(".application-menu-trigger")||i.is(".add-tab-button")))){var s=$(n.attr("href"));s.addClass("is-disabled"),s.find("*").each((function(){var e=$(this);e.is("input.dropdown, input.multiselect")||(("-1"===e.attr("tabindex")||e.attr("disabled"))&&t.disabledElems.push({elem:e,originalTabindex:e.attr("tabindex"),originalDisabled:e.prop("disabled")}),e.disable())}))}})),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!e&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var e=this;this.tablist.children("li:not(.separator)").each((function(){var t=$(this),i=t.children("a");if(t.removeClass("is-disabled"),i.prop("disabled",!1),!t.is(".application-menu-trigger")&&!t.is(".add-tab-button")){var n=$(i.attr("href"));n.removeClass("is-disabled"),n.find("*").each((function(){var e=$(this);e.enable&&"function"==typeof e.enable&&e.enable()})),$.each(e.disabledElems,(function(e,t){var i=t.elem.is(".tab")?t.elem.children("a"):t.elem;t.elem.disable&&"function"==typeof t.elem.disable&&t.elem.disable(),t.elem.is("li")?t.elem.addClass("is-disabled"):t.elem.is("input.dropdown, input.multiselect")||(t.elem.attr("tabindex",t.originalTabindex),i.prop("disabled",t.originalDisabled))}))}})),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(e){return this.remove(e)},closeDismissibleTabs:function(e){var t=this;e.forEach((function(e){var i=e.match(/#.*/);return t.remove(i[0])}))},teardown:function(){this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var e=this.tablist.children("li");if(e.off().removeAttr("role").removeClass("is-selected"),e.filter(".has-popupmenu").each((function(){var e=$(this).data("popupmenu");e&&(e.menu.children("li:not(.separator)").each((function(){var e=$(this).children("a"),t=e.data("panel-link");$.removeData(e[0],"panel-link"),t&&t.length&&$.removeData(t[0],"tab-link")})),e.destroy())})),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each((function(){var e=$(this).data("tooltip");e&&"function"==typeof e.destroy&&e.destroy()})),this.element.off("focusout.tabs updated.tabs activated.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var t=this.moreButton.data("popupmenu");t.menu.find("li:not(.separator)").each((function(){var e=$(this).children("a");e.data("original-tab")&&$.removeData(e[0],"original-tab")})),t.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),this.focusState.removeData().remove(),this.focusState=void 0,this.hasAnimatedBar()&&(this.animatedBar.removeData().remove(),this.animatedBar=void 0),$(".tab-panel input").off("error.tabs valid.tabs"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tabs")}},$.fn.tabs=function(e){return this.each((function(){var t=$.data(this,"tabs");t?t.updated(e):t=$.data(this,"tabs",new _n(this,e))}))},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(e){return this.each((function(){var t=$.data(this,"tag");t?t.updated(e):t=$.data(this,"tag",new Kt(this,e))}))},$.fn.taglist=function(e){return this.each((function(){var t=$.data(this,"taglist");t?t.updated(e):t=$.data(this,"taglist",new Qt(this,e))}))};var Yn={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:null};function Kn(e,t){this.settings=C.mergeSettings(e,t,Yn),this.element=$(e),this.init()}Kn.prototype={init:function(){this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element)),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(e){return"number"==typeof e.selectionStart?0===e.selectionStart&&e.selectionEnd===e.value.length:void 0!==document.selection&&document.selection.createRange().text===e.value},isPrintable:function(e,t){return t?e>64&&e<91||e>=33&&e<=38||e>=40&&e<=43||126===e||58===e||60===e||e>=123&&e<=125||94===e||95===e||e>=62&&e<=64:13===e||e>=48&&e<=57||e>=97&&e<=122||59===e||61===e||e>=44&&e<=47||96===e||e>=91&&e<=93||39===e},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var e=this.element[0];this.settings.autoGrowMaxHeight&&(e.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),e.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var e=this.element[0],t=e.offSetHeight,i=this.settings.autoGrowMaxHeight||0,n=e.scrollHeight;if(i>0&&i<n){if(n=i,e.style.overflow="",t===n)return}else e.style.overflow="hidden";e.style.height="5px",e.style.height="".concat(e.scrollHeight+2,"px")}},countLinebreaks:function(e){return(e.match(/\n/g)||[]).length},updateCounter:function(){var e=this.element.val(),t=this.isChrome||this.isSafari,i=e.length+(t?this.countLinebreaks(e):0),n=this.getMaxLength(),s=parseInt(n,10)-i,a=(this.settings.charRemainingText?this.settings.charRemainingText:"CharactersLeft"===M.translate("CharactersLeft")?"Characters Left":M.translate("CharactersLeft")).replace("{0}",s.toString());this.counter&&(i>=n?(a=this.settings.charMaxText?this.settings.charMaxText.replace("{0}",n):M.translate("CharactersMax")+n,this.counter.text(a),this.counter.removeClass("almost-empty")):(this.counter.text(a),s<10?this.counter.addClass("almost-empty"):this.counter.removeClass("almost-empty"))),this.printarea.text(this.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1)},disable:function(){this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.destroy(),this.init()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var e=this;this.element.on("keyup.textarea",(function(t){var i=e.element.val(),n=e.isChrome||e.isSafari,s=i.length+(n?e.countLinebreaks(i):0),a=e.getMaxLength();return e.updateCounter(),s>=a?(t.preventDefault(),!1):(e.settings.autoGrow&&e.autoGrow(),!0)})).on("focus.textarea",(function(){e.counter&&e.counter.addClass("focus")})).on("updated.textarea",(function(){e.updated()})).on("keypress.textarea",(function(t){var i=e.element.val(),n=e.isChrome||e.isSafari,s=i.length+(n?e.countLinebreaks(i):0),a=e.getMaxLength();[97,99,118,120].indexOf(t.which)>-1&&(t.metaKey||t.ctrlKey)?e.updateCounter():e.isPrintable(t.which,t.shiftKey)&&s>=a&&!e.isSelected(this)&&t.preventDefault()})).on("blur.textarea",(function(){e.updateCounter(),e.counter&&e.counter.removeClass("focus")}))}},$.fn.textarea=function(e){return this.each((function(){var t=$.data(this,"textarea");t?t.updated(e):t=$.data(this,"textarea",new Kn(this,e))}))},$.fn.toolbarsearchfield=$.fn.searchfield;var Xn={};function Qn(e,t){this.settings=C.mergeSettings(e,t,Xn),this.element=$(e),this.init()}Qn.prototype={init:function(){this.isIe="ie"===m.browser.name,this.isIeEdge="edge"===m.browser.name,this.handleEvents()},valMethod:function(e,t){switch(e.attr("type")){case"checkbox":case"radio":return e.prop("checked");case"file":if("boolean"==typeof t&&t){var i=e.attr("original");return void 0!==i?i:""}return e.parent().find('[type="text"]').val();default:if(e.is("textarea")&&1===e.closest(".editor-source").length){var n=e.is(":visible")?e.val():e.text();return this.trimEditorText(n)}return e.val()}},trimEditorText:function(e){return e.trim().replace(/>\s+</g,"").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n")},getAbsolutePosition:function(e){var t=e.position();return e.parents().each((function(){if("relative"===window.getComputedStyle(this,null).position)return!1;t.left+=this.scrollLeft,t.top+=this.scrollTop})),{left:t.left,top:t.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===i(this.settings.d)){var e=this.settings.d;$(".icon-dirty, .msg-dirty",e.field).add(e.icon).add(e.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Xn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"trackdirty")},handleEvents:function(){var e=this,t=this.element;if(t.is(".editor")){var i=t.parent().find("textarea");i.data("original",this.trimEditorText(this.valMethod(i)))}t.data("original",this.valMethod(t,!0)).on("resetdirty.dirty",(function(){if(t.is(".editor")){var i=t.parent().find("textarea");i.data("original",e.trimEditorText(e.valMethod(i)))}t.data("original",e.valMethod(t)).triggerHandler("doresetdirty.dirty")})).on("change.dirty doresetdirty.dirty",(function(i){var n=t,s=t.closest(".field, .radio-group"),a=$("label:visible",s),o={class:"",style:""};if(s.is(".field-fileupload")&&(n=s.find("input.fileupload-background-transparent")),s.is(".editor-container")&&(n=s.find(".editor-source")),a[0]||(a=t.next("label")),"true"===t.attr("data-trackdirty")){if(t.addClass("dirty"),t.is('[type="checkbox"], [type="radio"]')&&(o.class+=" dirty-".concat(t.attr("type")),o.class+=t.is(":checked")?" is-checked":""),t.is("select")&&(o.class+=" is-select",n=t.next(".dropdown-wrapper").find(".dropdown")),o.icon=n.prev(),!o.icon.is(".icon-dirty")){t.is(".colorpicker")&&!M.isRTL()&&(o.rect=e.getAbsolutePosition(t),o.style="left:".concat(o.rect.left,"px; top:").concat(o.rect.top,"px;")),o.icon='<span class="icon-dirty'.concat(o.class,'"></span>'),o.msg=M.translate("MsgDirty")||"",o.msg='<span class="audible msg-dirty">'.concat(o.msg,"</span>");var r=$($(n[0].parentElement).find("input")[0]);n=t.is('[type="radio"]')?r:n,0===$(n[0].parentElement).find(".icon-dirty").length&&(n.before(o.icon),a.append(o.msg),o.style&&n.prev(".icon-dirty")[0]&&(n.prev(".icon-dirty")[0].style.cssText=o.style)),o.icon=n.prev(),o.msg=a.find(".msg-dirty")}var l=t.data("original"),c=e.valMethod(t);if(o.field=s,e.settings.d=o,s.is(".editor-container")){var d=s.find("textarea");l=d.data("original"),c=s.find(".editor-source").is(":visible")?d.val():e.isIe||e.isIeEdge?t[0].innerHTML:d.text(),c=e.trimEditorText(c)}if(c===l||t.attr("multiple")&&C.equals(c,l))return t.removeClass("dirty"),$(".icon-dirty, .msg-dirty",s).add(o.icon).add(o.msg).remove(),void t.trigger("doresetdirty"===i.type?"afterresetdirty":"pristine");t.trigger("dirty")}}))}},$.fn.trackdirty=function(e){return this.each((function(){var t=$.data(this,"trackdirty");t?t.updated(e):t=$.data(this,"trackdirty",new Qn(this,e))}))};var Jn={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null};function Zn(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Jn),this.init()}Zn.prototype={init:function(){this.isIe11="ie"===m.browser.name&&"11"===m.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable())},initTree:function(){var e=this,t=this.settings,i=this.element.find("a"),n=this.element.attr("data-selectable");t.selectable=void 0===n||"single"!==n.toLowerCase()&&"multiple"!==n.toLowerCase()?t.selectable:n,this.isMultiselect="multiple"===t.selectable,t.hideCheckboxes=t.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),i.each((function(){var t=$(this);e.decorateNode(t)}))},initSelected:function(){var e=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(t){return e.setNodeStatus($(t.querySelector("a")))}))},focusFirst:function(){var e=this.element[0].querySelector("a");e&&e.setAttribute("tabindex","0")},setFocus:function(e){(e=this.isjQuery(e)?e[0]:e)&&(e.focus(),e.classList.remove("hide-focus"))},decorateNode:function(e,t,i){var n,s=(e=this.isjQuery(e)?e:$(e))[0].getAttribute("data-badge"),a=e[0].getAttribute("data-alert-icon"),o=e.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,r=e[0].classList.contains("is-disabled")||o;if(void 0!==s&&(s=C.parseSettings(e,"data-badge")),e[0].setAttribute("role","treeitem"),e[0].setAttribute("tabindex","-1"),e[0].setAttribute("aria-selected","false"),r){e[0].classList.add("is-disabled"),e[0].setAttribute("aria-disabled","true");var l=e.next();if(l[0]&&"ul"===l[0].tagName.toLowerCase()&&l[0].classList.contains("is-open"))[].slice.call(l[0].querySelectorAll("a")).forEach((function(e){e.classList.add("is-disabled"),e.setAttribute("aria-disabled","true")})),[].slice.call(e[0].parentNode.querySelectorAll("ul")).forEach((function(e){return e.classList.add("is-disabled")}))}n=e.parentsUntil(this.element,"ul").length-1,e[0].setAttribute("aria-level",n+1);var c=e.parent().index();e[0].setAttribute("aria-posinset",c+1);var d=e.closest("li").siblings().length+1;e[0].setAttribute("aria-setsize",d);var h=e.next("ul");h[0]&&h.children().length>0&&e[0].setAttribute("aria-expanded",h[0].classList.contains("is-open")?"true":"false");var u=e.contents().filter((function(){return!$(this).is(".tree-badge")})).text();e[0].textContent="",0===e.children("svg.icon-tree").length&&(t||""===t?e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:t,classes:["icon-tree"]})):e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&e[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:a,classes:["step-alert","icon-".concat(a)]}))),!this.isMultiselect||this.settings.hideCheckboxes&&!1!==i||e[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var p=this.getBadgeHtml(s);""!==p&&e[0].insertAdjacentHTML("beforeend",p);var g=document.createElement("span");if(g.classList.add("tree-text"),g.textContent=u,e[0].appendChild(g),this.hasIconClass(e)&&this.setTreeIcon(e.find("svg.icon-tree"),e[0].getAttribute("class")),h[0]&&"ul"===h[0].tagName.toLowerCase()){var f=e[0].getAttribute("class");h[0].setAttribute("role","group"),h[0].parentNode.classList.add("folder"),this.setTreeIcon(e.find("svg.icon-tree"),h[0].classList.contains("is-open")?this.settings.folderIconOpen:this.settings.folderIconClosed),f&&-1===f.indexOf("open")&&-1===f.indexOf("closed")&&(e[0].setAttribute("class",r?"is-disabled":""),this.setTreeIcon(e.find("svg.icon-tree"),h[0].classList.contains("is-open")?this.settings.folderIconOpen:this.settings.folderIconClosed)),this.hasIconClass(e)&&(f=e[0].getAttribute("class"),this.setTreeIcon(e.find("svg.icon-tree"),h[0].classList.contains("is-open")?f:f.replace("open","closed")))}e.hideFocus()},setTreeIcon:function(e,t){if(e&&"string"==typeof t){e=this.isjQuery(e)?e:$(e);var i=t.replace(/#?icon-|hide-focus|\s?/gi,"");e.changeIcon(i)}},expandAll:function(e){var t=this,i=e;(i=void 0!==i?this.isjQuery(i)?$.makeArray(i):i:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(e){var i=e.previousElementSibling;if(e.parentNode.classList.add("is-open"),e.classList.add("is-open"),e.style.height="",i&&"a"===i.tagName.toLowerCase()){var n=i.querySelector("svg.icon-tree");t.setTreeIcon(n,t.settings.folderIconOpen),i.setAttribute("aria-expanded",!0),t.hasIconClass(i)&&t.setTreeIcon(n,i.getAttribute("class"))}}))},collapseAll:function(e){var t=this,i=e;(i=void 0!==i?this.isjQuery(i)?$.makeArray(i):i:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(e){var i=e.previousElementSibling;if(e.parentNode.classList.remove("is-open"),e.classList.remove("is-open"),e.style.height=0,i&&"a"===i.tagName.toLowerCase()){var n=i.querySelector("svg.icon-tree");t.setTreeIcon(n,t.settings.folderIconClosed),i.setAttribute("aria-expanded",!1),i.classList.remove("is-selected"),t.hasIconClass(i)&&t.setTreeIcon(n,i.getAttribute("class").replace("open","closed"))}}))},isjQuery:function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},selectNodeById:function(e){this.selectNodeByJquerySelector("#".concat(e))},selectNodeByJquerySelector:function(e){var t=this.isjQuery(e)?e:$(e);if(t.length&&!t.is(".is-disabled")){var i=t.parentsUntil(this.element,"ul[role=group]");this.expandAll(i),this.selectNode(t,!0)}},unSelectedNode:function(e,t){if(0!==e.length){var i=this;$("a",this.element).attr("tabindex","-1"),e.attr("tabindex","0"),$("a:not(.is-disabled)",e.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(e),this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(e){return e.classList.remove("is-active")})),e[0].parentNode.classList.add("is-active"),setTimeout((function(){var t=e.data("jsonData")||{};i.element.triggerHandler("unselected",{node:e,data:t})}),0)}},selectNode:function(e,t){var i,n=this,s=this.settings;0!==e.length&&("function"==typeof s.onBeforeSelect?(i=s.onBeforeSelect(e))&&i.done&&"function"==typeof i.done?i.done((function(i){i&&n.selectNodeFinish(e,t)})):i&&n.selectNodeFinish(e,t):n.selectNodeFinish(e,t))},selectNodeFinish:function(e,t,i){if(this.isMultiselect&&i)if("click"===i.type||"touch"===i.type){if(i.target.classList.contains("icon")&&e[0].parentNode.classList.contains("folder"))return}else if("keydown"===i.type){var n=i.charCode||i.keyCode;if(37===n||39===n)return}var s=this,a=[].slice.call(this.element[0].querySelectorAll("a"));if(a.forEach((function(e){return e.setAttribute("tabindex","-1")})),e[0].setAttribute("tabindex","0"),this.isMultiselect){[].slice.call(e[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach((function(e){e.setAttribute("aria-selected","true"),e.classList.add("is-selected"),e.parentNode.classList.add("is-selected")}))}else{if(e[0].classList.contains("is-selected"))return;a.forEach((function(e){var t=$(e),i=t.data("jsonData");i&&(delete i.selected,t.data("jsonData",i)),e.setAttribute("aria-selected","false"),e.classList.remove("is-selected"),e.parentNode.classList.remove("is-selected")})),e[0].setAttribute("aria-selected","true"),e[0].classList.add("is-selected"),e[0].parentNode.classList.add("is-selected")}this.syncNode(e),this.loading||this.setNodeStatus(e),t&&e.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(e){return e.classList.remove("is-active")})),e[0].parentNode.classList.add("is-active"),setTimeout((function(){var t=e.data("jsonData")||{};s.element.triggerHandler("selected",{node:e,data:t})}),0)},setNodeStatus:function(e){var t,i=this,n=e.data("jsonData");if(this.isMultiselect){var s=function(e,t){e.forEach((function(e){var n=$(e.querySelector("a")),s=i.getSelectedStatus(n,t);"mixed"===s?(e.classList.remove("is-selected","is-partial"),e.classList.add("is-partial")):s?(e.classList.remove("is-selected","is-partial"),e.classList.add("is-selected")):e.classList.remove("is-selected","is-partial"),i.syncNode(n)}))},a=!1;s(t=[].slice.call(e[0].parentNode.querySelectorAll("li.folder")),a),a=!(!t.length&&n&&!n.selected),t=e.parentsUntil(this.element,"li.folder"),s(t=[].slice.call(t.toArray()),a)}else{var o=e[0],r=o.parentNode;n&&n.selected?(r.classList.add("is-selected"),o.classList.add("is-selected"),o.setAttribute("aria-selected",!0)):(r.classList.remove("is-selected","is-partial"),o.classList.remove("is-selected","is-partial"),o.setAttribute("aria-selected",!1))}},getSelectedStatus:function(e,t){var i,n=0,s=0,a=0;return e.parent().find("a").each((function(e){t&&0===e||(n++,(i=$(this).data("jsonData"))&&i.selected?s++:a++)})),n===s||n!==a&&"mixed"},toggleNode:function(e,t){var i,n=e.next(),s=this,a=this.settings;if(n[0]&&"ul"===n[0].tagName.toLowerCase()&&"group"===n[0].getAttribute("role"))if(n[0].classList.contains("is-open"))"function"==typeof a.onCollapse?(i=a.onCollapse(e))&&i.done&&"function"==typeof i.done?i.done((function(i){i&&s.selectNodeFinish(e,focus,t)})):i&&s.selectNodeFinish(e,focus,t):s.selectNodeFinish(e,focus,t),s.setTreeIcon(e.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),a.folderIconClosed),s.hasIconClass(e.closest(".folder a"))&&s.setTreeIcon(e.closest(".folder a").find("svg.icon-tree"),e.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),s.isAnimating=!0,s.isMultiselect||(s.unSelectedNode(e.parent().find("li.is-selected"),!1),e[0].classList.remove("is-selected")),n.one("animateclosedcomplete",(function(){n[0].classList.remove("is-open"),s.isAnimating=!1})).animateClosed(),e[0].setAttribute("aria-expanded","true"!==e[0].getAttribute("aria-expanded"));else{"function"==typeof a.onExpand?(i=a.onExpand(e))&&i.done&&"function"==typeof i.done?i.done((function(i){i&&s.selectNodeFinish(e,focus,t)})):i&&s.selectNodeFinish(e,focus,t):s.selectNodeFinish(e,focus,t);var o=e.data("jsonData");if(a.source&&o.children&&0===o.children.length){var r={node:e,data:e.data("jsonData")};return e[0].classList.add("is-loading"),s.loading=!0,void s.settings.source(r,(function(t){var i=o.id,a=s.findById(i);a.children=t,s.addChildNodes(a,e.parent()),e[0].classList.remove("is-loading"),s.loading=!1,s.accessNode(n,e),o.children=t,e.data("jsonData",o),s.selectNode(e,!0),s.initSelected()}))}s.accessNode(n,e)}},accessNode:function(e,t){var i=this,n=t.attr("class");this.setTreeIcon(t.closest(".folder").addClass("is-open").end().find("svg.icon-tree"),this.settings.folderIconOpen),this.hasIconClass(n)&&this.setTreeIcon(t.find("svg.icon-tree"),n.replace("is-selected","")),this.isAnimating=!0,e.one("animateopencomplete",(function(){i.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen(),t[0].setAttribute("aria-expanded","true"!==t[0].getAttribute("aria-expanded"))},openNode:function(e,t){var i=this,n=t.data("jsonData");if(i.settings.source&&n.children&&0===n.children.length){var s={node:t,data:t.data("jsonData")};return t.addClass("is-loading"),i.loading=!0,void i.settings.source(s,(function(s){var a=n.id,o=i.findById(a);o.children=s,i.addChildNodes(o,t.parent()),t.removeClass("is-loading"),i.loading=!1,i.accessNode(e,t),n.children=s,t.data("jsonData",n),i.selectNode(t,!0),i.initSelected()}))}i.accessNode(e,t)},hasIconClass:function(e){return"string"!=typeof e&&(this.isjQuery(e)&&(e=e.length>1?e.first()[0]:e[0]),e=e.getAttribute("class")),e&&e.indexOf("icon")>-1},closeNode:function(e,t){var i=this;i.setTreeIcon(t.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),i.settings.folderIconClosed),i.hasIconClass(t.closest(".folder a"))&&i.setTreeIcon(t.closest(".folder a").find("svg.icon-tree"),t.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),i.isAnimating=!0,i.isMultiselect||(i.unSelectedNode(t.parent().find("li.is-selected"),!1),t.removeClass("is-selected")),e.one("animateclosedcomplete",(function(){e.removeClass("is-open"),i.isAnimating=!1})).animateClosed(),t.attr("aria-expanded","true"!==t.attr("aria-expanded"))},setupEvents:function(){var e=this;e.element.on("updated.tree",(function(t,i){e.updated(i),e.initTree()}))},handleKeys:function(){var e=this;this.element.on("click.tree","a:not(.is-clone)",(function(t){var i=$(this),n=this.parentNode;return i[0].classList.contains("is-disabled")||i[0].classList.contains("is-loading")||(e.isMultiselect?t.target.classList.contains("icon")&&n.classList.contains("folder")?e.toggleNode(i,t):n.classList.contains("is-selected")||n.classList.contains("is-partial")?e.unSelectedNode(i,!0):e.selectNode(i,!0):(e.selectNode(i,!0),e.toggleNode(i,t)),t.stopPropagation()),e.popupEl&&e.popupEl.data("popupmenu")&&(e.popupEl.data("popupmenu").close(),e.popupEl=null),!1})),this.element.on("focus.tree","a",(function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&this.classList.contains("is-disabled")){var e=$.Event("keydown.tree");return e.keyCode=40,void $(this).trigger(e)}})),this.element.on("keydown.tree","a",(function(t){var i,n,s=t.charCode||t.keyCode,a=$(this);if(!e.isAnimating){if(40===s){var o=e.getNextNode(a);e.setFocus(o)}if(38===s){var r=e.getPreviousNode(a);e.setFocus(r)}if(32===t.keyCode&&a.trigger("click.tree"),37===s)return M.isRTL()?a.next().hasClass("is-open")?(n=a.next().find("a:first"),e.setFocus(n)):e.toggleNode(a,t):a.next().hasClass("is-open")?e.toggleNode(a,t):(n=a.closest(".folder").find("a:first"),e.setFocus(n)),t.stopPropagation(),!1;if(39===s)return M.isRTL()?a.next().hasClass("is-open")?e.toggleNode(a,t):(i=a.closest(".folder").find("a:first"),e.setFocus(i)):a.next().hasClass("is-open")?(i=a.next().find("a:first"),e.setFocus(i)):(e.toggleNode(a,t),e.setFocus(a)),t.stopPropagation(),!1;36===s&&(i=e.element.find("a:first:visible"),e.setFocus(i)),35===s&&(i=e.element.find("a:last:visible"),e.setFocus(i))}})),this.element.on("keypress.tree","a",(function(t){var i=t.charCode||t.keyCode,n=$(this);if(i>=37&&i<=40||32===i)return t.stopPropagation(),!1;0!==t.which&&n.closest("li").nextAll().find("a:visible").each((function(){var i=$(this);if(i.text().substr(0,1).toLowerCase()===String.fromCharCode(t.which).toLowerCase())return e.setFocus(i),!1}))}))},loadData:function(e){if(!e)return-1;var t=this;t.element.empty(),t.loading=!0,e=this.arrangeDataset(e);var i="";t.jsonData=[];for(var n=0,s=e.length;n<s;n++)i+=t.getNodeHtml(e[n],n);t.element[0].insertAdjacentHTML("beforeend",i),[].slice.call(t.element[0].querySelectorAll('a[role="treeitem"]')).forEach((function(e,i){var n=$(e),s=t.jsonData[i];n.data("jsonData",s),s.selected&&t.selectNode(n,s.focus)}));for(var a=[].slice.call(t.element[0].querySelectorAll("select.dropdown")),o=0;o<a.length;o++){var r=a[o];t.jsonData[o].disabled?$(r).dropdown().disable():$(r).dropdown().on("selected.tree",(function(){var e=t.findById(this.parentElement.previousElementSibling.id);e.text=this.value,t.updateNode(e)}))}t.jsonData=void 0,t.loading=!1,t.syncDataset(),t.initSelected(),t.focusFirst(),t.attachMenu(t.settings.menuId),t.createSortable()},arrangeDataset:function(e){if(!this.hasKeyInData("parent",e))return e;e=e||this.settings.dataset;var t=JSON.parse(JSON.stringify(e));!function e(i){for(var n=0;n<i.length;n++)void 0!==i[n].parent&&(s=i[n],a=void 0,a=!1,function e(t){for(var i=0;i<t.length&&!a;i++)t[i].id===s.parent&&((n=t[i]).children=n.children||[],n.children.push(s),a=!0),void 0!==t[i].children&&e(t[i].children);var n}(t)),void 0!==i[n].children&&e(i[n].children);var s,a}(e);return function e(t,i){for(var n=0;n<t.length;n++)void 0!==t[n].children&&e(t[n].children,t[n].id),void 0===i&&void 0!==t[n].parent||void 0!==i&&void 0!==t[n].parent&&i!==t[n].parent?(t.splice(n,1),n--):delete t[n].parent}(t),this.settings.dataset=t,t},hasKeyInData:function(e,t){for(var n=!1,s=function t(s){for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];if("object"!==i(o)||n?e===a&&(n=!0):t(o),n)break}},a=0,o=(t=t||this.settings.dataset).length;a<o&&!n;a++)s(t[a]);return n},getNodeHtml:function(e,t,n,s){var a="",o="";n=n||0,t+=1;var r=this.settings,l=s||e.disabled||!1,c={id:void 0!==e.id?' id="'.concat(e.id,'"'):"",href:' href="'.concat(void 0!==e.href?e.href:"#",'"'),expanded:' aria-expanded="'.concat(e.open?"true":"false",'"'),icon:e.icon||""===e.icon?e.icon:"tree-node",alertIcon:"",alertIconAttr:void 0!==e.alertIcon?' data-alert-icon="'.concat(e.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(e.text,"</span>"),class:["hide-focus"],ariaDisabled:l?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==e.hideCheckbox?"":'<span class="tree-checkbox"></span>',badge:"object"===i(e.badge)?this.getBadgeHtml(e.badge):""};this.jsonData.push(e),r.useStepUI&&(c.alertIcon='<svg class="icon step-alert icon-'.concat(e.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(e.alertIcon,'"></use>'));var d=e.children&&Array.isArray(e.children),h=d?"folder":"";if(""!==(h+=e.selected?" is-selected":"")&&(h+=e.open?" is-open":"",h=' class="'.concat(h,'"')),l&&c.class.push("is-disabled"),e.icon&&(c.icon=e.icon,(!d||d&&/open|closed/i.test(e.icon))&&c.class.push(e.icon)),d&&(e.open?(c.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon:r.folderIconOpen,s=l):c.icon=e.icon&&/open|closed/i.test(e.icon)?e.icon.replace("open","closed"):r.folderIconClosed),c.icon="#icon-".concat(c.icon.replace(/^#?icon-?/,"")),c.class=' class="'.concat(c.class.join(" "),'"'),c.style="","dropdown"===e.type&&(c.style='style="display: none"',e.data)){a='<select class="dropdown" close-on-select="true">';for(var u=0;u<e.data.length;u++){var p=e.data[u];p.value===e.text?(o=p.text,a+='<option value="'.concat(p.value,'" selected>').concat(p.text,"</option>")):a+='<option value="'.concat(p.value,'">').concat(p.text,"</option>")}a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(o),a='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var g="\n      <li".concat(h,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(c.style,'\n          aria-level="').concat(n,'"\n          aria-position="').concat(t,'"\n          aria-setsize="').concat(t,'"\n          ').concat(c.id+c.href+c.class+c.expanded+c.ariaDisabled+c.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(c.icon,'"></use>\n            </svg>').concat(c.checkbox+c.alertIcon+c.badge+c.text,"\n        </a>\n        ").concat(a);if(d){g+='<ul class="folder'.concat(e.open?" is-open":"",'" role="group">');for(var f=0,m=e.children.length;f<m;f++)g+=this.getNodeHtml(e.children[f],f,n+1,s);g+="</ul>"}return g+="</li>"},getBadgeHtml:function(e){var t={html:"",style:"",class:["badge","tree-badge"]};return e&&!e.remove&&(t.text="",void 0!==e.text&&(t.text=e.text.toString(),1===t.text.length&&t.class.push("round")),/info|good|error|alert|pending/i.test(e.type)?t.class.push(e.type):e.type&&"#"===e.type.charAt(0)&&7===e.type.length&&(t.style="background-color: ".concat(e.type," !important;")),e.backColor&&(t.style="background-color: ".concat(e.backColor," !important;")),e.foreColor&&(t.style+="color: ".concat(e.foreColor," !important;")),""!==t.style&&(t.style=' style="'.concat(t.style,'"')),""!==t.text&&(e.type&&-1!==e.type.indexOf("pending")&&(t.text=""),t.html='<span class="'.concat(t.class.join(" "),'"').concat(t.style,">").concat(t.text,"</span>"))),t.html},addToDataset:function(e,t){var i,n,s;if(e.parent&&(i=this.findById(e.parent)),t instanceof jQuery&&t.is("li")){var a=(n=this.findById($(t[0].parentNode.parentNode).find("a")[0].id)).children||n.node.data("jsonData").children;s=a.findIndex((function(e){return e.text.trim()===$(t).text().trim()})),a.splice(s,0,e)}return"bottom"!==t||e.parent||i||this.settings.dataset.push(e),"top"!==t||e.parent||i||this.settings.dataset.unshift(e),e.parent&&i&&(i.children||(i.children=[]),"bottom"===t?i.children.push(e):i.children.unshift(e)),!(e.parent&&!i)},findById:function(e,t){for(var i in t||(t=this.settings.dataset),t){var n=t[i];if(n.id===e)return n;if(n.children||n.node.data("jsonData").children){var s=this.findById(e,n.children||n.node.data("jsonData").children);if(s)return s}}return null},getNodeByIdIfSelected:function(e,t){var i=this.findById(e,t);return i&&i.selected?i:null},getSelectedNodes:function(){var e,t,i=[];return $("li.is-selected",this.element).each((function(){e=$("a:first",this),t=e.data("jsonData"),i.push({node:e,data:t})})),i},getNextNode:function(e){var t=e.parent().next().find("a:first"),i=e.next();if(i.is("ul.is-open")&&(t=i.find("a:first")),t.hasClass("is-disabled")&&(t=t.parent().next().find("a:first")),0===t.length)for(var n=0,s=e;n<1e3&&!(t=(s=s.parent().closest(".folder")).next().find("a:first")).length;n++);return t.hasClass("is-disabled")&&(t=this.getNextNode(t)),t},getPreviousNode:function(e){var t=e.parent().prev().find("a:first"),i=t.parent();return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(t=i.find("ul.is-open a:last")),t.hasClass("is-disabled")&&(i=(t=t.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(t=i.find("ul.is-open a:last")),0===t.length&&(t=e.closest("ul").prev("a")),t.hasClass("is-disabled")&&(t=this.getPreviousNode(t)),t},syncDataset:function(e){var t=[],i=this;e=e||this.element,[].slice.call(e.children("li").toArray()).forEach((function(e){var n=e.querySelector("a");n&&t.push(i.syncNode(n))})),this.settings.dataset=t,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(e){var t,i=this,n=this.isjQuery(e)?e:$(e);if(e=n[0]){var s=e.parentNode,a=function(e,t){return e.classList.contains(t)};t={node:n,id:e.getAttribute("id"),text:e.querySelector(".tree-text").textContent},(a(e,"is-open")||s&&"li"===s.tagName.toLowerCase()&&a(s,"is-open"))&&(t.open=!0);var o=e.getAttribute("href");o&&(t.href=o),a(s,"is-selected")&&(t.selected=!0),a(e,"is-disabled")&&(t.disabled=!0);var r=e.getAttribute("class");r&&r.indexOf("icon")>-1&&(t.icon=r);var l=n.next();if(l[0]&&"ul"===l[0].tagName.toLowerCase())t.children=[],[].slice.call(l.children("li").toArray()).forEach((function(e){var n=e.querySelector("a");n&&t.children.push(i.syncNode(n))}));var c=n.data("jsonData");c&&(delete c.selected,delete c.children,t=$.extend({},c,t)),n.data("jsonData",t)}return t},addNode:function(e,t,n){var s,a,o,r=this,l="object"===i(e.badge)?JSON.stringify(e.badge):e.badge;e.href=void 0!==e.href?e.href:"#",t=t||"bottom";var c=document.createElement("a");c.setAttribute("id",e.id),c.setAttribute("href",e.href),void 0!==l&&c.setAttribute("data-badge",l),void 0!==e.alertIcon&&c.setAttribute("data-alert-icon",e.alertIcon),e.text&&(c.textContent=e.text),e.disabled&&c.classList.add("is-disabled"),e.icon&&c.classList.add(e.icon);var d=document.createElement("li");if(e.open&&d.classList.add("is-open"),d.appendChild(c),"dropdown"===e.type&&(c.setAttribute("style","display: none"),e.data)){a='<select class="dropdown" close-on-select="true">';for(var h=0;h<e.data.length;h++)(o=e.data[h]).value===e.text?(s=o.text,a+='<option value="'.concat(o.value,'" selected>').concat(o.text,"</option>")):a+='<option value="'.concat(o.value,'">').concat(o.text,"</option>");a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(s),a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a,"</div>")).appendTo(d),e.disabled?$(d).find("select.dropdown").dropdown().disable():$(d).find("select.dropdown").dropdown().on("selected.tree",(function(){var e=r.findById(this.parentElement.previousElementSibling.id);e.text=this.value,r.updateNode(e)}))}var u=!!this.loading||this.addToDataset(e,t);return e.parent instanceof jQuery&&(u=!0),t instanceof jQuery&&"before"===n?($(d).insertBefore(t),u=!0):t instanceof jQuery&&"after"===n&&($(d).insertAfter(t),u=!0),!(t instanceof jQuery)||e.parent&&u||e.parent instanceof jQuery||"before"===n||"after"===n||(t[0].appendChild(d),u=!0),"bottom"!==t||e.parent&&u||this.element[0].appendChild(d),"top"!==t||e.parent&&u||this.element.prepend(d),e.parent?(u&&"string"==typeof e.parent&&(d=this.element.find("#".concat(e.parent)).parent(),!e.disabled&&d.is(".is-selected")&&void 0===e.selected&&(e.selected=!0),this.addAsChild(e,d)),e.parent&&e.parent instanceof jQuery&&(d=e.parent,e.parent.is("a")&&(d=e.parent.parent()),this.addAsChild(e,d)),this.isjQuery(d)&&(e.node=d.find("ul li a#".concat(e.id)))):(d=$(d),this.addChildNodes(e,d),e.node=d.children("a").first()),c=$(c),this.decorateNode(c,e.icon,e.hideCheckbox),e.selected&&this.selectNode(c,e.focus),c.data("jsonData",e),d},addAsChild:function(e,t){var i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");i||(t.insertAdjacentHTML("beforeend",'<ul class="folder"></ul>'),i=t.querySelector("ul")),e.open&&i.classList.add("is-open"),this.decorateNode(t.querySelector("a")),e.parent="",this.addNode(e,$(i))},addChildNodes:function(e,t){var i=this,n=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");e.children?(n||(t.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(e.open?" is-open":"",'"></ul>')),n=t.querySelector("ul")),n.innerHTML="",e.children&&e.children.forEach((function(e){return i.addNode(e,$(n))}))):n&&n.parentNode.removeChild(n)},isTrue:function(e){return null!=e&&("boolean"==typeof e&&!0===e||"string"==typeof e&&"true"===e.toLowerCase())},isFalse:function(e){return null!=e&&("boolean"==typeof e&&!1===e||"string"==typeof e&&"false"===e.toLowerCase())},updateNode:function(e){var t=e.node?{node:e.node}:this.findById(e.id);if(t&&t.node[0]){var i=t.node[0].parentNode,n=t.node[0].querySelector(".tree-text"),s=this.isTrue(e.disabled)||this.isFalse(e.enabled),a=this.isTrue(e.enabled)||this.isFalse(e.disabled);if(e.badge){var o=t.node[0].querySelector(".tree-badge");if(!o&&!e.badge.remove&&void 0!==e.badge.text&&""!==$.trim(e.badge.text)){var r=document.createElement("span");r.classList.add("tree-badge","badge"),n.parentNode.insertBefore(r,n),o=t.node[0].querySelector(".tree-badge")}o&&(void 0!==e.badge.text&&(e.badge.text=e.badge.text.toString(),o.textContent=e.badge.text,o.classList.remove("round"),1===e.badge.text.length&&o.classList.add("round")),void 0!==e.badge.type&&(o.classList.remove("info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(e.badge.type)?o.classList.add(e.badge.type):"#"===e.badge.type.charAt(0)&&7===e.badge.type.length&&(o.style.backgroundColor=e.badge.type),-1!==e.badge.type.indexOf("pending")&&(o.textContent="")),t.badge=e.badge,this.parseBool(e.badge.remove)&&(o.parentNode.removeChild(o),void 0!==t.badge&&delete t.badge))}if(e.text&&(n.textContent=e.text,t.text=e.text),e.icon?(this.setTreeIcon(t.node[0].querySelector("svg.icon-tree"),e.icon),t.icon=e.icon):e.children&&e.children.length&&!i.classList.contains("folder")&&this.convertFileToFolder(t.node),s)if(t.node[0].classList.add("is-disabled"),t.node[0].setAttribute("aria-disabled","true"),i.classList.contains("folder")&&i.classList.contains("is-open"))[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach((function(e){e.classList.add("is-disabled"),e.setAttribute("aria-disabled","true")}));if(a)if(!(t.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0))if(t.node[0].classList.remove("is-disabled"),t.node[0].removeAttribute("aria-disabled"),i.classList.contains("folder")&&i.classList.contains("is-open"))[].slice.call(i.querySelectorAll("a, ul[role=group]")).forEach((function(e){e.classList.remove("is-disabled"),e.removeAttribute("aria-disabled")}));e.node&&this.syncDataset(),e.children&&(e.children.length?this.addChildNodes(e,i):this.removeChildren(e,i)),this.syncDataset(),this.createSortable()}},parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},removeChildren:function(e,t){var i=(t=this.isjQuery(t)?t[0]:t).querySelector("ul");this.setTreeIcon(t.querySelector("svg.icon-tree"),e.icon||"icon-tree-node"),t.classList.remove("folder","is-open"),i&&i.parentNode.removeChild(i)},removeNode:function(e){var t=this.findById(e.id);e instanceof jQuery?(t=e).parent().remove():t&&t.node.parent().remove(),t&&this.syncDataset()},attachMenu:function(e){var t=this;e&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",(function(i){var n=$(this);return i.preventDefault(),t.popupEl=$(i.currentTarget).popupmenu({menuId:e,eventObj:i,trigger:"immediate",attachToBody:!0}).off("selected").on("selected",(function(e,i){t.element.triggerHandler("menuselect",{node:n,item:i})})),t.element.triggerHandler("menuopen",{menu:$("#".concat(e)),node:n}),!1}))},createSortable:function(){if(this.settings.sortable){var e,t,i,n=this;if(n.targetArrow=n.element[0].previousElementSibling,n.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!n.targetArrow||n.targetArrow&&!n.targetArrow.classList.contains("tree-drag-target-arrow")){var s=document.createElement("div");s.classList.add("tree-drag-target-arrow"),n.element[0].parentNode.insertBefore(s,n.element[0]),n.targetArrow=n.element[0].previousElementSibling}t=setInterval((function(){n.loading||(clearInterval(t),[].slice.call(n.element[0].querySelectorAll(n.linkSelector)).forEach((function(t){var s=$(t);s.data("drag")||s.on("mousedown.tree",(function(e){e.preventDefault(),i=3!==e.which&&(!e.target.classList.contains("icon")||!t.parentNode.classList.contains("folder"))})).drag({clone:!0,cloneAppendTo:s.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",(function(a,o,r){if(!r||!i)return t.classList.remove("is-dragging"),void(r&&r[0].parentNode.removeChild(r[0]));(e=r)[0].removeAttribute("id"),e[0].classList.add("is-dragging-clone"),[].slice.call(e[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach((function(e){return e.parentNode.removeChild(e)}));var l=s.closest("ul");n.sortable={startIndex:$(n.linkSelector,n.element).index(s),startNode:s,startIcon:$("svg.icon-tree",s).getIconName(),startUl:l,startLi:s.closest("li"),startFolderNode:l.prev("a"),startWidth:s.outerWidth()},n.element.triggerHandler("sortstart",n.sortable),a.preventDefault(),a.stopImmediatePropagation()})).on("drag.tree",(function(t,i){e&&(e[0].style.left="".concat(i.left,"px"),e[0].style.top="".concat(i.top,"px"),e[0].style.opacity="1",n.setDragOver(e,i))})).on("dragend.tree",(function(t,i){if(n.targetArrow.style.display="none",[].slice.call(n.element[0].querySelectorAll(n.linkSelector)).forEach((function(e){return e.classList.remove("is-over")})),e&&n.sortable.overDirection){e[0].style.left="".concat(i.left,"px"),e[0].style.top="".concat(i.top,"px");var s=n.sortable.startNode.parent(),a=n.sortable.overNode.parent();"over"===n.sortable.overDirection?(a[0].classList.contains("folder")||n.convertFileToFolder(n.sortable.overNode),a[0].querySelector("ul").appendChild(s[0]),a[0].classList.contains("is-open")||n.toggleNode(n.sortable.overNode,t)):"up"===n.sortable.overDirection?s.insertBefore(a):"down"===n.sortable.overDirection&&(a[0].classList.contains("is-open")&&a[0].classList.contains("folder")?$("ul:first",a).prepend(s):s.insertAfter(a)),!n.sortable.startUl[0].querySelector("li")&&n.sortable.startFolderNode.data("oldData")&&"file"===n.sortable.startFolderNode.data("oldData").type&&n.convertFolderToFile(n.sortable.startFolderNode),C.fixSVGIcons(s),n.element.triggerHandler("sortend",n.sortable),n.syncDataset(),n.isMultiselect&&n.initSelected()}}))})))}),10)}},setDragOver:function(e,t){var i,n,s,a,o,r,l,c,d,h,u,p,g=this,f=e[0].querySelector("svg.icon-tree"),m=g.element[0].getBoundingClientRect(),v=20,b=function(){g.sortable.overNode=null,g.sortable.overIndex=null,g.sortable.overDirection=null,g.targetArrow.style.display="none",g.setTreeIcon(f,"icon-cancel")};t.top>m.top-v&&t.top<m.bottom+v&&t.left>m.left-v-g.sortable.startWidth&&t.left<m.left+m.height+v?(v=2,(l=[].slice.call(g.element[0].querySelectorAll(g.linkSelector))).forEach((function(e,m){if(u=null,c=e.getBoundingClientRect(),t.top>c.top-v&&t.top<c.bottom+v){if(o=$(e),!!o.parentsUntil(g.element,".folder").filter((function(){return $("a:first",this).is(g.sortable.startNode)&&g.sortable.startLi.is(".folder")})).length)return void b();a=e.parentNode,d=c.left,r=o.closest("ul"),i=parseInt(a.style.marginTop,10)>0?2:0,n=m-1===g.sortable.startIndex&&r.is(g.sortable.startUl),s=m+1===g.sortable.startIndex&&r.is(g.sortable.startUl),l.forEach((function(e){return e.classList.remove("is-over")})),p=function(){u?(g.setTreeIcon(f,g.sortable.startIcon),"over"===u?(g.targetArrow.style.display="none",e.classList.contains("is-disabled")||e.classList.add("is-over")):(l.forEach((function(e){return e.classList.remove("is-over")})),h="up"===u?c.top-1.5-(a.classList.contains("is-active")?3:0):c.bottom+(a.nextElementSibling&&a.nextElementSibling.classList.contains("is-active")?-1:1.5)+i,g.targetArrow.style.left="".concat(d,"px"),g.targetArrow.style.top="".concat(h,"px"),g.targetArrow.style.display="block"),g.sortable.overNode=o,g.sortable.overIndex=m,g.sortable.overDirection=u):b()},m!==g.sortable.startIndex&&(t.left>c.left-v-g.sortable.startWidth&&t.left<c.right+v?u=!n&&t.top<c.top?"up":!s&&t.top>c.top+2*v?"down":"over":!n&&t.top<c.top?u="up":s||(u="down")),p()}}))):b()},convertFileToFolder:function(e){var t=document.createElement("ul");t.setAttribute("role","group");var i={icon:$("svg.icon-tree",e).getIconName(),type:"file"};if(this.hasIconClass(e)){var n=e.attr("class").replace(/\s?is-selected/,"");i.iconClass=n,e.removeClass(n)}e.data("oldData",i);var s=e[0].parentNode;s&&"li"===s.tagName.toLowerCase()&&(s.classList.add("folder"),s.appendChild(t)),this.setTreeIcon($("svg.icon-tree",e),this.settings.folderIconClosed)},convertFolderToFile:function(e){var t=e.parent(".folder");t.removeClass("folder is-open"),$("ul:first",t).remove(),t.length&&(this.setTreeIcon($("svg.icon-tree",e),e.data("oldData")?e.data("oldData").icon:"tree-node"),e.data("oldData")&&e.data("oldData").iconClass&&e.addClass(e.data("oldData").iconClass),e.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each((function(){var e=$(this),t=e.data("drag");e.off("mousedown.tree"),t&&t.destroy&&t.destroy()})),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Jn)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],"tree")},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(e){e.classList.add("is-disabled"),e.setAttribute("aria-disabled","true")}))},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(e){e.classList.remove("is-disabled"),e.removeAttribute("aria-disabled")}))},preserveEnablementState:function(){var e=[].slice.call(this.element[0].querySelectorAll("a")),t=[];return e.forEach((function(e){e.classList.contains("is-disabled")||!0===e.getAttribute("aria-disabled")?t.push({nodeId:e.id,state:"disabled"}):t.push({nodeId:e.id,state:"enabled"})})),this.settings.originalEnablementState=t,t},restoreEnablementState:function(){var e=this.settings,t=[].slice.call(this.element[0].querySelectorAll("a"));void 0!==e.originalEnablementState&&null!==e.originalEnablementState&&t.forEach((function(t){e.originalEnablementState.forEach((function(e){e.nodeId===t.id&&("disabled"===e.state?(t.classList.add("is-disabled"),t.setAttribute("aria-disabled","true")):(t.classList.remove("is-disabled"),t.removeAttribute("aria-disabled")))}))}))}},$.fn.tree=function(e){return this.each((function(){var t=$.data(this,"tree");t?t.updated(e):t=$.data(this,"tree",new Zn(this,e))}))};var es={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function ts(e,t){this.settings=C.mergeSettings(e,t,es),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element=$(e),this.init()}ts.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var e=J.themeColors().palette;this.settings.colors=[e.azure[100].value,e.azure[90].value,e.azure[80].value,e.azure[70].value,e.azure[60].value,e.azure[40].value,e.azure[30].value,e.azure[20].value,e.amethyst[100].value,e.amethyst[90].value,e.amethyst[80].value,e.amethyst[70].value,e.amethyst[60].value,e.amethyst[50].value,e.amethyst[40].value,e.amethyst[40].value,e.amethyst[30].value,e.amethyst[20].value,e.turquoise[100].value,e.turquoise[90].value,e.turquoise[80].value,e.turquoise[70].value,e.turquoise[60].value,e.turquoise[50].value,e.turquoise[40].value,e.turquoise[40].value,e.turquoise[30].value,e.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(e){var t=this,i=Object.create(this.settings.margin),n=this.element.parent().width()-i.left-i.right,s=this.element.parent().height()-i.top-i.bottom,a=d3.scaleOrdinal().range(this.settings.colors);if(0!==e.length){this.settings.showTitle&&e.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(e.name),s-=35,i.top-=19);var o=d3.treemap().size([n,s]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(n+i.left+i.right,"px")).style("height","".concat(s+i.top+i.bottom,"px")).style("left","".concat(i.left,"px")).style("top","".concat(i.top,"px"));var r=d3.hierarchy(e,(function(e){return e.children})).sum((function(e){return e.value})),l=o(r);this.total=d3.sum(l.leaves(),(function(e){return e.value})),this.root.datum(r).selectAll(".chart-treemap-node").data(l.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",(function(e){return"".concat(e.x0,"px")})).style("top",(function(e){return"".concat(e.y0,"px")})).style("width",(function(e){return"".concat(Math.max(0,e.x1-e.x0-1),"px")})).style("height",(function(e){return"".concat(Math.max(0,e.y1-e.y0-1),"px")})).style("background",(function(e){return e&&e.parent&&e.parent.data?a(e.parent.data.name):""})).text((function(e){return e.data.name})),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text((function(e){return d3.format(t.settings.labelFormatter)(e.value/t.total)}))}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var e=this;return this.element.on("updated.".concat("treemap"),(function(){e.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat("treemap"),(function(){e.handleResize()})),this.element.on("resize.".concat("treemap"),(function(){e.handleResize()}))),$("html").on("themechanged.".concat("treemap"),(function(){e.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),e&&e.dataset&&(this.settings.dataset=e.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat("treemap")),$("body").off("resize.".concat("treemap")),$("html").off("themechanged.".concat("treemap")),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),$t.removeTooltip(),this.teardown(),$.removeData(this.element[0],"treemap")}},$.fn.treemap=function(e){return this.each((function(){var t=$.data(this,"treemap");t?t.updated(e):t=$.data(this,"treemap",new ts(this,e))}))},$.fn.weekview=function(e){return this.each((function(){var t=$.data(this,"weekview");t?t.updated(e):t=$.data(this,"weekview",new Si(this,e))}))};var is={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function ns(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,is),this.init()}function ss(e,t,i,n,s,a){var o=s.placeholder;if(o&&""===e){return"[object Function]"==={}.toString.call(o)?o=o(t,i,n,s,a):a&&o in a&&(o=a[o]),o}return""}ns.prototype={init:function(){this.namespace=C.uniqueId({classList:["wizard"]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var e=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&e.ticks){for(var t=function(e,t){return e.replace(/{{(\w+)}}/g,(function(e,i){return t[i]}))},i={state:"",href:"#",label:""},n=0;n<e.ticks.length;n++){var s=t(e.ticksTemplate,$.extend({},i,e.ticks[n]));s=s.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var a=$(s);e.ticks[n].ngClick&&a.attr("ng-click",e.ticks[n].ngClick),this.bar.append(a)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach((function(e){e.classList.contains("is-disabled")&&["onclick","ng-click"].forEach((function(t){return e.removeAttribute(t)}))})),this.header[0].style.opacity="1",this},setLabelsData:function(){var e=this,t=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],t.forEach((function(t){var i=t.textContent,n=t.getAttribute("data-shortlabel");n||(n=t.getAttribute("shortlabel"));var s={label:i,shortLabel:n,node:t,jqEl:$(t)};n&&"undefined"!==n||(t.removeAttribute("data-shortlabel"),t.removeAttribute("shortlabel"),delete s.shortLabel),e.labels.push(s)})),this},adjustLabels:function(){var e=this,t=this.header[0].getBoundingClientRect(),i=parseFloat(window.getComputedStyle(this.bar[0]).width),n=100/(this.labels.length-1)/100*i-15,s=[],a=[],o=function(t){delete t.isEllipsis,t.node.classList.remove("is-ellipsis"),t.node.style.width="",e.removeTooltip(t)},r=function(t){var i=e.labels[t].node;if(-1===s.indexOf(t)){var a=e.labels[t].shortLabel;a?(i.textContent=a,s.push(t),o(e.labels[t])):(i.classList.add("is-ellipsis"),i.style.width="".concat(n,"px"),e.setTooltip(e.labels[t]),e.labels[t].isEllipsis=!0)}i.style.left="-".concat((i.offsetWidth-i.parentNode.offsetWidth)/2,"px")},l=function(){var i=function(e,t,i){if(e.isEllipsis){var n=parseFloat(e.node.style.width)-t;e.node.style.width="".concat(n,"px"),e.node.style.left="-".concat((n-e.node.parentNode.offsetWidth)/2,"px")}else{var s=parseFloat(e.node.style.left)+t*(i?-1:1);e.node.style.left="".concat(s,"px")}},n=e.labels[0],s=n.node.rect||n.node.getBoundingClientRect();t.left>s.left&&i(n,t.left-s.left),s=(n=e.labels[e.labels.length-1]).node.rect||n.node.getBoundingClientRect(),t.right<s.right&&i(n,s.right-t.right,!0)};this.labels.forEach((function(e){var t=e.node;t.textContent=e.label,t.style.left="-".concat((t.offsetWidth-t.parentNode.offsetWidth)/2,"px"),o(e)})),l();var c=function(e,t){return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)},d=function(){e.labels.forEach((function(e){e.rect=e.node.getBoundingClientRect()})),a=[];for(var t=0,i=e.labels.length;t<i;t++)if(t<i-1){var n=t+1;c(e.labels[t].rect,e.labels[n].rect)&&a.push([t,n])}},h=50;do{d(),a.forEach((function(t){var i=e.labels[t[0]].node,n=e.labels[t[1]].node,s=i.offsetWidth>n.offsetWidth?0:1,a=t[s],o=s?t[0]:t[1];r(a),c(e.labels[a].rect,e.labels[o].rect)&&r(o)})),l(),d(),h--}while(a.length&&h>0);return l(),this.labels.forEach((function(e){delete e.isEllipsis,delete e.rect})),this},setTooltip:function(e){var t=this;e.jqEl.tooltip({content:e.label,placement:"bottom"}).on("blur.".concat("wizard"),(function(){return t.removeTooltip(e)}))},removeTooltip:function(e){var t=e.jqEl.data("tooltip");t&&(t.element.off("blur.".concat("wizard")),t.destroy())},positionTicks:function(){var e=this.ticks.length,t=100/(e-1);this.ticks.toArray().forEach((function(i,n){var s=function(i){return i===e-1?100:t*i}(n),a=M&&M.isRTL()?100-s:s;i.style.left="".concat(a,"%"),i.classList.contains("is-disabled")&&i.setAttribute("tabindex","-1")}))},updateRange:function(){var e=function(e,t){return parseFloat(window.getComputedStyle(e)[t])},t=this.ticks.filter(".current").last(),i=0;return t.length&&(i=100*e(t[0],"left")/e(t.parent()[0],"width"),i=M&&M.isRTL()?100-i:i),this.completedRange[0].style.width="".concat(i,"%"),this},updated:function(e){return e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var e=this;return this.labels.forEach((function(t){e.removeTooltip(t),t.jqEl.off().removeData()})),delete this.labels,this.ticks.off("click.".concat("wizard")),this.element.off("updated.".concat("wizard")),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(e,t){return F(this.activate,this.select).apply(this,[e,t])},activate:function(e,t){if(void 0===e&&!t)return this;var i,n=this;if(void 0===e||null!=e&&e.type&&e.target||t||(t=e),t=void 0===t?(i=$(e.target)).is(".label")?i.parent():i:"number"==typeof t?n.ticks.eq(t):t,e&&(t.is("[disabled], .is-disabled")||!t.is("a")))return e.preventDefault(),e.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[t]))return this;var s=this.ticks.index(t);return this.ticks.removeClass("complete current").eq(s).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[t]),setTimeout((function(){n.element.trigger("afteractivated",[t])}),300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"wizard")},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat("wizard"),(function(){t.updated()})),this.ticks.on("click.".concat("wizard"),(function(e){t.activate(e,$(this))})),$("body").on("resize.".concat(this.namespace),(function(){e.adjustLabels()})),this}},$.fn.wizard=function(e){return this.each((function(){var t=$.data(this,"wizard");t?t.updated(e):t=$.data(this,"wizard",new ns(this,e))}))};var as={Text:function(e,t,i){return null==i||""===i?"":i.toString()},Input:function(e,t,i,n){return n.inlineEditor?'<label for="datagrid-inline-input-'.concat(e,"-").concat(t,'" class="audible">').concat(n.name,'</label><input id="datagrid-inline-input-').concat(e,"-").concat(t,'" class="').concat("right"===n.align?"is-number-mask":"",'" value="').concat(i,'">'):null==i||""===i?"":i.toString()},Placeholder:function(e,t,i,n,s){var a=ss(i,e,t,i,n,s);return""!==a?'<span class="is-placeholder">'.concat(a,"</span>"):null==i||""===i?"":i.toString()},Ellipsis:function(e,t,i,n){var s=null==i||""===i?"":i.toString();return n.textOverflow="ellipsis",s},Password:function(e,t,i){return(null==i||""===i?"":i.toString()).replace(/./g,"*")},Readonly:function(e,t,i){return'<span class="is-readonly">'.concat(null==i?"":i,"</span>")},Date:function(e,t,i,n,s){var a,o=null==i?"":i;return"string"==typeof i&&i?(a=n.sourceFormat?M.parseDate(i,"string"==typeof n.sourceFormat?{pattern:n.sourceFormat}:n.sourceFormat):M.parseDate(i,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat))?o=M.formatDate(a,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat):"NaN/NaN/NaN"!==(o=M.formatDate(i,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat))&&o||""===o||(o=i):i&&(o=M.formatDate(i,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat)),n.editor&&!0!==s?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]})):o},Time:function(e,t,n,s,a){var o,r=null==n?"":n,l="object"===i(M)&&M.calendar().dateFormat?M.calendar().dateFormat.short:null,c="object"===i(M)&&M.calendar().timeFormat?M.calendar().timeFormat:null;return"string"==typeof n&&n?(o=M.formatDate(function(e){if(""===e)return null;var t=e.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===t)return null;var i=new Date;return i.setHours(parseInt(t[1],10)+(t[4]?12:0)),i.setMinutes(parseInt(t[2],10)||0),i.setSeconds(parseInt(t[3],10)||0),i}(n),{pattern:"".concat(l," ").concat(s.sourceFormat||s.timeFormat||c)}))&&(r=o.slice(o.indexOf(" "))):n&&(o=M.formatDate(n,{pattern:"".concat(l," ").concat(s.sourceFormat||s.timeFormat||c)}))&&(r=o.slice(o.indexOf(" "))),r=r.replace(/^\s/,""),s.editor&&!0!==a?'<span class="trigger">'.concat(r,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):r},Autocomplete:function(e,t,i){return null==i?"":i},Lookup:function(e,t,i,n,s){var a=null==i?"":i,o=!1,r=ss(a,e,t,i,n,s);return""!==r&&(o=!0),n.editor?(n.editorOptions&&"function"==typeof n.editorOptions.field&&(a=n.editorOptions.field(s,null,null),o=!1),null!=a&&""!==a||(a="",r&&(o=!0,a=r)),'<span class="trigger '.concat(o?"is-placeholder":"").concat("right"===n.align?"align-text-right":"",'">').concat(a,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):o?'<span class="is-placeholder">'.concat(r,"</span>"):a},Decimal:function(e,t,i,n,s){var a=i;void 0!==M&&null!=a&&""!==a&&(a=M.formatNumber(i,n.numberFormat));var o=ss(a=null==a||"NaN"===a?"":a,e,t,i,n,s);return""!==o?'<span class="is-placeholder">'.concat(o,"</span>"):a},Integer:function(e,t,i,n){var s=i;return void 0!==M&&null!=s&&""!==s&&(s=M.formatNumber(i,n.numberFormat||{style:"integer"})),null==s||"NaN"===s?"":s},Hyperlink:function(e,t,i,n,s,a){var o=n.href||"#";if(n.href&&"function"==typeof n.href){if(null==(o=n.href(e,t,s,n)))return n.text||i}else o=o.replace("{{value}}",i);var r=n.text||i;return r||n.icon?n.icon?'<a href="'.concat(o,'" class="btn-icon row-btn ').concat(n.cssClass||"",'" ').concat(a.settings.rowNavigation?'tabindex="-1"':"").concat(n.hyperlinkTooltip?' title="'.concat(n.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:n.icon,file:n.iconFile}),'\n          <span class="audible">').concat(r,"</span>\n        </a>"):'<a href="'.concat(o,'" ').concat(a.settings.rowNavigation?'tabindex="-1"':"",' role="presentation" class="hyperlink ').concat(n.cssClass||"",'"').concat(n.target?' target="'.concat(n.target,'"'):"").concat(n.hyperlinkTooltip?' title="'.concat(n.hyperlinkTooltip,'"'):"",">").concat(r,"</a>"):""},Template:function(e,t,i,n,s){var a=n.template,o="";return gt&&s&&a&&(o=gt.compile("{{#dataset}}".concat(a,"{{/dataset}}"),{dataset:s})),o},Drilldown:function(){var e=M.translate("Drilldown");return void 0===e&&(e=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(e,"</span>\n      </button>")},RowReorder:function(){var e=M.translate("ReorderRows");return void 0===e&&(e="Reorder Rows"),'<div class="datagrid-reorder-icon">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(e,"</span>\n      </div>")},Checkbox:function(e,t,i,n,s,a){var o;o=n.isChecked?n.isChecked(i):void 0!==i&&(!0===i||1===parseInt(i,10));var r='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(M.translate(o?"Yes":"No"),"</span>"),l=a.wasJustUpdated;return a.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(n.name,'" class="datagrid-checkbox\n     ').concat(o?"is-checked ".concat(l?" ":" no-animation"):"",'" aria-checked="').concat(o,'"></span>').concat(r,"</div>")},SelectionCheckbox:function(e,t,i,n,s,a){var o=void 0!==i&&!0===i;i||(o=a.isRowSelected(s));var r=" ";if(a.settings.columnIds.length>0)for(var l=0;l<a.settings.columnIds.length;l++)r+=s[a.settings.columnIds[l]];return r=h.ensureAlphaNumericWithSpaces(r),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(n.name?n.name:M.translate("Select")+r,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(o?" is-checked no-animate":"",'" aria-checked="').concat(o,'"></span></div>')},Actions:function(e,t,i,n){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(n.menuId,'">\n        <span class="audible">').concat(n.title||M.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function(e,t,i){return'<span class="datagrid-multiline-text">'.concat(null==i?"":i,"</span>")},Editor:function(e,t,i,n){var s=null==i?"":i,a="is-editor";return a+=n.singleline?" is-singleline":" datagrid-multiline-text",a+=n.contentTooltip?" content-tooltip":"",'<div class="'.concat(a,'">').concat(h.unescapeHTML(s),"</div>")},Expander:function(e,t,i){return'<button type="button" aria-label="'.concat(M.translate("ExpandCollapse"),'" class="btn-icon datagrid-expand-btn" tabindex="-1">\n      <span class="icon plus-minus"></span>\n      </button>').concat(i?"<span> ".concat(i,"</span>"):"")},GroupRow:function(e,t,i,n,s,a){var o=a.settings.groupable,r={left:"",center:"",right:""},l="",c=void 0===o.expanded||o.expanded;o.expanded&&"function"==typeof o.expanded&&(c=o.expanded(e,t,i,n,s,a));for(var d=0;d<o.fields.length;d++)l+=s[o.fields[d]]+(0===d?"":",");o.groupRowFormatter&&(l=o.groupRowFormatter(e,t,i,n,s,a));var h='<button type="button" class="btn-icon datagrid-expand-btn'.concat(c?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(c?" active":"",'"></span>\n    <span class="audible">').concat(M.translate("ExpandCollapse"),"</span>\n    </button><span> ").concat(l,"</span>");return r[a.getContainer(o.fields?o.fields[0]:"")]=h,r},GroupFooterRow:function(e,t,i,n,s,a){var o=a.settings.groupable,r={left:"",center:"",right:""},l=a.settings.frozenColumns.left.length,c=a.settings.frozenColumns.right.length,d=a.columnIdxById(o.aggregate),h=a.getContainer(o.aggregate);return r.left='<td role="gridcell" colspan="'.concat(l,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===h?s.sum:"<span>&nbsp;</span>","</div></td>"),r.center='<td role="gridcell" colspan="'.concat(d-l-c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===h?s.sum:"<span>&nbsp;</span>","</div></td>"),r.right='<td role="gridcell" colspan="'.concat(c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===h?s.sum:"<span>&nbsp;</span>","</div></td>"),o.groupFooterRowFormatter&&(r[h]=o.groupFooterRowFormatter(d,e,t,i,n,s,a)),r},SummaryRow:function(e,t,i,n){var s="",a=n.summaryText||"";return"after"===n.summaryTextPlacement&&(s=a,a=""),void 0!==M&&n.numberFormat&&null!=i&&""!==i&&(i=M.formatNumber(+i,n.numberFormat)),a+(null==i||""===i?"":i.toString())+s},Tree:function(e,t,i,n,s,a){var o=!s||s.expanded,r=a&&a.settings.treeDepth&&a.settings.treeDepth[e]?a.settings.treeDepth[e].depth:0,l=s&&s.isAllChildrenFiltered,c=l?" disabled":"";o&&l&&(o=!1);var d="short"===a.settings.rowHeight?22:30,h='<button type="button" class="btn-icon datagrid-expand-btn'.concat(o?" is-expanded":"",'" tabindex="-1"').concat(r?' style="margin-left: '.concat(r?"".concat(d*(r-1),"px"):"",'"'):"").concat(c,'>\n      <span class="icon plus-minus ').concat(o?" active":"",'"></span>\n      <span class="audible">').concat(M.translate("ExpandCollapse"),"</span>\n      </button>").concat(i?" <span>".concat(i,"</span>"):""),u=' <span class="datagrid-tree-node"'.concat(r?' style="margin-left: '.concat(r?"".concat(d*r,"px"):"",'"'):"",">").concat(i,"</span>");return s&&s[n.children?n.children:"children"]?h:u},ClassRange:function(e,t,i,n){var s=n.ranges,a="",o="";if(!s)return{};for(var r=0;r<s.length;r++)i>=s[r].min&&i<=s[r].max&&(a=s[r].classes,o=s[r].text?s[r].text:a.split(" ")[0]),i===s[r].value&&(a=s[r].classes,o=s[r].text?s[r].text:i);return{classes:a,text:o}},Badge:function(e,t,i,n){var s=n.color,a=n.name;if(n.ranges){var o=as.ClassRange(e,t,i,n);s=o.classes,a=o.text}return'<span class="badge '.concat(s,'">').concat(i,' <span class="audible">').concat(a,"</span></span>")},Tag:function(e,t,i,n){var s,a=as.ClassRange(e,t,i,n);return(null==n||null===(s=null==n?void 0:n.editorOptions)||void 0===s||null==s?void 0:s.clickable)?'<span class="tag is-linkable hide-focus '.concat(a.classes,'"><a class="tag-content" href="#">#').concat(i,'</a><button class="linkable-btn" focusable="false" tabindex="-1">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n      </button></span>'):'<span class="tag '.concat(a.classes,' hide-focus"><span class="tag-content">').concat(i,"</span></span>")},Alert:function(e,t,i,n){var s=as.ClassRange(e,t,i,n),a=$.createIcon({icon:"".concat(s.classes,"-alert"),classes:["icon","datagrid-alert-icon","icon-".concat(s.classes)]});return"".concat(a,'<span class="datagrid-alert-text">').concat("value"===s.text?i:s.text,"</span>")},Image:function(e,t,i,n){return'<img class="datagrid-img" src="'.concat(i,'" alt="').concat(n.alt?n.alt:M.translate("Image"),'"').concat(n.dimensions?' style="height:'.concat(n.dimensions.height,";width:").concat(n.dimensions.height,'"'):"","/>")},Color:function(e,t,i,n){var s=as.ClassRange(e,t,i,n),a=null==i||""===i?"":i.toString();return'<span class="'.concat(s.classes,'">').concat(a,"</span>")},Colorpicker:function(e,t,i,n){var s=null==i||""===i?"":i.toString();if(n.inlineEditor)return s;var a="swatch".concat(""===i?" is-empty":"");return s='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(a,'" style="background-color: ').concat(i,'"></span><input class="colorpicker" id="colorpicker-').concat(t,'" name="colorpicker-').concat(t,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(i,'" aria-describedby="">'),s+='<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(e,t,i,n,s,a){var o;o=n.text?n.text:null==i||""===i?"":i.toString();var r='<button type="button" class="'.concat(n.icon?"btn-icon":"btn-secondary"," row-btn ").concat(n.cssClass?n.cssClass:"",'"').concat(a.settings.rowNavigation?' tabindex="-1"':""," >");return n.icon&&(r+=$.createIcon({icon:n.icon,file:n.iconFile})),r+="<span>".concat(o,"</span></button>")},Dropdown:function(e,t,i,n,s){var a,o,r=i,l=!1;if(n.options&&void 0!==i){a=n.caseInsensitive&&"string"==typeof i?i.toLowerCase():i;for(var c=0,d=n.options.length;c<d;c++)if(o=n.options[c],(n.caseInsensitive&&"string"==typeof o.value?o.value.toLowerCase():o.value)===a){r=o.label;break}}var h=ss(r,e,t,i,n,s);""!==h&&(l=!0,r=h);var u='<span class="trigger dropdown-trigger '.concat(l?"is-placeholder":"",'">').concat(r,"</span>").concat($.createIcon({icon:"dropdown"}));if(n.inlineEditor){u='<label for="full-dropdown" class="audible">'.concat(n.name,'</label><select id="datagrid-dropdown').concat(e,'" class="dropdown">');for(var p=0,g=n.options.length;p<g;p++){var f=n.options[p],m=void 0;m=void 0!==f.label?f.label:void 0!==f.value?f.value:"",u+="<option".concat(void 0===f.id?"":' id="'.concat(f.id,'"'),'  value="').concat(f.value,'"').concat(f.selected||f.value===a?" selected ":"",">").concat(m,"</option>")}u+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(r,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return u},Fileupload:function(e,t,i,n){var s=null==i||""===i?"":i.toString();return n.inlineEditor||(s=""===$.trim(s)?'<span class="trigger">'.concat(s,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(s,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),s},Spinbox:function(e,t,i,n){var s=null==i||""===i?"":i.toString();return n.inlineEditor&&(s='<label for="spinbox-'.concat(t,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="').concat(i,'">\n        <span class="spinbox-control up">+</span></span>')),s},Favorite:function(e,t,i,n,s,a){var o;o=n.isChecked?n.isChecked(i):void 0!==i&&!0===i;var r=n.editor&&a.settings.editable;return o?'<span aria-label="'.concat(M.translate("Favorite"),'" class="icon-favorite').concat(r?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):n.showEmpty?'<span aria-label="'.concat(M.translate("Favorite"),'" class="icon-favorite').concat(r?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(e,t,i,n,s){return s&&s.rowStatus?"".concat($.createIcon({icon:s.rowStatus.icon,classes:["icon","icon-".concat(s.rowStatus.icon)]}),'<span class="audible">').concat(s.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(e,t,i,n){var s=100*i,a="".concat(s,"%"),o=as.ClassRange(e,t,s,n),r=n.target;n.text&&(a=(a=(a=(a=(a=(a=(a=n.text).replace("{{value}}",i)).replace("<% value %>",i)).replace("<%value%>",i)).replace("{{percent}}",s)).replace("<% percent %>",s)).replace("<%percent%>",s),n.showPercentText=!0);var l=n.ranges&&o.classes?o.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(r||0,'%;"></div>\n              <div class="completed bar ').concat(l,'" style="width: ').concat(s,'%;"></div>\n              ').concat(n.showPercentText?'<div class="chart-targeted-text l-center">'.concat(a,"</div>\n            </div>"):'<div class="audible">'.concat(s,"%</div>"))}},os="lookup-datagrid",rs={click:null,field:"id",title:null,buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,typeahead:!1,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null};function ls(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,rs),this.init()}function cs(e,t,i,n,s,a,o,r,l){if(a.align&&e.addClass("l-".concat(a.align,"-text")),a.maxLength&&e.attr("maxlength",a.maxLength),a.uppercase&&e.addClass("uppercase-text"),a.mask&&"function"==typeof a.mask){var c=a.mask(t,i,n,a,l);e.mask({pattern:c,mode:a.maskMode})}else if(a.maskOptions&&"function"==typeof a.maskOptions){var d=a.maskOptions(t,i,n,a,l);e.mask(d)}else a.mask&&e.mask({pattern:a.mask,mode:a.maskMode});var h={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:M.currentLocale.data.numbers?M.currentLocale.data.numbers.group:",",decimal:M.currentLocale.data.numbers?M.currentLocale.data.numbers.decimal:".",negative:M.currentLocale.data.numbers?M.currentLocale.data.numbers.minusSign:"-"}},process:"number"},u=!1;a.maskOptions&&(u=!0),a.numberFormat&&(u=!0,h={patternOptions:{decimalLimit:a.numberFormat.maximumFractionDigits}}),a.maskOptions&&"function"==typeof a.maskOptions&&(u=!1),u&&(a.maskOptions=C.extend(!0,{},h,a.maskOptions),e.mask(a.maskOptions)),a.align&&"right"===a.align||e.removeClass("is-number-mask")}ls.prototype={get isFocused(){var e=document.activeElement,t=this.element.is(e),i=this.element.parent(".lookup-wrapper")[0].contains(e);return t||i},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var e=this.element;var t,i=(t="lookup-wrapper",e.is(".input-xs")&&(t+=" xs"),e.is(".input-sm")&&(t+=" sm"),e.is(".input-lg")&&(t+=" lg"),t);if(this.element.is(".has-actions")&&(i+=" has-actions-wrapper"),this.icon=$('<span class="trigger"></span>').append($.createIcon("search-list")),this.isInlineLabel)this.inlineLabel.addClass(i);else if(this.container=$('<span class="'.concat(i,'"></span>')),this.element.is(".field-options")){var n=this.element.closest(".field").find(".btn-actions");e.add(n).add(n.next(".popupmenu")).wrapAll(this.container)}else e.wrap(this.container);e.after(this.icon),e.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),e.attr("data-mask")&&e.mask(),this.element.is(":disabled")&&this.disable(),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===e.attr("autocomplete")&&e.attr("autocomplete","off")},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'))},handleEvents:function(){var e=this;this.icon.on("click.lookup",(function(t){e.openDialog(t)})),this.element.on("keyup.lookup",(function(t){$("#autocomplete-list").length>0||40===t.which&&e.openDialog(t)}))},openDialog:function(e){var t=this;if(!this.isOpen&&(!1!==t.element.triggerHandler("beforeopen")&&!(t.isDisabled()||t.isReadonly()&&!t.element.hasClass("is-not-editable"))))if(t.settings.click)t.settings.click(e,this,t.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow){return this.element.triggerHandler("start"),void this.settings.beforeShow(this,(function(e){return e&&t.createGrid(e),("boolean"!=typeof e||!1!==e)&&(t.createModal(),t.element.triggerHandler("complete"),t.element.trigger("open",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid),!0)}))}if(this.settings.options){t.createModal(),t.element.trigger("open",[t.modal,t.grid]),t.modal.element.find(".btn-actions").removeClass("is-selected"),t.grid&&t.grid.cellNode(0,0,!0).attr("tabindex","0");var i=t.modal.element.find(".toolbar .more > .btn-actions");i.length&&setTimeout((function(){C.fixSVGIcons(i)}),600),t.element.trigger("afteropen",[t.modal,t.grid]),t.settings.validator&&t.settings.validator(t.element,t.modal,t.grid)}}},createModal:function(){var e=this,t='<div id="'.concat(os,'"></div>'),i=$('label[for="'.concat(e.element.attr("id"),'"]'));var n,s,a,o,r,l,c=e.isInlineLabel?e.inlineLabelText:i.length?i.clone().find("span").remove().end().text():e.settings.title?e.settings.title:(null===(n=e.settings)||void 0===n||null===(s=null==n?void 0:n.options)||void 0===s||null===(a=null==s?void 0:s.toolbar)||void 0===a||null==a?void 0:a.title)?null===(o=e.settings)||void 0===o||null===(r=null==o?void 0:o.options)||void 0===r||null===(l=null==r?void 0:r.toolbar)||void 0===l||null==l?void 0:l.title:"",d=this.settings.modalContent;d&&d instanceof jQuery&&(t=d,d.show()),!d||d instanceof jQuery||(t=d);var h=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===h.length||!e.settings.autoApply&&0===h.length)&&(h=[{text:M.translate("Cancel"),click:function(t,i){i.oldActive=e.element,i.close()}},{text:M.translate("Apply"),click:function(t,i){i.oldActive=e.element,i.close(),e.insertRows()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===h.length&&e.settings.autoApply&&(h=[{text:M.translate("Cancel"),click:function(t,i){i.oldActive=e.element,i.close()}}]);var u=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;$("body").modal({triggerButton:this.element,title:c,content:t,buttons:h,cssClass:"lookup-modal".concat(u?"":" lookup-no-search")}).off("open.lookup").on("open.lookup",(function(){e.createGrid()})).off("close.lookup").on("close.lookup",(function(){delete e.isOpen,e.element.triggerHandler("close",[e.modal,e.grid])})),e.modal=$("body").data("modal"),this.settings.title||e.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),e.modal.element.off("afterclose.lookup").on("afterclose.lookup",(function(){e.closeTearDown()})),setTimeout((function(){$(".modal.is-visible .searchfield").on("keypress.lookup",(function(e){return 13!==e.keyCode}))}),300)},closeTearDown:function(){var e=$(".modal.is-visible .searchfield").off("keypress.lookup");e.data()&&e.data("searchfield")&&e.data("searchfield").destroy(),e.data()&&e.data("searchfield")&&(e.data("searchfield").destroy(),e.removeData()),e=null,this.grid&&this.grid.destroy&&(this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var e={},t=[],i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];for(var a=0;a<n.length;a++)for(var o=0;o<n[a].length;o++)!0!==e[n[a][o]]&&(t[t.length]=n[a][o],e[n[a][o]]=!0);return t},createGrid:function(e){var t,i,n,s,a=this,o=this;e?(s=e,os=e.attr("id"),o.settings.options=e.data("datagrid").settings):s=o.modal.element.find("#".concat(os)),this.settings.minWidth&&(s=this.applyMinWidth(s)),o.settings.options&&("single"===o.settings.options.selectable&&o.settings.autoApply&&(o.settings.options.cellNavigation=!1,s.find("tr").addClass("is-clickable")),o.settings.options.isList=!0,s.data("datagrid")||s.datagrid(o.settings.options)),o.grid=s.data("datagrid"),!this.settings.title&&o.modal&&o.modal.element.find(".title").not(".selection-count").remove();var r=null===(t=this.settings)||void 0===t||null===(i=null==t?void 0:t.options)||void 0===i||null===(n=null==i?void 0:i.toolbar)||void 0===n||null==n?void 0:n.keywordFilter;!r&&o.modal&&o.modal.element.find(".toolbar").appendTo(o.modal.element.find(".modal-header")),r&&o.grid&&(!o.grid.filterExpr||o.grid.filterExpr&&o.grid.filterExpr[0]&&""!==o.grid.filterExpr[0].value)&&o.grid.keywordSearch(""),s.off("selected.lookup");var l=o.element.val();l&&!this.settings.options.source&&o.selectGridRows(l),this.settings.options.source&&s.off("afterpaging.lookup").on("afterpaging.lookup",(function(){var e=o.element.val();a.selectGridRows(e)})),this.settings.options&&s.on("selected.lookup",(function(e,t){t&&0!==t.length&&(o.settings.validator&&o.settings.validator(o.element,o.modal,o.grid),"single"===o.settings.options.selectable&&o.settings.autoApply&&(o.modal.close(),o.insertRows()))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",(function(){if(!a.initValues||a.initValues&&!a.initValues.length){a.initValues=[];var e=a.element.val();if(e)(e.indexOf(a.settings.delimiter)>1?e.split(a.settings.delimiter):[e]).forEach((function(e){a.initValues.push({value:e,visited:!!a.grid.settings.dataset.filter((function(t){return function(e,t){return(e[a.settings.field]||"").toString()===t.toString()}(t,e)})).length})}))}}))},selectGridRows:function(e){var t=e,i=!1;if(e){if(this.grid&&this.settings.options.source)for(var n=this.grid._selectedRows.length-1;n>-1;n--)isNaN(this.grid._selectedRows[n].idx)&&this.grid._selectedRows.splice(n,1);if(t.indexOf(this.settings.delimiter)>1){for(var s=t.split(this.settings.delimiter),a=!1,o=0;o<s.length;o++)if(a=this.selectRowByValue(this.settings.field,s[o]),this.grid&&this.settings.options.source&&!a){for(var r={},l=!1,c=0;c<this.grid._selectedRows.length;c++)this.grid._selectedRows[c].data[this.settings.field].toString()===s[o].toString()&&(l=!0);l||(r[this.settings.field]=s[o],this.grid._selectedRows.push({data:r})),i=!0}i&&this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(s.length," ").concat(M.translate("Selected")))}else this.selectRowByValue(this.settings.field,t)}},selectRowByValue:function(e,t){if(!this.settings.options)return!1;var i=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,n=[];if(!i)return!1;for(var s=0;s<i.length;s++){var a,o=!1;if("function"==typeof this.settings.match&&this.settings.match(t,i[s],this.element,this.grid)&&(o=!0),"function"!=typeof this.settings.match&&(null===(a=i[s][e])||void 0===a||null==a?void 0:a.toString())===(null==t||null==t?void 0:t.toString())&&(o=!0),o){var r=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(s)):s;n.push(r)}}return!!(this.grid&&n.length>0)&&(this.grid.selectRows(n,!1,!0),!0)},insertRows:function(){var e="";this.selectedRows=this.grid.selectedRows();for(var t=0;t<this.selectedRows.length;t++){var i="";i="function"==typeof this.settings.field?this.settings.field(this.selectedRows[t].data,this.element,this.grid):this.selectedRows[t].data[this.settings.field],e+=(0!==t?this.settings.delimiter:"")+i;var n=this.selectedRows[t].idx;this.settings.options.dataset&&this.settings.options.dataset[n]&&delete this.settings.options.dataset[n]._selected}this.element.val(e).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.parent().removeClass("is-disabled")},disable:function(){this.element.prop("disabled",!0),this.element.parent().addClass("is-disabled")},readonly:function(){this.element.prop("readonly",!0)},applyAutoWidth:function(){var e=this.element.val(),t=e.length,i=e===e.toUpperCase(),n=!isNaN(e);this.element.attr("size",t+(i&&!n?2:1))},applyMinWidth:function(e){if(null==this.settings.minWidth)return e;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var t="".concat(this.settings.minWidth,"px");e.css({"min-width":t})}return e},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings))},updateDataset:function(e,t){this.settings.options.dataset=e,t&&t.activePage&&(this.settings.options.activePage=t.activePage),t&&t.pagesize&&(this.settings.options.pagesize=t.pagesize),this.grid&&this.grid.updateDataset(e,t)},destroy:function(){$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.off("keyup.lookup"),this.element.unwrap(),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),$.removeData(this.element[0],"lookup")}},$.fn.lookup=function(e){return this.each((function(){var t=$.data(this,"lookup");t?t.updated(e):t=$.data(this,"lookup",new ls(this,e))}))};var ds={Input:function(e,t,i,n,s,a,o,r){this.name="input",this.originalValue=i,this.useValue=!!s.inlineEditor,this.init=function(){s.inlineEditor?this.input=n.find("input"):this.input=$('<input type="'.concat(s.inputType||"text",'" autocomplete="off"/>')).appendTo(n),cs(this.input,e,t,i,0,s,0,0,r)},this.val=function(e){var t;return e&&this.input.val(e),s&&s.numberFormat&&"percent"===s.numberFormat.style?(t=this.input.val().trim().replace(/(\s%?|%)$/g,""),M.parseNumber(t)/100):this.input.val()},this.focus=function(){this.input.focus().select()},this.destroy=function(){var e=this;s.inlineEditor||setTimeout((function(){e.input.remove()}),0)},this.init()},Textarea:function(e,t,i,n,s){this.name="textarea",this.originalValue=i,this.init=function(){n.addClass("datagrid-textarea-cell-wrapper");var e=n.get(0).scrollHeight,t=s.editorOptions&&s.editorOptions.minHeight?'style="min-height: '.concat(s.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(t,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(n);var i=s.editorOptions?s.editorOptions:{};"characterCounter"in i||(i.characterCounter=!1),this.api=this.input.data("autogrow-start-height",e).textarea(s.editorOptions).data("textarea"),this.input.on("click.textareaeditor",(function(e){e.stopPropagation()})),s.maxLength&&this.input.attr("maxlength",s.maxLength),s.uppercase&&this.input.addClass("uppercase-text")},this.val=function(e){return e&&this.input.focus().val(e),this.input.val()},this.focus=function(){this.input.focus().select()},this.destroy=function(){var e=this;n.removeClass("datagrid-textarea-cell-wrapper"),setTimeout((function(){e.input.off("click.textareaeditor"),e.input.remove()}),0)},this.init()},Editor:function(e,t,i,n,s,a,o){this.name="editor",this.originalValue=i,this.init=function(){var e=this,t=$.extend({},{buttons:{editor:["bold","italic","underline","strikethrough","separator","foreColor"],source:[]},excludeButtons:{editor:[]}},s.editorOptions);this.editorWidth=o.setUnit(t.width||n.outerWidth()),delete t.width,n[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat(h.unescapeHTML(i),"</div>\n        </div>"),this.td=n.closest("td"),this.input=$(".editor",n),this.input.popover({content:$(".editor-wrapper",n),placementOpts:{x:0,y:"-".concat(parseInt(n[0].style.height,10)+35),parent:this.td,parentXAlignment:M.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup"}).editor(t).on("hide.editor",(function(){o.commitCellEdit(e.input)})).on("keydown.editor",(function(t){var i=t.which||t.keyCode||t.charCode||0;if((t.ctrlKey||t.metaKey)&&(13===i||10===i)){var n=e.input.data("tooltip");n&&(n.hide(),o.setNextActiveCell(t))}})),C.fixSVGIcons($("#editor-popup"))},this.val=function(){return this.input.html()},this.focus=function(){var e=this;setTimeout((function(){e.input.focus()}),0)},this.destroy=function(){var e=this;n.removeAttr("style"),o.quickEditMode=!1,e.input.off("hide.editor keydown.editor"),setTimeout((function(){e.input.remove()}),0)},this.init()},Checkbox:function(e,t,i,n,s,a,o){this.name="checkbox",this.originalValue=i,this.useValue=!0,this.container=n,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(n),this.input.after('<label class="checkbox-label"></label>'),s.align&&this.input.addClass("l-".concat(s.align,"-text"))},this.val=function(e){var t;if(void 0===e)return this.input.prop("checked");t=s.isChecked?s.isChecked(e):e,"click"!==a.type&&("keydown"!==a.type||32!==a.keyCode)||$(a.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(t=!t,o.setNextActiveCell(a)),this.input.prop("checked",t)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var e=this;setTimeout((function(){e.input.next(".checkbox-label").remove(),e.input.remove()}),0)},this.init()},Colorpicker:function(e,t,i,n,s,a,o){this.name="colorpicker",this.originalValue=i,this.useValue=!0,i=h.stripTags(i),this.init=function(){this.input=$('<input id="colorpicker-'.concat(t,'" name="colorpicker-').concat(t,'" class="colorpicker" value="').concat(i,'" type="text" autocomplete="off"/>')).appendTo(n),this.input.colorpicker(s.editorOptions)},this.val=function(e){return e?this.input.val(e):this.input.val()},this.focus=function(){var t=this;this.input.trigger("openlist"),o.rowNodes(e).removeClass("is-hover-row"),this.input.focus().select(),this.input.off("listclosed").on("listclosed",(function(){o.commitCellEdit(t.input),n.parent("td").focus()}))},this.destroy=function(){},this.init()},Dropdown:function(e,t,n,s,a,o,r,l){this.name="dropdown",this.originalValue=n,this.useValue=!0,this.cell=r.activeCell,this.init=function(){var c=this;if(a.inlineEditor)this.input=s.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(s),a.options){var d,h,u;n=r.fieldValue(l,a.field);for(var p=a.caseInsensitive&&"string"==typeof n?n.toLowerCase():n,g=0;g<a.options.length;g++)d=$("<option></option>"),h=a.options[g],u=a.caseInsensitive&&"string"==typeof h.value?h.value.toLowerCase():h.value,(h.selected||p===u)&&(d.attr("selected","true"),this.originalValue=u),d.attr("value",h.value).attr("id",h.id).attr("data-type",i(h.value)),d.text(h.label),this.input.append(d)}var f=a.editorOptions||{};f.cssClass&&/is-editing/g.test(f.cssClass)||(f.cssClass=f.cssClass||"",f.cssClass+=" is-editing"),this.input.dropdown(f),this.input.on("requestend",(function(){c.val(c.datasetValue)})),this.input.data("dropdown").settings.sourceArguments={column:a,container:s,grid:r,cell:t,event:o,row:e,rowData:l,value:n}}},this.val=function(e){if(this.datasetValue=e,void 0!==e){var t=a.caseInsensitive&&"string"==typeof e?e.toLowerCase():e;this.input.val(e),this.input.find("option").each((function(){var e=$(this),i=e.attr("value"),n=e.attr("data-type"),s=i;"number"===n?s=parseFloat(i):"boolean"===n?s="true"===i:"string"===n&&a.caseInsensitive&&(s=i.toLowerCase()),s===t&&e.attr("selected","true")}))}var i=this.input.find(":selected"),n=i.attr("value"),s=i.attr("data-type");return"number"===s?n=parseFloat(n):"boolean"===s&&(n="true"===n),void 0===n&&(n=i.text()),n},this.focus=function(){var t=this;"click"===o.type?(this.input.trigger("openlist"),r.rowNodes(e).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus();this.input.off("listclosed").on("listclosed",(function(e,i){r.commitCellEdit(t.input),"select"!==i?"tab"===i&&setTimeout((function(){s.parent("td").focus()}),100):s.parent("td").focus()}))},this.destroy=function(){},this.init()},Date:function(e,t,i,n,s,a,o){this.name="date",this.originalValue=i,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(n),this.input.datepicker(s.editorOptions||{dateFormat:s.dateFormat})},this.val=function(i){return"0000"!==i&&"000000"!==i&&"00000000"!==i||(i=""),i&&this.input.val(i),as.Date(e,t,this.input.val(),s,!0)},this.focus=function(){var e=this;this.input.select().focus(),"click"===a.type&&$(a.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.input.on("listclosed",(function(){e.input.closest("td").removeClass("is-focused"),setTimeout((function(){e.input.trigger("focusout"),n.parent().focus(),o.setNextActiveCell(a)}),1)}))},this.destroy=function(){var e=this;setTimeout((function(){o.quickEditMode=!1,e.input.remove()}),0)},this.init()},Fileupload:function(e,t,i,n,s,a,o){var r=this,l=C.mergeSettings(void 0,s.editorOptions,{allowedTypes:"*"}),c=l.allowedTypes.split(/[\s|]+/g),d=C.uniqueId(this,"fileupload-".concat(e,"-").concat(t,"-")),u=l.useMultiple?" multiple":"",p=l.isDisabled?" disabled":"",g="";if(1===c.length)"*"!==c[0]&&(g=".".concat(h.ensureAlphaNumeric(c[0])));else for(var f=0,m=c.length;f<m;f++)g+=".".concat(h.ensureAlphaNumeric(c[f])+(f!==m-1?",":""));""!==g&&(g=' accept="'.concat(g,'"')),this.name="fileupload",this.originalValue=i,this.status="init",this.useValue=!0,this.init=function(){d=h.ensureAlphaNumeric(d),u=h.ensureAlphaNumeric(u),p=h.ensureAlphaNumeric(p),this.input=$('<input id="'.concat(d,'" name="').concat(d,'" class="fileupload" type="file" ').concat(g).concat(u).concat(p,' autocomplete="off"/>')),n.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(s.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(e){return e?(e=h.stripTags(e),this.input.attr("value",e),e):this.input.val()},this.focus=function(){var e=function(){""!==r.originalValue&&(r.status="clear"),o.commitCellEdit(r.input)},t=function(){r.api&&($("body").one("focusin.fileuploadeditor",(function(){setTimeout((function(){"change"!==r.status&&(r.status="cancel",o.commitCellEdit(r.input))}),100)})),r.api.fileInput.trigger("click"))};if(r.input.on("change.fileuploadeditor",(function(){r.status="change",o.commitCellEdit(r.input)})),"keydown"===a.type){var i=a.which||a.keyCode||a.charCode||0;8===i||46===i?e():13===i||10===i?t():o.commitCellEdit(r.input)}if("click"===a.type){var n=$(a.target);n.is(".icon-close")?e():n.is(".icon-fileupload")?t():o.commitCellEdit(r.input)}},this.destroy=function(){r.input.off("change.fileuploadeditor"),o.quickEditMode=!1,r.api&&r.api.destroy()},this.init()},Time:function(e,t,i,n,s,a,o){this.name="time",this.originalValue=i,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(n),this.api=this.input.timepicker(s.editorOptions||"").data("timepicker")},this.val=function(e){return e&&this.input.val(e),this.input.val()},this.focus=function(){var e=this;this.input.select().focus(),"click"===a.type&&$(a.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.api.trigger.on("hide.editortime",(function(){e.input.closest("td").removeClass("is-focused"),setTimeout((function(){e.input.trigger("focusout"),n.parent().focus(),o.setNextActiveCell(a)}),1)}))},this.destroy=function(){var e=this;e.api&&e.api.trigger&&e.api.trigger.off("hide.editortime"),setTimeout((function(){o.quickEditMode=!1,e.input.remove()}),0)},this.init()},Lookup:function(e,t,i,n,s,a,o,r){this.name="lookup",this.originalValue=i,this.init=function(){this.input=$('<input class="lookup '.concat("right"===s.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(n),cs(this.input,e,t,i,0,s,0,0,r),s.editorOptions||(s.editorOptions={}),s.editorOptions.options||(s.editorOptions.options={}),s.editorOptions.options.toolbar||(s.editorOptions.options.toolbar={}),s.editorOptions.options.toolbar.title||(s.editorOptions.options.toolbar.title=s.name),this.input.lookup(s.editorOptions),n.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:s,container:n,grid:o,cell:t,event:a,row:e,rowData:r,value:i}},this.val=function(e){return e?this.input.val(e):this.input.val()},this.focus=function(){var e=this.input.data("lookup"),t=this.input.closest("td");"keydown"===a.type&&(this.input.select().focus(),t.on("keydown.editorlookup",(function(e){40===e.keyCode&&(e.preventDefault(),e.stopPropagation())}))),"click"===a.type&&($(a.target).is("svg")?e.openDialog(a):(this.input.select().focus(),t.on("touchcancel.editorlookup touchend.editorlookup",".trigger",(function(){e.openDialog()})))),this.input.on("change.editorlookup",(function(){o.quickEditMode=!1}))},this.destroy=function(){var e=this,t=this.input.closest("td");setTimeout((function(){o.quickEditMode=!1,t.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),e.input.remove()}),0)},this.init()},Autocomplete:function(e,t,i,n,s,a,o){this.name="autocomplete",this.originalValue=i,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(n),s.editorOptions||(s.editorOptions={}),s.editorOptions.width=n.parent().width(),s.editorOptions.offset={left:-1,top:"medium"===o.settings.rowHeight?1:5},s.maxLength&&this.input.attr("maxlength",s.maxLength),s.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(s.editorOptions)},this.val=function(e){return e?this.input.val(e):this.input.val()},this.focus=function(){o.quickEditMode=!0,this.input.select().focus()},this.destroy=function(){var e=this;setTimeout((function(){o.quickEditMode=!1,e.input.remove()}),0)},this.init()},Spinbox:function(e,t,i,n,s,a,o){this.name="spinbox",this.originalValue=i,this.useValue=!0,this.init=function(){if(s.inlineEditor)this.input=n.find("input");else{var e='<label for="spinbox-'.concat(t,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(t,'" name="spinbox-').concat(t,'" type="text" class="spinbox" value="\'+ ').concat(i,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');u.append(n,e,"<label><span><input>"),this.input=n.find("input"),s.editorOptions||(s.editorOptions={}),this.input.spinbox(s.editorOptions)}},this.val=function(e){return e&&this.input.val(e),parseInt(this.input.val(),10)},this.focus=function(){o.quickEditMode=!0,this.input.select().focus()},this.destroy=function(){var e=this;s.inlineEditor||setTimeout((function(){o.quickEditMode=!1;var t=e.val();e.input&&e.input.data("spinbox")&&e.input.data("spinbox").destroy(),e.input&&e.input.remove(),n.text(t)}),0)},this.init()},Favorite:function(e,t,i,n,s,a,o){this.name="favorite",this.useValue=!0,this.originalValue=i,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:i?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(n),this.input=this.input.find("input")},this.val=function(e){var t;if(void 0===e)return this.input.prop("checked");t=s.isChecked?s.isChecked(e):e,"click"!==a.type&&("keydown"!==a.type||32!==a.keyCode)||$(a.target).is(".datagrid-cell-wrapper")||(t=!t,o.setNextActiveCell(a)),this.input.prop("checked",t),this.input.find("use").attr("href",t?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var e=this;setTimeout((function(){e.input.parent().remove()}),0)},this.init()}},hs={cleanExtra:function(e,t){var i=[];if(i=!t&&e?hs.datasetToHtml(e):hs.appendRows(t.settings.dataset,t.table[0].cloneNode(!0),t),!e&&!i[0].querySelector("thead")){for(var n=i[0].querySelector("tbody"),s=i[0].createTHead(),a=s.insertRow(0),o=t.headerNodes(),r=0;r<o.length;r++){var l=o[r],c=a.insertCell(r);c.innerHTML=l.querySelector(".datagrid-header-text").textContent.trim(),c.setAttribute("class",l.classList),c.setAttribute("id",l.getAttribute("id")),l.getAttribute("data-exportable")&&c.setAttribute("data-exportable",l.getAttribute("data-exportable"))}n.parentNode.insertBefore(s,n)}(i=function(e){var t=function(e){e.parentNode&&e.parentNode.removeChild(e)},i=[];return[].slice.call(e[0].querySelectorAll("tr")).forEach((function(e){e.classList.contains("is-hidden")||e.classList.contains("datagrid-expandable-row")?t(e):[].slice.call(e.querySelectorAll("th, td, div, span")).forEach((function(e){if(e.classList.contains("is-hidden"))t(e);else{var n=e.getAttribute("data-exportable");if(n&&"no"===n){var s=parseInt(e.id.slice(-1),10);return i.push(s+1),void t(e)}var a=e.getAttribute("aria-colindex");if("td"===e.tagName.toLowerCase()&&a&&-1!==i.indexOf(parseInt(a,10)))t(e);else{for([].slice.call(e.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach((function(e){return t(e)}));e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);var o=e.textContent;"="===o.substr(0,1)&&""!==o.substr(1,1)&&(e.textContent="'".concat(o,"'"))}}}))})),e}(i),t&&t.settings.exportConvertNegative)&&[].slice.call(i[0].querySelectorAll("td")).forEach((function(e){e.textContent=e.textContent.replace(/^(.+)(-$)/,"$2$1")}));return i},save:function(e,t){var i=(t.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],n="string"==typeof i&&/\b(xlsx|xls)\b/g.test(i);if("ie"===m.browser.name||"edge"===m.browser.name){if(window.navigator.msSaveBlob){var s=new Blob([e],{type:"application/csv;charset=utf-8;"});navigator.msSaveBlob(s,t)}}else if(window.URL.createObjectURL){var a=new Blob([e],{type:"application/".concat(n?"vnd.ms-excel":"csv",";charset=utf-8;")}),o=URL.createObjectURL(a),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}else{var l=document.createElement("a");l.href=this.base64(e),l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},datasetToHtml:function(e){for(var t="<tbody>",i=function(i,n){t+="<tr>",Object.keys(e[i]).forEach((function(n,s){e[i]&&Object.prototype.hasOwnProperty.call(e[i],n)&&(t+="<td>".concat(e[i][n],"</td>"))})),t+="</tr>"},n=0,s=e.length;n<s;n++)i(n);return t+="</tbody>",$("<table></table>").append(t)}};hs.appendRows=function(e,t,i){var n,s=(n=t)&&(n instanceof jQuery||n.constructor.prototype.jquery)?t:$(t);t=s[0];var a="",o=t.querySelector("tbody");o.innerHTML="";return e.forEach((function(e,t){!function e(t,n){if(!t._isFilteredOut){var s=i.rowHtml(t,n,n,!1,!1,n,!0),o=document.createElement("tr");if(o.innerHTML=s.left+s.center+s.right,a+=o.outerHTML,t.children)for(var r=0,l=t.children.length;r<l;r++)e(t.children[r],r)}}(e,t)})),o.insertAdjacentHTML("beforeend",a),s},hs.base64=function(e){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(e)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(e)))},hs.copyToDataSet=function(e,t,i,n,s){for(var a=function(e,t,i,n){for(var s=0,a=e.length;s<a;s++){var o=t.columns[n];o.formatter!==as.Readonly&&(o.editor.name===ds.Input.name?("integer"===o.filterType||"decimal"===o.filterType||"number"===o.filterType)&&isNaN(e[s].trim())||(i[o.field]=e[s]):o.editor.name===ds.Input.name&&(isNaN(Date.parse(e[s]))||(i[o.field]=new Date(e[s])))),n++}},o=e.length,r=s.settings.columns.length,l=0;l<o;l++){var c=e[l].split("\t"),d=i;if(t<n.length){var h=n[t];a(c,s.settings,h,d)}else{for(var u={},p=0;p<r;p++)u[s.settings.columns[p].field]="";a(c,s.settings,u,d),n.push(u)}t++}s.renderRows(),s.syncSelectedUI(),s.pagerRefresh("bottom")},hs.exportToExcel=function(e,t,i,n){var s,a={worksheet:t||"Worksheet",table:hs.cleanExtra(i,n)[0].innerHTML};e="".concat(e||n.element[0].id||"Export",".xls"),hs.save((s=a,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>'.replace(/{(\w+)}/g,(function(e,t){return s[t]}))),e)},hs.exportToCsv=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",s=arguments.length>3?arguments[3]:void 0,a=function(e){return e&&"object"===i(e)&&e.constructor===Object},o=function(e){return/^(false|0+|null)$/gi.test(e)},r={firstLine:!0,char:","};if("sep=,"!==n&&!o(n)){var l=function(e){return'"'!==e?e:r.char};if(a(n))r.firstLine=!o(n.firstLine),"string"!=typeof n.char||1!==n.char.length||o(n.char)||(r.char=l(n.char));else if("string"==typeof n)if(1!==n.length||o(n)){if(/^sep=.$/.test(n)){var c=n.replace("sep=","");r.char=o(c)?r.char:l(c)}}else r.char=l(n)}var d=function(e){var t=[];return[].slice.call(e[0].querySelectorAll("tr")).forEach((function(e){var i=[];[].slice.call(e.querySelectorAll("td, th")).forEach((function(e){return i.push(e.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())})),t.push(i.join('"'.concat(r.char,'"')))})),r.firstLine&&t.unshift(["sep=".concat(r.char)]),'"'.concat(t.join('"\n"'),'"')},h=hs.cleanExtra(t,s);e="".concat(e||s.element[0].id||"Export",".csv"),hs.save(d(h),e)};var us,ps,gs,fs,ms=(us=C.equals,ps=function(e,t){return e.reduce((function(e,i){var n,s=function(e,t){for(var i={},n=0,s=t.length;n<s;n++)i[t[n]]=e[t[n]];return i}(i,t);return n=s,e.some((function(e){return us(e,n)}))||e.push(s),e}),[])},gs=function(e,t){var i=[];return e.map((function(e,n){for(var s in t)if(t[s]!==e[s])return;e.idx=n,i.push(e)})),i},(fs=function(e,t){return ps(e,t).map((function(t){return{key:t,values:gs(e,t).map((function(e){return e}))}}))}).register=function(e,t){return fs[e]=function(e,i,n){return this.extra=n,fs(e,i).map(t,this)}},fs);ms.register("none",(function(e){return $.extend({},e.key,{values:e.values})})),ms.register("sum",(function(e){var t=this.extra,i=e.values.map((function(e){return e[t]})).filter((function(e){return null!=e}));return $.extend({},e.key,{values:e.values},{sum:i.reduce((function(e,t){return Number(e)+Number(t)}),0)})})),ms.register("max",(function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{max:Math.max.apply(Math,c(e.values.map((function(e){return e[t]})).filter((function(e){return null!=e}))))})})),ms.register("min",(function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{min:Math.min.apply(Math,c(e.values.map((function(e){return e[t]})).filter((function(e){return null!=e}))))})})),ms.register("avg",(function(e){var t=this.extra,i=e.values.map((function(e){return e[t]})).filter((function(e){return null!=e}));return $.extend({},e.key,{values:e.values},{avg:i.reduce((function(e,t){return Number(e)+Number(t)}),0)/i.length})})),ms.register("count",(function(e){var t=this.extra,i=e.values.map((function(e){return e[t]})).filter((function(e){return null!=e}));return $.extend({},e.key,{values:e.values},{count:i.length})})),ms.register("list",(function(e){var t=this.extra;return $.extend({},e.key,{values:e.values},{list:e.values.map((function(e){for(var i=[],n=0,s=t.list.length;n<s;n++){var a=!!t.exclude&&e[t.exclude];e[t.list[n]]&&!a&&i.push({value:e[t.list[n]],key:t.list[n]})}return i}))})}));var vs={aggregate:function(e,t){for(var i={},n=this,s=0,a=t.length;s<a;s++)t[s].aggregator&&function(){var a=t[s].field;n.sum=function(e,t){if(t._isFilteredOut)return e;var i;i=a.indexOf(".")>-1?a.split(".").reduce((function(e,t){return e?e[t]:""}),t):t[a],i=Number(i);var n=E.decimalPlaces(i),s=E.decimalPlaces(e);return Number((e+i).toFixed(Math.max(n,s)))};var o=e.reduce(n[t[s].aggregator],0);if(a.indexOf(".")>-1)for(var r=i,l=0,c=a.split(".").length;l<c;l++)l===a.split(".").length-1?r[a.split(".")[l]]=o:(a.split(".")[l]in r||(r[a.split(".")[l]]={}),r=r[a.split(".")[l]]);else i[a]=o}();return i}},bs={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"normal",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,twoLineHeader:!1,clickToSelect:!0,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[10,25,50,75],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:M?M.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"},searchExpandableRow:!0,allowChildExpandOnMatch:!1};function ys(e,t){this.settings=C.mergeSettings(e,t,bs),this.element=$(e),t.dataset&&(this.settings.dataset=t.dataset),void 0===this.settings.frozenColumns.expandRowAcrossAllCells&&(this.settings.frozenColumns.expandRowAcrossAllCells=bs.frozenColumns.expandRowAcrossAllCells),this.init()}ys.prototype={get pagerAPI(){var e;return this.tableBody&&this.tableBody.length&&(e=this.tableBody.data("pager")),e},init:function(){var e=$("html");this.isTouch=m.features.touch,this.isSafari=e.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.isInModal=!1,this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerBar])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(e){var t=this.settings;if(e&&t.columns&&(!t.columns||t.columns.length)){for(var i={index:-1},n=0,s=t.columns.length;n<s;n++)t.columns[n].id===e&&(i.index=n);i.index>-1&&t.columns.splice(i.index,1)}},setInlineActionableMode:function(){var e=this.settings;if(e.columns&&(!e.columns||e.columns.length)){for(var t={index:-1},i=0,n=e.columns.length;i<n;i++)e.columns[i].inlineEditor&&(t.index=i);this.inlineMode=t.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(e,t){if(t||(t={}),e&&(t.type="filterrow"),this.settings.source)return t.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(t);this.loadData(this.settings.dataset,t)},firstRender:function(){(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(this.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),this.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperLeft),this.element.append(this.bodyWrapperLeft)),this.bodyWrapperCenter=$('<div class="datagrid-wrapper center scrollable-x'.concat(this.hasRightPane?"":" scrollable-y",'"></div>')),this.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperCenter),this.element.append(this.bodyWrapperCenter),this.hasRightPane&&(this.bodyWrapperRight=$('<div class="datagrid-wrapper right scrollable-y"></div>'),this.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperRight),this.element.append(this.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),"normal"!==this.settings.rowHeight&&(this.hasLeftPane&&this.tableLeft.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.table.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.hasRightPane&&this.tableRight.addClass("".concat(this.settings.rowHeight,"-rowheight")),this.element.addClass("".concat(this.settings.rowHeight,"-rowheight"))),this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),this.table.empty(),this.clearCache(),this.container=this.element.closest(".datagrid-container"),this.renderRows(),this.renderHeader(),this.stretchColumnDiff<0)&&(this.bodyColGroup.find("col").eq(this.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px"));this.settings.emptyMessage&&(this.setEmptyMessage(this.settings.emptyMessage),this.checkEmptyMessage()),this.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(this.buttonSelector,this.table).button(),this.handlePaging(),this.triggerSource("initial")},addRow:function(e,t){var i,n,s=this,a=this,o=!1,r=0;t&&"top"!==t||(t="top",o=!0);var l={icon:"new",text:M.translate("New"),tooltip:M.translate("New")};(e=e||{}).rowStatus=e.rowStatus||l,this.saveDirtyRows();var c=this.settings.dataset;if(this.settings.groupable){c=this.originalDataset||c;var d=-1;if("string"==typeof t){var h=this.settings.groupable.fields[0],u=function(e,t,i,n){for(var s=0,a=e.length;s<a;s++){var o=n?a-1-s:s;if(e[o][t]===i)return o}return-1}(c,h,e[h],!o);d=u>-1?o?u:u+1:0,c.splice(d,0,e),r=d}else c.splice(t,0,e),r=t}else"string"==typeof t?(c[o?"unshift":"push"](e),r=o?r:c.length-1):(c.splice(t,0,e),r=t);this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(t),this._selectedRows.forEach((function(e){void 0!==e.pagingIdx&&e.pagingIdx>=r&&(e.idx++,e.pagingIdx++)})),this.clearCache(),this.renderRows(),this.settings.groupable&&(n=this.dataRowNode(r),r=this.visualRowIndex(n)),this.syncSelectedUI(),setTimeout((function(){a.setActiveCell(r,0),s.settings.groupable||(n=s.visualRowNode(r)),i={row:r,cell:0,target:n,value:e,oldValue:{}},a.element.triggerHandler("addrow",i)}),100)},pagerRefresh:function(e,t){if(this.pagerAPI){var i={};"string"==typeof e?i.activePage="top"===e?1:this.pagerAPI.state.pages:"number"==typeof e&&(i.activePage=Math.floor(e/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(i.total=this.settings.dataset.length,i.pagesize=this.settings.pagesize),t&&(i.activePage=this.settings.pagesize*this.pagerAPI.activePage>this.settings.dataset.length?1:this.pagerAPI.activePage),this.renderPager(i,!0)}},removeRow:function(e,t,i){var n=this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')),s=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,a=s[e];this.saveDirtyRows(),this.unselectRow(e,t),s.splice(e,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,t||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(t){return t.row!==e})),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var o={row:e,cell:null,target:n,item:a,oldValue:a};return i?o:(this.element.trigger("rowremove",o),!0)},removeSelected:function(e){this._selectedRows.sort((function(e,t){return e.idx<t.idx?-1:e.idx>t.idx?1:0}));for(var t=[],i=this._selectedRows.length-1;i>=0;i--)t.push({row:this._selectedRows[i].idx,item:this._selectedRows[i],cell:null,target:null}),this.removeRow(this._selectedRows[i].idx,i>0,e);e&&this.element.trigger("rowremove",t)},updateDataset:function(e,t){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var i=this.element.parent().find(".toolbar").find(".searchfield");i.val(""),i.parent().removeClass("has-text"),this.clearFilter()}this.loadData(e,t)},triggerSource:function(e,t,i){if(this.settings.source){var n=this,s={};this.pagerAPI&&(s=this.pagerAPI.state),"string"==typeof e?(s.type=e,s.trigger=i):e&&(s=C.extend({},s,e)),t&&"function"!=typeof t&&"string"==typeof t.type&&(s.type=t.type),!1!==this.element.triggerHandler("beforepaging",s)&&(this.sortColumn&&this.sortColumn.sortId&&(s.sortAsc=this.sortColumn.sortAsc,s.sortField=this.sortColumn.sortField,s.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(s.filterExpr=this.filterExpr),this.element.trigger("paging",s),this.settings.source(s,(function(e,i){i.activePage>-1&&(n.activePage=i.activePage),i.grandTotal&&(n.grandTotal=i.grandTotal),n.loadData(e,i),t&&"function"==typeof t&&t(!0),n.element.trigger("afterpaging",s),n.afterPaging(s)})))}},afterPaging:function(e){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(e)?this.element.removeClass("paginated"):this.element.addClass("paginated"),e.total&&(this.recordCount=e.total,this.displayCounts(e.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(e,t){this.settings.dataset=e,t||(t={}),"filterrow"===t.type&&(t.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,t.pagesize=this.settings.pagesize,t.total=t.total||-1,t.type="filterrow"),t.activePage||(t.activePage=1,t.pagesize=this.settings.pagesize,t.total=-1,this.settings.treeGrid&&(t.preserveSelected=!0)),this.settings.source&&t.grandTotal?this.grandTotal=t.grandTotal:this.grandTotal=null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(t.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),t.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||this.unSelectAllRows(),t.preserveSelected||"initial"!==t.type&&t.type||this.unSelectAllRows(),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===t.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(t,!0),this.displayCounts()},uniqueId:function(e){return e=null==e?"":e,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(e):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(e)).replace(/--/g,"-")},visibleColumns:function(e){for(var t=[],i=0;i<this.settings.columns.length;i++){var n=this.settings.columns[i];n.hidden||(e&&"selectionCheckbox"===n.id||t.push(n))}return t},getColumnGroup:function(e){for(var t=0,i=this.settings.columnGroups,n=0;n<i.length;n++)if(!i[n].hidden&&(t+=i[n].colspan)>=e)return this.uniqueId("-header-group-".concat(n));return""},updateColumnGroup:function(){var e=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=C.deepCopy(e)),this.settings.groupable)for(var t=this.tableBody.find(".datagrid-rowgroup-header"),i=this.visibleColumns().length,n=0;n<t.length;n++)t[n].children[0].setAttribute("colspan",i);else if(e&&this.colGroups){var s,a=[].slice.call(this.colGroups[0].querySelectorAll("th")),o=this.settings.columns,r=o.length,l=this.visibleColumns().length,c=e.map((function(e){return parseInt(e.colspan,10)})),d=function(){return c.reduce((function(e,t){return e+t}),0)},h=function(){var e=d();return e>r?e-r:r-e};if(d()>r)for(var u=!0,p=c.length-1;p>=0&&u;p--)s=h(),c[p]>=s?(c[p]-=s,u=!1):c[p]=0;var g=0,f=0;if(c.forEach((function(t,i){for(var n=t,s=g+t;g<s;g++)g<r&&o[g].hidden&&n--;n>0&&(f+=n);var l=a[i];l.setAttribute("colspan",n>0?n:1),e[i].hidden||n<1?l.classList.add("hidden"):l.classList.remove("hidden")})),f<l){var m=a[a.length-1];s=l-f,m.setAttribute("colspan",s>0?s:1)}}},updateGroupHeadersAfterColumnReorder:function(e,t){var i=this.settings.columnGroups;if(i){this.originalColGroups||(this.originalColGroups=C.deepCopy(i));var n=i.map((function(e){return parseInt(e.colspan,10)})),s={from:null,to:null,total:0};n.forEach((function(i,n){s.total+=i,s.total>e&&null===s.from&&(s.from=n),s.total>t&&null===s.to&&(s.to=n)})),s.from!==s.to&&(i[s.from].colspan-=1,i[s.to].colspan+=1)}},headerText:function(e){var t=e.name?e.name:"";return t||"drilldown"!==e.id?t:(t=M.translate("Drilldown"),'<span class="audible">'.concat(t,"</span>"))},getContainer:function(e){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(e)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(e)>-1?"right":"center"},renderHeader:function(){var e,t=this,i={left:"",center:"",right:""},n=this.settings.columnGroups;if(n){this.element.addClass("has-group-headers");var s,a=this.settings.columns,o=a.length,r=this.visibleColumns().length,l=n.map((function(e){return parseInt(e.colspan,10)})),c=function(){return l.reduce((function(e,t){return e+t}),0)},d=function(){var e=c();return e>o?e-o:o-e};if(i.left+='<tr role="row" class="datagrid-header-groups">',i.center+='<tr role="row" class="datagrid-header-groups">',i.right+='<tr role="row" class="datagrid-header-groups">',c()>o)for(var h=!0,p=l.length-1;p>=0&&h;p--)s=d(),l[p]>=s?(l[p]-=s,h=!1):l[p]=0;var g=0,f=0;if(l.forEach((function(s,r){for(var l=s,c=g+s;g<c;g++)g<o&&a[g].hidden&&l--;var d=n[r].hidden||l<1?' class="hidden"':"",h=' colspan="'.concat(l>0?l:1,'"'),u=n[r].align?"l-".concat(n[r].align,"-text"):"";e=t.uniqueId("-header-group-".concat(r)),l>0&&(f+=l);var p=t.getContainer(t.settings.columns[r].id);i[p]+="<th".concat(d).concat(h,' id="').concat(e,'" class="').concat(u,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(n[r].name,"</span></div></th>")})),f<r){var m=' colspan="'.concat((s=r-f)>0?s:1,'"');t.hasRightPane?i.right+="<th".concat(m,"></th>"):i.center+="<th".concat(m,"></th>")}i.left+="</tr><tr>",i.center+="</tr><tr>",i.right+="</tr><tr>"}else i.left+='<tr role="row">',i.center+='<tr role="row">',i.right+='<tr role="row">';for(var v=0;v<this.settings.columns.length;v++){var b=t.settings.columns[v],y=t.getContainer(b.id),w=t.uniqueId("-header-".concat(v)),x=void 0===b.sortable||b.sortable,C=void 0===b.resizable||b.resizable,k=void 0===b.exportable||b.exportable,T="selectionCheckbox"===b.id,S=this.getHeaderAlignmentClass(b);(t.hasLeftPane||t.hasRightPane)&&(t.settings.frozenColumns.left&&t.settings.frozenColumns.left.indexOf(b.id)>-1||t.settings.frozenColumns.right&&t.settings.frozenColumns.right.indexOf(b.id)>-1)&&(b.hideable=!1),void 0===b.hideable&&(b.hideable=!0);var A="";A+=x?" is-sortable":"",A+=C?" is-resizable":"",A+=b.hidden?" is-hidden":"",A+=b.filterType?" is-filterable":"",A+="ellipsis"===b.textOverflow?" text-ellipsis":"",A=""!==(A+=""!==S?S:"")?' class="'.concat(A.substr(1),'"'):"",i[y]+='<th scope="col" role="columnheader" id="'.concat(w,'" data-column-id="').concat(b.id,'"').concat(b.field?' data-field="'.concat(b.field,'"'):"").concat(b.headerTooltip?' title="'.concat(b.headerTooltip,'"'):"").concat(!1===b.reorderable?' data-reorder="false"':"").concat(n?' headers="'.concat(t.getColumnGroup(v),'"'):"",' data-exportable="').concat(k?"yes":"no",'"').concat(A,">");var D="";x&&(D="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>")),i[y]+='<div class="'.concat(T?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(S,'">\n      <span class="datagrid-header-text').concat(b.required?" required":"",'">').concat(t.headerText(this.settings.columns[v])).concat(" l-center-text"===S?D:"","</span>"),T&&(t.settings.showSelectAllCheckBox?i[y]+='<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox"></span>':i[y]+='<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none"></span>'),x&&" l-center-text"!==S&&(i[y]+=D),i[y]+="</div>".concat(t.filterRowHtml(b,v),"</th>")}i.left+="</tr>",i.center+="</tr>",i.right+="</tr>",void 0===t.headerRow?(t.hasLeftPane&&(t.headerRowLeft=$('<thead class="datagrid-header left">'.concat(i.left,"</thead>")),t.tableLeft.find("colgroup").after(t.headerRowLeft)),t.headerRow=$('<thead class="datagrid-header center">'.concat(i.center,"</thead>")),t.table.find("colgroup").after(t.headerRow),t.hasRightPane&&(t.headerRowRight=$('<thead class="datagrid-header right">'.concat(i.right,"</thead>")),t.tableRight.find("colgroup").after(t.headerRowRight))):(t.hasLeftPane&&u.html(t.headerRowLeft,i.left,"*"),u.html(t.headerRow,i.center,"*"),t.hasRightPane&&u.html(t.headerRowRight,i.right,"*")),n&&t.headerRow&&(t.colGroups=t.headerRow.find(".datagrid-header-groups")),t.syncHeaderCheckbox(this.settings.dataset),t.setScrollClass(),t.attachFilterRowEvents(),t.settings.columnReorder&&t.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function(e){return void 0===e.headerAlign?e.align?" l-".concat(e.align,"-text"):"":" l-".concat(e.headerAlign,"-text")},filterSetDatepicker:function(e,t,i){var n=e.data("datepicker"),s=e.data("is-range");i=i||{};var a=function(){n&&"function"==typeof n.destroy&&n.destroy(),e.datepicker(i)};n&&s||"in-range"!==t?n&&!s||"in-range"===t||(i.range={useRange:!1},e.removeData("is-range"),a()):(e.data("is-range",!0),i.range={useRange:!0},a())},filterRowHtml:function(e,t){var i="",n=this.getHeaderAlignmentClass(e);if(e.filterType){var s,a=e,o=this.uniqueId("-header-filter-".concat(t)),r=Array.isArray(a.filterRowEditorOptions)?a.filterRowEditorOptions:a.options,l="";if("select"===a.filterType&&r){for(var c=!1,d=0,h=r.length;d<h;d++)if(!r[d].label){c=!0;break}c||(l="<option></option>")}switch(i='<div class="datagrid-filter-wrapper'.concat(n,'" ').concat(this.settings.filterable?"":' style="display:none"',">").concat(this.filterButtonHtml(a),'<label class="audible" for="').concat(o,'">').concat(a.name,"</label>"),a.filterType){case"checkbox":break;case"date":i+="<input ".concat(a.filterDisabled?" disabled":"",' type="text" class="datepicker" id="').concat(o,'"/>');break;case"integer":s={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:M.currentLocale.data.numbers?M.currentLocale.data.numbers.group:",",decimal:M.currentLocale.data.numbers?M.currentLocale.data.numbers.decimal:".",negative:M.currentLocale.data.numbers?M.currentLocale.data.numbers.minusSign:"-"}},process:"number"},a.maskOptions=C.extend(!0,{},s,a.maskOptions),i+="<input".concat(a.filterDisabled?" disabled":"",' type="text" id="').concat(o,'" />');break;case"percent":case"decimal":var u={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:M.currentLocale.data.numbers?M.currentLocale.data.numbers.group:",",decimal:M.currentLocale.data.numbers?M.currentLocale.data.numbers.decimal:".",negative:M.currentLocale.data.numbers?M.currentLocale.data.numbers.minusSign:"-"}},process:"number"};a.numberFormat?(s={patternOptions:{decimalLimit:a.numberFormat.maximumFractionDigits}},a.maskOptions=C.extend(!0,{},s,u,a.maskOptions)):a.maskOptions=C.extend(!0,{},u,a.maskOptions),i+="<input".concat(a.filterDisabled?" disabled":"",' type="text" id="').concat(o,'" />');break;case"contents":case"select":if(i+='<select id="'.concat(o,'" ').concat("select"===a.filterType?'class="dropdown"':'multiple class="multiselect"').concat(a.filterDisabled?" disabled":"",">").concat(l),r)for(var p=0,g=r.length;p<g;p++){var f=r[p],m=a.caseInsensitive&&"string"==typeof f.value?f.value.toLowerCase():f.value;f&&""!==m&&(i+='<option value = "'.concat(m,'">').concat(f.label,"</option>"))}i+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(i+='<select id="'.concat(o,'" class="multiselect" multiple').concat(a.filterDisabled?" disabled":"",">"),r)for(var v=0,b=r.length;v<b;v++){var y=r[v],w=a.caseInsensitive&&"string"==typeof y.value?y.value.toLowerCase():y.value;y&&"string"==typeof y.label&&(i+='<option value = "'.concat(w,'">').concat(y.label,"</option>"))}i+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":i+="<input ".concat(a.filterDisabled?" disabled":"",' type="text" class="timepicker" id="').concat(o,'"/>');break;case"lookup":i+="<input ".concat(a.filterDisabled?" disabled":"",' type="text" class="lookup" id="').concat(o,'" >');break;default:i+="<input".concat(a.filterDisabled?" disabled":"",' type="text" id="').concat(o,'"/>')}i+="</div>"}return e.filterType||(i='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(n),'"></div>')),i},attachFilterRowEvents:function(){var e,t=this,i=this;this.settings.filterable&&(this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",(function(){var e=$(this),t=e.data("popupmenu");return t?t.close(!0,!0):e.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",(function(){var t=e.next(".popupmenu-wrapper");C.fixSVGIcons(t),i.hideTooltip()})).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",(function(){var t=e.closest('th[role="columnheader"]'),n=i.columnById(t.attr("data-column-id"))[0];if(n&&"date"===n.filterType){var s=t.find("input"),a=t.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");i.filterSetDatepicker(s,a,n.editorOptions)}i.applyFilter(null,"selected")})).off("close.datagrid-filter").on("close.datagrid-filter",(function(){var e=$(this).data("popupmenu");e&&e.destroy()})),!1})),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",(function(t){return clearTimeout(e),t.stopPropagation(),13!==t.which||(i.applyFilter(null,"enter"),t.preventDefault(),t.stopPropagation(),!1)})),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",(function(n){13!==n.which&&(t.activeCell&&t.activeCell.isFocused&&(t.activeCell.isFocused=!1),clearTimeout(e),e=setTimeout((function(){i.applyFilter(null,"keyup")}),400))})),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each((function(){var e=i.columnById($(this).attr("data-column-id"))[0],t=$(this);if(!e)return!0;t.find("select.dropdown").each((function(){var n=$(this);n.dropdown(e.editorOptions).on("selected.datagrid",(function(){i.applyFilter(null,"selected")})).on("listopened.datagrid",(function(){var e=n.data("dropdown");e&&(C.isInViewport(e.list[0])||i.adjustPosLeft(e.list[0]))})),n.data("dropdown").settings.sourceArguments={column:e,container:t,grid:i,cell:e,event:void 0,row:-1,rowData:{},value:void 0}})),t.find("select.multiselect").each((function(){var n=this,s=$(this);s.multiselect(e.editorOptions).on("selected.datagrid",(function(){var e=$(n);$("#".concat(e.attr("id"))).val(e.val()),i.applyFilter(null,"selected")})),s.data("dropdown").settings.sourceArguments={column:e,container:t,grid:i,cell:e,event:void 0,row:-1,rowData:{},value:void 0}})),e.maskOptions&&t.find("input").mask(e.maskOptions),e.mask&&t.find("input").mask(e.mask);var n=t.find(".datepicker");n.length&&"function"==typeof $().datepicker&&n.datepicker(e.editorOptions||{dateFormat:e.dateFormat}).on("listclosed.datepicker",(function(){i.applyFilter(null,"selected")}));var s=t.find(".lookup");s.length&&"function"==typeof $().lookup&&(e.editorOptions&&(e.editorOptions.clickArguments?e.editorOptions.clickArguments.grid=i:e.editorOptions.clickArguments={grid:i}),s.lookup(e.editorOptions||{}).on("change",(function(){i.applyFilter(null,"selected")})));var a=t.find(".timepicker");return a.length&&"function"==typeof $().timepicker&&a.timepicker(e.editorOptions||{timeFormat:e.timeFormat}),e.mask&&t.find("input").mask({pattern:e.mask,mode:e.maskMode}),null})),i.filterRowRendered=!0)},filterItemHtml:function(e,t,i){var n=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(e)});return'<li class="'.concat(e," ").concat(i?" is-checked":"",'"><a href="#">').concat(n,"<span>").concat(M.translate(t),"</span></a></li>")},filterButtonHtml:function(e){if(!e.filterType)return"";var t=this,i=e.filterDisabled,n=$.isArray(e.filterConditions)?e.filterConditions:[],s=function(e,i,s){var a,o,r=!(!n.length||n[0]!==e)||s;return!n.length||(a=e,o=o||n,$.inArray(a,o)>-1)?t.filterItemHtml(e,i,r):""},a=function(e){return'<button type="button" class="btn-menu btn-filter" data-init="false" '.concat(i?" disabled":"").concat(e?' data-default="'.concat(e,'"'):"",' type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},o="",r="";return"contents"===e.filterType||"select"===e.filterType||"multiselect"===e.filterType?"":("text"===e.filterType&&(r=n.length?n[0]:"contains",o=0===n.length?(o=a(r)+s("contains","Contains",!0)+s("does-not-contain","DoesNotContain")+s("equals","Equals")+s("does-not-equal","DoesNotEqual")+s("is-empty","IsEmpty")+s("is-not-empty","IsNotEmpty")+s("end-with","EndsWith")+s("does-not-end-with","DoesNotEndWith")+s("start-with","StartsWith")+s("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",r):(o=a(r)+n.map((function(e){return s(e,function(e){switch(e=e.split("-").map((function(e){return e=e.charAt(0).toUpperCase()+e.slice(1)})).join("")){case"StartWith":e=e.replace("StartWith","StartsWith");break;case"EndWith":e=e.replace("EndWith","EndsWith");break;case"LessEquals":e=e.replace("LessEquals","LessOrEquals");break;case"GreaterEquals":e=e.replace("GreaterEquals","GreaterOrEquals")}return e}(e))})).join("")).replace("{{icon}}",r)),"checkbox"===e.filterType&&(o=(o+=a(r=n.length?n[0]:"selected-notselected")+s("selected-notselected","All",!0)+s("selected","Selected")+s("not-selected","NotSelected")).replace("{{icon}}",r)),"checkbox"!==e.filterType&&"text"!==e.filterType&&(o=(o+=a(r=n.length?n[0]:"equals")+s("equals","Equals","lookup"===e.filterType||"integer"===e.filterType||"decimal"===e.filterType||"date"===e.filterType||"time"===e.filterType)+s("does-not-equal","DoesNotEqual")+s("is-empty","IsEmpty")+s("is-not-empty","IsNotEmpty")).replace("{{icon}}",r)),"date"===e.filterType&&(o+=s("in-range","InRange")),/\b(integer|decimal|date|time|percent)\b/g.test(e.filterType)&&(o=(o+="".concat(s("less-than","LessThan")).concat(s("less-equals","LessOrEquals")).concat(s("greater-than","GreaterThan")).concat(s("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"lookup"===e.filterType&&(o=(o=a(r=n.length?n[0]:"contains")+s("contains","Contains",!0)+s("does-not-contain","DoesNotContain")+s("equals","Equals")+s("does-not-equal","DoesNotEqual")+s("is-empty","IsEmpty")+s("is-not-empty","IsNotEmpty")+s("end-with","EndsWith")+s("does-not-end-with","DoesNotEndWith")+s("start-with","StartsWith")+s("does-not-start-with","DoesNotStartWith")+s("less-than","LessThan")+s("less-equals","LessOrEquals")+s("greater-than","GreaterThan")+s("greater-equals","GreaterOrEquals")).replace("{{icon}}",r)),o+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(e,t){var n=this,s=!1;e?this.setFilterConditions(e):e=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(e)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=e,s=!0);var a,o,r,l,c,d,h=function(t){for(var s=!0,a=function(i){var a=n.columnById(e[i].columnId)[0];if(void 0===a)return{v:!1};var o=t&&void 0!==t[a.field]?t[a.field]:n.fieldValue(t,a.field),r=null==o?"":o.toString().toLowerCase(),l=e[i].value.toString().toLowerCase(),c=null,d=null,h=null;if("percent"===a.filterType&&(l=(l/100).toString(),"decimal"==="".concat(a.name).toLowerCase()?(o=as.Decimal(!1,!1,o,a),l=as.Decimal(!1,!1,l,a)):"integer"==="".concat(a.name).toLowerCase()&&(o=as.Integer(!1,!1,o,a),l=as.Integer(!1,!1,l,a))),"text"===a.filterType){var u=a.formatter,p=e[i].columnId;r=null==(o=(o=n.formatValue(u,i,p,o,a,t,n)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":o.toString().toLowerCase()}if("contents"!==a.filterType&&"select"!==a.filterType&&"multiselect"!==a.filterType||(o=null==o?"":o.toString().toLowerCase()),"number"!=typeof o&&(isNaN(o)||""===o||e[i].value instanceof Array)||/^(date|time|text)$/.test(a.filterType)||(o=null===o?o:parseFloat(o),l=M.parseNumber(l)),"date"===a.filterType||"time"===a.filterType){"string"==typeof o&&(o=a.formatter(!1,!1,o,a,!0));var g=function(t,n){return(n=M.parseDate(n,e[i].format))&&("time"===a.filterType&&(n.setDate(1),n.setMonth(0),n.setYear(0)),n=n.getTime()),t instanceof Date?(t=new Date(t.getTime()),"time"===a.filterType?(t.setDate(1),t.setMonth(0),t.setYear(0)):a.editorOptions&&a.editorOptions.showTime||(t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),t=t.getTime()):"string"==typeof t&&t&&(t=a.sourceFormat?M.parseDate(t,"string"==typeof a.sourceFormat?{pattern:a.sourceFormat}:a.sourceFormat):M.parseDate(t,{pattern:e[i].format}))&&("time"===a.filterType?(t.setDate(1),t.setMonth(0),t.setYear(0)):a.editorOptions&&a.editorOptions.showTime||(t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),t=t.getTime()),{rValue:t,cValue:n}},f=null;if("in-range"===e[i].operator){var m=n.settings.columns.indexOf(a),v=n.element.find(".datagrid-header th:eq(".concat(m,") .datagrid-filter-wrapper input")).data("datepicker");v&&(d=v.settings.range.separator,(c=v.settings.range.data)&&c.start?f=g(o,c.start):d&&l.indexOf(d)>-1&&(f=g(o,(h=l.split(d))[0])))}else f=g(o,e[i].value);o=f?f.rValue:o,l=f?f.cValue:l}switch(e[i].operator){case"equals":if(e[i].value instanceof Array){s=!1;for(var b=0;b<e[i].value.length;b++){e[i].value[b].toLowerCase()===o&&(""!==o.toString()||""===e[i].value[b])&&(s=!0)}}else s=o===l&&""!==o;break;case"does-not-equal":s=o!==l;break;case"contains":s=r.indexOf(l)>-1&&""!==o.toString();break;case"does-not-contain":s=-1===r.indexOf(l);break;case"end-with":s=r.lastIndexOf(l)===r.length-l.toString().length&&""!==r&&r.length>=l.toString().length;break;case"start-with":s=0===r.indexOf(l)&&""!==r;break;case"does-not-end-with":s=!(s=r.lastIndexOf(l)===r.length-l.toString().length&&""!==r&&r.length>=l.toString().length);break;case"does-not-start-with":s=!(0===r.indexOf(l)&&""!==r);break;case"is-empty":s=""===r;break;case"is-not-empty":if(""===o){s=""!==o;break}s=!(null===o);break;case"in-range":if(s=!1,c&&c.startDate&&c.endDate){var y=c.startDate.getTime(),w=c.endDate.getTime();s=o>=y&&o<=w&&null!==o}else if(h){var x=M.parseDate(h[0],e[i].format),C=M.parseDate(h[1],e[i].format);x&&C&&(x=x.getTime(),C=C.getTime(),s=o>=x&&o<=C&&null!==o)}break;case"less-than":s=o<l&&""!==o&&null!==o;break;case"less-equals":s=o<=l&&""!==o&&null!==o;break;case"greater-than":s=o>l&&""!==o&&null!==o;break;case"greater-equals":s=o>=l&&""!==o&&null!==o;break;case"selected":if(a&&a.isChecked){s=a.isChecked(o);break}s=("1"===r||"true"===r||!0===o||1===o)&&""!==r;break;case"not-selected":if(a&&a.isChecked){s=!a.isChecked(o);break}s="0"===r||"false"===r||!1===o||0===o||""===r;break;case"selected-notselected":s=!0}return s?void 0:{v:!1}},o=0;o<e.length;o++){var r=a(o);if("object"===i(r))return r.v}return s};if(!this.settings.disableClientFilter)if(this.settings.treeGrid){var u=function e(t,i){for(var n=0;n<t.length;n++){var s=t[n];o&&(o=!h(s)),s._isFilteredOut=!h(s),i&&!s._isFilteredOut&&(i._isFilteredOut=!1),s.children&&s.children.length&&e(s.children,s)}};for(r=0,c=(a=this.settings.dataset).length;r<c;r++)o=!h(a[r]),a[r].children&&a[r].children.length&&u(a[r].children),a[r]._isFilteredOut=o}else if(this.settings.groupable)for(r=0,c=this.settings.dataset.length;r<c;r++){var p=!0;for(l=0,d=this.settings.dataset[r].values.length;l<d;l++)o=!h(this.settings.dataset[r].values[l]),this.settings.dataset[r].values[l]._isFilteredOut=o,o||(p=!1);this.settings.dataset[r]._isFilteredOut=p}else for(r=0,c=this.settings.dataset.length;r<c;r++)o=!h(this.settings.dataset[r]),this.settings.dataset[r]._isFilteredOut=o;this.setChildExpandOnMatch(),this.settings.source||(this.clearCache(),this.renderRows()),s&&this.setSearchActivePage({trigger:t,type:"filtered"}),this.settings.disableClientFilter&&"restore"===t||(this.element.trigger("filtered",{op:"apply",conditions:e,trigger:t}),this.saveUserSettings())},adjustPosLeft:function(e){var t=e.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth;t.left<0&&t.right<=i?e.style.left="".concat(20,"px"):t.left>=0&&!(t.right<=i)&&(e.style.left="".concat(i-t.width-20,"px"))},setChildExpandOnMatch:function(){var e=this.settings;if(e.treeGrid){!function t(i,n){for(var s=0,a=i.length;s<a;s++){var o=i[s],r=o.children,l=r?r.length:0;if(l){if(!o._isFilteredOut)if(e.allowChildExpandOnMatch)for(var c=0;c<l;c++)r[c]._isFilteredOut=!1;else{for(var d=!0,h=0;h<l;h++)r[h]._isFilteredOut||(d=!1);o.isAllChildrenFiltered=d}t(r)}}}(e.dataset)}},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each((function(){var e=$(this);e.val(""),e.is("select")&&e.find("option").each((function(){$(this).prop("selected",!1)})),e.trigger("updated")})),this.element.find(".datagrid-header .btn-filter").each((function(){var e=$(this),t=e.next(),i=t.find("li:first");e.find("svg:first > use").attr("href","#icon-filter-".concat(e.attr("data-default"))),t.find(".is-checked").removeClass("is-checked"),i.addClass("is-checked")})))},setFilterConditions:function(e){this.clearFilterFields();for(var t=0;t<e.length;t++){var i=this.element.find('.datagrid-header th[data-column-id="'.concat(e[t].columnId,'"]')),n=i.find("input, select"),s=i.find(".btn-filter"),a=s.next();if(void 0===e[t].value&&(e[t].value=""),n.val(e[t].value),n.is("select")){var o=e[t].value instanceof Array?e[t].value[0]:e[t].value;if(e[t].innerHTML&&(n[0].innerHTML=e[t].innerHTML),n.find('option[value="'.concat(o,'"]')).length)if(e[t].value instanceof Array&&!e[t].selectedOptions){var r=n[0].querySelectorAll("option");n.val("");for(var l=0;l<r.length;l++)r[l].selected=!1;for(var c=0;c<e[t].value.length;c++)n.find('option[value="'.concat(e[t].value[c],'"]')).prop("selected",!0)}else n.find('option[value="'.concat(e[t].value,'"]')).prop("selected",!0);else{var d=n.data("dropdown");d&&d.setCode(e[t].value)}n.trigger("updated")}s.find("svg:first > use").attr("href","#icon-filter-".concat(e[t].operator)),a.find(".is-checked").removeClass("is-checked"),a.find(".".concat(e[t].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var e=[],t=this;return this.element.find("th.is-filterable").each((function(){var i,n=$(this),s=n.find(".btn-filter"),a=n.find("input, select"),o=a.is("select"),r=s.find(".icon-dropdown:first"),l=null;if((s.length||o)&&"selected-notselected"!==(i=o?"equals":r.getIconName().replace("filter-",""))&&!(""===a.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(i)||a.val()instanceof Array&&0===a.val().length)){var c=a.val()?a.val():"";a.attr("data-mask-mode")&&"number"===a.attr("data-mask-mode")&&(c=M.parseNumber(c));var d={columnId:n.attr("data-column-id"),operator:i,value:c};a.data("datepicker")&&(l=a.data("datepicker").pattern,d.format=l),a.data("timepicker")&&(l=a.data("timepicker").settings.timeFormat,d.format=l),a.is("select")&&(d.innerHTML=a[0].innerHTML);var h=t.columnById(d.columnId);h&&h[0]&&(d.filterType=h[0].filterType),e.push(d)}})),e},getExtraTop:function(){var e=this.settings,t={default:{short:0,medium:0,normal:0},filterable:{short:0,medium:0,normal:0},group:{short:-25,medium:-30,normal:-39},groupFilterable:{short:-29,medium:-30,normal:-41}};return e.columnGroups?e.filterable?t.groupFilterable[e.rowHeight]:t.group[e.rowHeight]:e.filterable?t.filterable[e.rowHeight]:t.default[e.rowHeight]},getTargetHeight:function(){var e=this.settings,t={default:{short:20,medium:28,normal:35},filterable:{short:53,medium:54,normal:60},group:{short:46,medium:56,normal:74},groupFilterable:{short:83,medium:87,normal:103}};return e.columnGroups?e.filterable&&this.filterRowRendered?t.groupFilterable[e.rowHeight]:t.group[e.rowHeight]:e.filterable&&this.filterRowRendered?t.filterable[e.rowHeight]:t.default[e.rowHeight]},createDraggableColumns:function(){var e=this,t=e.headerNodes().not('[data-column-id="selectionCheckbox"]'),i=$(".drag-target-arrows",e.element);i.length||(e.element.prepend('<span class="drag-target-arrows" style="height: '.concat(e.getTargetHeight(),'px;"></span>')),i=$(".drag-target-arrows",e.element)),t.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),t.prepend('<span class="is-draggable-target"></span>'),t.last().append('<span class="is-draggable-target last"></span>'),e.element.addClass("has-draggable-columns"),$(".handle",t).each((function(){var n=null,s=null,a=null,o=0,r=$(this),l=r.parent();r.on("mousedown.datagrid",(function(r){r.preventDefault(),l.drag({clone:!0,cloneAppendTo:t.first().parent().parent(),clonePosIsFixed:!0}).on("dragstart.datagrid",(function(t,i,c){(n=c).removeAttr("id").addClass("is-dragging-clone").css({left:M.isRTL()?i.right-n.width():i.left,top:i.top,height:l.height(),border:0}),$(".is-draggable-target",n).remove(),e.setDraggableColumnTargets(),o=e.getExtraTop(),s=l.position(),a={top:i.top-s.top,left:i.left-s.left};var d=e.targetColumn(s);e.draggableStatus.startIndex=d,r.stopImmediatePropagation()})).on("drag.datagrid",(function(l,c){n[0].style.left="".concat(parseInt(M.isRTL()?c.left+c.offset.x-c.clone.width():c.left,10),"px"),n[0].style.top="".concat(parseInt(c.top,10),"px"),s={top:c.top-a.top,left:c.left-a.left},M.isRTL()&&(s.left=parseInt(n[0].style.left,10));var d=0,h=null,u=null,p=e.targetColumn(s);if($(".is-draggable-target",t).add(i).removeClass("is-over"),-1!==p)for(var g=0,f=e.draggableColumnTargets.length;g<f;g++)d=g+1,(h=e.draggableColumnTargets[g]).index===p&&h.index!==e.draggableStatus.startIndex&&(h.index>e.draggableStatus.startIndex&&d<f&&(h=e.draggableColumnTargets[d]),h.el.addClass("is-over"),i.addClass("is-over"),u=h.el[0].getBoundingClientRect(),i[0].style.left="".concat(parseInt(u.left+(M.isRTL()?2:0),10),"px"),i[0].style.top="".concat(parseInt(u.top,10)+1+o,"px"));r.stopImmediatePropagation()})).on("dragend.datagrid",(function(o,r){M.isRTL()||(n[0].style.left="".concat(parseInt(r.left,10),"px"),n[0].style.top="".concat(parseInt(r.top,10),"px")),s={top:r.top-a.top,left:r.left-a.left},M.isRTL()&&(s.left=parseInt(n[0].style.left,10));var c,d,h,u,p=e.targetColumn(s),g=l.data("drag"),f=[];if(g&&g.destroy&&g.destroy(),e.draggableStatus.endIndex=p,$(".is-draggable-target",t).add(i).removeClass("is-over"),-1!==e.draggableStatus.endIndex&&e.draggableStatus.startIndex!==e.draggableStatus.endIndex){for(c=0,d=e.settings.columns.length;c<d;c++)e.settings.columns[c].hidden||"selectionCheckbox"===e.settings.columns[c].id||f.push(c);h=f[e.draggableStatus.startIndex]||0,u=f[e.draggableStatus.endIndex]||0,e.updateGroupHeadersAfterColumnReorder(h,u),e.arrayIndexMove(e.settings.columns,h,u),e.updateColumns(e.settings.columns)}}))}))}))},setDraggableColumnTargets:function(){var e,t,i=this,n=i.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]');i.draggableColumnTargets=[],i.draggableStatus={},$(".is-draggable-target.last",n.last()).length||n.last().append($(".is-draggable-target.last",i.headerNodes())),$(".is-draggable-target",n).each((function(s){var a=$(this).is(".last")?s-1:s;e=n.eq(a),t=e.position(),20,i.draggableColumnTargets.push({el:$(this),index:a,pos:t,width:e.outerWidth(),height:e.outerHeight(),dropArea:{x1:t.left-20,x2:t.left+e.outerWidth()+20,y1:t.top-20+i.getExtraTop(),y2:t.top+e.outerHeight()+20}})}))},targetColumn:function(e){var t,i,n,s=-1;for(i=0,n=this.draggableColumnTargets.length-1;i<n;i++)if(t=this.draggableColumnTargets[i],e.left>t.dropArea.x1&&e.left<t.dropArea.x2&&e.top>t.dropArea.y1&&e.top<t.dropArea.y2&&(s=t.index,M.isRTL()))return s;return s},arrayIndexMove:function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},createDraggableRows:function(){var e=this;this.settings.rowReorder&&(this.tableBody.children().filter((function(){return $(this).find(".datagrid-reorder-icon").length<1})).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",(function(t,i){e.isSafari&&i.start.css({display:"inline-block"})})).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",(function(t,i){e.isSafari&&i.end.css({display:""}),e.reorderRow(i.startIndex,i.endIndex,i)})))},reorderRow:function(e,t,i){var n=t>e,s=this.tableBody.find("tr").eq(e),a=this.tableBody.find("tr").eq(t),o=this.settings.dataset.splice(e,1)[0];this.settings.dataset.splice(t,0,o),!i&&n&&s.insertAfter(a),i||n||s.insertBefore(a),(this.settings.rowTemplate||this.settings.expandableRow)&&n&&(this.tableBody.find("tr").eq(2*e).insertAfter(i.end),i.end.next().next().insertAfter(i.over)),!this.settings.rowTemplate&&!this.settings.expandableRow||n||this.tableBody.find("tr").eq(2*e).next().insertAfter(i.end);for(var r=this.tableBody.find("tr:not(.datagrid-expandable-row)"),l=0;l<r.length;l++)r[l].setAttribute("data-index",l),r[l].setAttribute("aria-rowindex",l+1);this.element.trigger("rowreorder",[{endIndex:t,startIndex:e,over:a,start:s}]),this.syncSelectedRowsIdx()},fieldValue:function(e,t){if(!t||!e)return"";if(t.indexOf(".")>-1)return t.split(".").reduce((function(e,t){return e?e[t]:""}),e);var i=e[t],n=i||0===i||!1===i?i:"";return n=h.escapeHTML(n)},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter((function(e){return 1===e.depth})))},setTreeDepth:function(e){if(this.settings.treeGrid){var t=this,i=0,n=function e(n,s){i++,t.settings.treeDepth.push({idx:i,depth:s,node:n});for(var a=n.children||[],o=0,r=a.length;o<r;o++)e(a[o],s+1)};e=e||this.settings.dataset,t.settings.treeDepth=[];for(var s=0,a=e.length;s<a;s++)n(e[s],1)}},setRowGrouping:function(){var e=this.settings.groupable;e&&(this.originalDataset?this.settings.dataset=this.originalDataset:this.originalDataset=this.settings.dataset.slice(),e.aggregator&&"none"!==e.aggregator?"sum"!==e.aggregator?"max"!==e.aggregator?"min"!==e.aggregator?"avg"!==e.aggregator?"count"!==e.aggregator?"list"!==e.aggregator?this.settings.dataset=ms(this.settings.dataset,e.fields):this.settings.dataset=ms.list(this.settings.dataset,e.fields,e.aggregatorOptions):this.settings.dataset=ms.count(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=ms.avg(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=ms.min(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=ms.max(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=ms.sum(this.settings.dataset,e.fields,e.aggregate):this.settings.dataset=ms.none(this.settings.dataset,e.fields))},renderRows:function(){var e="",t="",i="",n=0,s=this.settings,a=this.table.find("tbody"),o=1;if(this.pagerAPI){var r=this.pagerAPI.state;o=r.filteredActivePage?r.filteredActivePage:r.activePage}for(this.bodyColGroupHtmlLeft="<colgroup>",this.bodyColGroupHtml="<colgroup>",this.bodyColGroupHtmlRight="<colgroup>",this.triggerDestroyCell(),this.settings.columns&&0!==this.settings.columns.length||this.settings.columns.push({id:"blank",value:"",field:""}),n=0;n<this.settings.columns.length;n++){var l=this.settings.columns[n],c=this.getContainer(l.id),d=this.columnWidth(l,n);switch(c){case"left":this.bodyColGroupHtmlLeft+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>");break;case"right":this.bodyColGroupHtmlRight+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>");break;default:this.bodyColGroupHtml+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>")}l.colspan&&(this.hasColSpans=!0)}this.emptyMessageContainer&&this.emptyMessageContainer.hide(),0===a.length&&(this.hasLeftPane&&(this.tableBodyLeft=$("<tbody></tbody>"),this.tableLeft.append(this.tableBodyLeft)),this.tableBody=$("<tbody></tbody>"),this.table.append(this.tableBody),this.hasRightPane&&(this.tableBodyRight=$("<tbody></tbody>"),this.tableRight.append(this.tableBodyRight))),this.groupArray=[],this.recordCount=0,this.filteredCount=0,s.treeGrid&&s.paging&&!s.source&&o>1&&(this.recordCount=s.treeRootNodes[s.pagesize*o-s.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();for(var h=!1,p=0;p<s.dataset.length;p++){if(s.paging&&!s.source){if(1===o&&p-this.filteredCount>=s.pagesize){s.dataset[p]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(o>1&&!(p-this.filteredCount>=s.pagesize*(o-1)&&p-this.filteredCount<s.pagesize*o)){s.dataset[p]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!s.virtualized||this.isRowVisible(this.recordCount))if((!s.treeGrid&&s.dataset[p])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(s.dataset[p].values){for(var g=s.dataset[p].values.length,f=0,m=0;m<g;m++)s.dataset[p].values[m]._isFilteredOut&&f++;if(f===g)continue}if(!this.settings.groupable.suppressGroupRow){var v=this.rowHtml(s.dataset[p],this.recordCount,p,!0);this.hasLeftPane&&v.left&&(t+=v.left),v.center&&(e+=v.center),this.hasRightPane&&v.right&&(i+=v.right)}if(this.settings.groupable.showOnlyGroupRow&&s.dataset[p].values[0]){var b=s.dataset[p].values[0];s.dataset[p].list&&(b.list=s.dataset[p].list),b.values=s.dataset[p].values;var y=this.rowHtml(b,this.recordCount,p);this.hasLeftPane&&y.left&&(t+=y.left),y.center&&(e+=y.center),this.hasRightPane&&y.right&&(i+=y.right),this.recordCount++,this.groupArray.push({group:p,node:0});continue}for(var w=0;w<s.dataset[p].values.length;w++)if(!s.dataset[p].values[w]._isFilteredOut){var x=this.rowHtml(s.dataset[p].values[w],this.recordCount,s.dataset[p].values[w].idx);this.hasLeftPane&&x.left&&(t+=x.left),x.center&&(e+=x.center),this.hasRightPane&&x.right&&(i+=x.right),this.recordCount++,this.groupArray.push({group:p,node:w})}if(this.settings.groupable.groupFooterRow){var C=this.rowHtml(s.dataset[p],this.recordCount,p,!0,!0);this.hasLeftPane&&C.left&&(t+=C.left),C.center&&(e+=C.center),this.hasRightPane&&C.right&&(i+=C.right)}}else{var k=p;s.treeGrid&&(k=this.recordCount);var T=this.rowHtml(s.dataset[p],k,p);this.hasLeftPane&&T.left&&(t+=T.left),T.center&&(e+=T.center),this.hasRightPane&&T.right&&(i+=T.right),s.dataset[p]._isFilteredOut||this.recordCount++,this.visibleRowCount=k+1,s.dataset[p].rowStatus&&(h=!0)}else this.recordCount++}if(this.settings.summaryRow){var S=this.calculateTotals(),A=this.rowHtml(S,this.recordCount,null,!1,!0);this.hasLeftPane&&A.left&&(t+=A.left),A.center&&(e+=A.center),this.hasRightPane&&A.right&&(i+=A.right)}"<colgroup>"!==this.bodyColGroupHtml&&(this.bodyColGroupHtmlLeft+="</colgroup>",this.bodyColGroupHtml+="</colgroup>",this.bodyColGroupHtmlRight+="</colgroup>",this.bodyColGroupLeft&&this.bodyColGroupLeft.remove(),this.bodyColGroup&&this.bodyColGroup.remove(),this.bodyColGroupRight&&this.bodyColGroupRight.remove(),this.hasLeftPane&&(this.bodyColGroupLeft=$(this.bodyColGroupHtmlLeft),(this.headerRowLeft||this.tableBodyLeft).before(this.bodyColGroupLeft)),this.bodyColGroup=$(this.bodyColGroupHtml),(this.headerRow||this.tableBody).before(this.bodyColGroup),this.hasRightPane&&(this.bodyColGroupRight=$(this.bodyColGroupHtmlRight),(this.headerRowRight||this.tableBodyRight).before(this.bodyColGroupRight))),this.hasLeftPane&&u.html(this.tableBodyLeft,t,"*"),u.html(this.tableBody,e,"*"),this.hasRightPane&&u.html(this.tableBodyRight,i,"*"),this.setVirtualHeight(),this.setScrollClass(),this.setupTooltips(h),this.afterRender()},afterRender:function(){var e=this,t=this;if(this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&t.tableBody.find("tr").each((function(e){var i,n=0,s=0,a=$(this);i=a.height(),t.tableBodyLeft&&(n=t.tableBodyLeft.find("tr").eq(e).height()),t.tableBodyRight&&(s=t.tableBodyLeft.find("tr").eq(e).height());var o=Math.max(n,i,s);return a.css("height",o),t.tableBodyLeft&&(n=t.tableBodyLeft.find("tr").eq(e).css("height",o)),t.tableBodyRight&&(s=t.tableBodyLeft.find("tr").eq(e).css("height",o)),!0})),this.settings.onPostRenderCell)for(var i=function(e){var i=t.settings.columns[e];i.component&&t.tableBody.find("tr").each((function(){var e=$(this),n=t.settings.treeGrid?t.actualPagingRowIndex(t.actualRowIndex(e)):t.dataRowIndex(e),s=e.attr("data-lineage"),a=t.rowData(n),o=t.columnIdxById(i.id),r={row:s||n,cell:o,value:a,rowData:a,col:i,api:t};t.settings.onPostRenderCell(e.find("td").eq(o).find(".datagrid-cell-wrapper .content")[0],r)}))},n=0;n<this.settings.columns.length;n++)i(n);var s=t.tableBody.find("select.dropdown");s.dropdown&&s.dropdown(),t.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",(function(){var e=$(this),i=e.val(),n=e.closest("tr");t.updateCellNode(n.attr("aria-rowindex"),e.closest("td").index(),i,!1,!0)}));var a=t.tableBody.find(".spinbox");a.spinbox&&a.spinbox(),t.settings.source||t.displayCounts(),t.setAlternateRowShading(),t.createDraggableRows();var o=document.activeElement;(t.activeCell.isFocused&&(!o||o&&"body"===o.tagName.toLowerCase())&&t.setActiveCell(t.activeCell.row,t.activeCell.cell),t.settings.paging&&t.settings.source&&!t.settings.allowSelectAcrossPages&&(t.preventSelection||(t._selectedRows=[]),t.syncSelectedUI()),t.settings.paging&&t.settings.source&&t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),t.settings.paging&&!t.settings.source&&null===t.settings.allowSelectAcrossPages&&(t.syncSelectedRows(),t.syncSelectedUI()),this.stretchColumnDiff<0)&&(this.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px"));setTimeout((function(){t.element.trigger("afterrender",{body:t.bodyContainer,header:t.headerContainer,pager:t.pagerBar}),e.activateFirstCell()}))},activateFirstCell:function(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var e=this,t=this;if(t.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var i=t.tableBody.find("tr");if(0===i.length)return;for(var n=function(n){var s=e.settings.columns[n];s.component&&i.each((function(){var e=$(this),i=e.index(),n=t.columnIdxById(s.id),a={row:e.index(),cell:n,value:t.settings.dataset[i],col:s,api:t};t.settings.onDestroyCell(e.find("td").eq(n).find(".datagrid-cell-wrapper .content")[0],a)}))},s=0;s<this.settings.columns.length;s++)n(s)}},cacheVirtualStats:function(){var e=this.element[0].offsetHeight,t=this.bodyWrapperCenter[0].scrollTop,i=e-("normal"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25),n="normal"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;this.virtualRange={rowHeight:n,top:Math.max(t-(this.settings.virtualRowBuffer-1)*n,0),bottom:t+i+(this.settings.virtualRowBuffer-1)*n,totalHeight:n*this.settings.dataset.length,bodyHeight:i}},isRowVisible:function(e){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&e&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=e&&this.pagerAPI.activePage*this.settings.pagesize>=e;0===e&&this.cacheVirtualStats();var t=e*this.virtualRange.rowHeight;return t>=this.virtualRange.top&&t<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var e=this.virtualRange.totalHeight-this.virtualRange.bottom,t=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),t>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),t>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(t,"px")),0===t&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),e>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),e>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(e,"px")),e<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(e,t,i,n,s,a,o){return o=o||this,void 0===e&&(e=this.defaultFormatter),"string"==typeof e?as[e](t,i,n,s,a,o).toString():e(t,i,n,s,a,o).toString()},rowHtml:function(e,t,i,n,s,a,o){var r,l,c,d=this.settings.summaryRow&&!n&&s,h=this.pagerAPI?this.pagerAPI.activePage:1,u={left:"",center:"",right:""},p=this.settings.treeDepth?this.settings.treeDepth[t]:0,g=null,f=0,m=!1;if(!e)return"";var v=!1;this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&(this.settings.isRowDisabled(i,e)&&(v=!0));if(e.isRowDisabled&&(v=!0),g=p=p?p.depth:0,this.settings.treeDepth&&this.settings.treeDepth.length)for(var b=0;b<this.settings.treeDepth.length;b++){var y=this.settings.treeDepth[b];if(t===y.idx-1){for(var w=null,x=0,C=b;C>=0&&!((x=this.settings.treeDepth[C].depth<x||0===x?this.settings.treeDepth[C].depth:x)<y.depth&&(w=this.settings.treeDepth[C],1===x||void 0!==w.node.expanded&&!w.node.expanded));C--);m=!(!w||void 0===w.node.expanded||w.node.expanded)||e._isFilteredOut,g=y.depth;break}}if(this.settings.groupable&&!s){var k=this.settings.groupable;m=void 0!==k.expanded&&!k.expanded,k.expanded&&"function"==typeof k.expanded&&(m=!k.expanded(t,0,null,null,e,this),this.isFooterHidden=m)}var T=this.settings.frozenColumns.left.length,S=this.settings.frozenColumns.right.length,$=this.visibleColumns().length-T-S;if(this.settings.groupable&&n&&!s){var A=as.GroupRow(t,0,null,null,e,this);return u.left='<tr class="datagrid-rowgroup-header'.concat(m?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(T,'">').concat(A.left||"<span>&nbsp;</span>","</td></tr>"),u.center='<tr class="datagrid-rowgroup-header'.concat(m?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat($,'">').concat(A.center||"<span>&nbsp;</span>","</td></tr>"),u.right='<tr class="datagrid-rowgroup-header'.concat(m?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(S,'">').concat(A.right||"<span>&nbsp;</span>","</td></tr>"),u}if(this.settings.groupable&&n&&s){var D=as.GroupFooterRow(t,0,null,null,e,this);return u.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(D.left||"<span>&nbsp;</span>","</tr>"),u.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(D.center||"<span>&nbsp;</span>","</tr>"),u.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(D.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,u}var E=t+1+(this.settings.source&&!this.settings.indeterminate?(h-1)*this.settings.pagesize:0);r=this.recordCount%2==0;var I=this.isRowSelected(e),L=e._rowactivated,P={class:"",svg:""};e&&e.rowStatus&&("new"!==e.rowStatus.icon||this.settings.showNewRowIndicator)&&(P.show=!0,P.class=" rowstatus-row-".concat(e.rowStatus.icon),P.icon="success"===e.rowStatus.icon?"#icon-check":"#icon-exclamation",P.title=""!==e.rowStatus.tooltip?' title="'.concat(e.rowStatus.tooltip,'"'):"",P.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(P.title,'><use href="').concat(P.icon,'"></use></svg>'));var M="";for(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(M=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,E,i,e),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(M=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),u.center='<tr role="row" aria-rowindex="'.concat(E,'"')+' data-index="'.concat(i,'"').concat(a?' data-lineage="'.concat(a,'"'):"").concat(this.settings.treeGrid&&e.children?' aria-expanded="'.concat(e.expanded?'true"':'false"'):"").concat(this.settings.treeGrid?' aria-level="'.concat(g,'"'):"").concat(v?' aria-disabled="true"':"").concat(I?' aria-selected="true"':"",' class="datagrid-row').concat(P.class).concat(m?" is-hidden":"").concat(e._isFilteredOut?" is-filtered":"").concat(L?" is-rowactivated":"").concat(v?" is-rowdisabled":"").concat(I?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(this.settings.alternateRowShading&&!r?" alt-shading":"").concat(d?" datagrid-summary-row":"").concat(this.settings.cellNavigation||!1===this.settings.selectable?"":" is-clickable").concat(this.settings.treeGrid?e.children?" datagrid-tree-parent":g>1?" datagrid-tree-child":"":"",'"').concat(M,">"),u.left=u.center,u.right=u.center,f=0;f<this.settings.columns.length;f++){var B=this.settings.columns[f],O=this.getContainer(B.id),R="",F=B.summaryRowFormatter||B.formatter||this.defaultFormatter,N=d?F:B.formatter||this.defaultFormatter,z=this.formatValue(N,t,f,this.fieldValue(e,this.settings.columns[f].field),this.settings.columns[f],e,this);if(0===z.indexOf('<span class="is-readonly">')&&(B.readonly=!0),(z.indexOf("datagrid-checkbox")>-1||z.indexOf("btn-actions")>-1)&&(R+=" l-center-text"),z.indexOf("trigger")>-1&&(R+=" datagrid-trigger-cell"),-1===z.indexOf("trigger")&&B&&B.editor){var H=this.getEditorName(B.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(H)>=0&&(R+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(B.editor&&this.settings.editable&&(R+=" has-editor"),B.expanded&&(this.treeExpansionField=B.expanded),B.align&&(R+=" l-".concat(B.align,"-text")),"ellipsis"===B.textOverflow&&(R+=" text-ellipsis"),B.uppercase&&(R+=" uppercase-text"),R+=B.readonly?" is-readonly":"",R+=B.hidden?" is-hidden":"",B.isEditable&&!B.readonly){var q=this.fieldValue(e,this.settings.columns[f].field);B.isEditable(E-1,f,q,B,e)||(R+=" is-readonly")}var V="selectionCheckbox"===B.id||!B.readonly&&void 0!==B.editor?"":'aria-readonly="true"';if(B.isReadonly&&!B.readonly&&"selectionCheckbox"!==B.id){var W=this.fieldValue(e,this.settings.columns[f].field);B.isReadonly(this.recordCount,f,W,B,e)&&(R+=" is-cell-readonly",V='aria-readonly="true"')}var j=this.fieldValue(e,this.settings.columns[f].field);B.cssClass&&"function"==typeof B.cssClass&&(R+=" ".concat(B.cssClass(this.recordCount,f,j,B,e))),B.cssClass&&"string"==typeof B.cssClass&&(R+=" ".concat(B.cssClass)),R+=B.focusable?" is-focusable":"",R+="Actions"===N.name?" has-btn-actions":"";var G=this.calculateRowspan(j,t,B);if(""!==G){var U=null,_=null;l>0&&!B.hidden&&(l-=1,R+=" is-hidden",this.settings.frozenColumns.left&&this.settings.frozenColumns.left.length>0&&"center"===this.getContainer(B.id)&&(f===this.settings.frozenColumns.left.length&&(R=R.replace(" is-hidden"," is-invisible"),(_=c-this.settings.frozenColumns.left.length+1)+1===this.settings.columns.length-f&&(R+=" is-last-visible")),0===l&&1===this.settings.frozenColumns.left.length&&f<this.visibleColumns().length&&(R=R.replace(" is-hidden","")),0===l&&c===f&&(R+=" is-invisible")));var Y=this.settings.frozenColumns.left.length;if(B.colspan&&"function"==typeof B.colspan){var K=this.fieldValue(e,this.settings.columns[f].field);U=B.colspan(E-1,f,K,B,e,this);var X=this.settings.columns.length-f;(U=U&&U>X?X:U)&&U>1?(c=U,l=U-1,Y>0&&U-Y>0&&((U-=1===Y&&U===this.visibleColumns().length-1?0:Y)===f||Y+f===U||Y>f&&U>f)&&(R+=" is-last-visible"),B.align&&(R=R.replace(" l-".concat(B.align,"-text"),"")),this.settings.frozenColumns.left&&Y>0&&Y===U&&(R+=" is-last-visible"),this.visibleColumns().length===f+U&&(R+=" is-last-visible"),R+=" l-left-text"):U=null}if(_&&(U=_),0!==f&&(P.class="",P.svg=""),""!==P.class&&(R+=" rowstatus-cell"),this.isCellDirty(this.settings.groupable?i:t,f)&&(R+=" is-dirty-cell"),""!==R&&(R=R.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")),u[O]+='<td role="gridcell" '.concat(V,' aria-colindex="').concat(f+1,'"')+' aria-describedby="'.concat(this.uniqueId("-header-".concat(f)),'"').concat(I?' aria-selected="true"':"").concat(R?' class="'.concat(R,'"'):"").concat(U?' colspan="'.concat(U,'"'):"").concat(B.tooltip&&"string"==typeof B.tooltip?' title="'.concat(B.tooltip.replace("{{value}}",j),'"'):"").concat(this.settings.columnGroups?'headers = "'.concat(this.uniqueId("-header-".concat(f))," ").concat(this.getColumnGroup(f),'"'):"").concat(G||"",">").concat(P.svg,'<div class="datagrid-cell-wrapper">'),B.contentVisible)B.contentVisible(t+1,f,j,B,e)||(z="");this.settings.onPostRenderCell&&B.component&&(u[O]+='<div class="content"></div>',z=""),u[O]+="".concat(z,"</div></td>")}}if(u.left+="</tr>",u.center+="</tr>",u.right+="</tr>",this.settings.rowTemplate){var Q=this.settings.rowTemplate,J=e,Z=this.settings.rowTemplateHeight||107,ee="";gt&&J&&(ee=gt.compile("{{#dataset}}".concat(Q,"{{/dataset}}"),{dataset:J})),this.hasLeftPane&&(u.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(Z,'px"></div></div>\n          </td></tr>')),u.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat($,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding">').concat(ee,"</div></div>\n        </td></tr>"),this.hasRightPane&&(u.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(S,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(Z,'px"></div></div>\n          </td></tr>'))}if(this.settings.expandableRow&&(this.hasLeftPane&&(u.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),u.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat($,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(u.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(S,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),e.children&&!o&&!e._isFilteredOut)for(var te=0,ie=e.children.length;te<ie;te++){var ne=a?"".concat(a,".").concat(i):"".concat(i);this.recordCount++;var se=this.rowHtml(e.children[te],this.recordCount,te,!1,!1,ne);u.left+=se.left,u.center+=se.center,u.right+=se.right}return u},getEditorName:function(e){if(!e)return"";var t=e.name;if(!function(){}.name){t=(e.toString().match(/function (.+?)\(/)||[,""])[1]}return t?t.toLowerCase():""},calculateTextWidth:function(e){var t=e.name||"",i=0,n=0,s=0,a="",o=!1;if(e.formatter===as.Colorpicker)a="";else if(e.formatter===as.Dropdown&&e.options){for(var r="",l=0;l<e.options.length;l++)e.options[l].label.length>r.length&&(r=e.options[l].label);r=this.formatValue(e.formatter,0,0,r,e,null,this),a=r=h.stripHTML(r)}else{var c=0,d=this.settings.dataset;this.settings.groupable&&(d=this.originalDataset);for(var u=0;u<d.length;u++){var p=this.fieldValue(d[u],e.field),g=d[u];if(o=(p=this.formatValue(e.formatter,u,0,p,e,g,this)).toString().indexOf("btn-secondary")>-1,c=(p=h.stripHTML(p)).toString().length,this.settings.groupable&&g)for(var f=0;f<g.length;f++){var m=this.fieldValue(g[f],e.field);m=this.formatValue(e.formatter,u,0,m,e,g,this),(c=(m=h.stripHTML(m)).toString().length)>i&&(i=c,a=m)}c>i&&(i=c,a=p)}if(this.filterExpr&&this.filterExpr.length>0){var v=$.grep(this.filterExpr,(function(t){return t.columnId===e.id}));if(v&&1===v.length){var b=v[0].value;(c=b.toString().length)>i&&(i=c,a=b)}}if(""===a&&(e.formatter===as.Date||e.formatter===as.Time)){var y=new Date(9999,11,31,23,59,59,999);y=this.formatValue(e.formatter,0,0,y,e,null,this),a=y=h.stripHTML(y)}}var w=!!e.formatter&&e.formatter.toString().indexOf('<span class="tag')>-1;s+=45,!!e.formatter&&e.formatter.toString().indexOf("datagrid-alert-icon")>-1&&(s+=20),w&&(s+=10),o&&(s+=50),this.settings.editable&&e.editor===ds.Spinbox&&(s+=46),!this.settings.editable||e.formatter!==as.Dropdown&&e.formatter!==as.Lookup&&e.editor!==ds.Time||(s+=10),this.settings.editable&&e.editor===ds.Date&&(s+=5),n=this.calculateTextRenderWidth(a)+s,e.formatter===as.Colorpicker&&(n=150);var x=void 0===e.sortable||e.sortable?48:40,C=this.calculateTextRenderWidth(t,!0)+x;return e.filterType&&this.settings.filterable&&(C<40&&(C=40),"checkbox"!==e.filterType&&(""!==a?C<n+40&&""!==a&&(C=n+55):C<120&&(C=120))),Math.ceil(Math.max(n,C))},calculateTextRenderWidth:function(e,t){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");return this.fontCached&&this.fontHeaderCached||(this.fontCached=J.currentTheme.id&&J.currentTheme.id.indexOf("uplift")>-1?"400 16px arial":"400 14px arial",this.fontHeaderCached=J.currentTheme.id&&J.currentTheme.id.indexOf("uplift")>-1?"600 14px arial":"700 12px arial"),i.font=this.fontCached,t&&(i.font=this.fontHeaderCached),i.measureText(e).width},setScrollClass:function(){if(this.hasLeftPane||this.hasRightPane){this.element.removeClass("has-vertical-scroll has-less-rows");var e=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),t=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>e,i=parseInt(this.bodyWrapperCenter[0].offsetHeight,10);parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>i+2&&this.element.addClass("has-vertical-scroll"),t&&this.element.addClass("has-horizontal-scroll")}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fixColumnIds()},fixColumnIds:function(){for(var e=0;e<this.settings.columns.length;e++){var t=this.settings.columns[e],i=this.columnById(t.id);if(i.length>1)for(var n=1;n<i.length;n++)i[n].id="".concat(i[n].id,"-").concat(n)}},getStretchColumnIdx:function(){var e=this,t=e.stretchColumnIdx;return-1===t&&"last"!==e.settings.stretchColumn&&e.headerNodes().each((function(i){$(this).attr("data-column-id")===e.settings.stretchColumn&&(t=i)})),t},columnWidth:function(e,t){return this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1),this.calculateColumnWidth(e,t)},calculateColumnWidth:function(e,t){var i,n=this.visibleColumns(!0),s=t===this.visibleColumns().length-1,a=this.getContainer(e.id);this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),!this.elemWidth&&this.element.closest(".datagrid-default-modal-width").length>0?(this.elemWidth=this.settings.paging?466:300,this.element.css("width",this.elemWidth),this.element.css("min-width",0),this.isInModal=!0):this.element.parent().is(".modal-body")&&(this.elemWidth=this.settings.paging?466:300,this.element.css("min-width")&&(this.elemWidth=parseInt(this.element.css("min-width"),10)),this.isInModal=!0),this.widthSpecified=!1,this.widthPixel=!1),e.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&e.width&&(this.widthPixel="string"!=typeof e.width);var o=e.width;"string"==typeof e.width&&-1===e.width.indexOf("px")&&(this.widthPercent=!0,i=e.width.replace("%",""));var r=this.calculateTextWidth(e);if(this.widthSpecified&&o||(o=Math.max(r,o||0)),(!this.widthSpecified||void 0===e.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(e.id)){var l=Math.round(this.elemWidth/n.length);o=l-(s?2:0),l<r&&(o=r)}if("selectionCheckbox"!==e.id&&"favorite"!==e.id||(o=43,e.width=o),"favorite"===e.id&&(o=62,e.width=o),"expander"===e.id&&(o=55,e.width=o),"rowStatus"===e.id&&(o=62,e.width=o),"rowReorder"===e.id&&(o=62,e.width=o),"drilldown"===e.id&&(o=78,e.width=o),e.minWidth&&o<e.minWidth&&(o=e.minWidth),e.minWidth&&o>e.maxWidth&&(o=e.maxWidth),this.totalWidths[a]+=e.hidden?0:o,"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===e.id)return this.stretchColumnIdx=t,this.stretchColumnWidth=o,' style="width: 99%"';if(s){var c=this.elemWidth-this.totalWidths[a];this.isInModal&&null===this.settings.stretchColumn&&!this.settings.sizeColumnsEqually&&c>0&&!this.widthPercent&&!e.width&&(o=this.elemWidth,e.width=o),"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=c),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return this.widthPercent||void 0!==o?' style="width: '.concat(this.widthPercent?"".concat(i,"%"):"".concat(o,"px"),'"'):""},calculateRowspan:function(e,t,i){var n=0,s=null;if(!i.rowspan)return null;for(var a=0;a<this.settings.dataset.length;a++)e===this.settings.dataset[a][i.field]&&(n++,null===s&&(s=a));return t===s?' rowspan ="'.concat(n,'"'):""},calculateTotals:function(){return this.settings.totals=vs.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(e){return e+(/(px|%)/i.test("".concat(e))?"":"px")},setupTooltips:function(e,t){if(e||t||this.settings.enableTooltips){var i,n=this,s={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};this.settings.filterable?(s.headerColumn="".concat(s.th," .datagrid-column-wrapper"),s.headerFilter="".concat(s.th," .datagrid-filter-wrapper .btn-menu"),s.header="".concat(s.headerColumn,", ").concat(s.headerFilter)):s.header=s.th,s.iconAlert="".concat(s.td," .icon-alert"),s.iconSuccess="".concat(s.td," .icon-success"),s.iconError="".concat(s.td," .icon-error"),s.iconInfo="".concat(s.td," .icon-info"),s.icons="".concat(s.iconAlert,", ").concat(s.iconSuccess,", ").concat(s.iconError,", ").concat(s.iconInfo),e&&this.settings.enableTooltips?s.str="".concat(s.header,", ").concat(s.td,", ").concat(s.icons,", ").concat(s.rowstatus):s.str=e?"".concat(s.header,", ").concat(s.rowstatus):"".concat(s.header,", ").concat(s.td,", ").concat(s.icons);var a=function(e,t){t=void 0===t?400:t,i=setTimeout((function(){var t=C.hasClass(e,"datagrid-column-wrapper"),i=!!C.hasClass(e.parentNode,"datagrid-filter-wrapper")&&e.parentNode.querySelectorAll(".popupmenu.is-open").length>0,s=$(e).data("gridtooltip")||n.cacheTooltip(e),a=t?e.parentNode:e,o=n.getOuterWidth(a);s&&(s.forced||s.textwidth>o-35)&&!i&&n.showTooltip(s)}),t)},o=function(e,t){t=void 0===t?400:t,clearTimeout(i),setTimeout((function(){n.hideTooltip(),C.hasClass(e.parentNode,"datagrid-filter-wrapper")&&n.removeTooltipData(e)}),t)};this.element.off("mouseenter.gridtooltip",s.str).on("mouseenter.gridtooltip",s.str,(function(){a(this)})).off("mouseleave.gridtooltip click.gridtooltip",s.str).on("mouseleave.gridtooltip click.gridtooltip",s.str,(function(){o(this)})).off("longpress.gridtooltip",s.str).on("longpress.gridtooltip",s.str,(function(){a(this,0)})).off("keydown.gridtooltip",s.str).on("keydown.gridtooltip",s.str,(function(e){var t=e.which||e.keyCode||e.charCode||0,i=!1;return e.shiftKey&&112===t?a(this,0):27===t&&(i=n.isGridtooltip(),o(this,0)),i&&e.preventDefault(),!i})),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",(function(){a(this)})).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",(function(){o(this)})).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",(function(){a(this,0)}))}},getOuterWidth:function(e){var t=getComputedStyle(e),i=e.offsetWidth;return i+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10)},closest:function(e,t){return e&&(t(e)?e:this.closest(e.parentNode,t))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(e,t){var i=this.settings,n=t;n||(n=i.treeGrid?i.treeDepth[e].node:this.getActiveDataset()[e]);for(var s=0;s<this.settings.columns.length;s++){var a=this.settings.columns[s];a.hidden||this.updateCellNode(e,s,this.fieldValue(n,a.field),!0)}},updateColumns:function(e,t){void 0===t&&(t=null);var i=[];this.settings.filterable&&this.filterRowRendered&&(i=this.filterConditions()),this.settings.columns=e,t&&(this.settings.columnGroups=t),this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(i)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var e=this.settings.saveUserSettings;!$.isEmptyObject(e)&&this.canUseLocalStorage()&&(e.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),e.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),e.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),e.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),e.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),e.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),e.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(e){return!1}return!1},setOriginalColumns:function(){this.originalColumns=C.deepCopy(this.settings.columns)},columnsFromString:function(e,t){if(!e)return[];var i=JSON.parse(e);if(!i)return[];for(var n=0;n<i.length;n++){var s=void 0,a=this.columnById(i[n].id),o=a.width;a&&(s=i[n].hidden,$.extend(i[n],a[0]),void 0!==s?i[n].hidden=s:delete i[n].hidden,t&&(i[n].width=o))}return i},restoreColumns:function(e){if(this.settings.saveColumns&&this.canUseLocalStorage())if(e)this.updateColumns(e);else{var t=localStorage[this.uniqueId("columns")];!e&&t&&(this.originalColumns=C.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(t))}},restoreUserSettings:function(e){var t=this.settings.saveUserSettings;if(e||!$.isEmptyObject(t)&&this.canUseLocalStorage())if(e){if(e.columns&&this.updateColumns(e.columns),e.rowHeight&&this.rowHeight(e.rowHeight),e.sortOrder&&this.setSortColumn(e.sortOrder.sortId,e.sortOrder.sortAsc),e.pagesize&&(this.settings.pagesize=parseInt(e.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(e.pagesize,10),e.activePage||this.pagerAPI.setActivePage(1,!0)),e.showPageSizeSelector&&(this.settings.showPageSizeSelector=e.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(e.showPageSizeSelector)),e.filter&&this.applyFilter(e.filter,"restore"),e.activePage){var i=parseInt(e.activePage,10);this.pagerAPI.setActivePage(i,!0),this.restoreActivePage=!0}}else{if(t.columns){var n=localStorage[this.uniqueId("usersettings-columns")];n&&(this.settings.columns=this.columnsFromString(n))}if(t.rowHeight){var s=localStorage[this.uniqueId("usersettings-row-height")];s&&(this.settings.rowHeight=s)}if(t.sortOrder){var a=localStorage[this.uniqueId("usersettings-sort-order")];a&&(this.sortColumn=JSON.parse(a),this.restoreSortOrder=!0)}if(t.pagesize){var o=localStorage[this.uniqueId("usersettings-pagesize")];o&&(this.settings.pagesize=parseInt(o,10))}if(t.showPageSizeSelector){var r=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(r="true"===r.toString().toLowerCase())&&(this.settings.showPageSizeSelector=r)}if(t.activePage){var l=localStorage[this.uniqueId("usersettings-active-page")];l&&(this.savedActivePage=parseInt(l,10),this.restoreActivePage=!0)}if(t.filter){var c=localStorage[this.uniqueId("usersettings-filter")];c&&(this.savedFilter=JSON.parse(c),this.restoreFilter=!0)}}},copyThenStringify:function(e){if(!e)return JSON.stringify(e);var t=e.map((function(e){var t=C.extend({},e);return t.editorOptions&&delete t.editorOptions,t}));return JSON.stringify(t)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var e=C.deepCopy(this.originalColumns),t=this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null;this.updateColumns(e,t)}this.clearFilter()},hideColumn:function(e){var t=this.columnIdxById(e);if(-1!==t){if(this.settings.columns[t].hidden=!0,this.headerNodes().eq(t).addClass("is-hidden"),this.colGroupNodes().eq(t).addClass("is-hidden"),this.tableBody.find("> tr > td:nth-child(".concat(t+1,")")).addClass("is-hidden"),this.updateColumnGroup(),this.hasColSpans){var i=this.element.find(".datagrid-header th").eq(t).attr("colspan");if(i&&i>0){i-=1;for(var n=0;n<i;n++)t+=i,this.tableBody.find("> tr > td:nth-child(".concat(t+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:t,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var e=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",e)},showColumn:function(e){var t=this.columnIdxById(e);if(-1!==t){if(this.settings.columns[t].hidden=!1,this.headerNodes().eq(t).removeClass("is-hidden"),this.tableBody.find("> tr > td:nth-child(".concat(t+1,")")).removeClass("is-hidden"),this.bodyColGroup&&this.bodyColGroup.find("col").eq(t).removeClass("is-hidden"),this.updateColumnGroup(),this.hasColSpans){var i=this.element.find(".datagrid-header th").eq(t).attr("colspan");if(i&&i>0){i-=1;for(var n=0;n<i;n++)t+=i,this.tableBody.find("> tr > td:nth-child(".concat(t+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:t,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(e,t,i){hs.exportToCsv(e,t,i,this)},exportToExcel:function(e,t,i){hs.exportToExcel(e,t,i,this)},copyToDataSet:function(e,t,i,n){hs.copyToDataSet(e,t,i,n,this)},personalizeColumns:function(){var e=this,t=this,i='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(M.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');i+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:M.translate("PersonalizeColumns"),content:i,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:M.translate("Close"),click:function(e,t){t.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",(function(i,n){n&&(t.isColumnsChanged=!1,n.element.find(".searchfield").searchfield({clearable:!0}),n.element.find(".listview").listview({source:e.settings.columns,template:'\n            <ul>\n            {{#dataset}}\n              {{#name}}\n              <li>\n                <a href="#" target="_self" tabindex="-1">\n                  <label class="inline">\n                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>\n                    <span class="label-text">{{name}}</span>\n                  </label>\n                </a>\n              </li>\n              {{/name}}\n            {{/dataset}}\n            </ul>',searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(e){return e.name}}}).off("selected.datagrid").on("selected.datagrid",(function(e,i){var n=i.elem.find(".checkbox"),s=n.attr("data-column-id"),a=n.prop("checked");if(i.elem.removeClass("is-selected hide-selected-color"),!n.is(":disabled")){t.isColumnsChanged=!0;var o={node:{},api:$(this).data("listview")};if(o.api){var r=t.columnIdxById(s);-1!==r&&o.api.settings.dataset[r]&&(o.node=o.api.settings.dataset[r])}a?(t.hideColumn(s),n.prop("checked",!1),o.node.hidden=!0):(t.showColumn(s),n.prop("checked",!0),o.node.hidden=!1),t.settings.groupable&&t.rerender()}})),n.element.on("close.datagrid",(function(){t.isColumnsChanged=!1})),n.element.on("keydown.datagrid",(function(e){27===e.keyCode&&(n.close(),$("body").off("beforeopen.datagrid"))})))}))},setColumnWidth:function(e,t,i){var n=parseFloat(t),s=this.columnById(e)[0],a=-1;if(n&&("string"==typeof e&&this.headerNodes().each((function(t){$(this).attr("data-column-id")===e&&(a=t)})),"number"!=typeof t&&(t=n/100*this.element.width()),!(Math.abs(t-s.width)<2))){if("number"==typeof s.colspan&&(t/=s.colspan),s&&(s.width=t),i)this.bodyColGroup.find("col").eq(a)[0].style.width="".concat(t,"px");this.element.trigger("columnchange",[{type:"resizecolumn",index:a,columns:this.settings.columns}]),this.saveUserSettings()}},isEllipsisActiveHeader:function(e){return(void 0===(e=e||{}).sortable||e.sortable)&&"ellipsis"===e.textOverflow},activeEllipsisHeaderAll:function(){for(var e=0,t=this.settings.columns.length;e<t;e++){var i=this.settings.columns[e].id,n=this.columnById(i)[0];if(this.isEllipsisActiveHeader(n)){var s=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(i,'"]'));this.activeEllipsisHeader(s)}}},activeEllipsisHeader:function(e){if(e){var t=e.querySelector(".datagrid-column-wrapper .datagrid-header-text"),i=e.scrollWidth<t.scrollWidth+65;e.classList[i?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var e=this,t=this;if(!this.resizeHandle){var i,n,s,a,o;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table").before(this.resizeHandle);var r=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",(function(){t.currentHeader&&(t.dragging=!0,r=!1,n=t.currentHeader.attr("data-column-id"),i=t.columnById(n)[0],t.isEllipsisActiveHeader(i)&&t.currentHeader[0].classList.add("is-ellipsis-active"))})).on("drag.datagrid",(function(n,l){if(t.currentHeader){var c=i.minWidth||12,d=i.maxWidth||1e3,h=t.currentHeader.index();e.dragging=!0;var p=l.left+5,g=e.bodyColGroup.find("col").eq(h)[0],f=parseInt(t.currentHeader.width(),10),m=parseInt(g.style.width||f,10);g.style.width.indexOf("%")>-1&&(m=f);var v=parseFloat(t.currentHeader.offsetParent().offset().left),b=parseFloat(t.currentHeader.offset().left),y=0===h?0:b-v-2;t.hasLeftPane&&t.settings.frozenColumns.left.length&&0===h&&(y=b-v-2);var w=f-(p-y);if((s=m-w)<c||s>d)t.resizeHandle.css("cursor","inherit");else if(s!==m&&(g.style.width="".concat(s,"px"),_.pressedKeys.get("Shift")&&(r=!0),"fit"===e.settings.resizeMode&&!r||"flex"===e.settings.resizeMode&&r)){var x=M.isRTL()?h+1:h-1,C=t.settings.columns[x];if(!C)return;var k=C.minWidth||12,T=C.maxWidth||1e3,S=M.isRTL()?u.getPreviousSibling(t.currentHeader,":not(.is-hidden)"):u.getNextSibling(t.currentHeader,":not(.is-hidden)");o=S.getAttribute("data-column-id");var $=M.isRTL()?u.getPreviousSibling(g,":not(.is-hidden)"):u.getNextSibling(g,":not(.is-hidden)"),A=parseInt(S.offsetWidth,10),D=parseInt($.style.width||A,10);if($.style.width.indexOf("%")>-1&&(D=A),(a=D+w)<k||a>T)return void t.resizeHandle.css("cursor","inherit");if(a===D||!$)return;$.style.width="".concat(a,"px")}}})).on("dragend.datagrid",(function(){e.dragging=!1,t.isEllipsisActiveHeader(i)&&t.activeEllipsisHeader(t.currentHeader[0]),t.setColumnWidth(n,s),o&&("fit"===e.settings.resizeMode&&!r||"flex"===e.settings.resizeMode&&r)&&t.setColumnWidth(o,a)}))}},displayCounts:function(e){var t,i=this.tableBody.find("tr:visible").length,n=0,s="",a=this.settings.paging&&!this.settings.source,o=function(e){return M.formatNumber(e,{style:"integer"})};if(!a&&e||(this.recordCount=this.settings.dataset.length,i=this.settings.dataset.length),(this.settings.treeGrid&&a||!e)&&(this.filteredCount=this.settings.dataset.filter((function(e){return e._isFilteredOut})).length,i=this.settings.dataset.length,this.recordCount=this.settings.dataset.filter((function(e){return!e._isFilteredOut})).length),this.settings.groupable&&(n=i,i=this.originalDataset.length,s=(s="({0} ".concat(M.translate(1===n?"Group":"Groups"),")")).replace("{0}",o(n))),this.contextualToolbar&&this.contextualToolbar.length&&this.contextualToolbar.find(".selection-count").text("".concat(this._selectedRows.length," ").concat(M.translate("Selected"))),e&&-1!==e&&(i=e),void 0===e&&this.settings.source&&(i=this.lastCount||0),t=this.settings.showFilterTotal&&this.filteredCount>0?(t=(t="(".concat(M.translate(1===i?"ResultOf":"ResultsOf"),")")).replace("{0}",o(i-this.filteredCount))).replace("{1}",o(i)):(t="({0} ".concat(M.translate(1===i?"Result":"Results"),")")).replace("{0}",o(i)),this.settings.resultsText)if("function"==typeof this.settings.resultsText)if(this.grandTotal)t=this.settings.resultsText(this,this.grandTotal,i);else{var r=0===this.filteredCount?0:i-this.filteredCount;t=this.settings.resultsText(this,i,r)}else t=this.settings.resultsText;this.toolbar&&(u.html(this.toolbar.find(".datagrid-result-count"),t,"<span>"),u.html(this.toolbar.find(".datagrid-group-count"),s,"<span>"),this.toolbar[0].setAttribute("aria-label",this.toolbar.find(".title").text()),this.toolbar.find(".datagrid-row-count").text(i)),u.html(this.element.closest(".modal").find(".datagrid-result-count"),t,"<span>"),this.lastCount=i,this.checkEmptyMessage()},setEmptyMessage:function(e){this.emptyMessage?(this.emptyMessage.settings=e,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(e).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(e,t,i){var n=$(t.target),s=n.closest("tr"),a=n.closest("td"),o=a.index(),r=this.settings.treeGrid?this.actualRowIndex(s):this.dataRowIndex(s),l=!0;n.is("a")&&(i=!1),i&&(t.stopPropagation(),t.preventDefault());var c=this.settings.dataset[r];if(this.settings.groupable&&(s.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?l=!1:(r=this.actualPagingRowIndex(this.actualRowIndex(s)),(c=this.settings.dataset[this.groupArray[r].group])&&c.values&&(c=c.values[this.groupArray[r].node]))),l){var d={row:r,rowElem:s,cell:o,cellElem:a,item:c,originalEvent:t};this.element.trigger(e,[d])}return!1},handleScrollY:function(e){var t=e.currentTarget.scrollTop;t!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=t,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var e=this,t=this,i="multiple"===this.settings.selectable,n="mixed"===this.settings.selectable;if(!t.settings.cellNavigation&&t.settings.rowNavigation&&t.element.on("focus.datagrid","tbody > tr",(function(){$(this).addClass("is-active-row")})).on("blur.datagrid","tbody > tr",(function(){$("tbody > tr",t.table).removeClass("is-active-row")})),this.settings.paging&&this.tableBody.on("page.".concat("datagrid"),(function(i,n){"filtered"===n.type&&e.settings.source||(t.saveUserSettings(),t.render(null,n),t.afterPaging(n))})).on("pagesizechange.".concat("datagrid"),(function(e,i){t.render(null,i),t.afterPaging(i)})),t.settings.showHoverState&&t.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",(function(){t.rowNodes($(this)).addClass("is-hover-row")})).on("mouseleave.datagrid","tbody > tr",(function(){t.rowNodes($(this)).removeClass("is-hover-row")})),(this.hasLeftPane||this.hasRightPane)&&(t.element.find(".datagrid-wrapper").on("scroll.table",(function(e){t.handleScrollY(e)})),t.element.find(".datagrid-wrapper").on("wheel.table",(function(e){0!==e.originalEvent.deltaY&&(e.currentTarget.scrollTop+=e.originalEvent.deltaY,e.preventDefault(),t.handleScrollY(e))}))),this.settings.virtualized){var s=0,a=0;t.bodyWrapperCenter.on("scroll.vtable",f((function(){var e=this.scrollTop,i=e>t.virtualRange.bottom-t.virtualRange.bodyHeight-25,n=e<t.virtualRange.top+25;e!==s&&(n||i)&&(s=this.scrollTop,t.clearCache(),t.renderRows())}),0)),$("body").on("resize.vtable",(function(){this.offsetHeight!==a&&(a=this.scrollTop,t.clearCache(),t.renderRows())}))}this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",(function(e){return $(e.target).parent().is(".datagrid-filter-wrapper")||$(e.target).parent().is(".lookup-wrapper")||(e.stopPropagation(),t.setSortColumn($(this).attr("data-column-id"))),!1})),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",(function(e){var t=e.currentTarget.getAttribute("href");t&&"#"!==t||e.preventDefault()})),t.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",(function(e){var i;i=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData?e.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var n=/\n/.exec(i),s=/\r/.exec(i),a=/\r\n/.exec(i);if((!t.activeCell||!t.activeCell.node.hasClass("is-readonly"))&&(i&&s||n||a)){var o=n?i.split("\n"):i.split("\r");a&&(o=i.split("\r\n")),o.pop();var r=parseInt($(e.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),l=parseInt($(e.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;t.editor&&t.editor.input&&t.commitCellEdit(),t.copyToDataSet(o,r,l,t.settings.dataset)}})),this.element.off("click.datagrid").on("click.datagrid","tbody td",(function(e){var s=null,a=null,o=$(e.target),r=o.closest("td");if(!$(e.currentTarget).parent().hasClass(".datagrid-row-detail"))if(!r.is(".has-btn-actions")||o.is(".btn-actions")){if(o.parents("td").length>1&&(e.preventDefault(),e.stopPropagation()),t.triggerRowEvent("click",e,!0),t.setActiveCell(r),o.is(".datagrid-expand-btn"))return s=$(this).closest("tr"),a=t.actualRowIndex(s),t.toggleRowDetail(a),t.toggleGroupChildren(s),t.toggleChildren(e,a),!1;var l=o.is(".datagrid-selection-checkbox")||1===o.find(".datagrid-selection-checkbox").length,c=!!t.settings.clickToSelect||l;o.is(".datagrid-drilldown")&&(c=!1),n&&((c=l)||(e.shiftKey&&t.activatedRow().length&&(t.selectRowsBetweenIndexes([t.activatedRow()[0].row,o.closest("tr").attr("aria-rowindex")-1]),e.preventDefault()),t.toggleRowActivation(o.closest("tr")))),c&&i&&e.shiftKey?(t.selectRowsBetweenIndexes([t.lastSelectedRow,o.closest("tr").attr("aria-rowindex")-1]),e.preventDefault()):c&&t.toggleRowSelection(o.closest("tr"));var d=t.makeCellEditable(t.activeCell.rowIndex,t.activeCell.cell,e),h=r.attr("aria-colindex")-1,u=t.columnSettings(h);if(u.click&&"function"==typeof u.click&&o.is("button, input[checkbox], a")||o.parent().is("button")){var p=$(this).closest("tr"),g=t.actualRowIndex(p);a=t.dataRowIndex(p);var f=t.settings.treeGrid?t.settings.treeDepth[g].node:t.settings.dataset[a];if(r.hasClass("is-focusable")&&!o.is(t.buttonSelector)&&!o.parent("button").is(t.buttonSelector))return;t.settings.groupable&&(p.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(g=t.actualPagingRowIndex(t.actualRowIndex(p)),(f=t.settings.dataset[t.groupArray[g].group])&&f.values&&(f=f.values[t.groupArray[g].node]))),(!r.hasClass("is-cell-readonly")&&o.is("button, input[checkbox], a")||o.parent().is("button"))&&u.click(e,[{row:g,cell:t.activeCell.cell,item:f,originalEvent:e}])}if(u.menuId){t.closePrevPopupmenu();var m=$(this).find("button");m.popupmenu({attachToBody:!0,menuId:u.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return r.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",(function(){var e=$(this);e.data("popupmenu")&&!e.data("tooltip")&&e.data("popupmenu").destroy()})),u.selected&&m.off("selected.gridpopupbtn").on("selected.gridpopupbtn",u.selected)}d&&setTimeout((function(){$("textarea, input",r).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",r).length&&(t.quickEditMode=!0)}),0)}else t.setActiveCell(r)})),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",(function(){e.rerender()})),$(window).on("resize.datagrid",(function(){var i=0;for(e.clearCache(),i=0;i<t.settings.columns.length;i++){var n=t.settings.columns[i];t.columnWidth(n,i)}(t.stretchColumnDiff>0||t.stretchColumnWidth>0)&&(t.bodyColGroup.find("col").eq(t.getStretchColumnIdx())[0].style.width="".concat(t.stretchColumnDiff>0?"99%":"".concat(t.stretchColumnWidth,"px")))}))),this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",(function(e){t.triggerRowEvent("dblclick",e,!0)})),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody tr",(function(e){e.stopPropagation(),t.closePrevPopupmenu(),t.triggerRowEvent("contextmenu",e,!!t.settings.menuId);var i=function(){return t.settings.menuId&&$("#".concat(t.settings.menuId)).length>0};return!i()||!C.isSubscribedTo(t.element[0],e,"contextmenu","datagrid")&&!i()||(e.preventDefault(),$(e.currentTarget).popupmenu({menuId:t.settings.menuId,eventObj:e,beforeOpen:t.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",(function(e,i){t.settings.menuSelected&&t.settings.menuSelected(e,i)})).off("close.gridpopuptr").on("close.gridpopuptr",(function(){var e=$(this);e.data("popupmenu")&&e.data("popupmenu").destroy()})),!1)})),this.headerRow.off("mousemove.datagrid").on("mousemove.datagrid","th",(function(e){if(!t.dragging&&(t.currentHeader=$(e.target).closest("th"),t.currentHeader.hasClass("is-resizable"))){var i=t.currentHeader.closest(".header-detail"),n=i.length?parseInt(i.css("margin-left"),10):0,s=parseInt(t.currentHeader.position().left,10)-(n||0)+t.element.scrollLeft(),a=s+t.currentHeader.outerWidth(),o=e.pageX-s>a-e.pageX,r=0;r=o?a-5:s-5;var l=t.currentHeader.parent().find("th:visible").index(t.currentHeader);(0===l&&(M.isRTL()?o:!o)||l===t.visibleColumns().length)&&(r="-999"),M.isRTL()||o||(t.currentHeader=t.currentHeader.prevAll(":visible").not(".is-hidden").first()),M.isRTL()&&!o&&(t.currentHeader=t.currentHeader.nextAll(":visible").not(".is-hidden").first()),t.currentHeader.hasClass("is-resizable")&&(t.createResizeHandle(),t.resizeHandle[0].style.left="".concat(r,"px"),t.resizeHandle[0].style.cursor="")}})).off("contextmenu.datagrid").on("contextmenu.datagrid","th",(function(e){return!t.settings.headerMenuId||(e.preventDefault(),t.closePrevPopupmenu(),$(e.currentTarget).popupmenu({menuId:t.settings.headerMenuId,eventObj:e,attachToBody:!0,beforeOpen:t.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",(function(e,i){t.settings.headerMenuSelected(e,i)})).off("close.gridpopupth").on("close.gridpopupth",(function(){var e=$(this);e.data("popupmenu")&&e.data("popupmenu").destroy()})),!1)})),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",(function(){var e=$(this);e.hasClass("is-checked")?(e.removeClass("is-checked").attr("aria-checked","false"),t.unSelectAllRows()):(e.addClass("is-checked").attr("aria-checked","true"),t.selectAllRows())})),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",(function(e){var i=e.target;$(i).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout((function(){var e=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&t.editor){if(e.is(".spinbox, .trigger, .code-block-actions")||!$(i).is(":visible"))return;if(e&&t.editor.className&&e.closest(t.editor.className).length>0)return;t.commitCellEdit()}}),150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||t.editor&&t.editor.input&&t.commitCellEdit()}))},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(e){var t=$(e);t.data("popupmenu")&&t.trigger("close")}))},refreshSelectedRowHeight:function(){var e=this.element.parent().find(".toolbar:not(.contextual-toolbar)"),t=e.find('[data-option="row-short"]'),i=e.find('[data-option="row-medium"]'),n=e.find('[data-option="row-normal"]');"short"===this.settings.rowHeight&&(t.parent().addClass("is-checked"),i.parent().removeClass("is-checked"),n.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(t.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),n.parent().removeClass("is-checked")),"normal"===this.settings.rowHeight&&(t.parent().removeClass("is-checked"),i.parent().removeClass("is-checked"),n.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))},appendToolbar:function(){var e=null,t="",n=null,s=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar)").length)e=this.element.parent().find(".toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{e=$('<div class="toolbar" role="toolbar"></div>'),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(t=$('<div class="title">'.concat(this.settings.toolbar.title,"  </div>"))),t||(t=e.find(".title")),e.append(t),this.settings.toolbar.results&&t.append('<span class="datagrid-result-count"></span>');var a=$('<div class="buttonset"></div>').appendTo(e);if(this.settings.toolbar.keywordFilter){var o=$('<label class="audible" for="gridfilter">'.concat(M.translate("Keyword"),"</label>")),r=$('<input class="searchfield" name="searchfield" placeholder="'.concat(M.translate("Keyword"),'" id="gridfilter">'));a.append(o),this.settings.toolbar.collapsibleFilter||r.attr("data-options",'{ "collapsible": false }'),a.append(r)}this.settings.toolbar.dateFilter&&a.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(M.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((n=$('<div class="more"></div>').insertAfter(a)).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),e.addClass("has-more-button"));var l=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&l.append('<li><a href="#" data-option="personalize-columns">'.concat(M.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&l.append('<li><a href="#" data-option="reset-layout">'.concat(M.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&l.append('<li><a href="#" data-option="export-to-excel">'.concat(M.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.advancedFilter&&l.append('<li><a href="#">'.concat(M.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&l.append('<li><a href="#">'.concat(M.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(M.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&l.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(M.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-short">').concat(M.translate("Short"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(M.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-normal">').concat(M.translate("Normal"),"</a></li>")),!0===this.settings.toolbar.filterRow&&l.append("".concat('<li class="separator"></li><li class="heading">').concat(M.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(M.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(M.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(M.translate("ClearFilter"),"</a></li>")),"object"===i(this.settings.toolbar.filterRow)){var c='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(c+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(M.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(c+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(M.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(c+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(M.translate("ClearFilter"),"</a></li>")),l.append(c)}this.settings.toolbar.actions&&n.append(l),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(e):this.element.before(e)}if(e.find(".btn-actions").popupmenu().on("selected",(function(e,t){var i=t.attr("data-option");"row-short"!==i&&"row-medium"!==i&&"row-normal"!==i||s.rowHeight(i.substr(4)),"personalize-columns"===i&&s.personalizeColumns(),"reset-layout"===i&&s.resetColumns(),"export-to-excel"===i&&s.exportToCsv(),"show-filter-row"===i&&s.toggleFilterRow(),"run-filter"===i&&s.applyFilter(null,"menu"),"clear-filter"===i&&s.clearFilter()})),this.settings.initializeToolbar&&!e.data("toolbar")){var d=$.fn.parseOptions(e);this.settings.toolbar.fullWidth&&(d.rightAligned=!0),e.toolbar(d)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var h=e.find(".searchfield"),u=h.parent().find(".close.icon");h.off("keypress.datagrid").on("keypress.datagrid",(function(e){13!==e.keyCode&&"change"!==e.type||(e.preventDefault(),s.keywordSearch(h.val()))})),u.off("click.datagrid").on("click.datagrid",(function(){s.keywordSearch(h.val())}))}if(this.settings.toolbar&&this.settings.toolbar.contextualToolbar){this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")}this.toolbar=e,this.element.addClass("has-toolbar")}},rowHeight:function(e){var t=[];return e&&(this.settings.rowHeight!==e&&t.push({before:this.settings.rowHeight,after:e}),this.settings.rowHeight=e),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("short-rowheight medium-rowheight normal-rowheight").addClass("".concat(this.settings.rowHeight,"-rowheight")),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===e?40:"medium"===e?30:25),this.saveUserSettings(),this.refreshSelectedRowHeight(),t.length&&this.element.triggerHandler("rowheightchanged",t),this.settings.rowHeight},keywordSearch:function(e){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each((function(){var e=$(this);e.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),e.prev().find(".plus-minus").removeClass("active"),e.removeClass("is-expanded").css("display",""),e.find(".datagrid-row-detail").css("height","")})),this.element.find(".search-mode").each((function(){var e=$(this),t=e.text();e.text(t.replace("<i>","").replace("</i>",""))})),e=(e||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:e,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(e)},setSearchActivePage:function(e){if(this.pagerAPI){var t=this;e||(e={}),this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?e.activePage=this.pagerAPI.filteredActivePage||1:""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(e=i(e)):this.restoreActivePage||(e=i(e),this.restoreActivePage=!1),e.activePage=this.activePage,this.renderPager(e)}function i(e){return e.activePage=1,t.grandTotal&&(e.grandTotal=t.grandTotal),e}},filterKeywordSearch:function(){var e,t,i,n,s=this,a=s.filterExpr,o=function(e,t){var i=!1,n=function(i){var n=s.columnById(i)[0],o=s.fieldValue(e,n.field),r=s.settings.columns.indexOf(n);return s.formatValue(n.formatter,t,r,o,n,e,s).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(a.value)>-1};return"all"===a.column?s.element.find("th:visible").each((function(){var e=$(this).attr("data-column-id");if(i=n(e))return!1})):a.columnId&&(i=n(a.columnId)),i};if(a&&1===a.length)if(a=a[0],s.settings.treeGrid)for(i=0,n=(e=s.settings.treeDepth).length;i<n;i++)t=""!==a.value&&!o(e[i].node,i),e[i].node._isFilteredOut=t;else for(i=0,n=(e=s.settings.dataset).length;i<n;i++)t=""!==a.value&&!o(e[i],i),e[i]._isFilteredOut=t},highlightSearchRows:function(e){var t=this,i=this;if(e&&""!==e){i.tableBody.find("tr").toArray().forEach((function(n){var s=i.rowNodes(n.getAttribute("aria-rowindex")-1),a=function(n){var s=!1;return n.toArray().forEach((function(n){[].slice.call(n.querySelectorAll("td")).forEach((function(n){var a=n.innerText.toLowerCase(),o=!!i.settings.searchExpandableRow||!u.hasClass(t,"datagrid-expandable-row");a.indexOf(e)>-1&&o&&(s=!0,[].slice.call(n.querySelectorAll("*")).forEach((function(t){if(h.unescapeHTML(t.innerHTML)===t.textContent){var i=t.textContent,n=new RegExp("(".concat(D.escapeRegExp(e),")"),"gi");u.addClass(t,"search-mode"),u.html(t,i.replace(n,"<i>$1</i>"))}})))}))})),s}(s);a||s.find(".datagrid-row-detail").length?i.settings.searchExpandableRow&&a&&s.is(".datagrid-expandable-row")&&""!==e&&(s.prev().show(),s.prev().find(".datagrid-expand-btn").addClass("is-expanded"),s.prev().find(".plus-minus").addClass("active"),s.addClass("is-expanded").css("display","table-row"),s.find(".datagrid-row-detail").css("height","auto")):s.addClass("is-filtered").hide()}))}},getActiveDataset:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;return e.groupable&&(t=this.originalDataset),t},getDataset:function(){return this.settings.dataset.map((function(e){return delete e._isFilteredOut,e}))},selectAllRows:function(){for(var e=[],t=this.getActiveDataset(),i=0,n=t.length;i<n;i++){var s=this.settings.groupable?i:this.pagingRowIndex(i);(this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch)&&t[i]._isFilteredOut||e.push(s)}this.dontSyncUi=!0,this.selectRows(e,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(e,t){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var i=this._selectedRows.length-1;i>=0;i--)if(this._selectedRows[i]){var n=this.settings.groupable?this._selectedRows[i].idx:this.pagingRowIndex(this._selectedRows[i].idx);this.unselectRow(n,!0,!0)}this.settings.dataset.map((function(e){delete e._selected})),this.dontSyncUi=!1,this._selectedRows=[],e||this.syncSelectedUI(),t||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map((function(e){delete e._selected}))},isRowSelected:function(e){return!!e&&!0===e._selected},selectNode:function(e,t,i,n){var s=null,a="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(i&&!this.isRowSelected(i)||n)&&(s=e.find(".datagrid-selection-checkbox").closest("td"),e.addClass(a).attr("aria-selected","true"),s.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true").attr("aria-selected","true").attr("aria-label","Selected"),i&&(i._selected=!0))},selectRow:function(e,t,i){var n,s=this,a=null,o=this,r=this.settings;if(void 0!==e&&-1!==e&&r.selectable&&!this.isRowDisabled(e)&&(a=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),n=this.dataRowIndex(a),isNaN(n)&&(n=e),a&&(a.length||!r.source))){if("function"==typeof r.onBeforeSelect&&!i)if(!1===r.onBeforeSelect({node:a,idx:n}))return;var l=function(e,t){return!!s._selectedRows.filter((function(i){return function(e,t,i){return i&&i.idx===e&&i.elem&&i.elem.is(t)}(e,t,i)})).length};if("single"===r.selectable){var c=-1;this._selectedRows.length>0?c=this._selectedRows[0].pagingIdx:a[0]&&a[0].classList.contains("is-selected")&&(c=n),-1!==c&&(this.unselectRow(c,!0,!0),!a.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var d=r.source&&"multiple"===r.selectable&&r.allowSelectAcrossPages;if(!a.hasClass("is-selected")||d){var h;if(r.treeGrid){var u=parseInt(a.attr("aria-level"),10);if(h=r.treeDepth[o.pagerAPI&&r.source?a.index():e].node,a.is(".datagrid-tree-parent")&&"multiple"===r.selectable)a.add(a.nextUntil('[aria-level="'.concat(u,'"]'))).each((function(e){var t=$(this),i=t.attr("aria-rowindex")-1,n=o.actualPagingRowIndex(i),s=r.treeDepth[n].node;if(r.selectChildren||!r.selectChildren&&0===e){var c=!t.is(a)&&!t.hasClass("is-selected");o.selectNode(t,i,s),c&&!l(n,t)&&o._selectedRows.push({idx:n,data:s,elem:t,page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:n,pagesize:r.pagesize})}}));else if("siblings"===r.selectable){var p,g;this.unSelectAllRows(!0,!0),1===u?p=a.parent().find('[aria-level="1"]'):u>1&&(p=a.nextUntil('[aria-level="'.concat(u-1,'"]')).filter('[aria-level="'.concat(u,'"]')),g=a.prevUntil('[aria-level="'.concat(u-1,'"]')).filter('[aria-level="'.concat(u,'"]'))),a.add(p).add(g).each((function(e){var t=$(this),i=t.attr("aria-rowindex")-1,n=o.actualPagingRowIndex(i),s=r.treeDepth[n].node;if(r.selectChildren||!r.selectChildren&&0===e){var c=!t.is(a)&&!t.hasClass("is-selected");o.selectNode(t,i,s),c&&!l(n,t)&&o._selectedRows.push({idx:n,data:s,elem:t,page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:n,pagesize:r.pagesize})}}))}else o.selectNode(a,e,h);o.setNodeStatus(a)}else{if(h=r.dataset[n],r.groupable){var f=o.actualPagingRowIndex(o.actualRowIndex(a));if(isNaN(f))return;var m=o.groupArray[f];h=o.settings.dataset[m.group].values[m.node],l(h.idx,a)||this._selectedRows.push({idx:h.idx,data:h,elem:a,group:r.dataset[o.groupArray[f].group],page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:n,pagesize:o.settings.pagesize})}o.selectNode(a,n,h),o.lastSelectedRow=e}if(!r.groupable){var v=o.actualPagingRowIndex(e);-1===v&&(v=e),l(v,o.visualRowNode(v))||this._selectedRows.push({idx:v,data:h,elem:o.visualRowNode(v),page:o.pagerAPI?o.pagerAPI.activePage:1,pagingIdx:e,pagesize:o.settings.pagesize})}}t||o.syncSelectedUI(),i||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(e){e.sort((function(e,t){return e-t}));for(var t=e[0];t<=e[1];t++)this.selectRow(t);this.displayCounts()},syncHeaderCheckbox:function(e){if(0!==this.headerNodes().length){var t=this.headerNodes().find(".datagrid-checkbox"),i=e.length,n=this._selectedRows.length,s=t.data("selected");this.settings.source&&this.settings.allowSelectAcrossPages&&(n=this.settings.dataset.filter((function(e){return e._selected})).length),n!==i&&n>0&&"partial"===s||n===i&&"all"===s&&0!==n||0===n&&"none"===s||(n>0&&t.data("selected","partial").addClass("is-checked is-partial"),n===i&&t.data("selected","all").addClass("is-checked").removeClass("is-partial"),0===n&&t.data("selected","none").removeClass("is-checked is-partial"))}},syncSelectedRows:function(){for(var e=this,t=this.settings,i=t.groupable&&this.originalDataset?this.originalDataset:t.dataset,n=null,s=function(s){var a=t.groupable?e.dataRowNode(n):e.visualRowNode(n);a[0]&&(e._selectedRows[s].elem=a,e.selectNode(a,n,i[n],!0))},a=0;a<this._selectedRows.length;a++)this.pagerAPI&&this._selectedRows[a].page===this.pagerAPI.activePage&&(n=this._selectedRows[a].idx,s(a)),this._selectedRows[a].pagesize===t.pagesize||t.groupable||(n=this._selectedRows[a].pagingIdx,t.dataset[n]?(s(a),this._selectedRows[a].idx=n,this._selectedRows[a].page=this.pagerAPI.activePage,this._selectedRows[a].pagesize=t.pagesize):(this._selectedRows[a].idx=n%t.pagesize,this._selectedRows[a].page=Math.round(n/t.pagesize)+1,this._selectedRows[a].pagesize=t.pagesize))},calculatePagerInfo:function(e,t,i){for(var n=this.settings,s=t||n.treeGrid?n.treeDepth:n.dataset,a={idx:e,page:1,pagesize:i="number"==typeof i&&i>0?i:n.pagesize,numOfPages:Math.ceil(s.length/i)},o=0;o<a.numOfPages;o++){if(e>=(a.page-1)*a.pagesize&&e<a.page*a.pagesize){a.pagingIdx=e-a.pagesize*o;break}a.page++}return a},syncSelectedRowsIdx:function(){var e=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset;if(0!==this._selectedRows.length&&0!==e.length){this._selectedRows=[];for(var t=0;t<e.length;t++)if(e[t]._selected){var i={idx:t,data:e[t],elem:this.dataRowNode(t),pagingIdx:t,pagesize:this.settings.pagesize};if(this.settings.groupable){var n=this.rowNodesByDataIndex(t);if(n.length){var s=this.actualPagingRowIndex(this.actualRowIndex(n)),a=this.groupArray[s].group;i.group=this.settings.dataset[a],i.page=this.calculatePagerInfo(a).page}}else i.page=this.calculatePagerInfo(t).page;this._selectedRows.push(i)}}},syncSelectedUI:function(){var e=this.getActiveDataset(),t=e;if(this.filterRowRendered){t=[];for(var i=0,n=e.length;i<n;i++)e[i]._isFilteredOut||t.push(i)}this.syncHeaderCheckbox(t),1!==this.contextualToolbar.length||this.dontSyncUi||(0===this._selectedRows.length&&this.contextualToolbar.animateClosed(),this._selectedRows.length>0&&0===this.contextualToolbar.height()&&this.contextualToolbar.css("display","block").one("animateopencomplete.datagrid",(function(){$(this).triggerHandler("recalculate-buttons")})).animateOpen())},activateRow:function(e){this.activatedRow()[0].row!==e&&this.toggleRowActivation(e)},deactivateRow:function(){var e=this.activatedRow()[0].row;e>=0&&this.toggleRowActivation(e)},activatedRow:function(){var e=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var t=this.settings,i=t.treeGrid?t.treeDepth:t.dataset,n=this.tableBody.find("tr.is-rowactivated");if(n.length){var s=this.dataRowIndex(n),a=t.indeterminate?s:this.actualRowIndex(n);e=[{row:a,item:i[a],elem:n}]}else{e=null;for(var o=0;o<i.length;o++)if(i[o]._rowactivated){e=[{row:o,item:i[o],elem:void 0}];break}null===e&&(e=[{row:-1,item:void 0,elem:n}])}}return e},toggleRowActivation:function(e){var t,i,n,s=this.settings,a=s.treeGrid?s.treeDepth:s.dataset;if("number"==typeof e){if(t=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(e+1,'"]')),n=e,this.pagerAPI&&s.source&&s.indeterminate){var o=e+(this.pagerAPI.activePage-1)*s.pagesize;t=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(o+1,'"]'))}}else t=(i=e instanceof jQuery?e:$(e))[0],n=s.treeGrid||s.groupable?this.actualRowIndex(i):this.dataRowIndex(i);s.indeterminate&&!t&&(t=(i=this.actualRowNode(n))[0]),!!a[n]&&a[n]._rowactivated?this.deactivateRowNode(n,a):(this.deactivateAllRowNodes(a),this.activateAllRowNodes(n,a))},activateAllRowNodes:function(e,t){var i=this;if(!("number"!=typeof e||e<0)){var n=this.settings;void 0===t&&(t=n.treeGrid?n.treeDepth:n.dataset);var s=[{row:e,item:t[e]}];t[e]&&$.when(this.element.triggerHandler("beforerowactivated",s)).done((function(n){var a;"string"==typeof(a=n)&&"false"===a.toLowerCase()||"boolean"==typeof a&&!1===a||"number"==typeof a&&0===a||(i.rowNodes(e).toArray().forEach((function(e){e.classList.add("is-rowactivated")})),t[e]._rowactivated=!0,s=[{row:e,item:t[e]}],i.element.triggerHandler("rowactivated",s))}))}},deactivateRowNode:function(e,t){if(!("number"!=typeof e||e<0)){var i=this.settings;if(void 0===t&&(t=i.treeGrid?i.treeDepth:i.dataset),t[e]&&!i.disableRowDeactivation)this.rowNodes(e).toArray().forEach((function(e){e.classList.remove("is-rowactivated")})),delete t[e]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:e,item:t[e]}])}},deactivateAllRowNodes:function(e){var t=this.settings,i=null;void 0===e&&(e=t.treeGrid?t.treeDepth:t.dataset);var n=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(n.length>0){n.forEach((function(e){e.classList.remove("is-rowactivated")}));var s=t.treeGrid||t.groupable?this.actualRowIndex($(n)):this.dataRowIndex($(n));i={row:s,item:e[s]},e[s]&&delete e[s]._rowactivated}else for(var a=0;a<e.length;a++){var o=e[a];if(o._rowactivated){delete o._rowactivated,i={row:a,item:o};break}}null!==i&&this.element.triggerHandler("rowdeactivated",[i])},toggleRowSelection:function(e){var t="number"==typeof e?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):e,i="single"===this.settings.selectable,n="number"==typeof e?e:this.actualRowIndex(t);if(this.settings.groupable&&(n=this.dataRowIndex(t)),!(!1===this.settings.selectable||this.editor&&t.hasClass("is-selected")))return i&&t.hasClass("is-selected")?(this.unselectRow(n),this.displayCounts(),this._selectedRows):(t.hasClass("is-selected")?this.unselectRow(n):this.selectRow(n),this.displayCounts(),this._selectedRows)},unselectRow:function(e,t,i){var n=this,s=n.settings,a=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),o=s.source&&"multiple"===s.selectable&&s.allowSelectAcrossPages;if(a&&void 0!==e){var r=function(e,t){var i=function(i,s){delete i._selected,void 0===s&&(s=t);for(var a=0;a<n._selectedRows.length;a++)if(n._selectedRows[a].idx===s){if(o&&n._selectedRows[a].elem&&!n._selectedRows[a].elem.is(e))continue;n._selectedRows.splice(a,1);break}};if(n.cellNode(e,n.columnIdxById("selectionCheckbox")),e.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==n.columnIdxById("selectionCheckbox")&&n.cellNode(e,n.columnIdxById("selectionCheckbox")).find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").attr("aria-checked","false").removeAttr("aria-selected").removeAttr("aria-label"),s.treeGrid)for(var a=0;a<s.treeDepth.length;a++)n.isRowSelected(s.treeDepth[a].node)&&(void 0!==t?t===s.treeDepth[a].idx-1&&i(s.treeDepth[a].node):i(s.treeDepth[a].node));else{var r,l=e.length?n.dataRowIndex(e):t;void 0!==l&&l>-1&&(r=s.dataset[l]),s.groupable&&(r=n.originalDataset[l]),void 0!==r&&(s.paging&&s.source?i(r,l):i(r))}};if(s.treeGrid){var l=parseInt(a.attr("aria-level"),10);if(a.is(".datagrid-tree-parent")&&"multiple"===s.selectable)a.add(a.nextUntil('[aria-level="'.concat(l,'"]'))).each((function(e){var t=$(this),i=t.attr("aria-rowindex")-1,a=n.actualPagingRowIndex(i);(s.selectChildren||!s.selectChildren&&0===e)&&r(t,a)}));else if("siblings"===s.selectable)a.parent().find(".is-selected").each((function(e){var t=$(this),i=t.attr("aria-rowindex")-1,a=n.actualPagingRowIndex(i);(s.selectChildren||!s.selectChildren&&0===e)&&r(t,a)}));else{var c=n.actualPagingRowIndex(e);r(a,c)}n.setNodeStatus(a)}else r(a,e);t||n.syncSelectedUI(),i||n.element.triggerHandler("selected",[n._selectedRows,"deselect"])}},setNodeStatus:function(e){var t,i=this,n="multiple"===i.settings.selectable,s=i.settings,a=i.cellNode(e,i.columnIdxById("selectionCheckbox"));if(!n)return a.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),void(e.is(".is-selected")&&a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"));var o=function(e,t){e.each((function(){var e=$(this),n=i.cellNode(e,i.columnIdxById("selectionCheckbox")),s=i.getSelectedStatus(e,t);n.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),"mixed"===s?n.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"):s&&n.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true")}))};t=e.add(e.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),s.selectChildren&&o(t),t=e,+e.attr("aria-level")>1&&(t=t.add(e.prevUntil('[aria-level="1"]')).add(e.prevAll('[aria-level="1"]:first'))),t=t.filter(".datagrid-tree-parent"),s.selectChildren&&o(t)},getSelectedStatus:function(e){var t=this.settings,i=0,n=0,s=0,a=e.add(e.nextUntil('[aria-level="1"]'));if(t.treeGrid&&"multiple"===t.selectable){var o=e.attr("aria-level");a=e.add(e.nextUntil('[aria-level="'.concat(o,'"]')))}return a.each((function(){i++,$(this).is(".is-selected")?n++:s++})),i===n||i!==s&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(e,t,i){var n=-1,s=this.settings,a="single"===s.selectable,o="multiple"===s.selectable||"mixed"===s.selectable,r="siblings"===s.selectable,l=this.getActiveDataset();if("number"==typeof e&&(e=[e]),!e||0===e.length)return this._selectedRows;if(a&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),n="[object Array]"===Object.prototype.toString.call(e)?e[0]:e.index(),this.selectRow(n,!0,!0)),o||r)if("[object Array]"===Object.prototype.toString.call(e)){for(var c=0;c<e.length;c++)this.selectRow(e[c],!0,!0);if(0===e.length)for(var d=0,h=l.length;d<h;d++)this.unselectRow(d,!0,!0)}else this.selectRow(e.index(),!0,!0);return this.displayCounts(),t||this.syncSelectedUI(),i||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(e,t){for(var i=this.settings,n=this.getActiveDataset(),s=-1,a=[],o=0;o<n.length;o++)if(i.groupable)for(var r=0;r<n[o].values.length;r++)s++,n[o].values[r][e]===t&&a.push(s);else(i.treeGrid?n[o].node:n[o])[e]===t&&a.push(o);return a},rowStatus:function(e,t,i){var n=this.getActiveDataset();if(!t)return delete n[e].rowStatus,void this.updateRow(e);if(!/dirty/.test(t)&&n[e]){n[e].rowStatus={};var s=n[e].rowStatus;s.icon=t,t=(t=t.charAt(0).toUpperCase()+t.slice(1)).replace("-progress","Progress"),s.text=M.translate(t),i=i?i.charAt(0).toUpperCase()+i.slice(1):s.text,s.tooltip=i,this.updateRow(e),this.setupTooltips(!0)}},columnById:function(e){return $.grep(this.settings.columns,(function(t){return t.id===e}))},columnIdxById:function(e){for(var t=this.settings.columns,i=-1,n=0;n<t.length;n++)if(t[n].id===e){i=n;break}return i},handleKeys:function(){var e=this,t=this,i="multiple"===t.settings.selectable,n=$("th .datagrid-checkbox",t.headerRow);t.element.on("keydown.datagrid","th",(function(e){var n,s=e.which||e.keyCode||e.charCode||0,a=$(this),o=t.columnIdxById(a.attr("data-column-id")),r=t.visibleColumns().length-1;$(e.target).closest(".popupmenu").length>0||(13!==s&&32!==s||((i&&0===o?$(".datagrid-checkbox",a):a).trigger("click.datagrid").focus(),32===s&&e.preventDefault()),-1!==[35,36,37,39].indexOf(s)&&(n=o,n=/35|36/i.test(s)||(e.ctrlKey||e.metaKey)&&/37|39/i.test(s)?M.isRTL()?36===s||(e.ctrlKey||e.metaKey)&&37===s?r:0:35===s||(e.ctrlKey||e.metaKey)&&39===s?r:0:M.isRTL()?39===s?o>0?o-1:o:o<r?o+1:r:37===s?o>0?o-1:o:o<r?o+1:r,t.activeCell.cell=n,a.removeAttr("tabindex").removeClass("is-active"),$("th:not(.is-hidden)",this.headerContainer).eq(n).attr("tabindex","0").addClass("is-active").focus(),e.preventDefault()),40===s&&(a.removeAttr("tabindex"),t.activeCell.node=t.cellNode(0,t.settings.groupable?0:t.activeCell.cell).attr("tabindex","0").focus(),e.preventDefault()))})),t.element.on("keydown.datagrid","td, input",(function(i){var n=!1;if(113!==(i.which||i.keyCode||i.charCode||0)||e.inlineMode||(t.settings.actionableMode=!t.settings.actionableMode,n=!0),n)return i.preventDefault(),i.stopPropagation(),n})),t.element.on("keydown.datagrid","td",(function(e){var s=e.which||e.keyCode||e.charCode||0,a=!1,o=$(e.target),r=M.isRTL(),l=t.activeCell.node,c=$(this).parent(),d=c.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),h=c.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),u=t.activeCell.row,p=t.activeCell.cell,g=t.columnSettings(p),f=c.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),m=t.settings.dataset[t.dataRowIndex(c)],v=t.tableBody.find("tr:visible"),b=function(e){var i=v.filter('[aria-rowindex="'.concat(e+1,'"]'));return i.is(".datagrid-rowgroup-header")?i.index():t.dataRowIndex(i)};l.length||(t.activeCell.node=t.cellNode(u,p),l=t.activeCell.node);var y=function(e,i,n){if(f)return function(e,i,n){var s=t.activeCell.groupNode||l,a=e+(n?-1:1);return a=a>i?n?s.prevAll(":visible").last():s.nextAll(":visible").last():n?s.prevAll(":visible").first():s.nextAll(":visible").first()}(e,i,n);var s=e+(n?-1:1);if(s>i)return i;for(;t.settings.columns[s]&&t.settings.columns[s].hidden;)s=n?s-1:s+1;return s},w=!!$(".datagrid-selection-checkbox",l).length,x=v.last(),C=t.settings.columns.length-1;if(t.settings.onKeyDown){var k=function(t){t||(e.stopPropagation(),e.preventDefault())},T={activeCell:t.activeCell,row:u,cell:p};if(!1===t.settings.onKeyDown(e,T,k)||!k)return e.stopPropagation(),void e.preventDefault()}if(-1!==[9,37,38,39,40].indexOf(s)){if(o.closest(".code-block").length&&(9!==s||!e.shiftKey||0!==t.getFocusables(l).index))return;if(9!==s){if(o.is(".code-block-actions"))return;if(o.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))return}}if(-1!==[9,37,39].indexOf(s)){if(9===s&&!t.settings.actionableMode)return;if(9!==s&&e.altKey)p=37===s&&!r||39===s&&r?0:C,t.setActiveCell(u,p);else if(!t.quickEditMode||9===s){if(9===s&&e.shiftKey&&o.is(".code-block-actions")?t.focusNextPrev("prev",l):p=!r&&(37===s||9===s&&e.shiftKey)||r&&(39===s||9===s)?y(p,C,!0):y(p,C),-1===p&&!t.settings.actionableMode)return;if(-1===p&&t.settings.actionableMode&&(p=C,-1===--u))return;if(p===C&&C===t.activeCell.cell&&t.settings.actionableMode&&(p=0,++u===t.visibleRowCount))return;p instanceof jQuery?t.setActiveCell(p):t.setActiveCell(u,p),t.settings.actionableMode&&(t.makeCellEditable(t.activeCell.rowIndex,p,e),t.containsTextField(l)&&t.containsTriggerField(l)&&(t.quickEditMode=!0)),t.quickEditMode=!1,a=!0}}if(38===s&&!t.quickEditMode)if(e.altKey||e.metaKey){var S=b(0);t.setActiveCell(S,p),a=!0}else{if(0===u&&!d.is(".datagrid-rowgroup-header"))return l.removeAttr("tabindex"),void t.element.find("th").eq(p).attr("tabindex","0").focus();t.setActiveCell(d,p),a=!0}if(40!==s||t.quickEditMode||(e.altKey||e.metaKey?(t.setActiveCell(x,p),a=!0):(t.setActiveCell(h,p),a=!0)),32===s&&e.ctrlKey&&l){var A="";(u=l.closest("tr")).children().each((function(){var e=$(this);A+="".concat(e.text()," ")})),$("body").toast({title:"",audibleOnly:!0,message:A}),a=!0}if(36===s&&(t.setActiveCell(u,0),a=!0),35===s&&(t.setActiveCell(u,C),a=!0),34===s&&(t.setActiveCell(x,p),a=!0),33===s&&(t.setActiveCell(b(0),p),a=!0),32===s&&(!t.settings.editable||w)){if(u=l.closest("tr"),1===o.closest(".datagrid-row-detail").length)return;e.preventDefault();var D=o.find(".datagrid-expand-btn, .datagrid-drilldown");if(D&&D.length)return D.trigger("click.datagrid"),void e.preventDefault();i&&e.shiftKey?t.selectRowsBetweenIndexes([t.lastSelectedRow,u.attr("aria-rowindex")-1]):t.toggleRowSelection(u)}if(t.settings.editable&&32===s&&(t.editor||t.makeCellEditable(t.activeCell.rowIndex,p,e)),13===s&&l.is(".has-btn-actions")){var E=l.find(".btn-actions");E.length&&E.trigger("click")}if(13===s&&g.click&&"function"==typeof g.click&&(l.hasClass("is-cell-readonly")||g.click(e,[{row:u,cell:p,item:m,originalEvent:e}])),t.settings.editable&&13===s){if(o.is("textarea")&&e.shiftKey)return;if(o.is(".btn-menu")||o.closest(".popupmenu.is-open").length)return;t.editor?(t.quickEditMode=!1,t.commitCellEdit(),t.setNextActiveCell(e)):(t.makeCellEditable(t.activeCell.rowIndex,p,e),t.containsTextField(l)&&t.containsTriggerField(l)&&(t.quickEditMode=!0)),a=!0}if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(s)||e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||!t.settings.editable||t.editor||t.makeCellEditable(t.activeCell.rowIndex,p,e),i&&!t.editor&&(e.ctrlKey||e.metaKey)&&65===s&&(n.addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),t.selectAllRows(),a=!0),a)return e.preventDefault(),e.stopPropagation(),!1}))},getFocusables:function(e){var t=$(":focusable",e);return{elements:t,index:t.index($(":focus"))}},focusNextPrev:function(e,t){if(t&&"string"==typeof e){e=e.toLowerCase();var i=this.getFocusables(t),n=i.elements,s=n.length,a=i.index;/\b(next|prev)\b/g.test(e)&&(a="next"===e?a+1>=s?0:a+1:a-1<0?s:a-1,n.eq(a).focus())}},containsTextField:function(e){var t,i=["image","button","submit","reset","checkbox","radio"],n="textarea, input",s=i.length;for(n+=s?":not(":"",t=0;t<s;t++)n+="[type=".concat(i[t],"],");return n=s?"".concat(n.slice(0,-1),")"):"",!!$(n,e).length},containsTriggerField:function(e){return!$(".dropdown, .datepicker, .lookup",e).length},isRowDisabled:function(e){if(this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&"true"===this.rowNodes(e).attr("aria-disabled"))return!0;return!1},isCellEditable:function(e,t){if(!this.settings.editable)return!1;var i=this.columnSettings(t);if(i.readonly)return!1;if(this.isRowDisabled(e)||!this.activeCell.node)return!1;var n=this.activeCell.node.find(".datagrid-cell-wrapper"),s=n.text()?n.text():this.fieldValue(this.settings.dataset[e],i.field);if(i.isEditable){var a=this.settings.dataset[e];if(this.settings.treeDepth&&this.settings.treeDepth[e]&&(a=this.settings.treeDepth[e].node),!i.isEditable(e,t,s,i,a,this,"is-editable"))return!1}return!!i.editor},makeCellEditable:function(e,t,i){if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var n=this.activeCell.node.find(".datagrid-cell-wrapper"),s=n.parent("td"),a=$(".datagrid-tree-node",n).length>0,o=$(".datagrid-expand-btn",n).length>0;if(s.hasClass("is-editing")||s.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var r=this.columnSettings(t);if(!r.editor)return 32!==i.keyCode||$(i.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var l=this.actualRowNode(e),c=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(l)):this.dataRowIndex(l),d=this.rowData(c),u=$(".is-editor",s).length>0,p=$(".is-placeholder",n).length>0,g=n.text()?n.text():this.fieldValue(d,r.field);if((u||p)&&(g=this.fieldValue(d,r.field)),!this.isCellEditable(c,t))return!1;if((o||a)&&(o&&(g=$("> span",n).text()),"string"==typeof g&&(g=g.replace(/^\s/,""))),r.inlineEditor?s.addClass("is-editing-inline"):(u&&n.css({position:"static",height:n.outerHeight()}),s.addClass("is-editing"),n.empty()),g=h.sanitizeConsoleMethods(g),this.element.triggerHandler("beforeentereditmode",[{row:c,cell:t,item:d,target:n,value:g,column:r,editor:this.editor}]),1===this.visibleColumns().length&&s.addClass("has-singlecolumn"),this.editor=new r.editor(c,t,g,n,r,i,this,d),this.editor.row=c,this.editor.cell=t,this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(g=this.fieldValue(d,r.field)),this.editor.val(g),this.settings.showDirty){var f=g;""===f&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(f=!1);var m={originalVal:f,isDirty:!1};this.addToDirtyArray(c,t,m)}return this.editor.focus(),this.element.triggerHandler("entereditmode",[{row:c,cell:t,item:d,target:n,value:g,column:r,editor:this.editor}]),!0}},rowData:function(e){return this.settings.groupable?this.originalDataset[e]:this.settings.treeGrid?this.settings.treeDepth[e].node:this.settings.dataset[e]},commitCellEdit:function(e){if(this.editor){var t,i,n,s,a=this.editor.input,o=this.getEditorName(this.editor),r="editor"===o,l="fileupload"===o,c=!a.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");"function"==typeof this.editor.val&&(t=this.editor.val()),r?i=this.editor.td:l?("clear"===this.editor.status?t="":"init"!==this.editor.status&&"cancel"!==this.editor.status||(t=this.editor.originalValue),i=this.tableBody.find("#".concat(a.attr("id"))).closest("td"),t=h.escapeHTML(t)):(i=a.closest("td"),t=h.escapeHTML(t)),null!==this.settings.source&&c?(n=this.activeCell.rowIndex,s=this.activeCell.dataRow):(n=this.actualRowIndex(i.parent()),s=this.dataRowIndex(i.parent()));var d=i.attr("aria-colindex")-1,u=this.columnSettings(d),p=this.settings.treeGrid?this.settings.treeDepth[s].node:this.getActiveDataset()[s],g=this.fieldValue(p,u.field);if(u.beforeCommitCellEdit&&!e)if(!1===u.beforeCommitCellEdit({cell:d,row:s,item:p,editor:this.editor,api:this}))return;if(this.editor){g=h.sanitizeConsoleMethods(g),t=h.sanitizeConsoleMethods(t);var f=i.hasClass("is-editing-inline");i.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?s:n,d,t,!1,f);var m=this.fieldValue(p,u.field);this.element.triggerHandler("exiteditmode",[{row:n,cell:d,item:p,target:i,value:m,oldValue:g,column:u,editor:this.editor}])}}},validateCell:function(e,t){var i,n,s=this,a=this,o=this.columnSettings(t);if(o.validate){var r,l,c=[],d=o.validate.split(" "),h=$.fn.validation,u=this.fieldValue(this.settings.dataset[e],o.field),p=[],g="";for(l=0;l<d.length;l++){var f=h.rules[d[l]],m={row:e,cell:t,item:this.settings.dataset[e],column:o,grid:a};r=$.Deferred(),f.async?f.check(u,$("<input>").val(u),m,v,r):v(f.check(u,$("<input>").val(u),m),!0,d[l],r),c.push(r)}(i=$).when.apply(i,c).then((function(){var i=$.fn.validation.ValidationTypes;for(var r in i)if(g="",n=i[r],p[n.type]&&(g=p[n.type]),""!==g){a.showCellError(e,t,g,n.type);var l=s.dataRowNode(e);a.element.trigger("cell".concat(n.type),{row:e,cell:t,message:g,target:s.cellNode(l,t),value:u,column:o})}else a.clearCellError(e,t,n.type)}))}function v(e,t,i,s){var a=h.rules[i];n=$.fn.validation.ValidationTypes[a.type]||$.fn.validation.ValidationTypes.error,g="",p[n.type]&&(g=p[n.type]),!e&&t&&(g?(g=(/^\u2022/.test(g)?"":"• ")+g,g+="<br/>".concat("• ",a.message)):g=a.message,p[n.type]=g),s.resolve()}},showCellError:function(e,t,i,n){var s=this.dataRowNode(e),a=this.cellNode(s,t);if(this.clearNonVisibleCellErrors(e,t,n),!a.length)return this.nonVisibleCellErrors.push({row:e,cell:t,message:i,type:n}),void this.showNonVisibleCellErrors();a.addClass(n).attr("data-".concat(n,"message"),i);var o=a.find(".icon-".concat(n));if(!o.length){a.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(n)],icon:n})));var r={forced:!0,placement:"bottom",content:i,isError:"error"===n||"dirtyerror"===n,wrapper:o=a.find(".icon-".concat(n))};this.cacheTooltip(o,r),this.setupTooltips(!1,!0)}},showNonVisibleCellErrors:function(){var e=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove();else{var t=function(t){var i=$.fn.validation.ValidationTypes[t].type,n=$.grep(e.nonVisibleCellErrors,(function(e){return e.type===i}));e.showNonVisibleCellErrorType(n,i)};for(var i in $.fn.validation.ValidationTypes)t(i)}},showNonVisibleCellErrorType:function(e,t){var i,n,s,a,o=[],r=$.fn.validation.ValidationTypes[t]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(n=this.toolbar.parent().find(".table-errors")),0!==e.length){for(a=0;a<e.length;a++){var l=Math.floor((e[a].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(l,o)&&o.push(l)}for(a=0;a<o.length;a++)i="".concat((i?"".concat(i,"<br>"):"")+M.translate(r.pagingMessageID)," ").concat(o[a]);0===this.toolbar.parent().find(".table-errors").length&&(n=$('<div class="table-errors"></div>')),(s=n.find(".icon-".concat(t))).length||(n.append($($.createIcon({classes:["icon-".concat(t)],icon:t}))),s=n.find(".icon-".concat(t))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(n),this.cacheTooltip(s,{forced:!0,placement:"bottom",content:i,isError:"error"===t||"dirtyerror"===t,wrapper:s}),this.setupTooltips(!1,!0)}else n&&n.length&&(s=n.find(".icon-".concat(r.type)),this.hideTooltip(),n.find(".icon-".concat(r.type)).remove())},clearAllCellError:function(e,t){var i=$.fn.validation.ValidationTypes;for(var n in i){var s=i[n];this.clearCellError(e,t,s.type)}},clearCellError:function(e,t,i){this.clearNonVisibleCellErrors(e,t,i);var n=this.dataRowNode(e),s=this.cellNode(n,t);s.length&&this.clearNodeErrors(s,i)},clearNonVisibleCellErrors:function(e,t,i){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var n=this.toolbar.parent().find(".table-errors").find(".icon-".concat(i));if(n.length)$.grep(this.nonVisibleCellErrors,(function(e){return e.type===i?e:""})).length||n.remove()}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(n){return n.row!==e||n.cell!==t||n.type!==i?n:""})),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(e){this.dataRowNode(e).removeClass("error alert rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(e,"","");for(var t=0;t<this.settings.columns.length;t++)this.clearAllCellError(e,t)},clearAllErrors:function(){for(var e=0,t=0;t<this.settings.dataset.length;t++){this.settings.dataset[t].rowStatus&&(delete this.settings.dataset[t].rowStatus,e++);for(var i=0;i<this.settings.columns.length;i++)this.clearAllCellError(t,i)}e>0&&this.render()},clearNodeErrors:function(e,t){(e=e instanceof jQuery?e[0]:e).classList.remove(t),e.removeAttribute("data-".concat(t,"message"));var i=e.querySelector(".icon-".concat(t));i&&(i.parentNode.removeChild(i),this.hideTooltip())},resetRowStatus:function(){for(var e=this.settings.dataset.filter((function(e){return e.rowStatus})),t=0;t<e.length;t++)delete e[t].rowStatus;e.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(e){(e=e instanceof jQuery?e[0]:e)&&[].slice.call(e.querySelectorAll(".is-dirty-cell")).forEach((function(e){e.classList.remove("is-dirty-cell")}))},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(e){if(this.settings.showDirty&&"number"==typeof e){var t=this.rowNodes(e);this.clearDirtyClass(t),this.dirtyArray&&(this.dirtyArray[e]=void 0)}},clearDirtyCell:function(e,t){this.settings.showDirty&&this.dirtyArray&&"number"==typeof e&&"number"==typeof t&&(void 0!==this.dirtyArray[e]&&(this.cellNode(e,t).removeClass("is-dirty-cell"),this.dirtyArray[e][t]=void 0))},dirtyCells:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,i=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,s=t.length;n<s;n++){var a=this.dirtyArray[n];if(void 0!==a)for(var o=0,r=a.length;o<r;o++){var l=a[o];void 0!==l&&l.isDirty&&i.push(e.treeGrid?t[n].node:t[n])}}return i},dirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset,i=[];if(e.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,s=t.length;n<s;n++){var a=this.dirtyArray[n];if(void 0!==a)for(var o=0,r=a.length;o<r;o++){var l=a[o];if(void 0!==l&&l.isDirty){i.push(e.treeGrid?t[n].node:t[n]);break}}}return i},getModifiedRows:function(e){for(var t=this.settings,i=t.treeGrid?t.treeDepth:t.dataset,n=[],s=0;s<i.length;s++){var a=t.treeGrid?i[s].node:i[s],o={row:s,data:a,cells:[]};if(this.isRowDirty(s)){o.type="dirty";for(var r=0;!e&&r<this.dirtyArray[s].length;r++){var l=this.dirtyArray[s][r];void 0!==l&&l.isDirty&&o.cells.push({row:s,col:r,cellData:l})}}void 0===a.rowStatus||"error"!==a.rowStatus.icon&&"in-progress"!==a.rowStatus.icon||(o.type="dirty"===o.type?["dirty",a.rowStatus.icon]:a.rowStatus.icon),void 0!==o.type&&n.push(e?a:o)}return n},showRowError:function(e,t,i){var n=i||"error";this.dataRowNode(e).addClass(i),this.rowStatus(e,n,t)},validateRow:function(e){if(e)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},validateAll:function(){for(var e=0;e<this.settings.dataset.length;e++)for(var t=0;t<this.settings.columns.length;t++)this.validateCell(e,t)},columnSettings:function(e){return this.settings.columns[e]||{}},coerceValue:function(e,t,i,n,s){var a;if(i.serialize){var o=this.settings,r=o.treeGrid?o.treeDepth:o.dataset;this.settings.groupable&&(r=this.originalDataset||r);var l=o.treeGrid?r[n].node:r[n];return a=i.serialize(e,t,i,n,s,l)}return i.sourceFormat?a=e instanceof Date?M.parseDate(e,i.sourceFormat):M.formatDate(e,{pattern:i.sourceFormat}):"number"==typeof t&&e&&(a=M.parseNumber(e)),a},updateCell:function(e,t,i){var n=this.columnSettings(t);void 0===i&&(i=this.fieldValue(this.settings.dataset[e],n.field)),this.updateCellNode(e,t,i,!0)},updateCellNode:function(e,t,i,n,s){var a,o=this.settings.groupable?this.rowNodesByDataIndex(e):this.rowNodes(e),r=o.find("td").eq(t),l=this.settings.columns[t]||{},c="",d=l.formatter?l.formatter:this.defaultFormatter,u=$(".editor",r).length>0,p=this.settings.treeGrid,g=p?this.actualPagingRowIndex(this.actualRowIndex(o)):this.dataRowIndex(o);(null==g||isNaN(g))&&(g=e);var f=this.rowData(g);0===o.length&&this.settings.paging&&(r=(o=this.visualRowNode(e)).find("td").eq(t));var m=this.fieldValue(f,l.field);if((n||void 0===(a=this.coerceValue(i,m,l,e,t)))&&(a=i),o.length&&f&&!f.rowStatus){var v=o.find("svg.icon-rowstatus");v.length&&v.remove()}if(this.removeTooltipData(r),0===t&&f&&f.rowStatus){var b=r.find("svg.icon-rowstatus");if(o&&r[0]){for(var y=0;y<o.length;y++)o[y].classList.add("rowstatus-row-".concat(f.rowStatus.icon));if(r[0].classList.add("rowstatus-cell"),!b.length){var w="success"===f.rowStatus.icon?"#icon-check":"#icon-exclamation";r.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat(w,'"></use></svg>'))}}if(f.rowStatus.tooltip){b=r.find("svg.icon-rowstatus");var x=f.rowStatus.icon;this.cacheTooltip(b,{forced:!0,placement:"right",content:f.rowStatus.tooltip,isError:"error"===x||"dirtyerror"===x,wrapper:r})}}if(a=h.unescapeHTML(a),l.field&&a!==m)if(l.field.indexOf(".")>-1){var C=f,k=l.field.split(".").length;l.field.split(".").forEach((function(e,t){t===k-1?C[e]=a:C=C[e]}))}else f[l.field]=a;var T=h.escapeHTML(a),S=u?a:T;(c=this.formatValue(d,e,t,S,l,f),l.contentVisible)&&(l.contentVisible(e,t,T,l,f)||(c=""));if(s||r.find(".datagrid-cell-wrapper").html(c),n||(this.validateCell(g,t),this.isDirtyCellUndefined(e,t)||(this.dirtyArray[e][t].value=i,this.dirtyArray[e][t].coercedVal=a,this.dirtyArray[e][t].escapedCoercedVal=h.escapeHTML(a),this.dirtyArray[e][t].cellNodeText=r.text(),this.dirtyArray[e][t].cell=t,this.dirtyArray[e][t].column=this.settings.columns[t],this.setDirtyCell(e,t))),this.settings.stretchColumnOnChange&&l){var A=this.calculateTextWidth(l);l.minWidth&&A<l.minWidth&&(A=l.minWidth),l.minWidth&&A>l.maxWidth&&(A=l.maxWidth),A>0&&A-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=A,this.stretchColumnDiff=0,this.setColumnWidth(l.id,A,!0))}if(m=h.sanitizeConsoleMethods(m),a=h.sanitizeConsoleMethods(a),(a=h.escapeHTML(a))!==m&&!n){var D={row:null!==this.settings.source?g:e,relativeRow:e,cell:t,target:r,value:a,oldValue:m,column:l};D.rowData=p&&this.settings.treeDepth[e]?this.settings.treeDepth[e].node:f,this.element.trigger("cellchange",D),this.wasJustUpdated=!0}},isRowDirty:function(e){var t=!1;if("number"==typeof e&&this.dirtyArray&&this.dirtyArray.length){var i=this.dirtyArray[e];if(void 0!==i)for(var n=0,s=i.length;n<s;n++){var a=i[n];if(void 0!==a&&a.isDirty){t=!0;break}}}return t},isCellDirty:function(e,t){return!this.isDirtyCellUndefined(e,t)&&this.dirtyArray[e][t].isDirty},addToDirtyArray:function(e,t,i){void 0===this.dirtyArray&&(this.dirtyArray=[]),void 0===this.dirtyArray[e]?(this.dirtyArray[e]=[],this.dirtyArray[e][t]=i):void 0===this.dirtyArray[e][t]&&(this.dirtyArray[e][t]=i)},setDirtyCell:function(e,t,i){var n=this.cellNode(e,t);i&&this.addToDirtyArray(e,t,i);var s=this.dirtyArray[e][t];s.originalVal===s.value||s.originalVal===s.coercedVal||s.originalVal===s.escapedCoercedVal||s.originalVal===s.cellNodeText?(this.dirtyArray[e][t].isDirty=!1,this.setDirtyIndicator(e,t,!1)):(this.dirtyArray[e][t].isDirty=!0,n[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(e,t,!0))},setDirtyIndicator:function(e,t,i,n){var s=this.cellNode(e,t);n&&this.addToDirtyArray(e,t,n),e<0||t<0||!s.length||(i?s[0].classList.add("is-dirty-cell"):s[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(e,t){return!(this.settings.showDirty&&"number"==typeof e&&"number"==typeof t&&e>-1&&t>-1&&void 0!==this.dirtyArray&&void 0!==this.dirtyArray[e]&&void 0!==this.dirtyArray[e][t])},visualRowIndex:function(e){var t="tr:visible:not(.is-hidden, .datagrid-expandable-row)",i=this.tableBody.find(t).index(e);return-1===i&&this.tableBodyLeft&&(i=this.tableBodyLeft.find(t).index(e)),-1===i&&this.tableBodyRight&&(i=this.tableBodyRight.find(t).index(e)),i},visualRowNode:function(e){var t=e;return this.settings.paging&&this.settings.source&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(e)?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):$([])},actualRowNode:function(e){return this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodes:function(e){var t=this.element;return e instanceof jQuery&&(t=e.closest(".datagrid-container"),e=e.attr("aria-rowindex")-1),t.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(e+1,'"]'))},rowNodesByDataIndex:function(e){e instanceof jQuery&&(e=e.attr("data-index"));var t=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(e,'"]')):$(),i=this.tableBody.find('tr[data-index="'.concat(e,'"]')),n=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(e,'"]')):$();return $(i).add(t).add(n)},cellNode:function(e,t){var i=this.settings.groupable?this.rowNodesByDataIndex(e).find("td"):this.rowNodes(e).find("td");return i.eq(t>=i.length?i.length-1:t)},actualRowIndex:function(e){return e.attr("aria-rowindex")-1},pagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t+=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},actualPagingRowIndex:function(e){var t=e;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(t-=(this.pagerAPI.activePage-1)*this.settings.pagesize),t},dataRowNode:function(e){return this.tableBody.find('tr[data-index="'.concat(e,'"]'))},dataRowIndex:function(e){return parseInt(e.attr("data-index"),10)},setActiveCell:function(e,t){var i,n,s,a=this.activeCell,o=e,r=e instanceof jQuery&&e.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(e instanceof jQuery&&0===e.length||("number"==typeof e&&(i=e,o=this.tableBody.find("tr:visible").eq(e),n=this.actualRowIndex(o),s=this.dataRowIndex(o)),e instanceof jQuery&&e.is("td")&&((r=e.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(o=e.parent()),t=e.attr("aria-colindex")-1,i=this.visualRowIndex(e.parent()),n=this.actualRowIndex(e.parent()),s=this.dataRowIndex(e.parent()),o=e.parent()),e instanceof jQuery&&e.is("tr")&&(i=this.visualRowIndex(e),n=this.actualRowIndex(e),s=this.dataRowIndex(e),o=e),i<0||t<0))){a.node&&1===a.node.length&&this.activeCell.node.removeAttr("tabindex").removeClass("is-active"),a.cell===t&&a.row===e||this.hideTooltip(),this.activeCell.node=this.cellNode(r||o?o:n>-1?n:i,t).attr("tabindex","0"),this.activeCell.node&&1===a.node.length?(this.activeCell.row=i,this.activeCell.cell=t,n=this.actualRowIndex(this.activeCell.node.parent()),s=this.dataRowIndex(this.activeCell.node.parent())):this.activeCell=a,(!$("input, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",this.activeCell.node).length||this.activeCell.node.is(".has-btn-actions")&&this.activeCell.node.find(".btn-actions").length)&&(this.activeCell.node.focus(),r&&(this.activeCell.groupNode=this.activeCell.node)),this.activeCell.node.is(".is-focusable")&&this.activeCell.node.find("button").focus(),void 0!==s&&(this.activeCell.dataRow=s),void 0!==n&&(this.activeCell.rowIndex=n);var l=+o.find("td[colspan]").attr("colspan");if(r&&this.activeCell.node&&a.node&&!(e instanceof jQuery&&e.is("td"))&&(t<l?(o.find("td[colspan]").attr("tabindex","0").focus(),this.activeCell.groupNode=o.find("td[colspan]")):t>=l?(o.find("td").eq(t-l+1).attr("tabindex","0").focus(),this.activeCell.groupNode=o.find("td").eq(t-l+1)):(o.find("td").eq(t).attr("tabindex","0").focus(),this.activeCell.groupNode=o.find("td").eq(t))),r&&e instanceof jQuery&&e.is("td")&&(this.activeCell.cell=l-1+t,e.is("[colspan]")&&(this.activeCell.cell=t)),this.settings.cellNavigation){var c=this.headerNodes(),d=0;this.hasColSpans&&(d=0,c.eq(t).prevAll("[colspan]").each((function(e,t){var i=$(t).attr("colspan")-1;d+=i})),t-=d),c.removeClass("is-active"),c.eq(t).addClass("is-active")}this.activeCell.isFocused=!0;var h=this.settings.columns[t];h&&h.expandOnActivate&&this.activeCell&&this.activeCell.node&&this.activeCell.node.addClass("is-active"),this.element.trigger("activecellchange",[{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell}])}},setNextActiveCell:function(e){var t=this;if("keydown"===e.type)if(this.settings.actionableMode){var i=13===e.keyCode?40:e.keyCode;if(32===i)return;setTimeout((function(){var e=$.Event("keydown.datagrid");e.keyCode=i,t.activeCell.node.trigger(e)}),0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(e,t){if(!(!t||t&&!t.length||e<0)){var i=this.settings.treeDepth[e].node;i.children=i.children||[];for(var n=0,s=(t=JSON.parse(JSON.stringify(t))).length;n<s;n++)i.children.push(t[n]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(e,t){this.settings.treeDepth[e].node.expanded=t},toggleChildren:function(e,t){if(!this.settings.groupable){var i=this,n=this.settings,s=this.rowNodes(t),a=s.find(".datagrid-expand-btn"),o=parseInt(s.attr("aria-level"),10),r=a.hasClass("is-expanded"),l=[{grid:i,row:t,item:s}];if(i.settings.treeDepth&&i.settings.treeDepth[t]&&(l[0].rowData=i.settings.treeDepth[t].node),s.hasClass("datagrid-tree-parent")&&($(e.target).is(a)||!i.settings.editable&&!i.settings.selectable)){var c=function(){s=i.rowNodes(t),a=s.find(".datagrid-expand-btn");var e=s.nextUntil('[aria-level="'.concat(o,'"]')),n=i.settings.treeGrid&&i.settings.source&&i.settings.paging?i.dataRowIndex(s):t;r?(s.attr("aria-expanded",!1),a.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(s.attr("aria-expanded",!0),a.addClass("is-expanded").find(".plus-minus").addClass("active")),i.setExpandedInDataset(n,!r);!function e(t,n,s){var a=t.nextUntil('[aria-level="'.concat(n,'"]'));s?a.each((function(){var e=$(this);parseInt(e.attr("aria-level"),10)>n&&e.addClass("is-hidden")})):a.each((function(){var t=$(this),s=parseInt(t.attr("aria-level"),10);if(s===n+1){if(!t.hasClass("is-filtered")&&(t.removeClass("is-hidden"),i.settings.frozenColumns)){var a=t.attr("aria-rowindex");i.tableBody.find('[aria-rowindex="'.concat(a,'"]')).removeClass("is-hidden")}if(t.is(".datagrid-tree-parent")){var o=t.find(".datagrid-expand-btn.is-expanded").length>0;o&&e(t,s,!o)}}}))}(s,o,r),i.setAlternateRowShading(),l.children=e},d=r?"collapserow":"expandrow";$.when(i.element.triggerHandler(d,l)).done((function(e){var t=function(e){return"string"==typeof e&&"false"===e.toLowerCase()||"boolean"==typeof e&&!1===e||"number"==typeof e&&0===e};t(e)||("function"!=typeof n.onExpandChildren||r?"function"==typeof n.onCollapseChildren&&r?$.when(n.onCollapseChildren(l[0])).done((function(e){t(e)||c()})):c():$.when(n.onExpandChildren(l[0])).done((function(e){t(e)||c()})))}))}}},toggleRowDetail:function(e){var t=this,i=t.rowNodes(e);!i.length&&t.settings.paging&&(t.settings.rowTemplate||t.settings.expandableRow)&&(e+=(t.pagerAPI.activePage-1)*t.settings.pagesize,i=t.dataRowNode(e));var n=i.next(),s=i.find(".datagrid-expand-btn"),a=n.find(".datagrid-row-detail"),o=t.settings.dataset[t.dataRowIndex(i)];if(!i.hasClass("datagrid-tree-parent")){if(t.settings.allowOneExpandedRow&&null===t.settings.groupable){var r=t.tableBody.add(t.tableBodyLeft).add(t.tableBodyRight).find("tr.is-expanded"),l=r.prev().find(".datagrid-expand-btn"),c=r.prev(),d=t.actualRowNode(c),h=t.dataRowIndex(c);if(r.length&&n.index()!==r.index()){var u=r.find(".datagrid-row-detail");r.add(l).removeClass("is-expanded"),c.removeClass("is-rowactivated"),c.find(".plus-minus").removeClass("active"),u.animateClosed().on("animateclosedcomplete",(function(){r.removeClass("is-expanded"),t.element.triggerHandler("collapserow",[{grid:t,row:d,detail:u,item:t.settings.dataset[h]}])}));var p=r.prev().find(".btn-primary");p.length&&p.attr("class",p.attr("class").replace("btn-primary","btn-secondary"))}var g=!n.hasClass("is-expanded"),f=n.prev().find(g?".btn-secondary":".btn-primary");if(f.length>0&&c&&f){var m=f.attr("class")||"";f.attr("class",m.replace(g?"btn-secondary":"btn-primary",g?"btn-primary":"btn-secondary"))}}if(n.hasClass("is-expanded"))a.one("animateclosedcomplete",(function(){n.removeClass("is-expanded")})).animateClosed(),s.removeClass("is-expanded").find(".plus-minus").removeClass("active"),t.settings.allowOneExpandedRow&&i.removeClass("is-rowactivated"),t.element.triggerHandler("collapserow",[{grid:t,row:e,detail:a,item:o}]);else{n.addClass("is-expanded"),s.addClass("is-expanded").find(".plus-minus").addClass("active"),n.find(".constrained-width").css("max-width",this.element.outerWidth());var v=[{grid:t,row:e,detail:a,item:o}];if(t.element.triggerHandler("expandrow",v),t.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&i.addClass("is-rowactivated"),t.settings.onExpandRow){t.settings.onExpandRow(v[0],(function(e){e&&a.find(".datagrid-row-detail-padding").empty().append(e),t.adjustExpandRowHeight(a),a.animateOpen()}))}else t.adjustExpandRowHeight(a),a.animateOpen();if(t.settings.frozenColumns.expandRowAcrossAllCells&&t.frozenExpandRowAcrossAllCells(),t.settings.frozenColumns.left.length||t.settings.frozenColumns.right.length){var b={left:a.eq(0)[0],center:a.eq(1)[0],right:a.eq(2)[0]},y={theme:"themechanged.".concat("datagrid"),rowheight:"rowheightchanged.".concat("datagrid")};$("html").off(y.theme).on(y.theme,(function(){t.frozenExpandRowSetHeight(b)})),t.element.off(y.rowheight).on(y.rowheight,(function(){t.frozenExpandRowSetHeight(b)}))}}}},adjustExpandRowHeight:function(e){if(e.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var t={left:e.eq(0)[0]?e.eq(0)[0].children[0]:null,center:e.eq(1)[0],right:e.eq(2)[0]?e.eq(2)[0].children[0]:null},i=0;t.center&&(t.center.style.height="auto",i=t.center.offsetHeight-1,t.center.style.height=""),i>0&&(t.left&&(t.left.style.height="".concat(i,"px")),t.right&&(t.right.style.height="".concat(i,"px")))}},frozenExpandRowSetHeight:function(e){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t=0;if(e&&e.center&&(e.padding=e.center.querySelector(".datagrid-row-detail-padding"),t=e.padding.offsetHeight),t&&(e.center.style.height="".concat(t,"px"),e.left&&(e.left.style.height="".concat(t,"px")),e.right&&(e.right.style.height="".concat(t,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var i={container:this.element[0].getBoundingClientRect(),centerEl:e.center.getBoundingClientRect()},n="".concat(i.centerEl.top-i.container.top,"px");e.padding.style.top=n}}},frozenExpandRowAcrossAllCells:function(){var e=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var t={row:".datagrid-expandable-row.is-expanded"};t.detail="".concat(t.row," > td .datagrid-row-detail"),t.padding="".concat(t.detail," .datagrid-row-detail-padding");var i={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},n={rows:{left:i.left?i.left.querySelector(t.row):null,center:i.center?i.center.querySelector(t.row):null,right:i.right?i.right.querySelector(t.row):null},details:{left:i.left?i.left.querySelector(t.detail):null,center:i.center?i.center.querySelector(t.detail):null,right:i.right?i.right.querySelector(t.detail):null},padding:this.tableBody[0].querySelector(t.padding)};if(n.padding&&(n.details.left||n.details.right)){var s="is-expanded-frozen";n.padding.style.opacity="0",n.rows.left&&n.rows.left.classList.add(s),n.rows.right&&n.rows.right.classList.add(s),$(n.details.center).one("animateopencomplete.datagrid.expandedfrozen",(function(){(n.details.left||n.details.right)&&setTimeout((function(){n.rows.center.classList.add(s),e.frozenExpandRowSetHeight(n.details),n.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",(function(){e.frozenExpandRowSetHeight(n.details)}))}),10)})).one("animateclosedstart.datagrid.expandedfrozen",(function(){$(window).off("resize.datagrid.expandedfrozen"),n.padding.style.opacity="0",n.padding.style.top="",n.rows.center.classList.remove(s),n.rows.left&&n.rows.left.classList.remove(s),n.rows.right&&n.rows.right.classList.remove(s)})).one("animateclosedcomplete.datagrid.expandedfrozen",(function(){n.padding.style.opacity=""}))}}},toggleGroupChildren:function(e){if(this.settings.groupable){var t=e.index(),i=$(),n=$(),s=$();this.hasLeftPane&&(i=this.tableLeft.find("tbody tr").eq(t).nextUntil(".datagrid-rowgroup-header")),n=this.table.find("tbody tr").eq(t).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(s=this.tableRight.find("tbody tr").eq(t).nextUntil(".datagrid-rowgroup-header"));var a=e.find(".datagrid-expand-btn");e.hasClass("is-expanded")?(a.removeClass("is-expanded").find(".plus-minus").removeClass("active"),i.hide(),i.addClass("is-hidden"),n.hide(),n.addClass("is-hidden"),s.hide(),s.addClass("is-hidden"),this.element.triggerHandler("collapserow",[{grid:this,row:e.index(),detail:n,item:{}}]),e.removeClass("is-expanded")):(a.addClass("is-expanded").find(".plus-minus").addClass("active"),i.show(),i.removeClass("is-hidden"),n.show(),n.removeClass("is-hidden"),s.show(),s.removeClass("is-hidden"),this.element.triggerHandler("expandrow",[{grid:this,row:e.index(),detail:n,item:{}}]),e.addClass("is-expanded"))}},setSortColumn:function(e,t){var i=!0;if(void 0!==t?(this.sortColumn.sortAsc===t&&this.sortColumn.sortId===e&&(i=!1),this.sortColumn.sortAsc=t):(this.sortColumn.sortId===e?this.sortColumn.sortAsc=!this.sortColumn.sortAsc:this.sortColumn.sortAsc=!0,t=this.sortColumn.sortAsc),this.sortColumn.sortId=e,this.sortColumn.sortField=this.columnById(e)[0]?this.columnById(e)[0].field:e,this.sortColumn.sortAsc=t,this.setSortIndicator(e,t),i&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),i){var n=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),n&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var e=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(e),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,n=t.length;i<n;i++){if(void 0!==this.dirtyArray[i])(e.treeGrid?t[i].node:t[i]).tempNodeIndex=i}},restoreDirtyRows:function(){var e=this.settings,t=e.treeGrid?e.treeDepth:e.dataset;if(this.settings.groupable&&(t=this.originalDataset||t),e.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var i=[],n=0,s=t.length;n<s;n++){var a=e.treeGrid?t[n].node:t[n];void 0!==a.tempNodeIndex&&(i.push({newIdx:n,oldIdx:a.tempNodeIndex}),delete a.tempNodeIndex)}for(var o=[],r=0,l=i.length;r<l;r++)o[i[r].newIdx]=this.dirtyArray[i[r].oldIdx];this.dirtyArray=o}},syncDatasetWithSelectedRows:function(){var e=this;this._selectedRows=[];for(var t,i=this.settings,n=i.treeGrid?i.treeDepth:i.dataset,s=-1,a=function(a,o){if(i.groupable&&!e.originalDataset)for(var r=0;r<Object.keys(n[a]).length;r++)s++,o=Object.keys(n[a]).map((function(e){return n[a][e]})),e.isRowSelected(o)&&e._selectedRows.push({idx:s,data:o,elem:e.dataRowNode(s),group:n[a],page:e.pagerAPI?e.pagerAPI.activePage:1,pagingIdx:s,pagesize:e.settings.pagesize});else o=i.treeGrid?n[a].node:n[a],e.isRowSelected(o)&&e._selectedRows.push({idx:a,data:o,elem:e.visualRowNode(a),pagesize:e.settings.pagesize,page:e.pagerAPI?e.pagerAPI.activePage:1,pagingIdx:a});t=o},o=0;o<n.length;o++)a(o,t)},setSortIndicator:function(e,t){this.headerRow&&(this.sortColumn={sortId:e,sortAsc:t,sortField:this.columnById(e)[0]?this.columnById(e)[0].field:e},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc"),this.element.find('[data-column-id="'.concat(e,'"]')).addClass(t?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",t?"ascending":"descending"))},sortFunction:function(e,t){var n=this.columnById(e),s=0===n.length?null:n[0],a=null===s?e:s.field,o=this,r=function(e){return"string"==typeof(t=null==(t=o.fieldValue(e,a))?"":t)&&(t=t.toUpperCase(),$.isNumeric(t)&&(t=parseFloat(t))),t;var t};return s&&s.sortFunction&&(r=function(e){return s.sortFunction(o.fieldValue(e,a))}),t=t?1:-1,function(e,n){return e=r(e),n=r(n),i(e)!==i(n)&&(e=e.toString().toLowerCase(),n=n.toString().toLowerCase()),t*((e>n)-(n>e))}},defaultFormatter:function(e,t,i){return null==i||""===i?"":i.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(e,t,i){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,e.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(e,t),t||this.triggerSource(e,i),this.syncSelectedUI())},getPageableElements:function(){var e=this.element.children().not(".datagrid-expandable-row");return e.is("table")&&(e=e.find("tbody tr")),e},appendTooltip:function(e){var t=this,i=new RegExp("\\b".concat("grid-tooltip","\\b"),"g");"string"==typeof e?i.test(e)||(e+=" ".concat("grid-tooltip")):e="grid-tooltip";var n=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(n),!this.tooltip){var s=""+'<div id="'.concat(n,'" class="tooltip ').concat(e,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",s),this.tooltip=document.getElementById(n),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",(function(){t.hideTooltip()})))}},cacheTooltip:function(e,t){if(void 0===t){var i,n=e.querySelector(".is-editor.content-tooltip"),s=e.querySelector("a[title]"),a=C.hasClass(e,"rowstatus-cell"),o="svg"===e.tagName.toLowerCase(),r="th"===e.tagName.toLowerCase(),l=C.hasClass(e,"datagrid-column-wrapper"),c=C.hasClass(e.parentNode,"datagrid-filter-wrapper"),d=e.getAttribute("aria-colindex")-1,u=this.columnSettings(d);if(t={content:"",wrapper:e.querySelector(".datagrid-cell-wrapper")},(r||l||c)&&(t.wrapper=e,t.distance=c?15:null,t.placement=l?"top":"bottom"),a||o){var p=this.closest(e,(function(e){return C.hasClass(e,"datagrid-row")})),g=p?p.classList:[];t.isError=g.contains("rowstatus-row-error"),t.placement="right",o&&(t.wrapper=this.closest(e,(function(e){return"td"===e.tagName.toLowerCase()})))}if(n){var f=!(!u.editorOptions||!u.editorOptions.width)&&this.setUnit(u.editorOptions.width);n.style.width=f||"".concat(e.offsetWidth,"px");var v=t.wrapper.innerHTML;""!==h.stripHTML(v)&&(t.content=v,t.extraClassList=["popover","alternate","content-tooltip"])}else if(s)t.content=s.getAttribute("title"),s.removeAttribute("title");else if(i=e.getAttribute("title"))t.content=i,e.removeAttribute("title");else if(r&&!c){var b=e.querySelector(".datagrid-header-text");t.content=b?h.stripHTML(b.textContent):""}else if(c){if(!(e.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var y=e.parentNode.querySelector(".is-checked");t.content=y?h.stripHTML(y.textContent):""}}else t.content=h.stripHTML(t.wrapper.textContent);var w=t.wrapper.querySelector("select");if(w&&w.selectedIndex&&w.options[w.selectedIndex]&&w.options[w.selectedIndex].innerHTML&&(t.content=m.features.touch?"":w.options[w.selectedIndex].innerHTML.trim()),r&&(t.content=t.content.trim()),""!==t.content){var x=C.hasClass(l?e.parentNode:e,"text-ellipsis"),k=[].slice.call(e.querySelectorAll(".icon")),T=x?8:0;if(k.forEach((function(e){T+=e.getBBox().width+8})),x&&l){var S=e.querySelector(".datagrid-header-text");t.textwidth=S.scrollWidth+(w?0:T)}else t.textwidth=D.textWidth(t.content)+(w?0:T);r&&(t.textwidth=D.textWidth(t.content)),t.content=n?t.content:"<p>".concat(t.content,"</p>"),(i||c)&&(t.forced=!0)}if("function"==typeof u.tooltip){var A=this.closest(e,(function(e){return C.hasClass(e,"datagrid-row")})).getAttribute("data-index"),E=this.settings.dataset[A],I=this.fieldValue(this.settings.dataset[A],u.field);t.content=u.tooltip(A,d,I,u,E,this),t.textwidth=D.textWidth(t.content)+20}}return(e=e instanceof jQuery?e:$(e)).data("gridtooltip",t),t},showTooltip:function(e){var t=this;if(this.tooltip){var i=$(this.tooltip),n=this.tooltip.querySelector(".tooltip-content");if(n){n.innerHTML=e.content,this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(e.placement||"top"),e.isError&&this.tooltip.classList.add("is-error"),e.extraClassList&&e.extraClassList.map((function(e){return t.tooltip.classList.add(e)}));var s="number"==typeof e.distance?e.distance:10,a={x:0,y:s,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:e.wrapper.offsetLeft,containerOffsetY:e.wrapper.offsetTop,parent:$(e.wrapper),placement:e.placement||"top",strategies:["flip","nudge"]};"left"!==a.placement&&"right"!==a.placement||(a.x=s,a.y=0),i.data("place")||i.place(a),i.data("place").place(a),i.data("gridtooltip",!0),i.one("afterplace.gridtooltip",(function(e,i){t.handleAfterPlaceTooltip(e,i)})).on("click.gridtooltip",(function(){t.hideTooltip()})),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",(function(){t.hideTooltip()}))}}},handleAfterPlaceTooltip:function(e,t){var i=$("#tooltip");i[0]&&(i.data("place").setArrowPosition(e,t,i),i.triggerHandler("tooltipafterplace",[t]))},hideTooltip:function(){var e=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",(function(){e.hideTooltip()}))},isGridtooltip:function(){var e=!1;this.tooltip&&((this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(e=!0));return e},removeTooltipData:function(e){(e=e instanceof jQuery?e:$(e)).data("gridtooltip")&&$.removeData(e[0],"gridtooltip")},removeTooltip:function(){var e=this;if(this.tooltip){var t=$(this.tooltip),i={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};i.str="".concat(i.th,", ").concat(i.td,", ").concat(i.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),t.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",i.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var n=t.data("place");n&&n.destroy(),[].slice.call(this.element[0].querySelectorAll(i.str)).forEach((function(t){return e.removeTooltipData(t)})),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){this.removeTooltip(),$("html").off("themechanged.".concat("datagrid")),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat("datagrid"," pagesizechange.").concat("datagrid")),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var e=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var t=e.find(".searchfield");t.data("searchfield")&&t.data("searchfield").destroy(),t.removeData("options")}return this.removeToolbarOnDestroy&&(e.data("toolbar")&&e.data("toolbar").destroy(),e.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],"datagrid"),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(e){return this.settings=C.mergeSettings(this.element,e,this.settings),this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),e&&e.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),e&&e.dataset&&(this.settings.dataset=e.dataset),e&&e.columns&&(this.settings.columns=e.columns),this.render(),this.handlePaging(),this}},$.fn.datagrid=function(e){return this.each((function(){var t=$.data(this,"datagrid");t?t.updated(e):t=$.data(this,"datagrid",new ys(this,e))}))};var ws={};function xs(e,t){if(!(e instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=C.mergeSettings(e,t,ws),this.element=e,this.init()}xs.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=C.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var e=this;if(this.inputs&&this.inputs.length){var t=["disabled","readonly"];this.inputs.forEach((function(i){t.forEach((function(t){e.setState(t,i)}))}))}},handleEvents:function(){var e=this;$(this.form).on("focusin.".concat("formcompact"),"input",(function(t){return e.handleFocusIn(t)})).on("focusout.".concat("formcompact"),"input",(function(t){return e.handleFocusOut(t)}));var t=["disabled","readonly"];this.inputsObserver=new MutationObserver((function(i){i.length&&i.forEach((function(i){"attributes"===i.type&&t.indexOf(i.attributeName)>-1&&e.setState(i.attributeName,i.target)}))}));var i={attributes:!0};this.inputs.forEach((function(t){e.inputsObserver.observe(t,i)}))},handleFocusIn:function(e){u.parents(e.target,".column, .columns",!0).classList.add("is-focused")},handleFocusOut:function(e){u.parents(e.target,".column, .columns",!0).classList.remove("is-focused")},setState:function(e,t){if("string"==typeof e&&t instanceof HTMLElement){if(!(["checkbox","radio"].indexOf(t.type)>-1)){"readonly"===e&&(e="readOnly");var i=!0===t[e]?"add":"remove";t.parentNode.classList[i]("is-".concat(e.toLowerCase()))}}},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat("formcompact"),"focusout.".concat("formcompact")].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,"formcompact")}},$.fn.formcompact=function(e){return this.each((function(){var t=$.data(this,"formcompact");t?t.updated(e):t=$.data(this,"formcompact",new xs(this,e))}))};var Cs={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function ks(e,t){this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Cs),this.init()}ks.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return O("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var e=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(e=".toolbar-section:first-child > button"),this.element.find(e)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var e=!1,t=this.element.find(".toolbar, .flex-toolbar");if(!t.length)return this;t.is(".flex-toolbar")&&(e=!0),this.toolbarElem=t;var i=this.settings.toolbarSettings;if(this.toolbarElem[e?"toolbarflex":"toolbar"](i),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var n=$(this.element),s=$(this.element).next(".scrollable"),a=1===s.length?s:$(window),o=this.settings.scrollThreshold?this.settings.scrollThreshold:15;a.on("scroll.header",(function(){this.scrollTop>o?n.addClass("is-scrolled-down"):n.removeClass("is-scrolled-down")})),a.scrollTop()>o&&n.addClass("is-scrolled-down")}return this},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var e=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(M.translate("Drillup"),'</span>\n        <span class="icon app-header go-back">\n          <span class="one"></span>\n          <span class="two"></span>\n          <span class="three"></span>\n        </span>\n      </button>')),t=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var i=t.prev(".toolbar-section");i.length||(i=$('<div class="toolbar-section"></div>').insertBefore(t)),e.prependTo(i)}else e.prependTo(t);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var n=$("#application-menu").data("applicationmenu");n?n.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},buildBreadcrumb:function(){var e=this,t="has-breadcrumb";this.settings.useAlternate&&(t="has-alternate-breadcrumb"),this.element.addClass(t),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.on("click","a",(function(t){e.handleBreadcrumbClick(t)}))),this.breadcrumb[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.adjustBreadcrumb()},adjustBreadcrumb:function(){var e=this.levelsDeep[this.levelsDeep.length-1];this.breadcrumb.empty();var t=$('<ol aria-label="breadcrumb"></ol>').appendTo(this.breadcrumb);$.each(this.levelsDeep,(function(i,n){var s="";e===n&&(s=" current"),t.append($('<li><a href="#" class="hyperlink'.concat(s,'">').concat(n,"</a></li>")))}))},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var e=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(e),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(e)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var e=$('<div class="wizard-header"></div>').appendTo(this.wizard),t=$('<div class="bar"></div>').appendTo(e);$('<div class="completed-range"></div>').appendTo(t),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(t),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(t)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var e=this.toolbarElem.children(".title");if(this.titlePopup=e.find(".btn-menu"),!this.titlePopup.length){var t=e.find("h1");t.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=t.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var i=this.titlePopupMenu.children(".is-checked").first().text();i||(i=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(i),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var e=this,t=this;return this.element.on("updated.".concat("header"),(function(e,i){t.updated(i)})).on("reset.".concat("header"),(function(){t.reset()})).on("drilldown.".concat("header"),(function(e,i){t.drilldown(i)})).on("drillup.".concat("header"),(function(e,i){t.drillup(i)})),$("html").on("themechanged.".concat("header"),(function(){e.updatePageChanger()})),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat("header"),(function(e,t){var i;i=t instanceof $?t.text():$(t.element).text(),$(this).children("h1").text(i)})),this},handleTitleButtonEvents:function(){var e=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat("header"),(function(t){e.levelsDeep.length>1&&(t.stopImmediatePropagation(),e.drillup(),t.returnValue=!1)}))},handleBreadcrumbClick:function(e){var t,i=$(e.target).parent(),n=this.breadcrumb.find("li"),s=n.index(i);if(!i.hasClass("current"))if(0!==s){if(s<n.length-1)for(t=n.length-1-s;t>0;)this.drillup(),t-=1}else this.reset()},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var e=this.changer.data("popupmenu").menu,t=e.find("li.personalization-colors");if(t.length>0){var n=J.personalizationColors(),s=t.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(n).forEach((function(e){return s+='<li class="is-selectable'.concat("Default"===n[e].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(n[e].value,'">').concat(n[e].name,"</a></li>"),e})),t.replaceWith(s)}this.changer.on("selected.header",(function(t,i){t.preventDefault(),void 0!==i&&!(i instanceof $)&&i.element instanceof HTMLElement&&(i=$(i.element));var n=i.attr("data-theme-name"),s=i.attr("data-theme-variant");if(n||s){var a=e.find(".is-checked a[data-theme-name]").attr("data-theme-name"),o=e.find(".is-checked a[data-theme-variant]").attr("data-theme-variant");a&&o&&ie.setTheme("".concat(a,"-").concat(o))}else{var r=i.attr("data-theme");if(r)ie.setTheme(r);else if(i.parent().hasClass("is-default"))ie.setColorsToDefault();else{var l=i.attr("data-rgbcolor");ie.setColors(l)}}}));var a=J.currentTheme;if("theme-soho-light"!==a.id){var o=a.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(o[0],"-").concat(o[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-variant]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-variant="'.concat(o[2],'"]')).parent().addClass("is-checked")}if(ie.settings.colors){var r="object"===i(ie.settings.colors)?ie.settings.colors.header:ie.settings.colors;r=r.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(r,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){if(this.change&&0!==this.changer.length)for(var e=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),t=J.personalizationColors(),i=Object.keys(t),n=0;n<e.length;n++)e[n].setAttribute("data-rgbcolor",t[i[n]].value)},drilldown:function(e){this.element.addClass("is-drilldown"),this.levelsDeep.push(e.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(e){var t;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),t=this.levelsDeep[this.levelsDeep.length-1]),void 0!==e&&(t=e),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(t);t=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(t),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var e=$("#application-menu").data("applicationmenu");e&&e.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat("header")).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var e,t=this,i=$.fn.transitionEndName();t.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(i,".breadcrumb-header"),n),e=setTimeout(n,300)):n()}function n(){e&&(clearTimeout(e),e=null),t.element.off("".concat(i,".breadcrumb-header")),t.breadcrumb.off().remove(),t.breadcrumb=$()}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var e,t=this,i=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(i,".tabs-header"),n),e=setTimeout(n,300)):n()}function n(){e&&(clearTimeout(e),e=null),t.element.off("".concat(i,".tabs-header")),t.tabsContainer.data("tabs").destroy(),t.tabsContainer.remove(),t.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var e,t=this,i=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(i,".wizard-header"),n),e=setTimeout(n,300)):n()}function n(){e&&(clearTimeout(e),e=null),t.element.off("".concat(i,".wizard-header")),t.wizard.data("wizard").destroy(),t.wizard.remove(),t.wizard=null}},removePopupmenu:function(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat("header")),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat("header")),this.element.off(["updated.".concat("header"),"reset.".concat("header"),"drilldown.".concat("header"),"drillup.".concat("header")].join(" ")),$("html").off("themechanged.".concat("header")),this},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var e=this.changer.data("popupmenu");e&&"function"==typeof e.destroy&&e.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],"header")}},$.fn.header=function(e){return this.each((function(){var t=$.data(this,"header");t?t.updated(e):t=$.data(this,"header",new ks(this,e))}))};var Ts={tabContainers:[]},Ss=["primary","secondary","tertiary"];function $s(e,t){return this.element=$(e),this.settings=C.mergeSettings(this.element[0],t,Ts),this.tabContainers={},this.init()}$s.prototype={init:function(){var e=this,t=[];t=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter((function(){return!$(this).parents(".tab-panel-container").length})),$(t).each((function(){e.setupTabsInstance($(this))}))},setupTabsInstance:function(e){if(e instanceof $){var t=this,i=!1;if(Ss.forEach((function(n){if(!i&&!Object.prototype.hasOwnProperty.call(t.tabContainers,n)){var s=e.data("tabs");s||(e.tabs(),s=e.data("tabs")),s.multitabsID=n,e.attr("data-multitabs",n),t.tabContainers[n]=e,i=!0}})),!i)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(e,t,i,n){return(e=this.checkForValidTabContainer(e)).data("tabs").add(t,i,n)},remove:function(e,t,i){return(e=this.checkForValidTabContainer(e)).data("tabs").remove(t,i)},move:function(e,t,i){if(!e||!t)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var n,s,a;if(this.getFilterableTabContainers().each((function(){var t=$(this).data("tabs"),i=t.getTab(null,e);null!==i&&(a=t.multitabsID,n=i.clone(),s=t.getPanel(e).children())})),!n)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(e,'"'));this.remove(a,e),this.add(t,e,{name:n.children("a").text().trim(),content:s,doActivate:i})},getTabContainer:function(e){var t,i=this;return Ss.forEach((function(n){!t&&i.tabContainers[n]&&e===n&&(t=i.tabContainers[n])})),t},getFilterableTabContainers:function(){var e=$();return this.performOnAllContainers((function(t,i){e=e.add(i)})),e},checkForValidTabContainer:function(e){if(!e)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof e&&(e=this.getTabContainer(e)),!(e instanceof $&&e.length))throw new Error("No matching tabContainer could be found and hidden.");return e},performOnAllContainers:function(e,t){var i=this;Array.isArray(t)||(t=t?[t]:[]),Ss.forEach((function(n){var s=i.tabContainers[n],a=[];s&&(a.push(n,s),a=a.concat(t),e.apply(this,a))}))},adjustModuleTabContainers:function(){this.performOnAllContainers((function(e,t){var i=t.data("tabs");i.isModuleTabs()&&i.adjustModuleTabs()}))},hideTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(e){(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(e){if(e instanceof $&&e.data("tabs")&&"function"==typeof e.data("tabs").destroy){var t=this,i=!1;if(Ss.forEach((function(n){if(!i&&t.tabContainers[n].is(e)){var s=e.data("tabs");delete s.multitabsID,e.removeAttr("data-multitabs"),s.destroy(),delete t.tabContainers[n],i=!0}})),!i)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(e){return(e=this.checkForValidTabContainer(e)).parent(".multitabs-section").is(".hidden")},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings))},teardown:function(){var e=this;return Object.keys(this.tabContainers).forEach((function(t){e.destroyTabsInstance(t)})),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"multitabs")}},$.fn.multitabs=function(e){return this.each((function(){var t=$.data(this,"multitabs");t?t.updated(e):t=$.data(this,"multitabs",new $s(this,e))}))};var As={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,detailElement:void 0},Ds=["accordion","listview"];function Es(e){var t;if(e instanceof HTMLElement)return Object.keys($(e).data()).forEach((function(e){Ds.indexOf(e)>-1&&(t=e)})),t}function Is(e,t){e instanceof HTMLElement&&(this.element=e,this.settings=C.mergeSettings(this.element,t,As),this.init())}Is.prototype={init:function(){var e=this;if(this.setInternalElementReference("listElement",(function(t){return(i=e.settings[t])instanceof HTMLElement&&void 0!==Es(i);var i})),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.listElement){this.listComponentType=Es(this.listElement);var t=this.getListAPI();t&&(t.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var i=this.backElement.querySelector(".icon");i&&(this.backElementIcon=i),this.listContainsBackElement&&(this.listContainsBackElement=this.listElement.contains(this.backElement)),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}var n=this.element.querySelectorAll(".list-detail");n&&(this.childrenListDetailElements=n),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=p.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=p.isAbove("desktop")},setInternalElementReference:function(e,t){if("string"==typeof this.settings[e]&&this.settings[e].length){var i=document.querySelector(this.settings[e]);i&&(this.settings[e]=i)}t="function"!=typeof t||t(e),this.settings[e]instanceof HTMLElement&&t&&(this[e]=this.settings[e])},handleEvents:function(){var e=this;$(this.element).on("drilldown.".concat("listdetail"),(function(t,i){t.stopPropagation(),e.drilldown(i,t.target)})).on("drillup.".concat("listdetail"),(function(t){t.stopPropagation(),e.drillup()})),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat("listdetail")).on("resize.".concat("listdetail"),(function(){e.handleResize()}))},drilldown:function(e,t){this.showDetail||t&&t.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[e]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},handleBackClick:function(e){function t(){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var i=this.getCurrentSelectedListItem();if(i)return this.drilldown(i),t(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach((function(e){var t=$(e).data("listdetail");t&&"function"==typeof t.drillup&&t.drillup()})),t(),!1},handleClose:function(){if(!this.showDetail){var e=this.getCurrentSelectedListItem();this.drilldown(e)}},handleResize:function(){this.setBreakpointChecks();var e=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&e.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&e.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():this.addBackElementIconContext(),p.isAbove("desktop")&&e.enable()},isAboveBreakpoint:function(){var e=this.settings.edgeBleedBreakpoint;return this["above".concat(D.capitalize(e),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){if(!this.listElement)return"";var e,t=this.getListAPI();switch(this.listComponentType){case"accordion":default:e=t.getSelected()}return e=u.convertToHTMLElement(e)},updated:function(e){e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat("listdetail")),$(this.element).off("drilldown.".concat("listdetail"," drillup.").concat("listdetail")),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var e=this.getListAPI();e&&delete e.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail},destroy:function(){this.teardown(),$.removeData(this.element,"listdetail")}},$.fn.listdetail=function(e){return this.each((function(){var t=$.data(this,"listdetail");t?t.updated(e):(t=$.data(this,"listdetail",new Is(this,e))).destroy=function(){this.teardown(),$.removeData(this,"listdetail")}}))};var Ls={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function Ps(e,t){this.settings=C.mergeSettings(e,t,Ls),this.element=$(e),this.init(),R("Stepprocess")}Ps.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var e=this.stepListJq.find(this.settings.stepLi),t=0,i=e.length;t<i;t++)this.decorateNode(e[t]);var n=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(n)},decorateNode:function(e){var t=$(e),i=t.children(this.settings.stepLink),n=t.children(this.settings.stepFolder),s=i.hasClass("is-disabled"),a=n.hasClass("is-open");if(s&&i.attr("aria-disabled","true"),n.length){if(t.addClass("folder"),n.attr("role","group"),s&&(n.addClass("disabled"),a))for(var o=n.children(),r=0,l=o.length;r<l;r++)$(o[r]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");i.attr("aria-expanded",a)}var c=i.parentsUntil(this.stepListJq,"ul").length-1,d=t.index(),h=t.siblings().addBack().length;i.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":c+1,"aria-posinset":d+1,"aria-setsize":h,"aria-disabled":s}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(e){var t=this,i=$(e),n=i.children(this.settings.stepLink),s=i.children(this.settings.stepFolder),a=n.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(a,this.settings.folderIconClosed),this.isAnimating=!0,s.one("animateclosedcomplete",(function(){s.removeClass("is-open"),t.isAnimating=!1})).animateClosed(),n.attr("aria-expanded","false")},folderOpen:function(e){var t=this,i=$(e);if(!this.isOpen(i)){var n=i.children(this.settings.stepLink),s=i.children(this.settings.stepFolder);i.addClass("is-open"),n.attr("aria-expanded","true");var a=n.find("svg.icon-tree");this.setIcon(a,this.settings.folderIconOpen),this.isAnimating=!0,s.one("animateopencomplete",(function(){t.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(e){var t=e.closest(this.settings.stepLi);if(this.isFolder(t)){var i=t.children(this.settings.stepFolder);this.isOpen(i)?this.folderClose(t):this.folderOpen(t)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(e){var t=this.settings,i=e.parent().next().find("".concat(t.stepLink,":first"));if(e.next().is(t.stepFolder)&&e.next().hasClass("is-open")&&(i=e.next().find("".concat(t.stepLink,":first"))),i.hasClass("is-disabled")&&(i=this.getNextNode(i)),0===i.length)for(var n=0,s=e;n<2&&!(i=(s=s.parent().closest(".folder")).next().find("".concat(t.stepLink,":first"))).length;n++);return i},getNextStep:function(e){var t=e.children(this.settings.stepLink),i=e.next(this.settings.stepFolder),n=this.getNextNode(t),s=n.next(this.settings.stepFolder),a=null,o=null;return(a=i.length?(o=i).children().length?o.find(this.settings.stepLink).first():n:s.length&&(o=s).children().length?o.find(this.settings.stepLink).first():n).hasClass("is-disabled")&&(a=this.getNextStep(a.parent())),a},getPreviousNode:function(e){var t=this.settings,i=e.parent().prev().find("".concat(t.stepLink,":first")),n=i.closest(t.stepLi);return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(i=n.find("ul.is-open ".concat(t.stepLink,":last"))),i.hasClass("is-disabled")&&this.getPreviousNode(i),0===i.length&&(i=e.closest(t.stepFolder).prev(t.stepLink)),i},getPreviousStep:function(e){var t=this.settings,i=e.children(t.stepLink),n=this.getPreviousNode(i),s=n.closest(t.stepLi),a=n;if(this.isFolder(s))if(this.isOpen(s))a=this.getPreviousNode(n);else{var o=s.children(t.stepFolder);o.children().length&&(a=o.find(t.stepLink).last())}return a.hasClass("is-disabled")&&(a=this.getPreviousStep(a.parent())),a},goToNextStep:function(){var e=this,t=this.getSelectedStep(),i=e.getNextStep(t);if(i.length)e.selectStep(i,"next");else if("function"==typeof e.settings.beforeSelectStep){var n=e.settings.beforeSelectStep({isStepping:"next"});n.done&&"function"==typeof n.done?n.done((function(t,i){t&&i&&e.selectStepFinish(i)})):n&&e.selectStepFinish(i)}},goToPreviousStep:function(){var e=this.getSelectedStep(),t=this.getPreviousStep(e);t.length&&this.selectStep(t,"prev")},handleKeys:function(){var e=this,t=this.settings;this.stepListJq.on("focus.stepprocess",t.stepLink,(function(){var e=$(this);if(0===parseInt(e.attr("aria-level"),10)&&1===parseInt(e.attr("aria-posinset"),10)&&e.hasClass("is-disabled")){var t=$.Event("keydown.stepprocess");return t.keyCode=40,void e.trigger(t)}})),this.stepListJq.on("keydown.stepprocess",t.stepLink,(function(i){var n,s,a=i.charCode||i.keyCode,o=$(this);if(!e.isAnimating){if(40===a){var r=e.getNextNode(o);e.setFocus(r)}if(38===a){var l=e.getPreviousNode(o);e.setFocus(l)}if(32===i.keyCode&&o.trigger("click.stepprocess"),37===a)return M.isRTL()?o.next().hasClass("is-open")?(s=o.next().find("".concat(t.stepLink,":first")),e.setFocus(s)):e.folderToggle(o):o.next().hasClass("is-open")?e.folderToggle(o):(s=o.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(s)),i.stopPropagation(),!1;if(39===a)return M.isRTL()?o.next().hasClass("is-open")?e.folderToggle(o):(n=o.closest(".folder").find("".concat(t.stepLink,":first")),e.setFocus(n)):o.next().hasClass("is-open")?(n=o.next().find("".concat(t.stepLink,":first")),e.setFocus(n)):(e.folderToggle(o),e.setFocus(o)),i.stopPropagation(),!1;36===a&&(n=e.stepListJq.find("".concat(t.stepLink,":first:visible")),e.setFocus(n)),35===a&&(n=e.stepListJq.find("".concat(t.stepLink,":last:visible")),e.setFocus(n))}})),this.stepListJq.on("keypress.stepprocess",t.stepLink,(function(i){var n=i.charCode||i.keyCode,s=$(this);if(n>=37&&n<=40||32===n)return i.stopPropagation(),!1;0!==i.which&&s.closest(t.stepLi).nextAll().find(".js-step-link:visible").each((function(){var t=$(this);if(t.text().substr(0,1).toLowerCase()===String.fromCharCode(i.which).toLowerCase())return e.setFocus(t),!1}))}))},isFolder:function(e){return $(e).hasClass("folder")},isInFolder:function(e){return $(e).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(e){return $(e).hasClass("is-open")},setFocus:function(e){e.focus()},setIcon:function(e,t){var i=t.replace(/icon-|hide-focus|\s?/gi,"");e.changeIcon(i)},selectStep:function(e,t){var i,n=this;if(void 0===t&&(t="none"),"function"==typeof n.settings.beforeSelectStep){var s={stepLink:e,isStepping:t};(i=n.settings.beforeSelectStep(s)).done&&"function"==typeof i.done?i.done((function(i,s){i&&(s&&(e=s),n.selectStepFinish(e,t))})):i&&n.selectStepFinish(e,t)}else n.selectStepFinish(e,t)},selectStepFinish:function(e,t){var i=this,n=$(this.settings.stepLink,this.stepListJq),s=e.closest(this.settings.stepLi);if(this.isFolder(s)||(n.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),e.attr({tabindex:"0","aria-selected":"true"}),s.addClass("is-selected")),this.isFolder(s))"none"===t?this.folderToggle(s):this.folderOpen(s);else{var a=s.closest(this.settings.stepFolder,this.stepListJq);a.length&&this.folderOpen(a.closest(this.settings.stepLi)),this.showStepPanel(e.attr("href"))}e.focus(),setTimeout((function(){i.element.triggerHandler("selected",e)}),0)},unSelectedNode:function(e){var t=$(this.settings.stepLink,this.stepListJq),i=$(e),n=i.children(this.settings.stepLink);t.attr("tabindex","-1"),n.attr("tabindex","0"),i.removeClass("is-selected"),n.attr("aria-selected","false")},setupEvents:function(){var e=this,t=this,i=this.settings;this.stepListJq.on("updated.stepprocess",(function(){e.initStepprocess()})).on("click.stepprocess","".concat(i.stepLink,":not(.is-clone)"),(function(e){if(e.preventDefault(),!i.linearProgression){var n=$(this);n.is(".is-disabled, .is-loading")||(t.selectStep(n),e.stopPropagation())}})),$(i.btnPrev).on("click",(function(i){i.preventDefault(),e.goToPreviousStep.call(t)})),$(i.btnNext).on("click",(function(i){i.preventDefault(),e.goToNextStep.call(t)})),$(i.contentScroll).scrollaction({scrollActionTarget:".main"}),$(i.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click((function(t){t.preventDefault(),e.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")}))},showStepPanel:function(e){$(".step-panel-active").removeClass("step-panel-active"),$(e).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(e){return void 0!==e&&(this.settings=C.mergeSettings(this.element,e,Ls)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"stepprocess")}},$.fn.stepprocess=function(e){return this.each((function(){var t=$.data(this,"stepprocess");t?t.updated(e):t=$.data(this,"stepprocess",new Ps(this,e))}))};var Ms={locale:"en-US",language:null};function Bs(e,t,i){return $(e)[t](i)}function Os(e,t){var i=e.find(t).not(".no-init, [data-init]");return e.filter(t).length&&(i=i.add(e)),i}var Rs=[["applicationmenu","#application-menu",function(e,t,i){Os(e,i).each((function(t,i){$(i).applicationmenu({triggers:e.find(".application-menu-trigger")})}))}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(e,t,i){Os(e,i).change((function(){if(this.checked){var e=$(this).closest(".option"),t=e.siblings(),i='button, select, input[type="text"]';$(i,e).removeAttr("disabled"),$(i,t).attr("disabled","disabled")}}))}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(e,t,i){Os(e,i).each((function(e,t){$(t).parents(".modal").length||$(t).button()}))}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",'[data-clearable="true"]'],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload","input.fileupload:not(.fileupload-background-transparent)"],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(e,t,i){Os(e,i).each((function(e,i){var n=$(i),s=$.extend({},C.parseOptions(n)),a=n.attr("data-popupmenu");a&&(s.menuId=a),Bs(n,t,s)}))}],["popupmenu",".btn-actions, .btn-filter, .btn-menu",function(e,t,i){Os(e,i).each((function(e,i){var n=$(i);n.parents(".toolbar, .flex-toolbar").length>0||Bs(n,t)}))}],["popover","[data-popover]",function(e,t,i){Os(e,i).each((function(){var e=C.parseOptions(this),t=$(this),i=t.attr("data-trigger"),n=t.attr("data-title"),s=t.attr("data-placement");$.isEmptyObject(e)?t.popover({content:$("#".concat(t.attr("data-popover"))),popover:!0,trigger:i||"click",title:n||void 0,placement:s||"right",extraClass:e.extraClass||void 0}):t.popover({content:$(e.content),popover:!0,trigger:e.trigger||"click",title:e.title||void 0,placement:e.placement||"right",extraClass:e.extraClass||void 0})}))}],["searchfield",".searchfield",function(e,t,i){var n=Os(e,i),s=n.filter((function(){return $(this).parents(".toolbar").length}));(n=n.not(s)).each((function(){Bs(this,"searchfield")}))}],["toolbar",".toolbar",function(e,t,i){Os(e,i).each((function(t,i){var n=$(i);n.parents(".header, .contextual-action-panel .modal-header").length&&!e.is(".toolbar")||Bs(n,"toolbar")}))}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(e,t,i){Os(e,i).each((function(e,t){var i=$(t);i.parents(".application-menu").length||Bs(i,"accordion")}))}],["taglist",".tag-list"],["formcompact",".form-compact-container",function(e,t,i){Os(e,i).each((function(e,t){Bs($(t),"formcompact")}))}],["listdetail",".list-detail",function(e,t,i){Os(e,i).each((function(e,t){Bs($(t),"listdetail")}))}],["texttranslations",'[data-translate="text"]',function(e,t,i){Os(e,i).each((function(e,t){var i=$(t);i.attr("data-translate-key",i.text()),i.text(M.translate(i.text(),!0))}))}],["breadcrumblabels",".breadcrumb ol",function(e,t,i){Os(e,i).attr("aria-label",M.translate("Breadcrumb"))}],["validate","[data-validate]",function(e,t,i){Os(e,i).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function Fs(e,t,i,n){($.fn[t]||"texttranslations"===t)&&(void 0===i&&(i=".".concat(t)),"function"!=typeof n?Os(e,i).each((function(){var e=$(this);e.is(".no-init, [data-init]")||e.parents(".no-init, [data-init]").length||Bs(this,t)})):n(e,t,i))}function Ns(e,t){var i=t;"string"==typeof t&&(i={locale:t}),this.element=$(e),M.currentLocale&&M.currentLocale.name&&!t&&(i={locale:M.currentLocale.name}),M.currentLanguage&&M.currentLanguage.name&&M.currentLocale.name.substr(0,2)!==M.currentLanguage.name&&!t&&(i.language=M.currentLanguage.name),this.settings=C.mergeSettings(this.element[0],i,Ms),this.init()}Ns.prototype={init:function(){var e=this,t=this;return M.set(this.settings.locale).done((function(){e.settings.language?M.setLanguage(e.settings.language).done((function(){t.initAll()})):t.initAll()})),this},initAll:function(){return this.element.each((function(){for(var e=0;e<Rs.length;e++)Fs.apply(void 0,[$(this)].concat(c(Rs[e])))})),this.element.triggerHandler("initialized",{locale:M.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(e){return this.each((function(){return new Ns(this,e)}))};var zs={delay:400,mouseEvents:!1};function Hs(e){return this.settings=C.mergeSettings(this.element,e,zs),this.init()}Hs.prototype={timer:null,init:function(){var e=this,t=this.getInputEventNames(),i=this;$(document).on("".concat(t.mousedown,".").concat("longpress"),(function(t){var n=t.target;e.timer=new W({id:"".concat("longpress","-timer"),duration:S.convertDelayToFPS(e.settings.delay),timeoutCallback:function(){i.fire(n,t)}}),G.register(e.timer)})),$(document).on(["".concat(t.mouseup,".").concat("longpress"),"".concat(t.mouseout,".").concat("longpress"),"".concat(t.mousemove,".").concat("longpress")].join(" "),(function(){e.killTimer()}))},fire:function(e,t){$(e).trigger("".concat("longpress"),[t])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var e=m.features.touch,t=this.settings.mouseEvents,i=e||!t;return{mousedown:i?"touchstart":"mousedown",mouseout:i?"touchcancel":"mouseout",mouseup:i?"touchend":"mouseup",mousemove:i?"touchmove":"mousemove"}},updated:function(e){e&&(this.settings=C.mergeSettings(this.element,e,this.settings)),this.teardown(),this.init()},teardown:function(){var e=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(e.mousedown,".").concat("longpress"),"".concat(e.mouseup,".").concat("longpress"),"".concat(e.mouseout,".").concat("longpress"),"".concat(e.mousemove,".").concat("longpress")].join(" "))}};var qs=new Hs,Vs=Object.freeze({__proto__:null,Button:ke,ButtonSet:Se,Hyperlink:Ae,Icon:me,ListFilter:pt,MaskInput:Re,Modal:fn,PopupMenu:Ne,Tmpl:gt,About:He,Accordion:Ue,ApplicationMenu:xt,Autocomplete:mt,Bar:Ht,Blockgrid:kt,Bullet:Dt,BusyIndicator:St,ColorPicker:pi,Column:Nt,CompletionChart:It,ContextualActionPanel:Oi,Drag:oe,DatePicker:hi,Dropdown:ei,EmptyMessage:Bt,ExpandableArea:et,FontPicker:zi,FontPickerStyle:Fi,Line:Rt,ListBuilder:dn,ListView:ln,Message:vn,MultiSelect:yn,Notification:xn,Pager:on,Pie:Vt,Popdown:Sn,Radar:jt,SearchField:yt,Slider:Ln,Sparkline:Pt,Spinbox:Rn,Splitter:Nn,StepChart:jn,Tabs:_n,Tag:Kt,TagList:Qt,Textarea:Kn,TimePicker:ni,Toast:oi,Toolbar:qi,ToolbarFlex:yi,Tooltip:be,Tree:Zn,Treemap:ts,Validator:li,Wizard:ns,Calendar:Ai,CalendarToolbar:xi,CompositeForm:Li,Datagrid:ys,FormCompact:xs,Header:ks,Lookup:ls,MonthView:ki,WeekView:Si,MultiTabs:$s}),Ws=Object.freeze({__proto__:null,ListDetail:Is,Stepprocess:Ps});return e.DOM=u,e.Editors=ds,e.Formatters=as,e.GroupBy=ms,e.HideFocus=v,e.Initialize=Ns,e.Locale=M,e.Place=ge,e.RenderLoopItem=W,e.Validation=si,e.base=z,e.breakpoints=p,e.components=Vs,e.debug=t,e.defer=y,e.env=m,e.excel=hs,e.getColorStyleSheet=function(e){return ie.getColorStyleSheet(e)},e.keyboard=_,e.longPress=qs,e.masks=De,e.modalManager=X,e.number=E,e.object=A,e.patterns=Ws,e.personalization=ie,e.renderLoop=G,e.setColors=function(e){return ie.setColors(e)},e.setTheme=function(e){return ie.setTheme(e)},e.smoothScrollTo=b,e.string=D,e.theme=J,e.uniqueIdCount=w,e.utils=C,e.version="4.28.2",e.xss=h,e}({});
//# sourceMappingURL=sohoxi.min.js.map